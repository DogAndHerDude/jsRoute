{"version":"0.2.0","files":{"/Users/kris/q-io/spec/fs/boot-directory-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":8},"12":{"index":12,"count":8},"13":{"index":13,"count":8},"14":{"index":14,"count":8},"15":{"index":15,"count":8},"16":{"index":16,"count":8},"17":{"index":17,"count":8},"18":{"index":18,"count":8}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":8},"2":{"index":2,"count":8}},"hash":"657dbb2f9fbcdf0c8930d0f764794dc9","instrumentor":{"blockCounter":3,"nodeCounter":19,"source":"var FS = require(\"../../fs-boot\");\nvar normalize = FS.normal;\n\nvar specs = [\n    {\n        \"from\": \"foo\",\n        \"to\": \"\"\n    },\n    {\n        \"from\": \"\",\n        \"to\": \"..\"\n    },\n    {\n        \"from\": \".\",\n        \"to\": \"..\"\n    },\n    {\n        \"from\": \"..\",\n        \"to\": normalize(\"../..\")\n    },\n    {\n        \"from\": \"../foo\",\n        \"to\": \"..\"\n    },\n    {\n        \"from\": \"/foo/bar\",\n        \"to\": normalize(\"/foo\")\n    },\n    {\n        \"from\": \"/foo\",\n        \"to\": normalize(\"/\")\n    },\n    {\n        \"from\": \"/\",\n        \"to\": \"/\"\n    }\n];\n\ndescribe(\"fs-boot directory\", function () {\n    specs.forEach(function (spec) {\n        it(\"should parse \" + JSON.stringify(spec.from), function () {\n            expect(FS.directory(spec.from)).toBe(spec.to);\n        });\n    });\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":34}},"id":0},"1":{"loc":{"start":{"line":1,"column":9},"end":{"line":1,"column":33}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":26}},"id":2},"3":{"loc":{"start":{"line":4,"column":0},"end":{"line":37,"column":2}},"id":3},"4":{"loc":{"start":{"line":19,"column":14},"end":{"line":19,"column":32}},"id":4},"5":{"loc":{"start":{"line":27,"column":14},"end":{"line":27,"column":31}},"id":5},"6":{"loc":{"start":{"line":31,"column":14},"end":{"line":31,"column":28}},"id":6},"7":{"loc":{"start":{"line":39,"column":0},"end":{"line":45,"column":3}},"id":7},"8":{"loc":{"start":{"line":39,"column":0},"end":{"line":45,"column":2}},"id":8},"9":{"loc":{"start":{"line":40,"column":4},"end":{"line":44,"column":7}},"id":9},"10":{"loc":{"start":{"line":40,"column":4},"end":{"line":44,"column":6}},"id":10},"11":{"loc":{"start":{"line":41,"column":8},"end":{"line":43,"column":11}},"id":11},"12":{"loc":{"start":{"line":41,"column":8},"end":{"line":43,"column":10}},"id":12},"13":{"loc":{"start":{"line":41,"column":11},"end":{"line":41,"column":54}},"id":13},"14":{"loc":{"start":{"line":41,"column":29},"end":{"line":41,"column":54}},"id":14},"15":{"loc":{"start":{"line":42,"column":12},"end":{"line":42,"column":58}},"id":15},"16":{"loc":{"start":{"line":42,"column":12},"end":{"line":42,"column":57}},"id":16},"17":{"loc":{"start":{"line":42,"column":18},"end":{"line":42,"column":43}},"id":17},"18":{"loc":{"start":{"line":42,"column":19},"end":{"line":42,"column":42}},"id":18}}}},"/Users/kris/q-io/fs-boot.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":6751},"14":{"index":14,"count":6751},"15":{"index":15,"count":6750},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":6751},"27":{"index":27,"count":1},"28":{"index":28,"count":3962},"29":{"index":29,"count":3962},"30":{"index":30,"count":3962},"31":{"index":31,"count":3962},"32":{"index":32,"count":3962},"38":{"index":38,"count":3962},"39":{"index":39,"count":3962},"40":{"index":40,"count":1100},"41":{"index":41,"count":4},"42":{"index":42,"count":3958},"43":{"index":43,"count":1},"44":{"index":44,"count":1111},"45":{"index":45,"count":1111},"46":{"index":46,"count":40},"47":{"index":47,"count":39},"48":{"index":48,"count":39},"49":{"index":49,"count":1072},"50":{"index":50,"count":1072},"51":{"index":51,"count":1},"99":{"index":99,"count":1},"100":{"index":100,"count":1477},"101":{"index":101,"count":1477},"102":{"index":102,"count":1477},"103":{"index":103,"count":4108},"104":{"index":104,"count":2631},"105":{"index":105,"count":2631},"106":{"index":106,"count":2631},"107":{"index":107,"count":2631},"108":{"index":108,"count":2496},"109":{"index":109,"count":2496},"110":{"index":110,"count":2496},"111":{"index":111,"count":2496},"112":{"index":112,"count":1353},"113":{"index":113,"count":1353},"114":{"index":114,"count":1353},"115":{"index":115,"count":1353},"116":{"index":116,"count":1353},"117":{"index":117,"count":7113},"118":{"index":118,"count":4617},"119":{"index":119,"count":4617},"120":{"index":120,"count":4617},"121":{"index":121,"count":4617},"122":{"index":122,"count":4544},"123":{"index":123,"count":3916},"124":{"index":124,"count":9},"125":{"index":125,"count":9},"126":{"index":126,"count":4},"127":{"index":127,"count":4},"128":{"index":128,"count":3903},"129":{"index":129,"count":3903},"130":{"index":130,"count":1477},"131":{"index":131,"count":1477},"132":{"index":132,"count":1477},"133":{"index":133,"count":1477},"134":{"index":134,"count":1477},"135":{"index":135,"count":1},"136":{"index":136,"count":3476},"137":{"index":137,"count":3476},"138":{"index":138,"count":3476},"139":{"index":139,"count":2},"140":{"index":140,"count":3474},"141":{"index":141,"count":3474},"142":{"index":142,"count":1},"143":{"index":143,"count":87},"144":{"index":144,"count":87},"145":{"index":145,"count":1},"146":{"index":146,"count":3474},"149":{"index":149,"count":3474},"150":{"index":150,"count":3474},"151":{"index":151,"count":1},"160":{"index":160,"count":1},"161":{"index":161,"count":147},"162":{"index":162,"count":147},"163":{"index":163,"count":147},"164":{"index":164,"count":147},"165":{"index":165,"count":147},"166":{"index":166,"count":147},"167":{"index":167,"count":145},"168":{"index":168,"count":145},"169":{"index":169,"count":1},"170":{"index":170,"count":1},"171":{"index":171,"count":144},"172":{"index":172,"count":144},"173":{"index":173,"count":2},"174":{"index":174,"count":2},"175":{"index":175,"count":147},"176":{"index":176,"count":147},"177":{"index":177,"count":147},"178":{"index":178,"count":1},"179":{"index":179,"count":86},"180":{"index":180,"count":87},"181":{"index":181,"count":1},"182":{"index":182,"count":139},"183":{"index":183,"count":139},"184":{"index":184,"count":139},"185":{"index":185,"count":139},"190":{"index":190,"count":139},"191":{"index":191,"count":1},"203":{"index":203,"count":1},"205":{"index":205,"count":1}},"blocks":{"0":{"index":0,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":6751},"5":{"index":5,"count":1},"6":{"index":6,"count":3962},"7":{"index":7,"count":3962},"9":{"index":9,"count":4},"10":{"index":10,"count":1111},"11":{"index":11,"count":39},"26":{"index":26,"count":1477},"27":{"index":27,"count":2631},"28":{"index":28,"count":135},"29":{"index":29,"count":1353},"30":{"index":30,"count":4617},"31":{"index":31,"count":701},"32":{"index":32,"count":13},"33":{"index":33,"count":9},"34":{"index":34,"count":4},"36":{"index":36,"count":4},"37":{"index":37,"count":3903},"38":{"index":38,"count":3476},"39":{"index":39,"count":2},"40":{"index":40,"count":87},"41":{"index":41,"count":3474},"43":{"index":43,"count":3474},"46":{"index":46,"count":147},"47":{"index":47,"count":145},"48":{"index":48,"count":1},"49":{"index":49,"count":144},"50":{"index":50,"count":2},"51":{"index":51,"count":139}},"hash":"e2af320eeb3cbab70ac93f92c34ae1ba","instrumentor":{"blockCounter":54,"nodeCounter":206,"source":"(function (exports) {\n\n// -- kriskowal Kris Kowal Copyright (C) 2009-2010 MIT License\n// -- tlrobinson Tom Robinson TODO\n\n/**\n * Pure JavaScript implementations of file system path\n * manipulation.\n */\n\n// NOTE: this file may be used is the engine bootstrapping\n// process, so any \"requires\" must be accounted for in\n// narwhal.js\n\n/*whatsupdoc*/\n/*markup markdown*/\n\nvar regExpEscape = function (str) {\n    return str.replace(/[-[\\]{}()*+?.\\\\^$|,#\\s]/g, \"\\\\$&\");\n};\n\nvar path = require(\"path\");\n\n/**\n * @name ROOT\n * * `/` on Unix\n * * `\\` on Windows\n */\n\n/**\n * @name SEPARATOR\n * * `/` on Unix\n * * `\\` on Windows\n */\n\n/**\n * @name ALT_SEPARATOR\n * * undefined on Unix\n * * `/` on Windows\n */\n\nexports.ROOT = exports.SEPARATOR = path.sep;\nif (path.sep === \"\\\\\") {\n    exports.ALT_SEPARATOR = \"/\";\n} else {\n    exports.ALT_SEPARATOR = undefined;\n}\n\n// we need to make sure the separator regex is always in sync with the separators.\n// this caches the generated regex and rebuild if either separator changes.\nvar separatorCached, altSeparatorCached, separatorReCached;\n/**\n * @function\n */\nexports.SEPARATORS_RE = function () {\n    if (\n        separatorCached !== exports.SEPARATOR ||\n        altSeparatorCached !== exports.ALT_SEPARATOR\n    ) {\n        separatorCached = exports.SEPARATOR;\n        altSeparatorCached = exports.ALT_SEPARATOR;\n        separatorReCached = new RegExp(\"[\" +\n            (separatorCached || \"\").replace(/[-[\\]{}()*+?.\\\\^$|,#\\s]/g, \"\\\\$&\") +\n            (altSeparatorCached || \"\").replace(/[-[\\]{}()*+?.\\\\^$|,#\\s]/g, \"\\\\$&\") +\n        \"]\", \"g\");\n    }\n    return separatorReCached;\n}\n\n/**\n * separates a path into components.  If the path is\n * absolute, the first path component is the root of the\n * file system, indicated by an empty string on Unix, and a\n * drive letter followed by a colon on Windows.\n * @returns {Array * String}\n */\nexports.split = function (path) {\n    var parts;\n    try {\n        parts = String(path).split(exports.SEPARATORS_RE());\n    } catch (exception) {\n        throw new Error(\"Cannot split \" + (typeof path) + \", \" + JSON.stringify(path));\n    }\n    // this special case helps isAbsolute\n    // distinguish an empty path from an absolute path\n    // \"\" -> [] NOT [\"\"]\n    if (parts.length === 1 && parts[0] === \"\")\n        return [];\n    // \"a\" -> [\"a\"]\n    // \"/a\" -> [\"\", \"a\"]\n    return parts;\n};\n\n/**\n * Takes file system paths as variadic arguments and treats\n * each as a file or directory path and returns the path\n * arrived by traversing into the those paths.  All\n * arguments except for the last must be paths to\n * directories for the result to be meaningful.\n * @returns {String} path\n */\nexports.join = function () {\n    if (arguments.length === 1 && Array.isArray(arguments[0]))\n        return exports.normal.apply(exports, arguments[0]);\n    return exports.normal.apply(exports, arguments);\n};\n\n/**\n * Takes file system paths as variadic arguments and treats\n * each path as a location, in the URL sense, resolving each\n * new location based on the previous.  For example, if the\n * first argument is the absolute path of a JSON file, and\n * the second argument is a path mentioned in that JSON\n * file, `resolve` returns the absolute path of the\n * mentioned file.\n * @returns {String} path\n */\nexports.resolve = function () {\n    var root = \"\";\n    var parents = [];\n    var children = [];\n    var leaf = \"\";\n    for (var i = 0; i < arguments.length; i++) {\n        var path = String(arguments[i]);\n        if (path == \"\")\n            continue;\n        var parts = path.split(exports.SEPARATORS_RE());\n        if (exports.isAbsolute(path)) {\n            root = parts.shift() + exports.SEPARATOR;\n            parents = [];\n            children = [];\n        }\n        leaf = parts.pop();\n        if (leaf == \".\" || leaf == \"..\") {\n            parts.push(leaf);\n            leaf = \"\";\n        }\n        for (var j = 0; j < parts.length; j++) {\n            var part = parts[j];\n            if (part == \".\" || part == \"\") {\n            } else if (part == \"..\") {\n                if (children.length) {\n                    children.pop();\n                } else {\n                    if (root) {\n                    } else {\n                        parents.push(\"..\");\n                    }\n                }\n            } else {\n                children.push(part);\n            }\n        };\n    }\n    path = parents.concat(children).join(exports.SEPARATOR);\n    if (path) leaf = exports.SEPARATOR + leaf;\n    return root + path + leaf;\n};\n\n/**\n * Takes paths as any number of arguments and reduces them\n * into a single path in normal form, removing all \".\" path\n * components, and reducing \"..\" path components by removing\n * the previous path component if possible.\n * @returns {String} path\n */\nexports.normal = function () {\n    var root = \"\";\n    var parents = [];\n    var children = [];\n    for (var i = 0, ii = arguments.length; i < ii; i++) {\n        var path = String(arguments[i]);\n        // empty paths have no affect\n        if (path === \"\")\n            continue;\n        var parts = path.split(exports.SEPARATORS_RE());\n        if (exports.isAbsolute(path)) {\n            root = parts.shift() + exports.SEPARATOR;\n            parents = [];\n            children = [];\n        }\n        for (var j = 0, jj = parts.length; j < jj; j++) {\n            var part = parts[j];\n            if (part === \".\" || part === \"\") {\n            } else if (part == \"..\") {\n                if (children.length) {\n                    children.pop();\n                } else {\n                    if (root) {\n                    } else {\n                        parents.push(\"..\");\n                    }\n                }\n            } else {\n                children.push(part);\n            }\n        }\n    }\n    path = parents.concat(children).join(exports.SEPARATOR);\n    return root + path;\n};\n\n/***\n * @returns {Boolean} whether the given path begins at the\n * root of the file system or a drive letter.\n */\nexports.isAbsolute = function (path) {\n    // for absolute paths on any operating system,\n    // the first path component always determines\n    // whether it is relative or absolute.  On Unix,\n    // it is empty, so [\"\", \"foo\"].join(\"/\") == \"/foo\",\n    // \"/foo\".split(\"/\") == [\"\", \"foo\"].\n    var parts = exports.split(path);\n    // split(\"\") == [].  \"\" is not absolute.\n    // split(\"/\") == [\"\", \"\"] is absolute.\n    // split(?) == [\"\"] does not occur.\n    if (parts.length == 0)\n        return false;\n    return exports.isRoot(parts[0]);\n};\n\n/**\n * @returns {Boolean} whether the given path does not begin\n * at the root of the file system or a drive letter.\n */\nexports.isRelative = function (path) {\n    return !exports.isAbsolute(path);\n};\n\n/**\n * @returns {Boolean} whether the given path component\n * corresponds to the root of the file system or a drive\n * letter, as applicable.\n */\nexports.isRoot = function (first) {\n    if (exports.SEPARATOR === \"\\\\\") {\n        return /[a-zA-Z]:$/.test(first);\n    } else {\n        return first == \"\";\n    }\n};\n\n/**\n * @returns {String} the Unix root path or corresponding\n * Windows drive for a given path.\n */\nexports.root = function (path) {\n    if (!exports.isAbsolute(path))\n        path = require(\"./fs\").absolute(path);\n    var parts = exports.split(path);\n    return exports.join(parts[0], \"\");\n};\n\n/**\n * @returns {String} the parent directory of the given path.\n */\nexports.directory = function (path) {\n    path = exports.normal(path);\n    var absolute = exports.isAbsolute(path);\n    var parts = exports.split(path);\n    // XXX needs to be sensitive to the root for\n    // Windows compatibility\n    if (parts.length) {\n        if (parts[parts.length - 1] == \"..\") {\n            parts.push(\"..\");\n        } else {\n            parts.pop();\n        }\n    } else {\n        parts.unshift(\"..\");\n    }\n    return parts.join(exports.SEPARATOR) || (\n        exports.isRelative(path) ?\n        \"\" : exports.ROOT\n    );\n};\n\n/**\n * @returns {String} the last component of a path, without\n * the given extension if the extension is provided and\n * matches the given file.\n * @param {String} path\n * @param {String} extention an optional extention to detect\n * and remove if it exists.\n */\nexports.base = function (path, extension) {\n    var base = path.split(exports.SEPARATORS_RE()).pop();\n    if (extension)\n        base = base.replace(\n            new RegExp(regExpEscape(extension) + \"$\"),\n            \"\"\n        );\n    return base;\n};\n\n/**\n * @returns {String} the extension (e.g., `txt`) of the file\n * at the given path.\n */\nexports.extension = function (path) {\n    path = exports.base(path);\n    path = path.replace(/^\\.*/, \"\");\n    var index = path.lastIndexOf(\".\");\n    return index <= 0 ? \"\" : path.substring(index);\n};\n\n})(typeof exports !== \"undefined\" ? exports : FS_BOOT = {});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":307,"column":60}},"id":0},"1":{"loc":{"start":{"line":1,"column":0},"end":{"line":307,"column":59}},"id":1},"2":{"loc":{"start":{"line":18,"column":0},"end":{"line":20,"column":2}},"id":2},"3":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":59}},"id":3},"4":{"loc":{"start":{"line":19,"column":11},"end":{"line":19,"column":58}},"id":4},"5":{"loc":{"start":{"line":22,"column":0},"end":{"line":22,"column":27}},"id":5},"6":{"loc":{"start":{"line":22,"column":11},"end":{"line":22,"column":26}},"id":6},"7":{"loc":{"start":{"line":42,"column":0},"end":{"line":42,"column":44}},"id":7},"8":{"loc":{"start":{"line":43,"column":4},"end":{"line":43,"column":21}},"id":8},"9":{"loc":{"start":{"line":44,"column":4},"end":{"line":44,"column":32}},"id":9},"10":{"loc":{"start":{"line":46,"column":4},"end":{"line":46,"column":38}},"id":10},"11":{"loc":{"start":{"line":51,"column":0},"end":{"line":51,"column":59}},"id":11},"12":{"loc":{"start":{"line":55,"column":0},"end":{"line":77,"column":0}},"id":12},"13":{"loc":{"start":{"line":57,"column":8},"end":{"line":58,"column":52}},"id":13},"14":{"loc":{"start":{"line":57,"column":8},"end":{"line":57,"column":45}},"id":14},"15":{"loc":{"start":{"line":58,"column":8},"end":{"line":58,"column":52}},"id":15},"16":{"loc":{"start":{"line":60,"column":8},"end":{"line":60,"column":44}},"id":16},"17":{"loc":{"start":{"line":61,"column":8},"end":{"line":61,"column":51}},"id":17},"18":{"loc":{"start":{"line":62,"column":8},"end":{"line":65,"column":18}},"id":18},"19":{"loc":{"start":{"line":62,"column":39},"end":{"line":65,"column":11}},"id":19},"20":{"loc":{"start":{"line":62,"column":39},"end":{"line":64,"column":82}},"id":20},"21":{"loc":{"start":{"line":62,"column":39},"end":{"line":63,"column":79}},"id":21},"22":{"loc":{"start":{"line":63,"column":12},"end":{"line":63,"column":79}},"id":22},"23":{"loc":{"start":{"line":63,"column":12},"end":{"line":63,"column":35}},"id":23},"24":{"loc":{"start":{"line":64,"column":12},"end":{"line":64,"column":82}},"id":24},"25":{"loc":{"start":{"line":64,"column":12},"end":{"line":64,"column":38}},"id":25},"26":{"loc":{"start":{"line":67,"column":4},"end":{"line":67,"column":29}},"id":26},"27":{"loc":{"start":{"line":77,"column":0},"end":{"line":92,"column":2}},"id":27},"28":{"loc":{"start":{"line":78,"column":4},"end":{"line":78,"column":14}},"id":28},"29":{"loc":{"start":{"line":80,"column":8},"end":{"line":80,"column":60}},"id":29},"30":{"loc":{"start":{"line":80,"column":16},"end":{"line":80,"column":59}},"id":30},"31":{"loc":{"start":{"line":80,"column":22},"end":{"line":80,"column":28}},"id":31},"32":{"loc":{"start":{"line":80,"column":35},"end":{"line":80,"column":58}},"id":32},"33":{"loc":{"start":{"line":82,"column":8},"end":{"line":82,"column":87}},"id":33},"34":{"loc":{"start":{"line":82,"column":24},"end":{"line":82,"column":85}},"id":34},"35":{"loc":{"start":{"line":82,"column":24},"end":{"line":82,"column":62}},"id":35},"36":{"loc":{"start":{"line":82,"column":24},"end":{"line":82,"column":55}},"id":36},"37":{"loc":{"start":{"line":82,"column":65},"end":{"line":82,"column":85}},"id":37},"38":{"loc":{"start":{"line":87,"column":8},"end":{"line":87,"column":45}},"id":38},"39":{"loc":{"start":{"line":87,"column":8},"end":{"line":87,"column":26}},"id":39},"40":{"loc":{"start":{"line":87,"column":30},"end":{"line":87,"column":45}},"id":40},"41":{"loc":{"start":{"line":88,"column":8},"end":{"line":88,"column":18}},"id":41},"42":{"loc":{"start":{"line":91,"column":4},"end":{"line":91,"column":17}},"id":42},"43":{"loc":{"start":{"line":102,"column":0},"end":{"line":106,"column":2}},"id":43},"44":{"loc":{"start":{"line":103,"column":8},"end":{"line":103,"column":61}},"id":44},"45":{"loc":{"start":{"line":103,"column":8},"end":{"line":103,"column":30}},"id":45},"46":{"loc":{"start":{"line":103,"column":34},"end":{"line":103,"column":61}},"id":46},"47":{"loc":{"start":{"line":104,"column":8},"end":{"line":104,"column":59}},"id":47},"48":{"loc":{"start":{"line":104,"column":15},"end":{"line":104,"column":58}},"id":48},"49":{"loc":{"start":{"line":105,"column":4},"end":{"line":105,"column":52}},"id":49},"50":{"loc":{"start":{"line":105,"column":11},"end":{"line":105,"column":51}},"id":50},"51":{"loc":{"start":{"line":118,"column":0},"end":{"line":158,"column":2}},"id":51},"52":{"loc":{"start":{"line":119,"column":4},"end":{"line":119,"column":18}},"id":52},"53":{"loc":{"start":{"line":120,"column":4},"end":{"line":120,"column":21}},"id":53},"54":{"loc":{"start":{"line":121,"column":4},"end":{"line":121,"column":22}},"id":54},"55":{"loc":{"start":{"line":122,"column":4},"end":{"line":122,"column":18}},"id":55},"56":{"loc":{"start":{"line":123,"column":20},"end":{"line":123,"column":40}},"id":56},"57":{"loc":{"start":{"line":123,"column":42},"end":{"line":123,"column":45}},"id":57},"58":{"loc":{"start":{"line":124,"column":8},"end":{"line":124,"column":40}},"id":58},"59":{"loc":{"start":{"line":124,"column":19},"end":{"line":124,"column":39}},"id":59},"60":{"loc":{"start":{"line":125,"column":12},"end":{"line":125,"column":22}},"id":60},"61":{"loc":{"start":{"line":127,"column":8},"end":{"line":127,"column":56}},"id":61},"62":{"loc":{"start":{"line":127,"column":20},"end":{"line":127,"column":55}},"id":62},"63":{"loc":{"start":{"line":127,"column":31},"end":{"line":127,"column":54}},"id":63},"64":{"loc":{"start":{"line":128,"column":12},"end":{"line":128,"column":36}},"id":64},"65":{"loc":{"start":{"line":129,"column":12},"end":{"line":129,"column":53}},"id":65},"66":{"loc":{"start":{"line":129,"column":19},"end":{"line":129,"column":52}},"id":66},"67":{"loc":{"start":{"line":129,"column":19},"end":{"line":129,"column":32}},"id":67},"68":{"loc":{"start":{"line":130,"column":12},"end":{"line":130,"column":25}},"id":68},"69":{"loc":{"start":{"line":131,"column":12},"end":{"line":131,"column":26}},"id":69},"70":{"loc":{"start":{"line":133,"column":8},"end":{"line":133,"column":27}},"id":70},"71":{"loc":{"start":{"line":133,"column":15},"end":{"line":133,"column":26}},"id":71},"72":{"loc":{"start":{"line":134,"column":12},"end":{"line":134,"column":39}},"id":72},"73":{"loc":{"start":{"line":134,"column":12},"end":{"line":134,"column":23}},"id":73},"74":{"loc":{"start":{"line":134,"column":27},"end":{"line":134,"column":39}},"id":74},"75":{"loc":{"start":{"line":135,"column":12},"end":{"line":135,"column":29}},"id":75},"76":{"loc":{"start":{"line":135,"column":12},"end":{"line":135,"column":28}},"id":76},"77":{"loc":{"start":{"line":136,"column":12},"end":{"line":136,"column":22}},"id":77},"78":{"loc":{"start":{"line":138,"column":24},"end":{"line":138,"column":40}},"id":78},"79":{"loc":{"start":{"line":138,"column":42},"end":{"line":138,"column":45}},"id":79},"80":{"loc":{"start":{"line":139,"column":12},"end":{"line":139,"column":32}},"id":80},"81":{"loc":{"start":{"line":140,"column":16},"end":{"line":140,"column":41}},"id":81},"82":{"loc":{"start":{"line":140,"column":16},"end":{"line":140,"column":27}},"id":82},"83":{"loc":{"start":{"line":140,"column":31},"end":{"line":140,"column":41}},"id":83},"84":{"loc":{"start":{"line":141,"column":23},"end":{"line":141,"column":35}},"id":84},"85":{"loc":{"start":{"line":143,"column":20},"end":{"line":143,"column":35}},"id":85},"86":{"loc":{"start":{"line":143,"column":20},"end":{"line":143,"column":34}},"id":86},"87":{"loc":{"start":{"line":147,"column":24},"end":{"line":147,"column":43}},"id":87},"88":{"loc":{"start":{"line":147,"column":24},"end":{"line":147,"column":42}},"id":88},"89":{"loc":{"start":{"line":151,"column":16},"end":{"line":151,"column":36}},"id":89},"90":{"loc":{"start":{"line":151,"column":16},"end":{"line":151,"column":35}},"id":90},"91":{"loc":{"start":{"line":155,"column":4},"end":{"line":155,"column":60}},"id":91},"92":{"loc":{"start":{"line":155,"column":11},"end":{"line":155,"column":59}},"id":92},"93":{"loc":{"start":{"line":155,"column":25},"end":{"line":155,"column":35}},"id":93},"94":{"loc":{"start":{"line":156,"column":14},"end":{"line":156,"column":46}},"id":94},"95":{"loc":{"start":{"line":156,"column":21},"end":{"line":156,"column":45}},"id":95},"96":{"loc":{"start":{"line":157,"column":4},"end":{"line":157,"column":30}},"id":96},"97":{"loc":{"start":{"line":157,"column":11},"end":{"line":157,"column":29}},"id":97},"98":{"loc":{"start":{"line":157,"column":11},"end":{"line":157,"column":22}},"id":98},"99":{"loc":{"start":{"line":167,"column":0},"end":{"line":201,"column":2}},"id":99},"100":{"loc":{"start":{"line":168,"column":4},"end":{"line":168,"column":18}},"id":100},"101":{"loc":{"start":{"line":169,"column":4},"end":{"line":169,"column":21}},"id":101},"102":{"loc":{"start":{"line":170,"column":4},"end":{"line":170,"column":22}},"id":102},"103":{"loc":{"start":{"line":171,"column":43},"end":{"line":171,"column":49}},"id":103},"104":{"loc":{"start":{"line":171,"column":51},"end":{"line":171,"column":54}},"id":104},"105":{"loc":{"start":{"line":172,"column":8},"end":{"line":172,"column":40}},"id":105},"106":{"loc":{"start":{"line":172,"column":19},"end":{"line":172,"column":39}},"id":106},"107":{"loc":{"start":{"line":174,"column":12},"end":{"line":174,"column":23}},"id":107},"108":{"loc":{"start":{"line":176,"column":8},"end":{"line":176,"column":56}},"id":108},"109":{"loc":{"start":{"line":176,"column":20},"end":{"line":176,"column":55}},"id":109},"110":{"loc":{"start":{"line":176,"column":31},"end":{"line":176,"column":54}},"id":110},"111":{"loc":{"start":{"line":177,"column":12},"end":{"line":177,"column":36}},"id":111},"112":{"loc":{"start":{"line":178,"column":12},"end":{"line":178,"column":53}},"id":112},"113":{"loc":{"start":{"line":178,"column":19},"end":{"line":178,"column":52}},"id":113},"114":{"loc":{"start":{"line":178,"column":19},"end":{"line":178,"column":32}},"id":114},"115":{"loc":{"start":{"line":179,"column":12},"end":{"line":179,"column":25}},"id":115},"116":{"loc":{"start":{"line":180,"column":12},"end":{"line":180,"column":26}},"id":116},"117":{"loc":{"start":{"line":182,"column":43},"end":{"line":182,"column":49}},"id":117},"118":{"loc":{"start":{"line":182,"column":51},"end":{"line":182,"column":54}},"id":118},"119":{"loc":{"start":{"line":183,"column":12},"end":{"line":183,"column":32}},"id":119},"120":{"loc":{"start":{"line":184,"column":16},"end":{"line":184,"column":43}},"id":120},"121":{"loc":{"start":{"line":184,"column":16},"end":{"line":184,"column":28}},"id":121},"122":{"loc":{"start":{"line":184,"column":32},"end":{"line":184,"column":43}},"id":122},"123":{"loc":{"start":{"line":185,"column":23},"end":{"line":185,"column":35}},"id":123},"124":{"loc":{"start":{"line":187,"column":20},"end":{"line":187,"column":35}},"id":124},"125":{"loc":{"start":{"line":187,"column":20},"end":{"line":187,"column":34}},"id":125},"126":{"loc":{"start":{"line":191,"column":24},"end":{"line":191,"column":43}},"id":126},"127":{"loc":{"start":{"line":191,"column":24},"end":{"line":191,"column":42}},"id":127},"128":{"loc":{"start":{"line":195,"column":16},"end":{"line":195,"column":36}},"id":128},"129":{"loc":{"start":{"line":195,"column":16},"end":{"line":195,"column":35}},"id":129},"130":{"loc":{"start":{"line":199,"column":4},"end":{"line":199,"column":60}},"id":130},"131":{"loc":{"start":{"line":199,"column":11},"end":{"line":199,"column":59}},"id":131},"132":{"loc":{"start":{"line":199,"column":25},"end":{"line":199,"column":35}},"id":132},"133":{"loc":{"start":{"line":200,"column":4},"end":{"line":200,"column":23}},"id":133},"134":{"loc":{"start":{"line":200,"column":11},"end":{"line":200,"column":22}},"id":134},"135":{"loc":{"start":{"line":207,"column":0},"end":{"line":220,"column":2}},"id":135},"136":{"loc":{"start":{"line":213,"column":4},"end":{"line":213,"column":36}},"id":136},"137":{"loc":{"start":{"line":213,"column":16},"end":{"line":213,"column":35}},"id":137},"138":{"loc":{"start":{"line":217,"column":8},"end":{"line":217,"column":25}},"id":138},"139":{"loc":{"start":{"line":218,"column":8},"end":{"line":218,"column":21}},"id":139},"140":{"loc":{"start":{"line":219,"column":4},"end":{"line":219,"column":36}},"id":140},"141":{"loc":{"start":{"line":219,"column":11},"end":{"line":219,"column":35}},"id":141},"142":{"loc":{"start":{"line":226,"column":0},"end":{"line":228,"column":2}},"id":142},"143":{"loc":{"start":{"line":227,"column":4},"end":{"line":227,"column":37}},"id":143},"144":{"loc":{"start":{"line":227,"column":12},"end":{"line":227,"column":36}},"id":144},"145":{"loc":{"start":{"line":235,"column":0},"end":{"line":241,"column":2}},"id":145},"146":{"loc":{"start":{"line":236,"column":8},"end":{"line":236,"column":34}},"id":146},"147":{"loc":{"start":{"line":237,"column":8},"end":{"line":237,"column":40}},"id":147},"148":{"loc":{"start":{"line":237,"column":15},"end":{"line":237,"column":39}},"id":148},"149":{"loc":{"start":{"line":239,"column":8},"end":{"line":239,"column":27}},"id":149},"150":{"loc":{"start":{"line":239,"column":15},"end":{"line":239,"column":26}},"id":150},"151":{"loc":{"start":{"line":247,"column":0},"end":{"line":252,"column":2}},"id":151},"152":{"loc":{"start":{"line":248,"column":9},"end":{"line":248,"column":33}},"id":152},"153":{"loc":{"start":{"line":249,"column":8},"end":{"line":249,"column":46}},"id":153},"154":{"loc":{"start":{"line":249,"column":15},"end":{"line":249,"column":45}},"id":154},"155":{"loc":{"start":{"line":249,"column":22},"end":{"line":249,"column":30}},"id":155},"156":{"loc":{"start":{"line":250,"column":4},"end":{"line":250,"column":36}},"id":156},"157":{"loc":{"start":{"line":250,"column":16},"end":{"line":250,"column":35}},"id":157},"158":{"loc":{"start":{"line":251,"column":4},"end":{"line":251,"column":38}},"id":158},"159":{"loc":{"start":{"line":251,"column":11},"end":{"line":251,"column":37}},"id":159},"160":{"loc":{"start":{"line":257,"column":0},"end":{"line":276,"column":2}},"id":160},"161":{"loc":{"start":{"line":258,"column":4},"end":{"line":258,"column":32}},"id":161},"162":{"loc":{"start":{"line":258,"column":11},"end":{"line":258,"column":31}},"id":162},"163":{"loc":{"start":{"line":259,"column":4},"end":{"line":259,"column":44}},"id":163},"164":{"loc":{"start":{"line":259,"column":19},"end":{"line":259,"column":43}},"id":164},"165":{"loc":{"start":{"line":260,"column":4},"end":{"line":260,"column":36}},"id":165},"166":{"loc":{"start":{"line":260,"column":16},"end":{"line":260,"column":35}},"id":166},"167":{"loc":{"start":{"line":264,"column":12},"end":{"line":264,"column":43}},"id":167},"168":{"loc":{"start":{"line":264,"column":18},"end":{"line":264,"column":34}},"id":168},"169":{"loc":{"start":{"line":265,"column":12},"end":{"line":265,"column":29}},"id":169},"170":{"loc":{"start":{"line":265,"column":12},"end":{"line":265,"column":28}},"id":170},"171":{"loc":{"start":{"line":267,"column":12},"end":{"line":267,"column":24}},"id":171},"172":{"loc":{"start":{"line":267,"column":12},"end":{"line":267,"column":23}},"id":172},"173":{"loc":{"start":{"line":270,"column":8},"end":{"line":270,"column":28}},"id":173},"174":{"loc":{"start":{"line":270,"column":8},"end":{"line":270,"column":27}},"id":174},"175":{"loc":{"start":{"line":272,"column":4},"end":{"line":275,"column":6}},"id":175},"176":{"loc":{"start":{"line":272,"column":11},"end":{"line":275,"column":5}},"id":176},"177":{"loc":{"start":{"line":272,"column":11},"end":{"line":272,"column":40}},"id":177},"178":{"loc":{"start":{"line":274,"column":8},"end":{"line":274,"column":10}},"id":178},"179":{"loc":{"start":{"line":274,"column":13},"end":{"line":274,"column":25}},"id":179},"180":{"loc":{"start":{"line":273,"column":8},"end":{"line":273,"column":32}},"id":180},"181":{"loc":{"start":{"line":286,"column":0},"end":{"line":294,"column":2}},"id":181},"182":{"loc":{"start":{"line":287,"column":4},"end":{"line":287,"column":57}},"id":182},"183":{"loc":{"start":{"line":287,"column":15},"end":{"line":287,"column":56}},"id":183},"184":{"loc":{"start":{"line":287,"column":25},"end":{"line":287,"column":50}},"id":184},"185":{"loc":{"start":{"line":287,"column":26},"end":{"line":287,"column":49}},"id":185},"186":{"loc":{"start":{"line":289,"column":8},"end":{"line":292,"column":10}},"id":186},"187":{"loc":{"start":{"line":289,"column":15},"end":{"line":292,"column":9}},"id":187},"188":{"loc":{"start":{"line":290,"column":23},"end":{"line":290,"column":52}},"id":188},"189":{"loc":{"start":{"line":290,"column":23},"end":{"line":290,"column":46}},"id":189},"190":{"loc":{"start":{"line":293,"column":4},"end":{"line":293,"column":16}},"id":190},"191":{"loc":{"start":{"line":300,"column":0},"end":{"line":305,"column":2}},"id":191},"192":{"loc":{"start":{"line":301,"column":4},"end":{"line":301,"column":30}},"id":192},"193":{"loc":{"start":{"line":301,"column":11},"end":{"line":301,"column":29}},"id":193},"194":{"loc":{"start":{"line":302,"column":4},"end":{"line":302,"column":36}},"id":194},"195":{"loc":{"start":{"line":302,"column":11},"end":{"line":302,"column":35}},"id":195},"196":{"loc":{"start":{"line":303,"column":4},"end":{"line":303,"column":38}},"id":196},"197":{"loc":{"start":{"line":303,"column":16},"end":{"line":303,"column":37}},"id":197},"198":{"loc":{"start":{"line":304,"column":4},"end":{"line":304,"column":51}},"id":198},"199":{"loc":{"start":{"line":304,"column":24},"end":{"line":304,"column":26}},"id":199},"200":{"loc":{"start":{"line":304,"column":29},"end":{"line":304,"column":50}},"id":202},"201":{"loc":{"start":{"line":304,"column":11},"end":{"line":304,"column":21}},"id":201},"202":{"loc":{"start":{"line":304,"column":29},"end":{"line":304,"column":50}},"id":202},"203":{"loc":{"start":{"line":307,"column":36},"end":{"line":307,"column":43}},"id":203},"204":{"loc":{"start":{"line":307,"column":46},"end":{"line":307,"column":58}},"id":204},"205":{"loc":{"start":{"line":307,"column":3},"end":{"line":307,"column":33}},"id":205}}}},"/Users/kris/q-io/spec/fs/issues/1-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1}},"hash":"947436878d42ebecd4ba9e18e552009c","instrumentor":{"blockCounter":7,"nodeCounter":32,"source":"require(\"../../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar FS = require(\"../../../fs\");\n\ndescribe(\"write and remove\", function () {\n\n    it(\"should write and remove a file\", function () {\n\n        var fixture = FS.join(__dirname, \"fixture.txt\");\n\n        return FS.write(fixture, \"1234\")\n        .then(function (result) {\n            expect(result).toBe(undefined);\n        })\n\n        .then(function () {\n            return FS.remove(fixture);\n        })\n        .then(function (result) {\n            expect(result).toBe(undefined);\n        })\n\n        .then(function () {\n            return FS.exists(fixture)\n        })\n        .then(function (exists) {\n            expect(exists).toBe(false);\n        })\n\n    });\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":37}},"id":0},"1":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":36}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":21}},"id":2},"3":{"loc":{"start":{"line":2,"column":8},"end":{"line":2,"column":20}},"id":3},"4":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":32}},"id":4},"5":{"loc":{"start":{"line":3,"column":9},"end":{"line":3,"column":31}},"id":5},"6":{"loc":{"start":{"line":5,"column":0},"end":{"line":31,"column":3}},"id":6},"7":{"loc":{"start":{"line":5,"column":0},"end":{"line":31,"column":2}},"id":7},"8":{"loc":{"start":{"line":7,"column":4},"end":{"line":30,"column":7}},"id":8},"9":{"loc":{"start":{"line":7,"column":4},"end":{"line":30,"column":6}},"id":9},"10":{"loc":{"start":{"line":9,"column":8},"end":{"line":9,"column":56}},"id":10},"11":{"loc":{"start":{"line":9,"column":22},"end":{"line":9,"column":55}},"id":11},"12":{"loc":{"start":{"line":11,"column":8},"end":{"line":30,"column":4}},"id":12},"13":{"loc":{"start":{"line":11,"column":15},"end":{"line":28,"column":10}},"id":13},"14":{"loc":{"start":{"line":23,"column":13},"end":{"line":25,"column":10}},"id":14},"15":{"loc":{"start":{"line":19,"column":13},"end":{"line":21,"column":10}},"id":15},"16":{"loc":{"start":{"line":16,"column":13},"end":{"line":18,"column":10}},"id":16},"17":{"loc":{"start":{"line":12,"column":13},"end":{"line":14,"column":10}},"id":17},"18":{"loc":{"start":{"line":11,"column":23},"end":{"line":11,"column":40}},"id":18},"19":{"loc":{"start":{"line":13,"column":12},"end":{"line":13,"column":43}},"id":19},"20":{"loc":{"start":{"line":13,"column":12},"end":{"line":13,"column":42}},"id":20},"21":{"loc":{"start":{"line":13,"column":18},"end":{"line":13,"column":26}},"id":21},"22":{"loc":{"start":{"line":17,"column":12},"end":{"line":17,"column":38}},"id":22},"23":{"loc":{"start":{"line":17,"column":19},"end":{"line":17,"column":37}},"id":23},"24":{"loc":{"start":{"line":20,"column":12},"end":{"line":20,"column":43}},"id":24},"25":{"loc":{"start":{"line":20,"column":12},"end":{"line":20,"column":42}},"id":25},"26":{"loc":{"start":{"line":20,"column":18},"end":{"line":20,"column":26}},"id":26},"27":{"loc":{"start":{"line":24,"column":12},"end":{"line":25,"column":8}},"id":27},"28":{"loc":{"start":{"line":24,"column":19},"end":{"line":24,"column":37}},"id":28},"29":{"loc":{"start":{"line":27,"column":12},"end":{"line":27,"column":39}},"id":29},"30":{"loc":{"start":{"line":27,"column":12},"end":{"line":27,"column":38}},"id":30},"31":{"loc":{"start":{"line":27,"column":18},"end":{"line":27,"column":26}},"id":31}}}},"/Users/kris/q-io/spec/lib/jasmine-promise.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":55},"5":{"index":5,"count":55},"6":{"index":6,"count":55},"7":{"index":7,"count":55},"8":{"index":8,"count":39},"9":{"index":9,"count":39},"10":{"index":10,"count":39},"11":{"index":11,"count":39},"12":{"index":12,"count":39},"13":{"index":13,"count":39},"18":{"index":18,"count":16},"19":{"index":19,"count":16},"20":{"index":20,"count":16}},"blocks":{"0":{"index":0,"count":55},"1":{"index":1,"count":55},"2":{"index":2,"count":39},"3":{"index":3,"count":39},"5":{"index":5,"count":16}},"hash":"e72b668dd4c4f55fae785bf5b9a21249","instrumentor":{"blockCounter":7,"nodeCounter":25,"source":"\"use strict\";\n\nvar Q = require(\"q\");\n\n/**\n * Modifies the way that individual specs are run to easily test async\n * code with promises.\n *\n * A spec may return a promise. If it does, then the spec passes if and\n * only if that promise is fulfilled within a very short period of time.\n * If it is rejected, or if it isn't fulfilled quickly, the spec fails.\n *\n * In this way, we can use promise chaining to structure our asynchronous\n * tests. Expectations all down the chain of promises are all checked and\n * guaranteed to be run and resolved or the test fails.\n *\n * This is a big win over the runs() and watches() code that jasmine\n * supports out of the box.\n */\njasmine.Block.prototype.execute = function (onComplete) {\n    var spec = this.spec;\n    try {\n        var result = this.func.call(spec, onComplete);\n\n        // It seems Jasmine likes to return the suite if you pass it anything.\n        // So make sure it's a promise first.\n        if (result && typeof result.then === \"function\") {\n            Q.timeout(result, 500).then(function () {\n                onComplete();\n            }, function (error) {\n                spec.fail(error);\n                onComplete();\n            });\n        } else if (this.func.length === 0) {\n            onComplete();\n        }\n    } catch (error) {\n        spec.fail(error);\n        onComplete();\n    }\n};","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":21}},"id":1},"2":{"loc":{"start":{"line":3,"column":8},"end":{"line":3,"column":20}},"id":2},"3":{"loc":{"start":{"line":20,"column":0},"end":{"line":41,"column":2}},"id":3},"4":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":25}},"id":4},"5":{"loc":{"start":{"line":23,"column":8},"end":{"line":23,"column":54}},"id":5},"6":{"loc":{"start":{"line":23,"column":21},"end":{"line":23,"column":53}},"id":6},"7":{"loc":{"start":{"line":27,"column":12},"end":{"line":27,"column":55}},"id":7},"8":{"loc":{"start":{"line":27,"column":22},"end":{"line":27,"column":55}},"id":8},"9":{"loc":{"start":{"line":28,"column":12},"end":{"line":33,"column":15}},"id":9},"10":{"loc":{"start":{"line":28,"column":12},"end":{"line":33,"column":14}},"id":10},"11":{"loc":{"start":{"line":28,"column":21},"end":{"line":28,"column":34}},"id":11},"12":{"loc":{"start":{"line":29,"column":16},"end":{"line":29,"column":29}},"id":12},"13":{"loc":{"start":{"line":29,"column":16},"end":{"line":29,"column":28}},"id":13},"14":{"loc":{"start":{"line":31,"column":16},"end":{"line":31,"column":33}},"id":14},"15":{"loc":{"start":{"line":31,"column":16},"end":{"line":31,"column":32}},"id":15},"16":{"loc":{"start":{"line":32,"column":16},"end":{"line":32,"column":29}},"id":16},"17":{"loc":{"start":{"line":32,"column":16},"end":{"line":32,"column":28}},"id":17},"18":{"loc":{"start":{"line":34,"column":19},"end":{"line":34,"column":41}},"id":18},"19":{"loc":{"start":{"line":35,"column":12},"end":{"line":35,"column":25}},"id":19},"20":{"loc":{"start":{"line":35,"column":12},"end":{"line":35,"column":24}},"id":20},"21":{"loc":{"start":{"line":38,"column":8},"end":{"line":38,"column":25}},"id":21},"22":{"loc":{"start":{"line":38,"column":8},"end":{"line":38,"column":24}},"id":22},"23":{"loc":{"start":{"line":39,"column":8},"end":{"line":39,"column":21}},"id":23},"24":{"loc":{"start":{"line":39,"column":8},"end":{"line":39,"column":20}},"id":24}}}},"/Users/kris/q-io/fs.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":2},"21":{"index":21,"count":68},"22":{"index":22,"count":68},"24":{"index":24,"count":68},"26":{"index":26,"count":68},"27":{"index":27,"count":68},"28":{"index":28,"count":68},"29":{"index":29,"count":68},"30":{"index":30,"count":68},"31":{"index":31,"count":68},"32":{"index":32,"count":68},"33":{"index":33,"count":68},"34":{"index":34,"count":68},"35":{"index":35,"count":68},"43":{"index":43,"count":2},"44":{"index":44,"count":1},"45":{"index":45,"count":1},"46":{"index":46,"count":32},"47":{"index":47,"count":32},"48":{"index":48,"count":32},"49":{"index":49,"count":32},"50":{"index":50,"count":32},"51":{"index":51,"count":32},"52":{"index":52,"count":32},"53":{"index":53,"count":32},"54":{"index":54,"count":32},"55":{"index":55,"count":32},"56":{"index":56,"count":32},"57":{"index":57,"count":32},"59":{"index":59,"count":32},"61":{"index":61,"count":32},"62":{"index":62,"count":2},"63":{"index":63,"count":2},"64":{"index":64,"count":2},"65":{"index":65,"count":32},"66":{"index":66,"count":32},"69":{"index":69,"count":2},"70":{"index":70,"count":2},"71":{"index":71,"count":32},"72":{"index":72,"count":32},"73":{"index":73,"count":1},"74":{"index":74,"count":1},"75":{"index":75,"count":1},"76":{"index":76,"count":1},"77":{"index":77,"count":1},"78":{"index":78,"count":31},"79":{"index":79,"count":31},"80":{"index":80,"count":31},"81":{"index":81,"count":31},"82":{"index":82,"count":31},"83":{"index":83,"count":1},"84":{"index":84,"count":1},"85":{"index":85,"count":1},"86":{"index":86,"count":1},"87":{"index":87,"count":1},"88":{"index":88,"count":1},"89":{"index":89,"count":1},"97":{"index":97,"count":1},"98":{"index":98,"count":1},"99":{"index":99,"count":1},"100":{"index":100,"count":1},"124":{"index":124,"count":1},"125":{"index":125,"count":14},"126":{"index":126,"count":14},"127":{"index":127,"count":14},"128":{"index":128,"count":14},"129":{"index":129,"count":14},"132":{"index":132,"count":14},"133":{"index":133,"count":14},"134":{"index":134,"count":14},"135":{"index":135,"count":14},"136":{"index":136,"count":14},"137":{"index":137,"count":6},"138":{"index":138,"count":6},"139":{"index":139,"count":6},"140":{"index":140,"count":6},"141":{"index":141,"count":6},"142":{"index":142,"count":6},"143":{"index":143,"count":6},"144":{"index":144,"count":6},"147":{"index":147,"count":6},"148":{"index":148,"count":6},"149":{"index":149,"count":6},"150":{"index":150,"count":6},"151":{"index":151,"count":8},"152":{"index":152,"count":8},"153":{"index":153,"count":14},"154":{"index":154,"count":1},"155":{"index":155,"count":8},"156":{"index":156,"count":8},"157":{"index":157,"count":8},"158":{"index":158,"count":8},"159":{"index":159,"count":8},"160":{"index":160,"count":8},"168":{"index":168,"count":8},"169":{"index":169,"count":8},"170":{"index":170,"count":8},"171":{"index":171,"count":1},"172":{"index":172,"count":1},"173":{"index":173,"count":36},"174":{"index":174,"count":36},"175":{"index":175,"count":36},"176":{"index":176,"count":36},"177":{"index":177,"count":36},"178":{"index":178,"count":36},"186":{"index":186,"count":36},"187":{"index":187,"count":36},"188":{"index":188,"count":36},"189":{"index":189,"count":1},"190":{"index":190,"count":119},"191":{"index":191,"count":119},"192":{"index":192,"count":119},"193":{"index":193,"count":119},"194":{"index":194,"count":119},"195":{"index":195,"count":119},"196":{"index":196,"count":119},"197":{"index":197,"count":1},"198":{"index":198,"count":1},"199":{"index":199,"count":1},"200":{"index":200,"count":1},"201":{"index":201,"count":1},"202":{"index":202,"count":1},"203":{"index":203,"count":1},"204":{"index":204,"count":118},"205":{"index":205,"count":118},"208":{"index":208,"count":119},"209":{"index":209,"count":1},"210":{"index":210,"count":118},"211":{"index":211,"count":118},"212":{"index":212,"count":1},"213":{"index":213,"count":1},"214":{"index":214,"count":1},"215":{"index":215,"count":7},"216":{"index":216,"count":130},"217":{"index":217,"count":130},"218":{"index":218,"count":1},"219":{"index":219,"count":1},"220":{"index":220,"count":1},"222":{"index":222,"count":1},"241":{"index":241,"count":1},"260":{"index":260,"count":1},"284":{"index":284,"count":1},"285":{"index":285,"count":1},"314":{"index":314,"count":1},"339":{"index":339,"count":1},"363":{"index":363,"count":1},"364":{"index":364,"count":4},"365":{"index":365,"count":4},"366":{"index":366,"count":4},"367":{"index":367,"count":4},"375":{"index":375,"count":4},"376":{"index":376,"count":4},"377":{"index":377,"count":4},"378":{"index":378,"count":1},"393":{"index":393,"count":1},"394":{"index":394,"count":14},"395":{"index":395,"count":14}},"blocks":{"0":{"index":0,"count":2},"1":{"index":1,"count":68},"2":{"index":2,"count":68},"3":{"index":3,"count":68},"7":{"index":7,"count":32},"8":{"index":8,"count":32},"11":{"index":11,"count":2},"12":{"index":12,"count":30},"14":{"index":14,"count":2},"15":{"index":15,"count":1},"16":{"index":16,"count":31},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"20":{"index":20,"count":1},"25":{"index":25,"count":14},"27":{"index":27,"count":14},"28":{"index":28,"count":14},"29":{"index":29,"count":6},"31":{"index":31,"count":6},"32":{"index":32,"count":8},"33":{"index":33,"count":8},"34":{"index":34,"count":8},"36":{"index":36,"count":8},"37":{"index":37,"count":36},"38":{"index":38,"count":36},"40":{"index":40,"count":36},"41":{"index":41,"count":119},"42":{"index":42,"count":119},"43":{"index":43,"count":119},"44":{"index":44,"count":1},"45":{"index":45,"count":118},"47":{"index":47,"count":118},"48":{"index":48,"count":7},"49":{"index":49,"count":130},"50":{"index":50,"count":1},"89":{"index":89,"count":4},"90":{"index":90,"count":4},"92":{"index":92,"count":4},"97":{"index":97,"count":14}},"hash":"fd647282565d132085fea23857f3b9c4","instrumentor":{"blockCounter":98,"nodeCounter":396,"source":"/**\n * An asynchronous local file system API, based on a subset\n * of the `narwhal/fs` API and the `narwhal/promise` API,\n * such that the method names are the same but some return\n * values are promises instead of fully resolved values.\n * @module\n */\n\n/*whatsupdoc*/\n\nvar FS = require(\"fs\"); // node\nvar Q = require(\"q\");\nvar Reader = require(\"./reader\");\nvar Writer = require(\"./writer\");\nvar Common = require(\"./fs-common\");\nvar Mock = require(\"./fs-mock\");\nvar Root = require(\"./fs-root\");\n\nCommon.update(exports, process.cwd);\nexports.Mock = Mock;\nexports.Root = Root;\n\n// facilitates AIMD (additive increase, multiplicative decrease) for backing off\nvar backOffDelay = 0;\nvar backOffFactor = 1.0001;\nfunction dampen(wrapped, thisp) {\n    var retry = function () {\n        var args = arguments;\n        var ready = backOffDelay ? Q.delay(backOffDelay) : Q.resolve();\n        return ready.then(function () {\n            return Q.when(wrapped.apply(thisp, args), function (stream) {\n                backOffDelay = Math.max(0, backOffDelay - 1);\n                return stream;\n            }, function (error) {\n                if (error.code === \"EMFILE\") {\n                    backOffDelay = (backOffDelay + 1) * backOffFactor;\n                    return retry.apply(null, args);\n                } else {\n                    throw error;\n                }\n            });\n        });\n    };\n    return retry;\n}\n\n/**\n * @param {String} path\n * @param {Object} options (flags, mode, bufferSize, charset, begin, end)\n * @returns {Promise * Stream} a stream from the `q-io` module.\n */\nexports.open = dampen(function (path, flags, charset, options) {\n    var self = this;\n    if (typeof flags == \"object\") {\n        options = flags;\n        flags = options.flags;\n        charset = options.charset;\n    }\n    options = options || {};\n    flags = flags || \"r\";\n    var nodeOptions = {\n        \"flags\": flags.replace(/b/g, \"\")\n    };\n    if (\"bufferSize\" in options) {\n        nodeOptions.bufferSize = options.bufferSize;\n    }\n    if (\"mode\" in options) {\n        nodeOptions.mode = options.mode;\n    }\n    if (\"begin\" in options) {\n        nodeOptions.start = options.begin;\n        nodeOptions.end = options.end - 1;\n    }\n    if (flags.indexOf(\"b\") >= 0) {\n        if (charset) {\n            throw new Error(\"Can't open a binary file with a charset: \" + charset);\n        }\n    } else {\n        charset = charset || 'utf-8';\n    }\n    if (flags.indexOf(\"w\") >= 0) {\n        var stream = FS.createWriteStream(String(path), nodeOptions);\n        return Writer(stream, charset);\n    } else {\n        var stream = FS.createReadStream(String(path), nodeOptions);\n        return Reader(stream, charset);\n    }\n});\n\nexports.remove = function (path) {\n    path = String(path);\n    var done = Q.defer();\n    FS.unlink(path, function (error) {\n        if (error) {\n            error.message = \"Can't remove \" + JSON.stringify(path) + \": \" + error.message;\n            done.reject(error);\n        } else {\n            done.resolve();\n        }\n    });\n    return done.promise;\n};\n\nexports.move = function (source, target) {\n    source = String(source);\n    target = String(target);\n    return exports.exists(target)\n    .then(function (exists) {\n        if (exists) {\n            var error = new Error(\"Can't move over existing entry \" + target);\n            error.code = \"EEXISTS\";\n            throw error;\n        }\n        return Q.ninvoke(FS, \"rename\", source, target)\n        .fail(function (error) {\n            error.message = (\n                \"Can't move \" + JSON.stringify(source) + \" to \" +\n                JSON.stringify(target) + \" because \" + error.message\n            );\n            throw error;\n        });\n    });\n};\n\nexports.makeDirectory = function (path, mode) {\n    path = String(path);\n    var done = Q.defer();\n    if (typeof mode === \"string\") {\n        mode = parseInt(mode, 8);\n    } else if (mode === void 0) {\n        mode = parseInt('755', 8);\n    }\n    FS.mkdir(path, mode, function (error) {\n        if (error) {\n            error.message = \"Can't makeDirectory \" + JSON.stringify(path) + \" with mode \" + mode + \": \" + error.message;\n            if (error.code === \"EISDIR\") {\n                error.exists = true;\n                error.isDirectory = true;\n            }\n            if (error.code === \"EEXIST\") {\n                error.exists = true;\n            }\n            done.reject(error);\n        } else {\n            done.resolve();\n        }\n    });\n    return done.promise;\n};\n\nexports.removeDirectory = function (path) {\n    path = String(path);\n    var done = Q.defer();\n    FS.rmdir(path, function (error) {\n        if (error) {\n            error.message = \"Can't removeDirectory \" + JSON.stringify(path) + \": \" + error.message;\n            done.reject(error);\n        } else {\n            done.resolve();\n        }\n    });\n    return done.promise;\n};\n\n/**\n */\nexports.list = dampen(function (path) {\n    path = String(path);\n    var result = Q.defer();\n    FS.readdir(path, function (error, list) {\n        if (error) {\n            error.message = \"Can't list \" + JSON.stringify(path) + \": \" + error.message;\n            return result.reject(error);\n        } else {\n            result.resolve(list);\n        }\n    });\n    return result.promise;\n});\n\n/**\n * @param {String} path\n * @returns {Promise * Stat}\n */\nexports.stat = function (path) {\n    var self = this;\n    path = String(path);\n    var done = Q.defer();\n    try {\n        FS.stat(path, function (error, stat) {\n            if (error) {\n                error.message = \"Can't stat \" + JSON.stringify(path) + \": \" + error;\n                done.reject(error);\n            } else {\n                done.resolve(new Stats(stat));\n            }\n        });\n    } catch (error) {\n        done.reject(error);\n    }\n    return done.promise;\n};\n\nvar Stats = function (nodeStat) {\n    this.node = nodeStat;\n    this.size = nodeStat.size;\n};\n\nvar stats = [\n    \"isDirectory\",\n    \"isFile\",\n    \"isBlockDevice\",\n    \"isCharacterDevice\",\n    \"isSymbolicLink\",\n    \"isFIFO\",\n    \"isSocket\"\n];\n\nstats.forEach(function (name) {\n    Stats.prototype[name] = function () {\n        return this.node[name]();\n    };\n});\n\nStats.prototype.lastModified = function () {\n    return new Date(this.node.mtime);\n};\n\nStats.prototype.lastAccessed = function () {\n    return new Date(this.node.atime);\n};\n\nexports.statLink = function (path) {\n    path = String(path);\n    var done = Q.defer();\n    try {\n        FS.lstat(path, function (error, stat) {\n            if (error) {\n                error.message = \"Can't statLink \" + JSON.stringify(path) + \": \" + error.message;\n                done.reject(error);\n            } else {\n                done.resolve(stat);\n            }\n        });\n    } catch (error) {\n        done.reject(error);\n    }\n    return done.promise;\n};\n\nexports.statFd = function (fd) {\n    fd = Number(fd);\n    var done = Q.defer();\n    try {\n        FS.fstat(fd, function (error, stat) {\n            if (error) {\n                error.message = \"Can't statFd file descriptor \" + JSON.stringify(fd) + \": \" + error.message;\n                done.reject(error);\n            } else {\n                done.resolve(stat);\n            }\n        });\n    } catch (error) {\n        done.reject(error);\n    }\n    return done.promise;\n};\n\nexports.link = function (source, target) {\n    source = String(source);\n    target = String(target);\n    var done = Q.defer();\n    try {\n        FS.link(source, target, function (error) {\n            if (error) {\n                error.message = \"Can't link \" + JSON.stringify(source) + \" to \" + JSON.stringify(target) + \": \" + error.message;\n                done.reject(error);\n            } else {\n                done.resolve();\n            }\n        });\n    } catch (error) {\n        done.reject(error);\n    }\n    return done.promise;\n};\n\n// this lookup table translates the link types that Q-IO accepts (which have\n// been normalized to full words to be consistent with the naming convention)\nvar linkTypes = {\n    \"file\": \"file\",\n    \"directory\": \"dir\",\n    \"junction\": \"junction\"\n};\n\nexports.symbolicLink = function (target, relative, type) {\n    if (!linkTypes.hasOwnProperty(type)) {\n        console.warn(new Error(\"For Windows compatibility, symbolicLink must be called with a type argument \\\"file\\\", \\\"directory\\\", or \\\"junction\\\"\"));\n    }\n    type = linkTypes[type];\n    target = String(target);\n    relative = String(relative);\n    var done = Q.defer();\n    try {\n        FS.symlink(relative, target, type || 'file', function (error) {\n            if (error) {\n                error.message = \"Can't create symbolicLink \" + JSON.stringify(target) + \" to relative location \" + JSON.stringify(relative) + \": \" + error.message;\n                done.reject(error);\n            } else {\n                done.resolve();\n            }\n        });\n    } catch (error) {\n        done.reject(error);\n    }\n    return done.promise;\n};\n\nexports.chown = function (path, uid, gid) {\n    path = String(path);\n    var done = Q.defer();\n    try {\n        FS.chown(path, uid, gid, function (error) {\n            if (error) {\n                error.message = \"Can't chown (change owner) of \" + JSON.stringify(path) + \" to user \" + JSON.stringify(uid) + \" and group \" + JSON.stringify(gid) + \": \" + error.message;\n                done.reject(error);\n            } else {\n                done.resolve();\n            }\n        });\n    } catch (error) {\n        done.reject(error);\n    }\n    return done.promise;\n};\n\nexports.chmod = function (path, mode) {\n    path = String(path);\n    mode = String(mode);\n    var done = Q.defer();\n    try {\n        FS.chmod(path, mode, function (error) {\n            if (error) {\n                error.message = \"Can't chmod (change permissions mode) of \" + JSON.stringify(path) + \" to (octal number) \" + mode.toString(8) + \": \" + error.message;\n                done.reject(error);\n            } else {\n                done.resolve();\n            }\n        });\n    } catch (error) {\n        done.reject(error);\n    }\n    return done.promise;\n};\n\nexports.canonical = function (path) {\n    var result = Q.defer();\n    FS.realpath(path, function (error, canonicalPath) {\n        if (error) {\n            error.message = \"Can't get canonical path of \" + JSON.stringify(path) + \" by way of C realpath: \" + error.message;\n            result.reject(error);\n        } else {\n            result.resolve(canonicalPath);\n        }\n    });\n    return result.promise;\n};\n\nexports.readLink = function (path) {\n    var result = Q.defer();\n    FS.readlink(path, function (error, path) {\n        if (error) {\n            error.message = \"Can't get link from \" + JSON.stringify(path) + \" by way of C readlink: \" + error.message;\n            result.reject(error);\n        } else {\n            result.resolve(path);\n        }\n    });\n    return result.promise;\n};\n\nexports.mock = function (path) {\n    return Mock.mock(this, path);\n};","nodes":{"0":{"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":23}},"id":0},"1":{"loc":{"start":{"line":11,"column":9},"end":{"line":11,"column":22}},"id":1},"2":{"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":21}},"id":2},"3":{"loc":{"start":{"line":12,"column":8},"end":{"line":12,"column":20}},"id":3},"4":{"loc":{"start":{"line":13,"column":0},"end":{"line":13,"column":33}},"id":4},"5":{"loc":{"start":{"line":13,"column":13},"end":{"line":13,"column":32}},"id":5},"6":{"loc":{"start":{"line":14,"column":0},"end":{"line":14,"column":33}},"id":6},"7":{"loc":{"start":{"line":14,"column":13},"end":{"line":14,"column":32}},"id":7},"8":{"loc":{"start":{"line":15,"column":0},"end":{"line":15,"column":36}},"id":8},"9":{"loc":{"start":{"line":15,"column":13},"end":{"line":15,"column":35}},"id":9},"10":{"loc":{"start":{"line":16,"column":0},"end":{"line":16,"column":32}},"id":10},"11":{"loc":{"start":{"line":16,"column":11},"end":{"line":16,"column":31}},"id":11},"12":{"loc":{"start":{"line":17,"column":0},"end":{"line":17,"column":32}},"id":12},"13":{"loc":{"start":{"line":17,"column":11},"end":{"line":17,"column":31}},"id":13},"14":{"loc":{"start":{"line":19,"column":0},"end":{"line":19,"column":36}},"id":14},"15":{"loc":{"start":{"line":19,"column":0},"end":{"line":19,"column":35}},"id":15},"16":{"loc":{"start":{"line":20,"column":0},"end":{"line":20,"column":20}},"id":16},"17":{"loc":{"start":{"line":21,"column":0},"end":{"line":21,"column":20}},"id":17},"18":{"loc":{"start":{"line":24,"column":0},"end":{"line":24,"column":21}},"id":18},"19":{"loc":{"start":{"line":25,"column":0},"end":{"line":25,"column":27}},"id":19},"20":{"loc":{"start":{"line":27,"column":4},"end":{"line":43,"column":6}},"id":20},"21":{"loc":{"start":{"line":28,"column":8},"end":{"line":28,"column":29}},"id":21},"22":{"loc":{"start":{"line":29,"column":8},"end":{"line":29,"column":71}},"id":22},"23":{"loc":{"start":{"line":29,"column":35},"end":{"line":29,"column":56}},"id":25},"24":{"loc":{"start":{"line":29,"column":59},"end":{"line":29,"column":70}},"id":26},"25":{"loc":{"start":{"line":29,"column":35},"end":{"line":29,"column":56}},"id":25},"26":{"loc":{"start":{"line":29,"column":59},"end":{"line":29,"column":70}},"id":26},"27":{"loc":{"start":{"line":30,"column":8},"end":{"line":42,"column":11}},"id":27},"28":{"loc":{"start":{"line":30,"column":15},"end":{"line":42,"column":10}},"id":28},"29":{"loc":{"start":{"line":31,"column":12},"end":{"line":41,"column":15}},"id":29},"30":{"loc":{"start":{"line":31,"column":19},"end":{"line":41,"column":14}},"id":30},"31":{"loc":{"start":{"line":31,"column":26},"end":{"line":31,"column":52}},"id":31},"32":{"loc":{"start":{"line":32,"column":16},"end":{"line":32,"column":61}},"id":32},"33":{"loc":{"start":{"line":32,"column":31},"end":{"line":32,"column":60}},"id":33},"34":{"loc":{"start":{"line":32,"column":43},"end":{"line":32,"column":59}},"id":34},"35":{"loc":{"start":{"line":33,"column":16},"end":{"line":33,"column":30}},"id":35},"36":{"loc":{"start":{"line":35,"column":20},"end":{"line":35,"column":43}},"id":36},"37":{"loc":{"start":{"line":36,"column":20},"end":{"line":36,"column":70}},"id":37},"38":{"loc":{"start":{"line":36,"column":35},"end":{"line":36,"column":69}},"id":38},"39":{"loc":{"start":{"line":36,"column":35},"end":{"line":36,"column":53}},"id":39},"40":{"loc":{"start":{"line":37,"column":20},"end":{"line":37,"column":51}},"id":40},"41":{"loc":{"start":{"line":37,"column":27},"end":{"line":37,"column":50}},"id":41},"42":{"loc":{"start":{"line":39,"column":20},"end":{"line":39,"column":32}},"id":42},"43":{"loc":{"start":{"line":44,"column":4},"end":{"line":44,"column":17}},"id":43},"44":{"loc":{"start":{"line":52,"column":0},"end":{"line":88,"column":3}},"id":44},"45":{"loc":{"start":{"line":52,"column":15},"end":{"line":88,"column":2}},"id":45},"46":{"loc":{"start":{"line":53,"column":4},"end":{"line":53,"column":20}},"id":46},"47":{"loc":{"start":{"line":54,"column":8},"end":{"line":54,"column":32}},"id":47},"48":{"loc":{"start":{"line":55,"column":8},"end":{"line":55,"column":24}},"id":48},"49":{"loc":{"start":{"line":56,"column":8},"end":{"line":56,"column":30}},"id":49},"50":{"loc":{"start":{"line":57,"column":8},"end":{"line":57,"column":34}},"id":50},"51":{"loc":{"start":{"line":59,"column":4},"end":{"line":59,"column":28}},"id":51},"52":{"loc":{"start":{"line":59,"column":14},"end":{"line":59,"column":27}},"id":52},"53":{"loc":{"start":{"line":60,"column":4},"end":{"line":60,"column":25}},"id":53},"54":{"loc":{"start":{"line":60,"column":12},"end":{"line":60,"column":24}},"id":54},"55":{"loc":{"start":{"line":61,"column":4},"end":{"line":63,"column":6}},"id":55},"56":{"loc":{"start":{"line":62,"column":17},"end":{"line":62,"column":40}},"id":56},"57":{"loc":{"start":{"line":64,"column":8},"end":{"line":64,"column":31}},"id":57},"58":{"loc":{"start":{"line":65,"column":8},"end":{"line":65,"column":52}},"id":58},"59":{"loc":{"start":{"line":67,"column":8},"end":{"line":67,"column":25}},"id":59},"60":{"loc":{"start":{"line":68,"column":8},"end":{"line":68,"column":40}},"id":60},"61":{"loc":{"start":{"line":70,"column":8},"end":{"line":70,"column":26}},"id":61},"62":{"loc":{"start":{"line":71,"column":8},"end":{"line":71,"column":42}},"id":62},"63":{"loc":{"start":{"line":72,"column":8},"end":{"line":72,"column":42}},"id":63},"64":{"loc":{"start":{"line":72,"column":26},"end":{"line":72,"column":41}},"id":64},"65":{"loc":{"start":{"line":74,"column":8},"end":{"line":74,"column":31}},"id":65},"66":{"loc":{"start":{"line":74,"column":8},"end":{"line":74,"column":26}},"id":66},"67":{"loc":{"start":{"line":76,"column":12},"end":{"line":76,"column":83}},"id":67},"68":{"loc":{"start":{"line":76,"column":28},"end":{"line":76,"column":81}},"id":68},"69":{"loc":{"start":{"line":79,"column":8},"end":{"line":79,"column":37}},"id":69},"70":{"loc":{"start":{"line":79,"column":18},"end":{"line":79,"column":36}},"id":70},"71":{"loc":{"start":{"line":81,"column":8},"end":{"line":81,"column":31}},"id":71},"72":{"loc":{"start":{"line":81,"column":8},"end":{"line":81,"column":26}},"id":72},"73":{"loc":{"start":{"line":82,"column":8},"end":{"line":82,"column":69}},"id":73},"74":{"loc":{"start":{"line":82,"column":21},"end":{"line":82,"column":68}},"id":74},"75":{"loc":{"start":{"line":82,"column":42},"end":{"line":82,"column":54}},"id":75},"76":{"loc":{"start":{"line":83,"column":8},"end":{"line":83,"column":39}},"id":76},"77":{"loc":{"start":{"line":83,"column":15},"end":{"line":83,"column":38}},"id":77},"78":{"loc":{"start":{"line":85,"column":8},"end":{"line":85,"column":68}},"id":78},"79":{"loc":{"start":{"line":85,"column":21},"end":{"line":85,"column":67}},"id":79},"80":{"loc":{"start":{"line":85,"column":41},"end":{"line":85,"column":53}},"id":80},"81":{"loc":{"start":{"line":86,"column":8},"end":{"line":86,"column":39}},"id":81},"82":{"loc":{"start":{"line":86,"column":15},"end":{"line":86,"column":38}},"id":82},"83":{"loc":{"start":{"line":90,"column":0},"end":{"line":102,"column":2}},"id":83},"84":{"loc":{"start":{"line":91,"column":4},"end":{"line":91,"column":24}},"id":84},"85":{"loc":{"start":{"line":91,"column":11},"end":{"line":91,"column":23}},"id":85},"86":{"loc":{"start":{"line":92,"column":4},"end":{"line":92,"column":25}},"id":86},"87":{"loc":{"start":{"line":92,"column":15},"end":{"line":92,"column":24}},"id":87},"88":{"loc":{"start":{"line":93,"column":4},"end":{"line":100,"column":7}},"id":88},"89":{"loc":{"start":{"line":93,"column":4},"end":{"line":100,"column":6}},"id":89},"90":{"loc":{"start":{"line":95,"column":12},"end":{"line":95,"column":90}},"id":90},"91":{"loc":{"start":{"line":95,"column":28},"end":{"line":95,"column":89}},"id":91},"92":{"loc":{"start":{"line":95,"column":28},"end":{"line":95,"column":73}},"id":92},"93":{"loc":{"start":{"line":95,"column":28},"end":{"line":95,"column":66}},"id":93},"94":{"loc":{"start":{"line":95,"column":46},"end":{"line":95,"column":66}},"id":94},"95":{"loc":{"start":{"line":96,"column":12},"end":{"line":96,"column":31}},"id":95},"96":{"loc":{"start":{"line":96,"column":12},"end":{"line":96,"column":30}},"id":96},"97":{"loc":{"start":{"line":98,"column":12},"end":{"line":98,"column":27}},"id":97},"98":{"loc":{"start":{"line":98,"column":12},"end":{"line":98,"column":26}},"id":98},"99":{"loc":{"start":{"line":101,"column":4},"end":{"line":101,"column":24}},"id":99},"100":{"loc":{"start":{"line":104,"column":0},"end":{"line":123,"column":2}},"id":100},"101":{"loc":{"start":{"line":105,"column":4},"end":{"line":105,"column":28}},"id":101},"102":{"loc":{"start":{"line":105,"column":13},"end":{"line":105,"column":27}},"id":102},"103":{"loc":{"start":{"line":106,"column":4},"end":{"line":106,"column":28}},"id":103},"104":{"loc":{"start":{"line":106,"column":13},"end":{"line":106,"column":27}},"id":104},"105":{"loc":{"start":{"line":107,"column":4},"end":{"line":122,"column":7}},"id":105},"106":{"loc":{"start":{"line":107,"column":11},"end":{"line":122,"column":6}},"id":106},"107":{"loc":{"start":{"line":107,"column":25},"end":{"line":107,"column":33}},"id":107},"108":{"loc":{"start":{"line":110,"column":12},"end":{"line":110,"column":78}},"id":108},"109":{"loc":{"start":{"line":110,"column":34},"end":{"line":110,"column":76}},"id":109},"110":{"loc":{"start":{"line":111,"column":12},"end":{"line":111,"column":35}},"id":110},"111":{"loc":{"start":{"line":112,"column":12},"end":{"line":112,"column":24}},"id":111},"112":{"loc":{"start":{"line":114,"column":8},"end":{"line":121,"column":11}},"id":112},"113":{"loc":{"start":{"line":114,"column":15},"end":{"line":121,"column":10}},"id":113},"114":{"loc":{"start":{"line":114,"column":24},"end":{"line":114,"column":54}},"id":114},"115":{"loc":{"start":{"line":116,"column":12},"end":{"line":119,"column":14}},"id":115},"116":{"loc":{"start":{"line":116,"column":28},"end":{"line":119,"column":13}},"id":116},"117":{"loc":{"start":{"line":117,"column":16},"end":{"line":118,"column":52}},"id":117},"118":{"loc":{"start":{"line":117,"column":16},"end":{"line":118,"column":38}},"id":118},"119":{"loc":{"start":{"line":117,"column":16},"end":{"line":117,"column":63}},"id":119},"120":{"loc":{"start":{"line":117,"column":16},"end":{"line":117,"column":54}},"id":120},"121":{"loc":{"start":{"line":117,"column":32},"end":{"line":117,"column":54}},"id":121},"122":{"loc":{"start":{"line":118,"column":16},"end":{"line":118,"column":38}},"id":122},"123":{"loc":{"start":{"line":120,"column":12},"end":{"line":120,"column":24}},"id":123},"124":{"loc":{"start":{"line":125,"column":0},"end":{"line":149,"column":2}},"id":124},"125":{"loc":{"start":{"line":126,"column":4},"end":{"line":126,"column":24}},"id":125},"126":{"loc":{"start":{"line":126,"column":11},"end":{"line":126,"column":23}},"id":126},"127":{"loc":{"start":{"line":127,"column":4},"end":{"line":127,"column":25}},"id":127},"128":{"loc":{"start":{"line":127,"column":15},"end":{"line":127,"column":24}},"id":128},"129":{"loc":{"start":{"line":128,"column":8},"end":{"line":128,"column":32}},"id":129},"130":{"loc":{"start":{"line":129,"column":8},"end":{"line":129,"column":33}},"id":130},"131":{"loc":{"start":{"line":129,"column":15},"end":{"line":129,"column":32}},"id":131},"132":{"loc":{"start":{"line":130,"column":15},"end":{"line":130,"column":30}},"id":132},"133":{"loc":{"start":{"line":131,"column":8},"end":{"line":131,"column":34}},"id":133},"134":{"loc":{"start":{"line":131,"column":15},"end":{"line":131,"column":33}},"id":134},"135":{"loc":{"start":{"line":133,"column":4},"end":{"line":147,"column":7}},"id":135},"136":{"loc":{"start":{"line":133,"column":4},"end":{"line":147,"column":6}},"id":136},"137":{"loc":{"start":{"line":135,"column":12},"end":{"line":135,"column":120}},"id":137},"138":{"loc":{"start":{"line":135,"column":28},"end":{"line":135,"column":119}},"id":138},"139":{"loc":{"start":{"line":135,"column":28},"end":{"line":135,"column":103}},"id":139},"140":{"loc":{"start":{"line":135,"column":28},"end":{"line":135,"column":96}},"id":140},"141":{"loc":{"start":{"line":135,"column":28},"end":{"line":135,"column":89}},"id":141},"142":{"loc":{"start":{"line":135,"column":28},"end":{"line":135,"column":73}},"id":142},"143":{"loc":{"start":{"line":135,"column":53},"end":{"line":135,"column":73}},"id":143},"144":{"loc":{"start":{"line":136,"column":16},"end":{"line":136,"column":39}},"id":144},"145":{"loc":{"start":{"line":137,"column":16},"end":{"line":137,"column":36}},"id":145},"146":{"loc":{"start":{"line":138,"column":16},"end":{"line":138,"column":41}},"id":146},"147":{"loc":{"start":{"line":140,"column":16},"end":{"line":140,"column":39}},"id":147},"148":{"loc":{"start":{"line":141,"column":16},"end":{"line":141,"column":36}},"id":148},"149":{"loc":{"start":{"line":143,"column":12},"end":{"line":143,"column":31}},"id":149},"150":{"loc":{"start":{"line":143,"column":12},"end":{"line":143,"column":30}},"id":150},"151":{"loc":{"start":{"line":145,"column":12},"end":{"line":145,"column":27}},"id":151},"152":{"loc":{"start":{"line":145,"column":12},"end":{"line":145,"column":26}},"id":152},"153":{"loc":{"start":{"line":148,"column":4},"end":{"line":148,"column":24}},"id":153},"154":{"loc":{"start":{"line":151,"column":0},"end":{"line":163,"column":2}},"id":154},"155":{"loc":{"start":{"line":152,"column":4},"end":{"line":152,"column":24}},"id":155},"156":{"loc":{"start":{"line":152,"column":11},"end":{"line":152,"column":23}},"id":156},"157":{"loc":{"start":{"line":153,"column":4},"end":{"line":153,"column":25}},"id":157},"158":{"loc":{"start":{"line":153,"column":15},"end":{"line":153,"column":24}},"id":158},"159":{"loc":{"start":{"line":154,"column":4},"end":{"line":161,"column":7}},"id":159},"160":{"loc":{"start":{"line":154,"column":4},"end":{"line":161,"column":6}},"id":160},"161":{"loc":{"start":{"line":156,"column":12},"end":{"line":156,"column":99}},"id":161},"162":{"loc":{"start":{"line":156,"column":28},"end":{"line":156,"column":98}},"id":162},"163":{"loc":{"start":{"line":156,"column":28},"end":{"line":156,"column":82}},"id":163},"164":{"loc":{"start":{"line":156,"column":28},"end":{"line":156,"column":75}},"id":164},"165":{"loc":{"start":{"line":156,"column":55},"end":{"line":156,"column":75}},"id":165},"166":{"loc":{"start":{"line":157,"column":12},"end":{"line":157,"column":31}},"id":166},"167":{"loc":{"start":{"line":157,"column":12},"end":{"line":157,"column":30}},"id":167},"168":{"loc":{"start":{"line":159,"column":12},"end":{"line":159,"column":27}},"id":168},"169":{"loc":{"start":{"line":159,"column":12},"end":{"line":159,"column":26}},"id":169},"170":{"loc":{"start":{"line":162,"column":4},"end":{"line":162,"column":24}},"id":170},"171":{"loc":{"start":{"line":167,"column":0},"end":{"line":179,"column":3}},"id":171},"172":{"loc":{"start":{"line":167,"column":15},"end":{"line":179,"column":2}},"id":172},"173":{"loc":{"start":{"line":168,"column":4},"end":{"line":168,"column":24}},"id":173},"174":{"loc":{"start":{"line":168,"column":11},"end":{"line":168,"column":23}},"id":174},"175":{"loc":{"start":{"line":169,"column":4},"end":{"line":169,"column":27}},"id":175},"176":{"loc":{"start":{"line":169,"column":17},"end":{"line":169,"column":26}},"id":176},"177":{"loc":{"start":{"line":170,"column":4},"end":{"line":177,"column":7}},"id":177},"178":{"loc":{"start":{"line":170,"column":4},"end":{"line":177,"column":6}},"id":178},"179":{"loc":{"start":{"line":172,"column":12},"end":{"line":172,"column":88}},"id":179},"180":{"loc":{"start":{"line":172,"column":28},"end":{"line":172,"column":87}},"id":180},"181":{"loc":{"start":{"line":172,"column":28},"end":{"line":172,"column":71}},"id":181},"182":{"loc":{"start":{"line":172,"column":28},"end":{"line":172,"column":64}},"id":182},"183":{"loc":{"start":{"line":172,"column":44},"end":{"line":172,"column":64}},"id":183},"184":{"loc":{"start":{"line":173,"column":12},"end":{"line":173,"column":40}},"id":184},"185":{"loc":{"start":{"line":173,"column":19},"end":{"line":173,"column":39}},"id":185},"186":{"loc":{"start":{"line":175,"column":12},"end":{"line":175,"column":33}},"id":186},"187":{"loc":{"start":{"line":175,"column":12},"end":{"line":175,"column":32}},"id":187},"188":{"loc":{"start":{"line":178,"column":4},"end":{"line":178,"column":26}},"id":188},"189":{"loc":{"start":{"line":185,"column":0},"end":{"line":202,"column":2}},"id":189},"190":{"loc":{"start":{"line":186,"column":4},"end":{"line":186,"column":20}},"id":190},"191":{"loc":{"start":{"line":187,"column":4},"end":{"line":187,"column":24}},"id":191},"192":{"loc":{"start":{"line":187,"column":11},"end":{"line":187,"column":23}},"id":192},"193":{"loc":{"start":{"line":188,"column":4},"end":{"line":188,"column":25}},"id":193},"194":{"loc":{"start":{"line":188,"column":15},"end":{"line":188,"column":24}},"id":194},"195":{"loc":{"start":{"line":190,"column":8},"end":{"line":197,"column":11}},"id":195},"196":{"loc":{"start":{"line":190,"column":8},"end":{"line":197,"column":10}},"id":196},"197":{"loc":{"start":{"line":192,"column":16},"end":{"line":192,"column":84}},"id":197},"198":{"loc":{"start":{"line":192,"column":32},"end":{"line":192,"column":83}},"id":198},"199":{"loc":{"start":{"line":192,"column":32},"end":{"line":192,"column":75}},"id":199},"200":{"loc":{"start":{"line":192,"column":32},"end":{"line":192,"column":68}},"id":200},"201":{"loc":{"start":{"line":192,"column":48},"end":{"line":192,"column":68}},"id":201},"202":{"loc":{"start":{"line":193,"column":16},"end":{"line":193,"column":35}},"id":202},"203":{"loc":{"start":{"line":193,"column":16},"end":{"line":193,"column":34}},"id":203},"204":{"loc":{"start":{"line":195,"column":16},"end":{"line":195,"column":46}},"id":204},"205":{"loc":{"start":{"line":195,"column":16},"end":{"line":195,"column":45}},"id":205},"206":{"loc":{"start":{"line":199,"column":8},"end":{"line":199,"column":27}},"id":206},"207":{"loc":{"start":{"line":199,"column":8},"end":{"line":199,"column":26}},"id":207},"208":{"loc":{"start":{"line":201,"column":4},"end":{"line":201,"column":24}},"id":208},"209":{"loc":{"start":{"line":204,"column":0},"end":{"line":207,"column":2}},"id":209},"210":{"loc":{"start":{"line":205,"column":4},"end":{"line":205,"column":25}},"id":210},"211":{"loc":{"start":{"line":206,"column":4},"end":{"line":206,"column":30}},"id":211},"212":{"loc":{"start":{"line":209,"column":0},"end":{"line":217,"column":2}},"id":212},"213":{"loc":{"start":{"line":219,"column":0},"end":{"line":223,"column":3}},"id":213},"214":{"loc":{"start":{"line":219,"column":0},"end":{"line":223,"column":2}},"id":214},"215":{"loc":{"start":{"line":220,"column":4},"end":{"line":222,"column":6}},"id":215},"216":{"loc":{"start":{"line":221,"column":8},"end":{"line":221,"column":33}},"id":216},"217":{"loc":{"start":{"line":221,"column":15},"end":{"line":221,"column":32}},"id":217},"218":{"loc":{"start":{"line":225,"column":0},"end":{"line":227,"column":2}},"id":218},"219":{"loc":{"start":{"line":226,"column":4},"end":{"line":226,"column":37}},"id":219},"220":{"loc":{"start":{"line":229,"column":0},"end":{"line":231,"column":2}},"id":220},"221":{"loc":{"start":{"line":230,"column":4},"end":{"line":230,"column":37}},"id":221},"222":{"loc":{"start":{"line":233,"column":0},"end":{"line":249,"column":2}},"id":222},"223":{"loc":{"start":{"line":234,"column":4},"end":{"line":234,"column":24}},"id":223},"224":{"loc":{"start":{"line":234,"column":11},"end":{"line":234,"column":23}},"id":224},"225":{"loc":{"start":{"line":235,"column":4},"end":{"line":235,"column":25}},"id":225},"226":{"loc":{"start":{"line":235,"column":15},"end":{"line":235,"column":24}},"id":226},"227":{"loc":{"start":{"line":237,"column":8},"end":{"line":244,"column":11}},"id":227},"228":{"loc":{"start":{"line":237,"column":8},"end":{"line":244,"column":10}},"id":228},"229":{"loc":{"start":{"line":239,"column":16},"end":{"line":239,"column":96}},"id":229},"230":{"loc":{"start":{"line":239,"column":32},"end":{"line":239,"column":95}},"id":230},"231":{"loc":{"start":{"line":239,"column":32},"end":{"line":239,"column":79}},"id":231},"232":{"loc":{"start":{"line":239,"column":32},"end":{"line":239,"column":72}},"id":232},"233":{"loc":{"start":{"line":239,"column":52},"end":{"line":239,"column":72}},"id":233},"234":{"loc":{"start":{"line":240,"column":16},"end":{"line":240,"column":35}},"id":234},"235":{"loc":{"start":{"line":240,"column":16},"end":{"line":240,"column":34}},"id":235},"236":{"loc":{"start":{"line":242,"column":16},"end":{"line":242,"column":35}},"id":236},"237":{"loc":{"start":{"line":242,"column":16},"end":{"line":242,"column":34}},"id":237},"238":{"loc":{"start":{"line":246,"column":8},"end":{"line":246,"column":27}},"id":238},"239":{"loc":{"start":{"line":246,"column":8},"end":{"line":246,"column":26}},"id":239},"240":{"loc":{"start":{"line":248,"column":4},"end":{"line":248,"column":24}},"id":240},"241":{"loc":{"start":{"line":251,"column":0},"end":{"line":267,"column":2}},"id":241},"242":{"loc":{"start":{"line":252,"column":4},"end":{"line":252,"column":20}},"id":242},"243":{"loc":{"start":{"line":252,"column":9},"end":{"line":252,"column":19}},"id":243},"244":{"loc":{"start":{"line":253,"column":4},"end":{"line":253,"column":25}},"id":244},"245":{"loc":{"start":{"line":253,"column":15},"end":{"line":253,"column":24}},"id":245},"246":{"loc":{"start":{"line":255,"column":8},"end":{"line":262,"column":11}},"id":246},"247":{"loc":{"start":{"line":255,"column":8},"end":{"line":262,"column":10}},"id":247},"248":{"loc":{"start":{"line":257,"column":16},"end":{"line":257,"column":108}},"id":248},"249":{"loc":{"start":{"line":257,"column":32},"end":{"line":257,"column":107}},"id":249},"250":{"loc":{"start":{"line":257,"column":32},"end":{"line":257,"column":91}},"id":250},"251":{"loc":{"start":{"line":257,"column":32},"end":{"line":257,"column":84}},"id":251},"252":{"loc":{"start":{"line":257,"column":66},"end":{"line":257,"column":84}},"id":252},"253":{"loc":{"start":{"line":258,"column":16},"end":{"line":258,"column":35}},"id":253},"254":{"loc":{"start":{"line":258,"column":16},"end":{"line":258,"column":34}},"id":254},"255":{"loc":{"start":{"line":260,"column":16},"end":{"line":260,"column":35}},"id":255},"256":{"loc":{"start":{"line":260,"column":16},"end":{"line":260,"column":34}},"id":256},"257":{"loc":{"start":{"line":264,"column":8},"end":{"line":264,"column":27}},"id":257},"258":{"loc":{"start":{"line":264,"column":8},"end":{"line":264,"column":26}},"id":258},"259":{"loc":{"start":{"line":266,"column":4},"end":{"line":266,"column":24}},"id":259},"260":{"loc":{"start":{"line":269,"column":0},"end":{"line":286,"column":2}},"id":260},"261":{"loc":{"start":{"line":270,"column":4},"end":{"line":270,"column":28}},"id":261},"262":{"loc":{"start":{"line":270,"column":13},"end":{"line":270,"column":27}},"id":262},"263":{"loc":{"start":{"line":271,"column":4},"end":{"line":271,"column":28}},"id":263},"264":{"loc":{"start":{"line":271,"column":13},"end":{"line":271,"column":27}},"id":264},"265":{"loc":{"start":{"line":272,"column":4},"end":{"line":272,"column":25}},"id":265},"266":{"loc":{"start":{"line":272,"column":15},"end":{"line":272,"column":24}},"id":266},"267":{"loc":{"start":{"line":274,"column":8},"end":{"line":281,"column":11}},"id":267},"268":{"loc":{"start":{"line":274,"column":8},"end":{"line":281,"column":10}},"id":268},"269":{"loc":{"start":{"line":276,"column":16},"end":{"line":276,"column":128}},"id":269},"270":{"loc":{"start":{"line":276,"column":32},"end":{"line":276,"column":127}},"id":270},"271":{"loc":{"start":{"line":276,"column":32},"end":{"line":276,"column":111}},"id":271},"272":{"loc":{"start":{"line":276,"column":32},"end":{"line":276,"column":104}},"id":272},"273":{"loc":{"start":{"line":276,"column":32},"end":{"line":276,"column":79}},"id":273},"274":{"loc":{"start":{"line":276,"column":32},"end":{"line":276,"column":70}},"id":274},"275":{"loc":{"start":{"line":276,"column":48},"end":{"line":276,"column":70}},"id":275},"276":{"loc":{"start":{"line":276,"column":82},"end":{"line":276,"column":104}},"id":276},"277":{"loc":{"start":{"line":277,"column":16},"end":{"line":277,"column":35}},"id":277},"278":{"loc":{"start":{"line":277,"column":16},"end":{"line":277,"column":34}},"id":278},"279":{"loc":{"start":{"line":279,"column":16},"end":{"line":279,"column":31}},"id":279},"280":{"loc":{"start":{"line":279,"column":16},"end":{"line":279,"column":30}},"id":280},"281":{"loc":{"start":{"line":283,"column":8},"end":{"line":283,"column":27}},"id":281},"282":{"loc":{"start":{"line":283,"column":8},"end":{"line":283,"column":26}},"id":282},"283":{"loc":{"start":{"line":285,"column":4},"end":{"line":285,"column":24}},"id":283},"284":{"loc":{"start":{"line":290,"column":0},"end":{"line":294,"column":2}},"id":284},"285":{"loc":{"start":{"line":296,"column":0},"end":{"line":317,"column":2}},"id":285},"286":{"loc":{"start":{"line":297,"column":9},"end":{"line":297,"column":39}},"id":286},"287":{"loc":{"start":{"line":298,"column":8},"end":{"line":298,"column":152}},"id":287},"288":{"loc":{"start":{"line":298,"column":8},"end":{"line":298,"column":151}},"id":288},"289":{"loc":{"start":{"line":300,"column":4},"end":{"line":300,"column":27}},"id":289},"290":{"loc":{"start":{"line":301,"column":4},"end":{"line":301,"column":28}},"id":290},"291":{"loc":{"start":{"line":301,"column":13},"end":{"line":301,"column":27}},"id":291},"292":{"loc":{"start":{"line":302,"column":4},"end":{"line":302,"column":32}},"id":292},"293":{"loc":{"start":{"line":302,"column":15},"end":{"line":302,"column":31}},"id":293},"294":{"loc":{"start":{"line":303,"column":4},"end":{"line":303,"column":25}},"id":294},"295":{"loc":{"start":{"line":303,"column":15},"end":{"line":303,"column":24}},"id":295},"296":{"loc":{"start":{"line":305,"column":8},"end":{"line":312,"column":11}},"id":296},"297":{"loc":{"start":{"line":305,"column":8},"end":{"line":312,"column":10}},"id":297},"298":{"loc":{"start":{"line":305,"column":37},"end":{"line":305,"column":51}},"id":298},"299":{"loc":{"start":{"line":307,"column":16},"end":{"line":307,"column":163}},"id":299},"300":{"loc":{"start":{"line":307,"column":32},"end":{"line":307,"column":162}},"id":300},"301":{"loc":{"start":{"line":307,"column":32},"end":{"line":307,"column":146}},"id":301},"302":{"loc":{"start":{"line":307,"column":32},"end":{"line":307,"column":139}},"id":302},"303":{"loc":{"start":{"line":307,"column":32},"end":{"line":307,"column":112}},"id":303},"304":{"loc":{"start":{"line":307,"column":32},"end":{"line":307,"column":85}},"id":304},"305":{"loc":{"start":{"line":307,"column":63},"end":{"line":307,"column":85}},"id":305},"306":{"loc":{"start":{"line":307,"column":115},"end":{"line":307,"column":139}},"id":306},"307":{"loc":{"start":{"line":308,"column":16},"end":{"line":308,"column":35}},"id":307},"308":{"loc":{"start":{"line":308,"column":16},"end":{"line":308,"column":34}},"id":308},"309":{"loc":{"start":{"line":310,"column":16},"end":{"line":310,"column":31}},"id":309},"310":{"loc":{"start":{"line":310,"column":16},"end":{"line":310,"column":30}},"id":310},"311":{"loc":{"start":{"line":314,"column":8},"end":{"line":314,"column":27}},"id":311},"312":{"loc":{"start":{"line":314,"column":8},"end":{"line":314,"column":26}},"id":312},"313":{"loc":{"start":{"line":316,"column":4},"end":{"line":316,"column":24}},"id":313},"314":{"loc":{"start":{"line":319,"column":0},"end":{"line":335,"column":2}},"id":314},"315":{"loc":{"start":{"line":320,"column":4},"end":{"line":320,"column":24}},"id":315},"316":{"loc":{"start":{"line":320,"column":11},"end":{"line":320,"column":23}},"id":316},"317":{"loc":{"start":{"line":321,"column":4},"end":{"line":321,"column":25}},"id":317},"318":{"loc":{"start":{"line":321,"column":15},"end":{"line":321,"column":24}},"id":318},"319":{"loc":{"start":{"line":323,"column":8},"end":{"line":330,"column":11}},"id":319},"320":{"loc":{"start":{"line":323,"column":8},"end":{"line":330,"column":10}},"id":320},"321":{"loc":{"start":{"line":325,"column":16},"end":{"line":325,"column":185}},"id":321},"322":{"loc":{"start":{"line":325,"column":32},"end":{"line":325,"column":184}},"id":322},"323":{"loc":{"start":{"line":325,"column":32},"end":{"line":325,"column":168}},"id":323},"324":{"loc":{"start":{"line":325,"column":32},"end":{"line":325,"column":161}},"id":324},"325":{"loc":{"start":{"line":325,"column":32},"end":{"line":325,"column":139}},"id":325},"326":{"loc":{"start":{"line":325,"column":32},"end":{"line":325,"column":123}},"id":326},"327":{"loc":{"start":{"line":325,"column":32},"end":{"line":325,"column":101}},"id":327},"328":{"loc":{"start":{"line":325,"column":32},"end":{"line":325,"column":87}},"id":328},"329":{"loc":{"start":{"line":325,"column":67},"end":{"line":325,"column":87}},"id":329},"330":{"loc":{"start":{"line":325,"column":104},"end":{"line":325,"column":123}},"id":330},"331":{"loc":{"start":{"line":325,"column":142},"end":{"line":325,"column":161}},"id":331},"332":{"loc":{"start":{"line":326,"column":16},"end":{"line":326,"column":35}},"id":332},"333":{"loc":{"start":{"line":326,"column":16},"end":{"line":326,"column":34}},"id":333},"334":{"loc":{"start":{"line":328,"column":16},"end":{"line":328,"column":31}},"id":334},"335":{"loc":{"start":{"line":328,"column":16},"end":{"line":328,"column":30}},"id":335},"336":{"loc":{"start":{"line":332,"column":8},"end":{"line":332,"column":27}},"id":336},"337":{"loc":{"start":{"line":332,"column":8},"end":{"line":332,"column":26}},"id":337},"338":{"loc":{"start":{"line":334,"column":4},"end":{"line":334,"column":24}},"id":338},"339":{"loc":{"start":{"line":337,"column":0},"end":{"line":354,"column":2}},"id":339},"340":{"loc":{"start":{"line":338,"column":4},"end":{"line":338,"column":24}},"id":340},"341":{"loc":{"start":{"line":338,"column":11},"end":{"line":338,"column":23}},"id":341},"342":{"loc":{"start":{"line":339,"column":4},"end":{"line":339,"column":24}},"id":342},"343":{"loc":{"start":{"line":339,"column":11},"end":{"line":339,"column":23}},"id":343},"344":{"loc":{"start":{"line":340,"column":4},"end":{"line":340,"column":25}},"id":344},"345":{"loc":{"start":{"line":340,"column":15},"end":{"line":340,"column":24}},"id":345},"346":{"loc":{"start":{"line":342,"column":8},"end":{"line":349,"column":11}},"id":346},"347":{"loc":{"start":{"line":342,"column":8},"end":{"line":349,"column":10}},"id":347},"348":{"loc":{"start":{"line":344,"column":16},"end":{"line":344,"column":165}},"id":348},"349":{"loc":{"start":{"line":344,"column":32},"end":{"line":344,"column":164}},"id":349},"350":{"loc":{"start":{"line":344,"column":32},"end":{"line":344,"column":148}},"id":350},"351":{"loc":{"start":{"line":344,"column":32},"end":{"line":344,"column":141}},"id":351},"352":{"loc":{"start":{"line":344,"column":32},"end":{"line":344,"column":122}},"id":352},"353":{"loc":{"start":{"line":344,"column":32},"end":{"line":344,"column":98}},"id":353},"354":{"loc":{"start":{"line":344,"column":78},"end":{"line":344,"column":98}},"id":354},"355":{"loc":{"start":{"line":344,"column":125},"end":{"line":344,"column":141}},"id":355},"356":{"loc":{"start":{"line":345,"column":16},"end":{"line":345,"column":35}},"id":356},"357":{"loc":{"start":{"line":345,"column":16},"end":{"line":345,"column":34}},"id":357},"358":{"loc":{"start":{"line":347,"column":16},"end":{"line":347,"column":31}},"id":358},"359":{"loc":{"start":{"line":347,"column":16},"end":{"line":347,"column":30}},"id":359},"360":{"loc":{"start":{"line":351,"column":8},"end":{"line":351,"column":27}},"id":360},"361":{"loc":{"start":{"line":351,"column":8},"end":{"line":351,"column":26}},"id":361},"362":{"loc":{"start":{"line":353,"column":4},"end":{"line":353,"column":24}},"id":362},"363":{"loc":{"start":{"line":356,"column":0},"end":{"line":367,"column":2}},"id":363},"364":{"loc":{"start":{"line":357,"column":4},"end":{"line":357,"column":27}},"id":364},"365":{"loc":{"start":{"line":357,"column":17},"end":{"line":357,"column":26}},"id":365},"366":{"loc":{"start":{"line":358,"column":4},"end":{"line":365,"column":7}},"id":366},"367":{"loc":{"start":{"line":358,"column":4},"end":{"line":365,"column":6}},"id":367},"368":{"loc":{"start":{"line":360,"column":12},"end":{"line":360,"column":126}},"id":368},"369":{"loc":{"start":{"line":360,"column":28},"end":{"line":360,"column":125}},"id":369},"370":{"loc":{"start":{"line":360,"column":28},"end":{"line":360,"column":109}},"id":370},"371":{"loc":{"start":{"line":360,"column":28},"end":{"line":360,"column":81}},"id":371},"372":{"loc":{"start":{"line":360,"column":61},"end":{"line":360,"column":81}},"id":372},"373":{"loc":{"start":{"line":361,"column":12},"end":{"line":361,"column":33}},"id":373},"374":{"loc":{"start":{"line":361,"column":12},"end":{"line":361,"column":32}},"id":374},"375":{"loc":{"start":{"line":363,"column":12},"end":{"line":363,"column":42}},"id":375},"376":{"loc":{"start":{"line":363,"column":12},"end":{"line":363,"column":41}},"id":376},"377":{"loc":{"start":{"line":366,"column":4},"end":{"line":366,"column":26}},"id":377},"378":{"loc":{"start":{"line":369,"column":0},"end":{"line":380,"column":2}},"id":378},"379":{"loc":{"start":{"line":370,"column":4},"end":{"line":370,"column":27}},"id":379},"380":{"loc":{"start":{"line":370,"column":17},"end":{"line":370,"column":26}},"id":380},"381":{"loc":{"start":{"line":371,"column":4},"end":{"line":378,"column":7}},"id":381},"382":{"loc":{"start":{"line":371,"column":4},"end":{"line":378,"column":6}},"id":382},"383":{"loc":{"start":{"line":373,"column":12},"end":{"line":373,"column":118}},"id":383},"384":{"loc":{"start":{"line":373,"column":28},"end":{"line":373,"column":117}},"id":384},"385":{"loc":{"start":{"line":373,"column":28},"end":{"line":373,"column":101}},"id":385},"386":{"loc":{"start":{"line":373,"column":28},"end":{"line":373,"column":73}},"id":386},"387":{"loc":{"start":{"line":373,"column":53},"end":{"line":373,"column":73}},"id":387},"388":{"loc":{"start":{"line":374,"column":12},"end":{"line":374,"column":33}},"id":388},"389":{"loc":{"start":{"line":374,"column":12},"end":{"line":374,"column":32}},"id":389},"390":{"loc":{"start":{"line":376,"column":12},"end":{"line":376,"column":33}},"id":390},"391":{"loc":{"start":{"line":376,"column":12},"end":{"line":376,"column":32}},"id":391},"392":{"loc":{"start":{"line":379,"column":4},"end":{"line":379,"column":26}},"id":392},"393":{"loc":{"start":{"line":382,"column":0},"end":{"line":384,"column":2}},"id":393},"394":{"loc":{"start":{"line":383,"column":4},"end":{"line":383,"column":33}},"id":394},"395":{"loc":{"start":{"line":383,"column":11},"end":{"line":383,"column":32}},"id":395}}}},"/Users/kris/q-io/reader.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":53},"4":{"index":4,"count":53},"5":{"index":5,"count":53},"6":{"index":6,"count":5},"7":{"index":7,"count":5},"8":{"index":8,"count":53},"9":{"index":9,"count":53},"10":{"index":10,"count":53},"11":{"index":11,"count":53},"12":{"index":12,"count":53},"13":{"index":13,"count":53},"16":{"index":16,"count":53},"17":{"index":17,"count":53},"18":{"index":18,"count":53},"19":{"index":19,"count":53},"20":{"index":20,"count":53},"21":{"index":21,"count":53},"22":{"index":22,"count":53},"23":{"index":23,"count":53},"24":{"index":24,"count":53},"25":{"index":25,"count":53},"26":{"index":26,"count":54},"27":{"index":27,"count":54},"30":{"index":30,"count":54},"31":{"index":31,"count":54},"32":{"index":32,"count":42},"33":{"index":33,"count":5},"34":{"index":34,"count":5},"35":{"index":35,"count":37},"36":{"index":36,"count":37},"37":{"index":37,"count":42},"38":{"index":38,"count":42},"39":{"index":39,"count":42},"40":{"index":40,"count":53},"41":{"index":41,"count":40},"42":{"index":42,"count":40},"43":{"index":43,"count":40},"44":{"index":44,"count":40},"45":{"index":45,"count":40},"46":{"index":46,"count":40},"47":{"index":47,"count":40},"48":{"index":48,"count":40},"49":{"index":49,"count":40},"50":{"index":50,"count":53},"51":{"index":51,"count":3},"52":{"index":52,"count":2},"53":{"index":53,"count":2},"54":{"index":54,"count":2},"55":{"index":55,"count":3},"56":{"index":56,"count":3},"57":{"index":57,"count":3},"58":{"index":58,"count":3},"59":{"index":59,"count":53},"62":{"index":62,"count":53},"63":{"index":63,"count":1},"73":{"index":73,"count":1},"74":{"index":74,"count":66},"75":{"index":75,"count":66},"76":{"index":76,"count":66},"77":{"index":77,"count":66},"78":{"index":78,"count":66},"79":{"index":79,"count":66},"80":{"index":80,"count":133},"81":{"index":81,"count":67},"82":{"index":82,"count":67},"83":{"index":83,"count":67},"84":{"index":84,"count":66},"85":{"index":85,"count":66},"86":{"index":86,"count":133},"87":{"index":87,"count":67},"88":{"index":88,"count":67},"89":{"index":89,"count":67},"90":{"index":90,"count":67},"91":{"index":91,"count":67},"92":{"index":92,"count":66},"93":{"index":93,"count":66},"94":{"index":94,"count":66}},"blocks":{"0":{"index":0,"count":53},"1":{"index":1,"count":5},"3":{"index":3,"count":53},"4":{"index":4,"count":54},"6":{"index":6,"count":54},"7":{"index":7,"count":42},"8":{"index":8,"count":5},"9":{"index":9,"count":37},"10":{"index":10,"count":40},"11":{"index":11,"count":40},"12":{"index":12,"count":3},"13":{"index":13,"count":2},"14":{"index":14,"count":3},"20":{"index":20,"count":66},"21":{"index":21,"count":67},"22":{"index":22,"count":67}},"hash":"24c2b103d427c684f91c5cc6d3968af8","instrumentor":{"blockCounter":23,"nodeCounter":95,"source":"var Q = require(\"q\");\n\n/**\n * Wraps a Node readable stream, providing an API similar\n * to a Narwhal synchronous `io` stream except returning\n * Q promises for long latency operations.\n * @param stream any Node readable stream\n * @returns {Promise * Reader} a promise for\n * the text stream reader.\n * @constructor\n */\nmodule.exports = Reader;\nfunction Reader(_stream, charset) {\n    var self = Object.create(Reader.prototype);\n\n    if (charset && _stream.setEncoding) // TODO complain about inconsistency\n        _stream.setEncoding(charset);\n\n    var begin = Q.defer();\n    var end = Q.defer();\n\n    _stream.on(\"error\", function (reason) {\n        begin.reject(reason);\n    });\n\n    var chunks = [];\n    var receiver;\n\n    _stream.on(\"end\", function () {\n        begin.resolve(self);\n        end.resolve()\n    });\n\n    _stream.on(\"data\", function (chunk) {\n        begin.resolve(self);\n        if (receiver) {\n            receiver(chunk);\n        } else {\n            chunks.push(chunk);\n        }\n    });\n\n    function slurp() {\n        var result;\n        if (charset) {\n            result = chunks.join(\"\");\n        } else {\n            result = self.constructor.join(chunks);\n        }\n        chunks.splice(0, chunks.length);\n        return result;\n    }\n\n    /***\n     * Reads all of the remaining data from the stream.\n     * @returns {Promise * String} a promise for a String\n     * containing the entirety the remaining stream.\n     */\n    self.read = function () {\n        receiver = undefined;\n        var deferred = Q.defer();\n        Q.done(end.promise, function () {\n            deferred.resolve(slurp());\n        });\n        return deferred.promise;\n    };\n\n    /***\n     * Reads and writes all of the remaining data from the\n     * stream in chunks.\n     * @param {Function(Promise * String)} write a function\n     * to be called on each chunk of input from this stream.\n     * @returns {Promise * Undefined} a promise that will\n     * be resolved when the input is depleted.\n     */\n    self.forEach = function (write) {\n        if (chunks && chunks.length)\n            write(slurp());\n        receiver = write;\n        return Q.when(end.promise, function () {\n            receiver = undefined;\n        });\n    };\n\n    self.close = function () {\n        _stream.destroy();\n    };\n\n    return begin.promise;\n}\n\n/*\n    Reads an entire forEachable stream of buffers and returns a single buffer.\n*/\nReader.read = read;\nfunction read(stream, charset) {\n    var chunks = [];\n    stream.forEach(function (chunk) {\n        chunks.push(chunk);\n    });\n    if (charset) {\n        return chunks.join(\"\");\n    } else {\n        return join(chunks);\n    }\n}\n\nReader.join = join;\nfunction join(buffers) {\n    var length = 0;\n    var at;\n    var i;\n    var ii = buffers.length;\n    var buffer;\n    var result;\n    for (i = 0; i < ii; i++) {\n        buffer = buffers[i];\n        length += buffer.length;\n    }\n    result = new Buffer(length);\n    at = 0;\n    for (i = 0; i < ii; i++) {\n        buffer = buffers[i];\n        buffer.copy(result, at, 0);\n        at += buffer.length;\n    }\n    buffers.splice(0, ii, result);\n    return result;\n}","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":21}},"id":0},"1":{"loc":{"start":{"line":1,"column":8},"end":{"line":1,"column":20}},"id":1},"2":{"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":24}},"id":2},"3":{"loc":{"start":{"line":14,"column":4},"end":{"line":14,"column":47}},"id":3},"4":{"loc":{"start":{"line":14,"column":15},"end":{"line":14,"column":46}},"id":4},"5":{"loc":{"start":{"line":16,"column":8},"end":{"line":16,"column":38}},"id":5},"6":{"loc":{"start":{"line":17,"column":8},"end":{"line":17,"column":37}},"id":6},"7":{"loc":{"start":{"line":17,"column":8},"end":{"line":17,"column":36}},"id":7},"8":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":26}},"id":8},"9":{"loc":{"start":{"line":19,"column":16},"end":{"line":19,"column":25}},"id":9},"10":{"loc":{"start":{"line":20,"column":4},"end":{"line":20,"column":24}},"id":10},"11":{"loc":{"start":{"line":20,"column":14},"end":{"line":20,"column":23}},"id":11},"12":{"loc":{"start":{"line":22,"column":4},"end":{"line":24,"column":7}},"id":12},"13":{"loc":{"start":{"line":22,"column":4},"end":{"line":24,"column":6}},"id":13},"14":{"loc":{"start":{"line":23,"column":8},"end":{"line":23,"column":29}},"id":14},"15":{"loc":{"start":{"line":23,"column":8},"end":{"line":23,"column":28}},"id":15},"16":{"loc":{"start":{"line":26,"column":4},"end":{"line":26,"column":20}},"id":16},"17":{"loc":{"start":{"line":27,"column":4},"end":{"line":27,"column":17}},"id":17},"18":{"loc":{"start":{"line":29,"column":4},"end":{"line":32,"column":7}},"id":18},"19":{"loc":{"start":{"line":29,"column":4},"end":{"line":32,"column":6}},"id":19},"20":{"loc":{"start":{"line":30,"column":8},"end":{"line":30,"column":28}},"id":20},"21":{"loc":{"start":{"line":30,"column":8},"end":{"line":30,"column":27}},"id":21},"22":{"loc":{"start":{"line":31,"column":8},"end":{"line":32,"column":4}},"id":22},"23":{"loc":{"start":{"line":31,"column":8},"end":{"line":31,"column":21}},"id":23},"24":{"loc":{"start":{"line":34,"column":4},"end":{"line":41,"column":7}},"id":24},"25":{"loc":{"start":{"line":34,"column":4},"end":{"line":41,"column":6}},"id":25},"26":{"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":28}},"id":26},"27":{"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":27}},"id":27},"28":{"loc":{"start":{"line":37,"column":12},"end":{"line":37,"column":28}},"id":28},"29":{"loc":{"start":{"line":37,"column":12},"end":{"line":37,"column":27}},"id":29},"30":{"loc":{"start":{"line":39,"column":12},"end":{"line":39,"column":31}},"id":30},"31":{"loc":{"start":{"line":39,"column":12},"end":{"line":39,"column":30}},"id":31},"32":{"loc":{"start":{"line":44,"column":8},"end":{"line":44,"column":19}},"id":32},"33":{"loc":{"start":{"line":46,"column":12},"end":{"line":46,"column":37}},"id":33},"34":{"loc":{"start":{"line":46,"column":21},"end":{"line":46,"column":36}},"id":34},"35":{"loc":{"start":{"line":48,"column":12},"end":{"line":48,"column":51}},"id":35},"36":{"loc":{"start":{"line":48,"column":21},"end":{"line":48,"column":50}},"id":36},"37":{"loc":{"start":{"line":50,"column":8},"end":{"line":50,"column":40}},"id":37},"38":{"loc":{"start":{"line":50,"column":8},"end":{"line":50,"column":39}},"id":38},"39":{"loc":{"start":{"line":51,"column":8},"end":{"line":51,"column":22}},"id":39},"40":{"loc":{"start":{"line":59,"column":4},"end":{"line":66,"column":6}},"id":40},"41":{"loc":{"start":{"line":60,"column":8},"end":{"line":60,"column":29}},"id":41},"42":{"loc":{"start":{"line":61,"column":8},"end":{"line":61,"column":33}},"id":42},"43":{"loc":{"start":{"line":61,"column":23},"end":{"line":61,"column":32}},"id":43},"44":{"loc":{"start":{"line":62,"column":8},"end":{"line":64,"column":11}},"id":44},"45":{"loc":{"start":{"line":62,"column":8},"end":{"line":64,"column":10}},"id":45},"46":{"loc":{"start":{"line":63,"column":12},"end":{"line":63,"column":38}},"id":46},"47":{"loc":{"start":{"line":63,"column":12},"end":{"line":63,"column":37}},"id":47},"48":{"loc":{"start":{"line":63,"column":29},"end":{"line":63,"column":36}},"id":48},"49":{"loc":{"start":{"line":65,"column":8},"end":{"line":65,"column":32}},"id":49},"50":{"loc":{"start":{"line":76,"column":4},"end":{"line":83,"column":6}},"id":50},"51":{"loc":{"start":{"line":77,"column":12},"end":{"line":77,"column":35}},"id":51},"52":{"loc":{"start":{"line":78,"column":12},"end":{"line":78,"column":27}},"id":52},"53":{"loc":{"start":{"line":78,"column":12},"end":{"line":78,"column":26}},"id":53},"54":{"loc":{"start":{"line":78,"column":18},"end":{"line":78,"column":25}},"id":54},"55":{"loc":{"start":{"line":79,"column":8},"end":{"line":79,"column":25}},"id":55},"56":{"loc":{"start":{"line":80,"column":8},"end":{"line":82,"column":11}},"id":56},"57":{"loc":{"start":{"line":80,"column":15},"end":{"line":82,"column":10}},"id":57},"58":{"loc":{"start":{"line":81,"column":12},"end":{"line":81,"column":33}},"id":58},"59":{"loc":{"start":{"line":85,"column":4},"end":{"line":87,"column":6}},"id":59},"60":{"loc":{"start":{"line":86,"column":8},"end":{"line":86,"column":26}},"id":60},"61":{"loc":{"start":{"line":86,"column":8},"end":{"line":86,"column":25}},"id":61},"62":{"loc":{"start":{"line":89,"column":4},"end":{"line":89,"column":25}},"id":62},"63":{"loc":{"start":{"line":95,"column":0},"end":{"line":95,"column":19}},"id":63},"64":{"loc":{"start":{"line":97,"column":4},"end":{"line":97,"column":20}},"id":64},"65":{"loc":{"start":{"line":98,"column":4},"end":{"line":100,"column":7}},"id":65},"66":{"loc":{"start":{"line":98,"column":4},"end":{"line":100,"column":6}},"id":66},"67":{"loc":{"start":{"line":99,"column":8},"end":{"line":99,"column":27}},"id":67},"68":{"loc":{"start":{"line":99,"column":8},"end":{"line":99,"column":26}},"id":68},"69":{"loc":{"start":{"line":102,"column":8},"end":{"line":102,"column":31}},"id":69},"70":{"loc":{"start":{"line":102,"column":15},"end":{"line":102,"column":30}},"id":70},"71":{"loc":{"start":{"line":104,"column":8},"end":{"line":104,"column":28}},"id":71},"72":{"loc":{"start":{"line":104,"column":15},"end":{"line":104,"column":27}},"id":72},"73":{"loc":{"start":{"line":108,"column":0},"end":{"line":108,"column":19}},"id":73},"74":{"loc":{"start":{"line":110,"column":4},"end":{"line":110,"column":19}},"id":74},"75":{"loc":{"start":{"line":111,"column":4},"end":{"line":111,"column":11}},"id":75},"76":{"loc":{"start":{"line":112,"column":4},"end":{"line":112,"column":10}},"id":76},"77":{"loc":{"start":{"line":113,"column":4},"end":{"line":113,"column":28}},"id":77},"78":{"loc":{"start":{"line":114,"column":4},"end":{"line":114,"column":15}},"id":78},"79":{"loc":{"start":{"line":115,"column":4},"end":{"line":115,"column":15}},"id":79},"80":{"loc":{"start":{"line":116,"column":16},"end":{"line":116,"column":22}},"id":80},"81":{"loc":{"start":{"line":116,"column":24},"end":{"line":116,"column":27}},"id":81},"82":{"loc":{"start":{"line":117,"column":8},"end":{"line":117,"column":28}},"id":82},"83":{"loc":{"start":{"line":118,"column":8},"end":{"line":118,"column":32}},"id":83},"84":{"loc":{"start":{"line":120,"column":4},"end":{"line":120,"column":32}},"id":84},"85":{"loc":{"start":{"line":121,"column":4},"end":{"line":121,"column":11}},"id":85},"86":{"loc":{"start":{"line":122,"column":16},"end":{"line":122,"column":22}},"id":86},"87":{"loc":{"start":{"line":122,"column":24},"end":{"line":122,"column":27}},"id":87},"88":{"loc":{"start":{"line":123,"column":8},"end":{"line":123,"column":28}},"id":88},"89":{"loc":{"start":{"line":124,"column":8},"end":{"line":124,"column":35}},"id":89},"90":{"loc":{"start":{"line":124,"column":8},"end":{"line":124,"column":34}},"id":90},"91":{"loc":{"start":{"line":125,"column":8},"end":{"line":125,"column":28}},"id":91},"92":{"loc":{"start":{"line":127,"column":4},"end":{"line":127,"column":34}},"id":92},"93":{"loc":{"start":{"line":127,"column":4},"end":{"line":127,"column":33}},"id":93},"94":{"loc":{"start":{"line":128,"column":4},"end":{"line":128,"column":18}},"id":94}}}},"/Users/kris/q-io/writer.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"32":{"index":32,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"38":{"index":38,"count":1},"39":{"index":39,"count":1},"40":{"index":40,"count":1},"41":{"index":41,"count":1},"42":{"index":42,"count":1},"43":{"index":43,"count":1},"44":{"index":44,"count":1},"45":{"index":45,"count":1},"52":{"index":52,"count":1},"53":{"index":53,"count":1}},"blocks":{"0":{"index":0,"count":1},"4":{"index":4,"count":1},"8":{"index":8,"count":1},"10":{"index":10,"count":1}},"hash":"9b9069a93531cd756b09d565776ec317","instrumentor":{"blockCounter":12,"nodeCounter":54,"source":"var Q = require(\"q\");\n\n/**\n * Wraps a Node writable stream, providing an API similar to\n * Narwhal's synchronous `io` streams, except returning and\n * accepting promises for long-latency operations.\n *\n * @param stream any Node writable stream\n * @returns {Promise * Writer} a promise for the\n * text writer.\n */\nmodule.exports = Writer;\nfunction Writer(_stream, charset) {\n    var self = Object.create(Writer.prototype);\n\n    if (charset && _stream.setEncoding) // TODO complain about inconsistency\n        _stream.setEncoding(charset);\n\n    var begin = Q.defer();\n    var drained = Q.defer();\n\n    _stream.on(\"error\", function (reason) {\n        begin.reject(reason);\n    });\n\n    _stream.on(\"drain\", function () {\n        begin.resolve(self);\n        drained.resolve();\n        drained = Q.defer();\n    });\n\n    /***\n     * Writes content to the stream.\n     * @param {String} content\n     * @returns {Promise * Undefined} a promise that will\n     * be resolved when the buffer is empty, meaning\n     * that all of the content has been sent.\n     */\n    self.write = function (content) {\n        if (!_stream.writeable && !_stream.writable)\n            return Q.reject(new Error(\"Can't write to non-writable (possibly closed) stream\"));\n        if (_stream.encoding == \"binary\" && !(content instanceof Buffer)) {\n            content = new Buffer(content);\n        }\n        if (!_stream.write(content)) {\n            return drained.promise;\n        } else {\n            return Q.resolve();\n        }\n    };\n\n    /***\n     * Waits for all data to flush on the stream.\n     *\n     * @returns {Promise * Undefined} a promise that will\n     * be resolved when the buffer is empty\n     */\n    self.flush = function () {\n        return drained.promise;\n    };\n\n    /***\n     * Closes the stream, waiting for the internal buffer\n     * to flush.\n     *\n     * @returns {Promise * Undefined} a promise that will\n     * be resolved when the stream has finished writing,\n     * flushing, and closed.\n     */\n    self.close = function () {\n        _stream.end();\n        drained.resolve(); // we will get no further drain events\n        return Q.resolve(); // closing not explicitly observable\n    };\n\n    /***\n     * Terminates writing on a stream, closing before\n     * the internal buffer drains.\n     *\n     * @returns {Promise * Undefined} a promise that will\n     * be resolved when the stream has finished closing.\n     */\n    self.destroy = function () {\n        _stream.destroy();\n        drained.resolve(); // we will get no further drain events\n        return Q.resolve(); // destruction not explicitly observable\n    };\n\n    return Q.resolve(self); // todo returns the begin.promise\n}","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":21}},"id":0},"1":{"loc":{"start":{"line":1,"column":8},"end":{"line":1,"column":20}},"id":1},"2":{"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":24}},"id":2},"3":{"loc":{"start":{"line":14,"column":4},"end":{"line":14,"column":47}},"id":3},"4":{"loc":{"start":{"line":14,"column":15},"end":{"line":14,"column":46}},"id":4},"5":{"loc":{"start":{"line":16,"column":8},"end":{"line":16,"column":38}},"id":5},"6":{"loc":{"start":{"line":17,"column":8},"end":{"line":17,"column":37}},"id":6},"7":{"loc":{"start":{"line":17,"column":8},"end":{"line":17,"column":36}},"id":7},"8":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":26}},"id":8},"9":{"loc":{"start":{"line":19,"column":16},"end":{"line":19,"column":25}},"id":9},"10":{"loc":{"start":{"line":20,"column":4},"end":{"line":20,"column":28}},"id":10},"11":{"loc":{"start":{"line":20,"column":18},"end":{"line":20,"column":27}},"id":11},"12":{"loc":{"start":{"line":22,"column":4},"end":{"line":24,"column":7}},"id":12},"13":{"loc":{"start":{"line":22,"column":4},"end":{"line":24,"column":6}},"id":13},"14":{"loc":{"start":{"line":23,"column":8},"end":{"line":23,"column":29}},"id":14},"15":{"loc":{"start":{"line":23,"column":8},"end":{"line":23,"column":28}},"id":15},"16":{"loc":{"start":{"line":26,"column":4},"end":{"line":30,"column":7}},"id":16},"17":{"loc":{"start":{"line":26,"column":4},"end":{"line":30,"column":6}},"id":17},"18":{"loc":{"start":{"line":27,"column":8},"end":{"line":27,"column":28}},"id":18},"19":{"loc":{"start":{"line":27,"column":8},"end":{"line":27,"column":27}},"id":19},"20":{"loc":{"start":{"line":28,"column":8},"end":{"line":28,"column":26}},"id":20},"21":{"loc":{"start":{"line":28,"column":8},"end":{"line":28,"column":25}},"id":21},"22":{"loc":{"start":{"line":29,"column":8},"end":{"line":29,"column":28}},"id":22},"23":{"loc":{"start":{"line":29,"column":18},"end":{"line":29,"column":27}},"id":23},"24":{"loc":{"start":{"line":39,"column":4},"end":{"line":50,"column":6}},"id":24},"25":{"loc":{"start":{"line":40,"column":12},"end":{"line":40,"column":51}},"id":25},"26":{"loc":{"start":{"line":41,"column":12},"end":{"line":41,"column":95}},"id":26},"27":{"loc":{"start":{"line":41,"column":19},"end":{"line":41,"column":94}},"id":27},"28":{"loc":{"start":{"line":42,"column":12},"end":{"line":42,"column":72}},"id":28},"29":{"loc":{"start":{"line":42,"column":12},"end":{"line":42,"column":40}},"id":29},"30":{"loc":{"start":{"line":42,"column":45},"end":{"line":42,"column":72}},"id":30},"31":{"loc":{"start":{"line":43,"column":12},"end":{"line":43,"column":42}},"id":31},"32":{"loc":{"start":{"line":45,"column":13},"end":{"line":45,"column":35}},"id":32},"33":{"loc":{"start":{"line":46,"column":12},"end":{"line":46,"column":35}},"id":33},"34":{"loc":{"start":{"line":48,"column":12},"end":{"line":48,"column":31}},"id":34},"35":{"loc":{"start":{"line":48,"column":19},"end":{"line":48,"column":30}},"id":35},"36":{"loc":{"start":{"line":58,"column":4},"end":{"line":60,"column":6}},"id":36},"37":{"loc":{"start":{"line":59,"column":8},"end":{"line":59,"column":31}},"id":37},"38":{"loc":{"start":{"line":70,"column":4},"end":{"line":74,"column":6}},"id":38},"39":{"loc":{"start":{"line":71,"column":8},"end":{"line":71,"column":22}},"id":39},"40":{"loc":{"start":{"line":71,"column":8},"end":{"line":71,"column":21}},"id":40},"41":{"loc":{"start":{"line":72,"column":8},"end":{"line":72,"column":26}},"id":41},"42":{"loc":{"start":{"line":72,"column":8},"end":{"line":72,"column":25}},"id":42},"43":{"loc":{"start":{"line":73,"column":8},"end":{"line":73,"column":27}},"id":43},"44":{"loc":{"start":{"line":73,"column":15},"end":{"line":73,"column":26}},"id":44},"45":{"loc":{"start":{"line":83,"column":4},"end":{"line":87,"column":6}},"id":45},"46":{"loc":{"start":{"line":84,"column":8},"end":{"line":84,"column":26}},"id":46},"47":{"loc":{"start":{"line":84,"column":8},"end":{"line":84,"column":25}},"id":47},"48":{"loc":{"start":{"line":85,"column":8},"end":{"line":85,"column":26}},"id":48},"49":{"loc":{"start":{"line":85,"column":8},"end":{"line":85,"column":25}},"id":49},"50":{"loc":{"start":{"line":86,"column":8},"end":{"line":86,"column":27}},"id":50},"51":{"loc":{"start":{"line":86,"column":15},"end":{"line":86,"column":26}},"id":51},"52":{"loc":{"start":{"line":89,"column":4},"end":{"line":89,"column":27}},"id":52},"53":{"loc":{"start":{"line":89,"column":11},"end":{"line":89,"column":26}},"id":53}}}},"/Users/kris/q-io/fs-common.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":140},"10":{"index":10,"count":140},"11":{"index":11,"count":1},"12":{"index":12,"count":465},"13":{"index":13,"count":31},"14":{"index":14,"count":58},"15":{"index":15,"count":1},"16":{"index":16,"count":57},"17":{"index":17,"count":57},"18":{"index":18,"count":57},"19":{"index":19,"count":57},"20":{"index":20,"count":58},"21":{"index":21,"count":58},"22":{"index":22,"count":58},"23":{"index":23,"count":58},"24":{"index":24,"count":58},"25":{"index":25,"count":58},"26":{"index":26,"count":58},"27":{"index":27,"count":58},"28":{"index":28,"count":58},"37":{"index":37,"count":31},"38":{"index":38,"count":7},"39":{"index":39,"count":7},"40":{"index":40,"count":1},"41":{"index":41,"count":6},"42":{"index":42,"count":6},"43":{"index":43,"count":6},"44":{"index":44,"count":6},"45":{"index":45,"count":7},"46":{"index":46,"count":7},"47":{"index":47,"count":7},"48":{"index":48,"count":7},"49":{"index":49,"count":7},"50":{"index":50,"count":7},"53":{"index":53,"count":7},"55":{"index":55,"count":7},"56":{"index":56,"count":7},"57":{"index":57,"count":7},"58":{"index":58,"count":7},"59":{"index":59,"count":7},"60":{"index":60,"count":7},"61":{"index":61,"count":7},"62":{"index":62,"count":7},"63":{"index":63,"count":7},"64":{"index":64,"count":31},"65":{"index":65,"count":2},"66":{"index":66,"count":2},"68":{"index":68,"count":2},"69":{"index":69,"count":2},"70":{"index":70,"count":2},"71":{"index":71,"count":2},"72":{"index":72,"count":2},"73":{"index":73,"count":2},"74":{"index":74,"count":2},"75":{"index":75,"count":2},"76":{"index":76,"count":2},"78":{"index":78,"count":2},"79":{"index":79,"count":2},"80":{"index":80,"count":2},"81":{"index":81,"count":2},"82":{"index":82,"count":2},"83":{"index":83,"count":2},"84":{"index":84,"count":2},"85":{"index":85,"count":2},"86":{"index":86,"count":2},"87":{"index":87,"count":31},"88":{"index":88,"count":2},"89":{"index":89,"count":2},"90":{"index":90,"count":2},"91":{"index":91,"count":2},"92":{"index":92,"count":2},"93":{"index":93,"count":2},"94":{"index":94,"count":2},"95":{"index":95,"count":2},"96":{"index":96,"count":2},"97":{"index":97,"count":2},"98":{"index":98,"count":2},"99":{"index":99,"count":2},"100":{"index":100,"count":2},"101":{"index":101,"count":2},"102":{"index":102,"count":31},"103":{"index":103,"count":4},"104":{"index":104,"count":4},"105":{"index":105,"count":4},"106":{"index":106,"count":4},"107":{"index":107,"count":4},"108":{"index":108,"count":2},"109":{"index":109,"count":2},"110":{"index":110,"count":2},"111":{"index":111,"count":2},"112":{"index":112,"count":2},"113":{"index":113,"count":2},"114":{"index":114,"count":2},"115":{"index":115,"count":2},"116":{"index":116,"count":2},"117":{"index":117,"count":2},"118":{"index":118,"count":2},"119":{"index":119,"count":2},"120":{"index":120,"count":3},"121":{"index":121,"count":3},"122":{"index":122,"count":3},"123":{"index":123,"count":3},"127":{"index":127,"count":31},"128":{"index":128,"count":140},"129":{"index":129,"count":140},"130":{"index":130,"count":140},"131":{"index":131,"count":140},"132":{"index":132,"count":19},"133":{"index":133,"count":140},"134":{"index":134,"count":140},"135":{"index":135,"count":126},"136":{"index":136,"count":140},"137":{"index":137,"count":140},"138":{"index":138,"count":140},"139":{"index":139,"count":140},"140":{"index":140,"count":140},"141":{"index":141,"count":140},"142":{"index":142,"count":140},"143":{"index":143,"count":140},"144":{"index":144,"count":140},"145":{"index":145,"count":140},"148":{"index":148,"count":140},"149":{"index":149,"count":140},"150":{"index":150,"count":134},"151":{"index":151,"count":134},"152":{"index":152,"count":140},"153":{"index":153,"count":140},"154":{"index":154,"count":140},"155":{"index":155,"count":74},"156":{"index":156,"count":74},"157":{"index":157,"count":74},"158":{"index":158,"count":74},"159":{"index":159,"count":74},"160":{"index":160,"count":74},"161":{"index":161,"count":103},"162":{"index":162,"count":103},"163":{"index":163,"count":103},"164":{"index":164,"count":103},"165":{"index":165,"count":74},"166":{"index":166,"count":66},"168":{"index":168,"count":31},"173":{"index":173,"count":31},"174":{"index":174,"count":8},"175":{"index":175,"count":8},"176":{"index":176,"count":8},"177":{"index":177,"count":8},"178":{"index":178,"count":8},"179":{"index":179,"count":2},"180":{"index":180,"count":2},"181":{"index":181,"count":2},"182":{"index":182,"count":2},"183":{"index":183,"count":8},"184":{"index":184,"count":8},"185":{"index":185,"count":31},"186":{"index":186,"count":31},"187":{"index":187,"count":31},"188":{"index":188,"count":31},"189":{"index":189,"count":31},"190":{"index":190,"count":31},"191":{"index":191,"count":31},"192":{"index":192,"count":31},"193":{"index":193,"count":31},"194":{"index":194,"count":31},"195":{"index":195,"count":12},"197":{"index":197,"count":31},"198":{"index":198,"count":11},"199":{"index":199,"count":11},"200":{"index":200,"count":11},"201":{"index":201,"count":11},"202":{"index":202,"count":11},"205":{"index":205,"count":11},"206":{"index":206,"count":9},"207":{"index":207,"count":9},"208":{"index":208,"count":9},"209":{"index":209,"count":9},"210":{"index":210,"count":9},"211":{"index":211,"count":9},"212":{"index":212,"count":9},"213":{"index":213,"count":8},"214":{"index":214,"count":8},"215":{"index":215,"count":8},"216":{"index":216,"count":9},"217":{"index":217,"count":9},"218":{"index":218,"count":2},"219":{"index":219,"count":2},"220":{"index":220,"count":31},"221":{"index":221,"count":3},"222":{"index":222,"count":3},"223":{"index":223,"count":3},"224":{"index":224,"count":3},"225":{"index":225,"count":3},"226":{"index":226,"count":3},"227":{"index":227,"count":3},"228":{"index":228,"count":31},"229":{"index":229,"count":4},"230":{"index":230,"count":4},"231":{"index":231,"count":4},"232":{"index":232,"count":3},"233":{"index":233,"count":1},"234":{"index":234,"count":31},"235":{"index":235,"count":3},"236":{"index":236,"count":3},"237":{"index":237,"count":3},"238":{"index":238,"count":3},"239":{"index":239,"count":3},"241":{"index":241,"count":31},"242":{"index":242,"count":13},"243":{"index":243,"count":13},"244":{"index":244,"count":13},"245":{"index":245,"count":6},"246":{"index":246,"count":6},"247":{"index":247,"count":7},"248":{"index":248,"count":31},"249":{"index":249,"count":2},"250":{"index":250,"count":2},"251":{"index":251,"count":2},"252":{"index":252,"count":1},"253":{"index":253,"count":1},"254":{"index":254,"count":1},"255":{"index":255,"count":31},"260":{"index":260,"count":31},"265":{"index":265,"count":31},"266":{"index":266,"count":402},"267":{"index":267,"count":186},"268":{"index":268,"count":186},"269":{"index":269,"count":216},"270":{"index":270,"count":216},"271":{"index":271,"count":216},"272":{"index":272,"count":31},"273":{"index":273,"count":3},"274":{"index":274,"count":3},"275":{"index":275,"count":3},"276":{"index":276,"count":3},"279":{"index":279,"count":3},"280":{"index":280,"count":3},"281":{"index":281,"count":31},"282":{"index":282,"count":3},"283":{"index":283,"count":3},"284":{"index":284,"count":3},"285":{"index":285,"count":3},"286":{"index":286,"count":3},"287":{"index":287,"count":3},"288":{"index":288,"count":3},"289":{"index":289,"count":3},"290":{"index":290,"count":3},"291":{"index":291,"count":3},"292":{"index":292,"count":3},"293":{"index":293,"count":3},"294":{"index":294,"count":3},"295":{"index":295,"count":8},"296":{"index":296,"count":8},"297":{"index":297,"count":5},"298":{"index":298,"count":5},"299":{"index":299,"count":5},"300":{"index":300,"count":5},"301":{"index":301,"count":5},"306":{"index":306,"count":3},"307":{"index":307,"count":3},"308":{"index":308,"count":31},"312":{"index":312,"count":67},"313":{"index":313,"count":67},"314":{"index":314,"count":67},"315":{"index":315,"count":67},"316":{"index":316,"count":67},"317":{"index":317,"count":67},"318":{"index":318,"count":67},"319":{"index":319,"count":67},"320":{"index":320,"count":67},"321":{"index":321,"count":67},"322":{"index":322,"count":67},"323":{"index":323,"count":67},"324":{"index":324,"count":6},"325":{"index":325,"count":6},"326":{"index":326,"count":6},"327":{"index":327,"count":454},"328":{"index":328,"count":454},"329":{"index":329,"count":387},"330":{"index":330,"count":387},"331":{"index":331,"count":387},"332":{"index":332,"count":387},"333":{"index":333,"count":387},"334":{"index":334,"count":4},"335":{"index":335,"count":4},"336":{"index":336,"count":4},"337":{"index":337,"count":4},"338":{"index":338,"count":67},"339":{"index":339,"count":67},"340":{"index":340,"count":31},"341":{"index":341,"count":7},"342":{"index":342,"count":7},"343":{"index":343,"count":7},"344":{"index":344,"count":7},"345":{"index":345,"count":7},"346":{"index":346,"count":7},"347":{"index":347,"count":7},"348":{"index":348,"count":7},"349":{"index":349,"count":7},"350":{"index":350,"count":7},"351":{"index":351,"count":7},"352":{"index":352,"count":7},"353":{"index":353,"count":7},"357":{"index":357,"count":7},"359":{"index":359,"count":36},"360":{"index":360,"count":29},"361":{"index":361,"count":29},"362":{"index":362,"count":7},"363":{"index":363,"count":7},"364":{"index":364,"count":31},"384":{"index":384,"count":31},"385":{"index":385,"count":1},"386":{"index":386,"count":1},"387":{"index":387,"count":1},"388":{"index":388,"count":1},"389":{"index":389,"count":2},"390":{"index":390,"count":2},"391":{"index":391,"count":1},"392":{"index":392,"count":1},"393":{"index":393,"count":1},"394":{"index":394,"count":1},"395":{"index":395,"count":1},"396":{"index":396,"count":1},"397":{"index":397,"count":1},"398":{"index":398,"count":1},"399":{"index":399,"count":1},"400":{"index":400,"count":1},"401":{"index":401,"count":1},"402":{"index":402,"count":1},"403":{"index":403,"count":31},"404":{"index":404,"count":1},"405":{"index":405,"count":1},"406":{"index":406,"count":1},"407":{"index":407,"count":1},"408":{"index":408,"count":3},"409":{"index":409,"count":3},"410":{"index":410,"count":3},"411":{"index":411,"count":3},"412":{"index":412,"count":3},"413":{"index":413,"count":12},"414":{"index":414,"count":12},"415":{"index":415,"count":3},"416":{"index":416,"count":3},"417":{"index":417,"count":3},"418":{"index":418,"count":7},"419":{"index":419,"count":7},"420":{"index":420,"count":7},"421":{"index":421,"count":7},"422":{"index":422,"count":1},"423":{"index":423,"count":1},"424":{"index":424,"count":1},"425":{"index":425,"count":1}},"blocks":{"0":{"index":0,"count":140},"1":{"index":1,"count":31},"2":{"index":2,"count":465},"3":{"index":3,"count":58},"4":{"index":4,"count":1},"5":{"index":5,"count":57},"6":{"index":6,"count":58},"8":{"index":8,"count":7},"9":{"index":9,"count":1},"10":{"index":10,"count":6},"14":{"index":14,"count":7},"15":{"index":15,"count":7},"16":{"index":16,"count":2},"18":{"index":18,"count":2},"20":{"index":20,"count":2},"21":{"index":21,"count":2},"22":{"index":22,"count":2},"23":{"index":23,"count":2},"24":{"index":24,"count":2},"25":{"index":25,"count":2},"26":{"index":26,"count":4},"27":{"index":27,"count":4},"28":{"index":28,"count":2},"29":{"index":29,"count":2},"30":{"index":30,"count":2},"31":{"index":31,"count":2},"32":{"index":32,"count":3},"34":{"index":34,"count":140},"35":{"index":35,"count":19},"36":{"index":36,"count":126},"37":{"index":37,"count":140},"38":{"index":38,"count":140},"40":{"index":40,"count":140},"41":{"index":41,"count":134},"42":{"index":42,"count":74},"43":{"index":43,"count":74},"44":{"index":44,"count":103},"45":{"index":45,"count":66},"49":{"index":49,"count":8},"50":{"index":50,"count":2},"51":{"index":51,"count":31},"52":{"index":52,"count":31},"53":{"index":53,"count":12},"54":{"index":54,"count":12},"56":{"index":56,"count":11},"57":{"index":57,"count":11},"59":{"index":59,"count":9},"60":{"index":60,"count":9},"61":{"index":61,"count":8},"62":{"index":62,"count":9},"63":{"index":63,"count":2},"64":{"index":64,"count":3},"65":{"index":65,"count":3},"66":{"index":66,"count":4},"67":{"index":67,"count":3},"68":{"index":68,"count":1},"69":{"index":69,"count":3},"70":{"index":70,"count":3},"72":{"index":72,"count":13},"73":{"index":73,"count":6},"74":{"index":74,"count":7},"75":{"index":75,"count":2},"76":{"index":76,"count":1},"77":{"index":77,"count":1},"80":{"index":80,"count":402},"81":{"index":81,"count":186},"82":{"index":82,"count":3},"83":{"index":83,"count":3},"85":{"index":85,"count":3},"86":{"index":86,"count":3},"87":{"index":87,"count":5},"89":{"index":89,"count":67},"91":{"index":91,"count":6},"92":{"index":92,"count":387},"93":{"index":93,"count":4},"94":{"index":94,"count":7},"97":{"index":97,"count":29},"105":{"index":105,"count":1},"106":{"index":106,"count":2},"107":{"index":107,"count":1},"108":{"index":108,"count":1},"109":{"index":109,"count":1},"110":{"index":110,"count":1},"111":{"index":111,"count":1},"112":{"index":112,"count":3},"113":{"index":113,"count":3},"114":{"index":114,"count":12},"115":{"index":115,"count":3},"116":{"index":116,"count":7},"117":{"index":117,"count":7},"118":{"index":118,"count":1}},"hash":"de65bf44e1191ebe500c5262d22f9b3a","instrumentor":{"blockCounter":119,"nodeCounter":426,"source":"var Q = require(\"q\");\nvar Boot = require(\"./fs-boot\");\nvar RootFs = require(\"./fs-root\");\nvar MockFs = require(\"./fs-mock\");\n\n// TODO patternToRegExp\n// TODO glob\n// TODO match\n\nvar concat = function (arrays) {\n    return Array.prototype.concat.apply([], arrays);\n};\n\nexports.update = function (exports, workingDirectory) {\n\n    for (var name in Boot) {\n        exports[name] = Boot[name];\n    }\n\n    /**\n     * Read a complete file.\n     * @param {String} path    Path to the file.\n     * @param {Object} [options]   An object with options.\n     * @param {String} [options.flags]  The mode to open the file with.\n     * @param {String} [options.charset]  The charset to open the file with.\n     * second argument.\n     * @returns {Promise * (String || Buffer)}\n     */\n    exports.read = function (path, flags, charset, options) {\n        if (typeof flags == \"object\") {\n            options = flags;\n        } else {\n            options = options || {};\n            options.flags = flags;\n            options.charset = charset;\n        }\n        options.flags = \"r\" + (options.flags || \"\").replace(/r/g, \"\");\n        return Q.when(this.open(path, options), function (stream) {\n            return stream.read();\n        }, function (error) {\n            error.message = \"Can't read \" + path + \" because \" + error.message;\n            error.path = path;\n            error.flags = flags;\n            error.charset = charset;\n            throw error;\n        });\n    };\n\n    /**\n     * Write content to a file, overwriting the existing content.\n     * @param {String} path    Path to the file.\n     * @param {String || Buffer} content\n     * @param {Object} [options]   An object with options.\n     * @param {String} [options.flags]  The mode to open the file with.\n     * @param {String} [options.charset]  The charset to open the file with.\n     * @returns {Promise * Undefined} a promise that resolves\n     * when the writing is complete.\n     */\n    exports.write = function (path, content, flags, charset, options) {\n        var self = this;\n        if (typeof flags == \"object\") {\n            options = flags;\n        } else {\n            options = options || {};\n            options.flags = flags;\n            options.charset = charset;\n        }\n        flags = \"w\" + (options.flags || \"\").replace(/[w]/g, \"\");\n        if (flags.indexOf(\"b\") !== -1) {\n            if (!(content instanceof Buffer)) {\n                content = new Buffer(content);\n            }\n        } else if (content instanceof Buffer) {\n            flags += \"b\";\n        }\n        options.flags = flags;\n        return Q.when(self.open(path, options), function (stream) {\n            return Q.when(stream.write(content), function () {\n                return stream.close();\n            });\n        });\n    };\n\n    /**\n     * Append content to the end of a file.\n     * @param {String} path    Path to the file.\n     * @param {String || Buffer} content\n     * @param {Object} [options]   An object with options.\n     * @param {String} [options.flags]  The mode to open the file with.\n     * @param {String} [options.charset]  The charset to open the file with.\n     * @returns {Promise * Undefined} a promise that resolves\n     * when the writing is complete.\n     */\n    exports.append = function (path, content, flags, charset, options) {\n        var self = this;\n        if (typeof flags == \"object\") {\n            options = flags;\n        } else {\n            options = options || {};\n            options.flags = flags;\n            options.charset = charset;\n        }\n        flags = \"w+\" + (options.flags || \"\").replace(/[w\\+]/g, \"\");\n        if (content instanceof Buffer) {\n            flags += \"b\";\n        }\n        options.flags = flags;\n        return Q.when(self.open(path, options), function (stream) {\n            return Q.when(stream.write(content), function () {\n                return stream.close();\n            });\n        });\n    };\n\n    exports.copy = function (source, target) {\n        var self = this;\n        return Q.spread([\n            self.open(source, {flags: \"rb\"}),\n            self.open(target, {flags: \"wb\"})\n        ], function (reader, writer) {\n            return Q.when(reader.forEach(function (block) {\n                return writer.write(block);\n            }), function () {\n                return Q.all([\n                    reader.close(),\n                    writer.close()\n                ]);\n            });\n        });\n    };\n\n    exports.copyTree = function (source, target) {\n        var self = this;\n        return Q.when(self.stat(source), function (stat) {\n            if (stat.isFile()) {\n                return self.copy(source, target);\n            } else if (stat.isDirectory()) {\n                return Q.when(self.makeDirectory(target), function () {\n                    return Q.when(self.list(source), function (list) {\n                        return Q.all(list.map(function (child) {\n                            return self.copyTree(\n                                self.join(source, child),\n                                self.join(target, child)\n                            );\n                        }));\n                    });\n                });\n            } else if (stat.isSymbolicLink()) {\n                // TODO copy the link and type with readPath (but what about\n                // Windows junction type?)\n                return self.symbolicCopy(source, target);\n            }\n        });\n    };\n\n    exports.listTree = function (basePath, guard) {\n        var self = this;\n        basePath = String(basePath || '');\n        if (!basePath)\n            basePath = \".\";\n        guard = guard || function () {\n            return true;\n        };\n        var stat = self.stat(basePath);\n        return Q.when(stat, function (stat) {\n            var paths = [];\n            var mode; // true:include, false:exclude, null:no-recur\n            try {\n                var include = guard(basePath, stat);\n            } catch (exception) {\n                return Q.reject(exception);\n            }\n            return Q.when(include, function (include) {\n                if (include) {\n                    paths.push([basePath]);\n                }\n                if (include !== null && stat.isDirectory()) {\n                    return Q.when(self.list(basePath), function (children) {\n                        paths.push.apply(paths, children.map(function (child) {\n                            var path = self.join(basePath, child);\n                            return self.listTree(path, guard);\n                        }));\n                        return paths;\n                    });\n                } else {\n                    return paths;\n                }\n            });\n        }, function noSuchFile(reason) {\n            return [];\n        }).then(Q.all).then(concat);\n    };\n\n    exports.listDirectoryTree = function (path) {\n        return this.listTree(path, function (path, stat) {\n            return stat.isDirectory();\n        });\n    };\n\n    exports.makeTree = function (path, mode) {\n        var self = this;\n        var parts = self.split(path);\n        var at = [];\n        if (self.isAbsolute(path)) {\n            // On Windows use the root drive (e.g. \"C:\"), on *nix the first\n            // part is the falsey \"\", and so use the ROOT (\"/\")\n            at.push(parts.shift() || self.ROOT);\n        }\n        return parts.reduce(function (parent, part) {\n            return Q.when(parent, function () {\n                at.push(part);\n                var parts = self.join(at);\n                var made = self.makeDirectory(parts, mode);\n                return Q.when(made, null, function rejected(error) {\n                    // throw away errors for already made directories\n                    if (error.exists) {\n                        return;\n                    } else {\n                        throw error;\n                    }\n                });\n            });\n        }, undefined);\n    };\n\n    exports.removeTree = function (path) {\n        var self = this;\n        return Q.when(self.stat(path), function (stat) {\n            if (stat.isSymbolicLink()) {\n                return self.remove(path);\n            } else if (stat.isDirectory()) {\n                return self.list(path)\n                .then(function (list) {\n                    // asynchronously remove every subtree\n                    return Q.all(list.map(function (name) {\n                        return self.removeTree(self.join(path, name));\n                    }))\n                    .then(function () {\n                        return self.removeDirectory(path);\n                    });\n                });\n            } else {\n                return self.remove(path);\n            }\n        });\n    };\n\n    exports.symbolicCopy = function (source, target, type) {\n        var self = this;\n        return Q.when(self.relative(target, source), function (relative) {\n            return self.symbolicLink(target, relative, type || \"file\");\n        });\n    };\n\n    exports.exists = function (path) {\n        return Q.when(this.stat(path), function () {\n            return true;\n        }, function () {\n            return false;\n        });\n    };\n\n    exports.isFile = function (path) {\n        return Q.when(this.stat(path), function (stat) {\n            return stat.isFile();\n        }, function (reason) {\n            return false;\n        });\n    };\n\n    exports.isDirectory = function (path) {\n        return Q.when(this.stat(path), function (stat) {\n            return stat.isDirectory();\n        }, function (reason) {\n            return false;\n        });\n    };\n\n    exports.isSymbolicLink = function (path) {\n        return Q.when(this.statLink(path), function (stat) {\n            return stat.isSymbolicLink();\n        }, function (reason) {\n            return false;\n        });\n    };\n\n    exports.lastModified = function (path) {\n        var self = this;\n        return self.stat(path).invoke('lastModified');\n    };\n\n    exports.lastAccessed = function (path) {\n        var self = this;\n        return self.stat(path).invoke('lastAccessed');\n    };\n\n    exports.absolute = function (path) {\n        if (this.isAbsolute(path))\n            return this.normal(path);\n        return this.join(workingDirectory(), path);\n    };\n\n    exports.relative = function (source, target) {\n        var self = this;\n        return Q.when(this.isDirectory(source), function (isDirectory) {\n            if (isDirectory) {\n                return self.relativeFromDirectory(source, target);\n            } else {\n                return self.relativeFromFile(source, target);\n            }\n        });\n    };\n\n    exports.relativeFromFile = function (source, target) {\n        var self = this;\n        source = self.absolute(source);\n        target = self.absolute(target);\n        source = source.split(self.SEPARATORS_RE());\n        target = target.split(self.SEPARATORS_RE());\n        source.pop();\n        while (\n            source.length &&\n            target.length &&\n            target[0] == source[0]\n        ) {\n            source.shift();\n            target.shift();\n        }\n        while (source.length) {\n            source.shift();\n            target.unshift(\"..\");\n        }\n        return target.join(self.SEPARATOR);\n    };\n\n    exports.relativeFromDirectory = function (source, target) {\n        if (!target) {\n            target = source;\n            source = workingDirectory();\n        }\n        source = this.absolute(source);\n        target = this.absolute(target);\n        source = source.split(this.SEPARATORS_RE());\n        target = target.split(this.SEPARATORS_RE());\n        if (source.length === 2 && source[1] === \"\")\n            source.pop();\n        while (\n            source.length &&\n            target.length &&\n            target[0] == source[0]\n        ) {\n            source.shift();\n            target.shift();\n        }\n        while (source.length) {\n            source.shift();\n            target.unshift(\"..\");\n        }\n        return target.join(this.SEPARATOR);\n    };\n\n    exports.contains = function (parent, child) {\n        var i, ii;\n        parent = this.absolute(parent);\n        child = this.absolute(child);\n        parent = parent.split(this.SEPARATORS_RE());\n        child = child.split(this.SEPARATORS_RE());\n        if (parent.length === 2 && parent[1] === \"\")\n            parent.pop();\n        if (parent.length > child.length)\n            return false;\n        for (i = 0, ii = parent.length; i < ii; i++) {\n            if (parent[i] !== child[i])\n                break;\n        }\n        return i == ii;\n    };\n\n    exports.reroot = reroot;\n    function reroot(path) {\n        var self = this;\n        path = path || this.ROOT;\n        return Q.when(this.list(path), function (list) {\n            if (list.length !== 1)\n                return RootFs(self, path);\n            var nextPath = self.join(path, list[0]);\n            return Q.when(self.stat(nextPath), function (stat) {\n                if (stat.isDirectory()) {\n                    return reroot(nextPath);\n                } else {\n                    return RootFs(self, path);\n                }\n            });\n        });\n    }\n\n    exports.toObject = function (path) {\n        var self = this;\n        var list = self.listTree(path || \"\", function (path, stat) {\n            return stat.isFile();\n        });\n        return Q.when(list, function (list) {\n            var tree = {};\n            return Q.all(list.map(function (path) {\n                return Q.when(self.read(path, \"rb\"), function (content) {\n                    tree[path] = content;\n                });\n            })).then(function () {\n                return tree;\n            });\n        });\n    };\n\n    exports.merge = function (fss) {\n        var tree = {};\n        var done;\n        fss.forEach(function (fs) {\n            done = Q.when(done, function () {\n                return fs.listTree(\"\", function (path, stat) {\n                    return stat.isFile();\n                })\n                .then(function (list) {\n                    return Q.all(list.map(function (path) {\n                        return Q.when(fs.read(path, \"rb\"), function (content) {\n                            tree[path] = content;\n                        });\n                    }));\n                });\n            });\n        })\n        return Q.when(done, function () {\n            return MockFs(tree);\n        });\n    };\n\n}","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":21}},"id":0},"1":{"loc":{"start":{"line":1,"column":8},"end":{"line":1,"column":20}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":32}},"id":2},"3":{"loc":{"start":{"line":2,"column":11},"end":{"line":2,"column":31}},"id":3},"4":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":34}},"id":4},"5":{"loc":{"start":{"line":3,"column":13},"end":{"line":3,"column":33}},"id":5},"6":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":34}},"id":6},"7":{"loc":{"start":{"line":4,"column":13},"end":{"line":4,"column":33}},"id":7},"8":{"loc":{"start":{"line":10,"column":0},"end":{"line":12,"column":2}},"id":8},"9":{"loc":{"start":{"line":11,"column":4},"end":{"line":11,"column":52}},"id":9},"10":{"loc":{"start":{"line":11,"column":11},"end":{"line":11,"column":51}},"id":10},"11":{"loc":{"start":{"line":14,"column":0},"end":{"line":437,"column":0}},"id":11},"12":{"loc":{"start":{"line":17,"column":8},"end":{"line":17,"column":35}},"id":12},"13":{"loc":{"start":{"line":29,"column":4},"end":{"line":47,"column":6}},"id":13},"14":{"loc":{"start":{"line":30,"column":12},"end":{"line":30,"column":36}},"id":14},"15":{"loc":{"start":{"line":31,"column":12},"end":{"line":31,"column":28}},"id":15},"16":{"loc":{"start":{"line":33,"column":12},"end":{"line":33,"column":36}},"id":16},"17":{"loc":{"start":{"line":33,"column":22},"end":{"line":33,"column":35}},"id":17},"18":{"loc":{"start":{"line":34,"column":12},"end":{"line":34,"column":34}},"id":18},"19":{"loc":{"start":{"line":35,"column":12},"end":{"line":35,"column":38}},"id":19},"20":{"loc":{"start":{"line":37,"column":8},"end":{"line":37,"column":70}},"id":20},"21":{"loc":{"start":{"line":37,"column":24},"end":{"line":37,"column":69}},"id":21},"22":{"loc":{"start":{"line":37,"column":30},"end":{"line":37,"column":69}},"id":22},"23":{"loc":{"start":{"line":37,"column":30},"end":{"line":37,"column":51}},"id":23},"24":{"loc":{"start":{"line":38,"column":8},"end":{"line":46,"column":11}},"id":24},"25":{"loc":{"start":{"line":38,"column":15},"end":{"line":46,"column":10}},"id":25},"26":{"loc":{"start":{"line":38,"column":22},"end":{"line":38,"column":46}},"id":26},"27":{"loc":{"start":{"line":39,"column":12},"end":{"line":39,"column":33}},"id":27},"28":{"loc":{"start":{"line":39,"column":19},"end":{"line":39,"column":32}},"id":28},"29":{"loc":{"start":{"line":41,"column":12},"end":{"line":41,"column":79}},"id":29},"30":{"loc":{"start":{"line":41,"column":28},"end":{"line":41,"column":78}},"id":30},"31":{"loc":{"start":{"line":41,"column":28},"end":{"line":41,"column":62}},"id":31},"32":{"loc":{"start":{"line":41,"column":28},"end":{"line":41,"column":48}},"id":32},"33":{"loc":{"start":{"line":42,"column":12},"end":{"line":42,"column":30}},"id":33},"34":{"loc":{"start":{"line":43,"column":12},"end":{"line":43,"column":32}},"id":34},"35":{"loc":{"start":{"line":44,"column":12},"end":{"line":44,"column":36}},"id":35},"36":{"loc":{"start":{"line":45,"column":12},"end":{"line":45,"column":24}},"id":36},"37":{"loc":{"start":{"line":59,"column":4},"end":{"line":82,"column":6}},"id":37},"38":{"loc":{"start":{"line":60,"column":8},"end":{"line":60,"column":24}},"id":38},"39":{"loc":{"start":{"line":61,"column":12},"end":{"line":61,"column":36}},"id":39},"40":{"loc":{"start":{"line":62,"column":12},"end":{"line":62,"column":28}},"id":40},"41":{"loc":{"start":{"line":64,"column":12},"end":{"line":64,"column":36}},"id":41},"42":{"loc":{"start":{"line":64,"column":22},"end":{"line":64,"column":35}},"id":42},"43":{"loc":{"start":{"line":65,"column":12},"end":{"line":65,"column":34}},"id":43},"44":{"loc":{"start":{"line":66,"column":12},"end":{"line":66,"column":38}},"id":44},"45":{"loc":{"start":{"line":68,"column":8},"end":{"line":68,"column":64}},"id":45},"46":{"loc":{"start":{"line":68,"column":16},"end":{"line":68,"column":63}},"id":46},"47":{"loc":{"start":{"line":68,"column":22},"end":{"line":68,"column":63}},"id":47},"48":{"loc":{"start":{"line":68,"column":22},"end":{"line":68,"column":43}},"id":48},"49":{"loc":{"start":{"line":69,"column":12},"end":{"line":69,"column":37}},"id":49},"50":{"loc":{"start":{"line":69,"column":12},"end":{"line":69,"column":30}},"id":50},"51":{"loc":{"start":{"line":70,"column":17},"end":{"line":70,"column":44}},"id":51},"52":{"loc":{"start":{"line":71,"column":16},"end":{"line":71,"column":46}},"id":52},"53":{"loc":{"start":{"line":73,"column":19},"end":{"line":73,"column":44}},"id":53},"54":{"loc":{"start":{"line":74,"column":12},"end":{"line":74,"column":25}},"id":54},"55":{"loc":{"start":{"line":76,"column":8},"end":{"line":76,"column":30}},"id":55},"56":{"loc":{"start":{"line":77,"column":8},"end":{"line":81,"column":11}},"id":56},"57":{"loc":{"start":{"line":77,"column":15},"end":{"line":81,"column":10}},"id":57},"58":{"loc":{"start":{"line":77,"column":22},"end":{"line":77,"column":46}},"id":58},"59":{"loc":{"start":{"line":78,"column":12},"end":{"line":80,"column":15}},"id":59},"60":{"loc":{"start":{"line":78,"column":19},"end":{"line":80,"column":14}},"id":60},"61":{"loc":{"start":{"line":78,"column":26},"end":{"line":78,"column":47}},"id":61},"62":{"loc":{"start":{"line":79,"column":16},"end":{"line":79,"column":38}},"id":62},"63":{"loc":{"start":{"line":79,"column":23},"end":{"line":79,"column":37}},"id":63},"64":{"loc":{"start":{"line":94,"column":4},"end":{"line":113,"column":6}},"id":64},"65":{"loc":{"start":{"line":95,"column":8},"end":{"line":95,"column":24}},"id":65},"66":{"loc":{"start":{"line":96,"column":12},"end":{"line":96,"column":36}},"id":66},"67":{"loc":{"start":{"line":97,"column":12},"end":{"line":97,"column":28}},"id":67},"68":{"loc":{"start":{"line":99,"column":12},"end":{"line":99,"column":36}},"id":68},"69":{"loc":{"start":{"line":99,"column":22},"end":{"line":99,"column":35}},"id":69},"70":{"loc":{"start":{"line":100,"column":12},"end":{"line":100,"column":34}},"id":70},"71":{"loc":{"start":{"line":101,"column":12},"end":{"line":101,"column":38}},"id":71},"72":{"loc":{"start":{"line":103,"column":8},"end":{"line":103,"column":67}},"id":72},"73":{"loc":{"start":{"line":103,"column":16},"end":{"line":103,"column":66}},"id":73},"74":{"loc":{"start":{"line":103,"column":23},"end":{"line":103,"column":66}},"id":74},"75":{"loc":{"start":{"line":103,"column":23},"end":{"line":103,"column":44}},"id":75},"76":{"loc":{"start":{"line":104,"column":12},"end":{"line":104,"column":37}},"id":76},"77":{"loc":{"start":{"line":105,"column":12},"end":{"line":105,"column":25}},"id":77},"78":{"loc":{"start":{"line":107,"column":8},"end":{"line":107,"column":30}},"id":78},"79":{"loc":{"start":{"line":108,"column":8},"end":{"line":112,"column":11}},"id":79},"80":{"loc":{"start":{"line":108,"column":15},"end":{"line":112,"column":10}},"id":80},"81":{"loc":{"start":{"line":108,"column":22},"end":{"line":108,"column":46}},"id":81},"82":{"loc":{"start":{"line":109,"column":12},"end":{"line":111,"column":15}},"id":82},"83":{"loc":{"start":{"line":109,"column":19},"end":{"line":111,"column":14}},"id":83},"84":{"loc":{"start":{"line":109,"column":26},"end":{"line":109,"column":47}},"id":84},"85":{"loc":{"start":{"line":110,"column":16},"end":{"line":110,"column":38}},"id":85},"86":{"loc":{"start":{"line":110,"column":23},"end":{"line":110,"column":37}},"id":86},"87":{"loc":{"start":{"line":115,"column":4},"end":{"line":130,"column":6}},"id":87},"88":{"loc":{"start":{"line":116,"column":8},"end":{"line":116,"column":24}},"id":88},"89":{"loc":{"start":{"line":117,"column":8},"end":{"line":129,"column":11}},"id":89},"90":{"loc":{"start":{"line":117,"column":15},"end":{"line":129,"column":10}},"id":90},"91":{"loc":{"start":{"line":118,"column":12},"end":{"line":118,"column":44}},"id":91},"92":{"loc":{"start":{"line":119,"column":12},"end":{"line":119,"column":44}},"id":92},"93":{"loc":{"start":{"line":121,"column":12},"end":{"line":128,"column":15}},"id":93},"94":{"loc":{"start":{"line":121,"column":19},"end":{"line":128,"column":14}},"id":94},"95":{"loc":{"start":{"line":121,"column":26},"end":{"line":123,"column":14}},"id":95},"96":{"loc":{"start":{"line":122,"column":16},"end":{"line":122,"column":43}},"id":96},"97":{"loc":{"start":{"line":122,"column":23},"end":{"line":122,"column":42}},"id":97},"98":{"loc":{"start":{"line":124,"column":16},"end":{"line":127,"column":19}},"id":98},"99":{"loc":{"start":{"line":124,"column":23},"end":{"line":127,"column":18}},"id":99},"100":{"loc":{"start":{"line":125,"column":20},"end":{"line":125,"column":34}},"id":100},"101":{"loc":{"start":{"line":126,"column":20},"end":{"line":126,"column":34}},"id":101},"102":{"loc":{"start":{"line":132,"column":4},"end":{"line":154,"column":6}},"id":102},"103":{"loc":{"start":{"line":133,"column":8},"end":{"line":133,"column":24}},"id":103},"104":{"loc":{"start":{"line":134,"column":8},"end":{"line":153,"column":11}},"id":104},"105":{"loc":{"start":{"line":134,"column":15},"end":{"line":153,"column":10}},"id":105},"106":{"loc":{"start":{"line":134,"column":22},"end":{"line":134,"column":39}},"id":106},"107":{"loc":{"start":{"line":135,"column":16},"end":{"line":135,"column":29}},"id":107},"108":{"loc":{"start":{"line":136,"column":16},"end":{"line":136,"column":49}},"id":108},"109":{"loc":{"start":{"line":136,"column":23},"end":{"line":136,"column":48}},"id":109},"110":{"loc":{"start":{"line":137,"column":23},"end":{"line":137,"column":41}},"id":110},"111":{"loc":{"start":{"line":138,"column":16},"end":{"line":147,"column":19}},"id":111},"112":{"loc":{"start":{"line":138,"column":23},"end":{"line":147,"column":18}},"id":112},"113":{"loc":{"start":{"line":138,"column":30},"end":{"line":138,"column":56}},"id":113},"114":{"loc":{"start":{"line":139,"column":20},"end":{"line":146,"column":23}},"id":114},"115":{"loc":{"start":{"line":139,"column":27},"end":{"line":146,"column":22}},"id":115},"116":{"loc":{"start":{"line":139,"column":34},"end":{"line":139,"column":51}},"id":116},"117":{"loc":{"start":{"line":140,"column":24},"end":{"line":145,"column":28}},"id":117},"118":{"loc":{"start":{"line":140,"column":31},"end":{"line":145,"column":27}},"id":118},"119":{"loc":{"start":{"line":140,"column":37},"end":{"line":145,"column":26}},"id":119},"120":{"loc":{"start":{"line":141,"column":28},"end":{"line":144,"column":30}},"id":120},"121":{"loc":{"start":{"line":141,"column":35},"end":{"line":144,"column":29}},"id":121},"122":{"loc":{"start":{"line":142,"column":32},"end":{"line":142,"column":56}},"id":122},"123":{"loc":{"start":{"line":143,"column":32},"end":{"line":143,"column":56}},"id":123},"124":{"loc":{"start":{"line":148,"column":23},"end":{"line":148,"column":44}},"id":124},"125":{"loc":{"start":{"line":151,"column":16},"end":{"line":151,"column":57}},"id":125},"126":{"loc":{"start":{"line":151,"column":23},"end":{"line":151,"column":56}},"id":126},"127":{"loc":{"start":{"line":156,"column":4},"end":{"line":192,"column":6}},"id":127},"128":{"loc":{"start":{"line":157,"column":8},"end":{"line":157,"column":24}},"id":128},"129":{"loc":{"start":{"line":158,"column":8},"end":{"line":158,"column":42}},"id":129},"130":{"loc":{"start":{"line":158,"column":19},"end":{"line":158,"column":41}},"id":130},"131":{"loc":{"start":{"line":158,"column":26},"end":{"line":158,"column":40}},"id":131},"132":{"loc":{"start":{"line":160,"column":12},"end":{"line":160,"column":27}},"id":132},"133":{"loc":{"start":{"line":161,"column":8},"end":{"line":163,"column":10}},"id":133},"134":{"loc":{"start":{"line":161,"column":16},"end":{"line":163,"column":9}},"id":134},"135":{"loc":{"start":{"line":162,"column":12},"end":{"line":162,"column":24}},"id":135},"136":{"loc":{"start":{"line":164,"column":8},"end":{"line":164,"column":39}},"id":136},"137":{"loc":{"start":{"line":164,"column":19},"end":{"line":164,"column":38}},"id":137},"138":{"loc":{"start":{"line":165,"column":8},"end":{"line":191,"column":36}},"id":138},"139":{"loc":{"start":{"line":165,"column":15},"end":{"line":191,"column":35}},"id":139},"140":{"loc":{"start":{"line":191,"column":15},"end":{"line":191,"column":22}},"id":140},"141":{"loc":{"start":{"line":165,"column":21},"end":{"line":191,"column":10}},"id":141},"142":{"loc":{"start":{"line":166,"column":12},"end":{"line":166,"column":27}},"id":142},"143":{"loc":{"start":{"line":167,"column":12},"end":{"line":167,"column":21}},"id":143},"144":{"loc":{"start":{"line":169,"column":16},"end":{"line":169,"column":52}},"id":144},"145":{"loc":{"start":{"line":169,"column":30},"end":{"line":169,"column":51}},"id":145},"146":{"loc":{"start":{"line":171,"column":16},"end":{"line":171,"column":43}},"id":146},"147":{"loc":{"start":{"line":171,"column":23},"end":{"line":171,"column":42}},"id":147},"148":{"loc":{"start":{"line":173,"column":12},"end":{"line":188,"column":15}},"id":148},"149":{"loc":{"start":{"line":173,"column":19},"end":{"line":188,"column":14}},"id":149},"150":{"loc":{"start":{"line":175,"column":20},"end":{"line":175,"column":43}},"id":150},"151":{"loc":{"start":{"line":175,"column":20},"end":{"line":175,"column":42}},"id":151},"152":{"loc":{"start":{"line":177,"column":20},"end":{"line":177,"column":58}},"id":152},"153":{"loc":{"start":{"line":177,"column":20},"end":{"line":177,"column":36}},"id":153},"154":{"loc":{"start":{"line":177,"column":40},"end":{"line":177,"column":58}},"id":154},"155":{"loc":{"start":{"line":178,"column":20},"end":{"line":184,"column":23}},"id":155},"156":{"loc":{"start":{"line":178,"column":27},"end":{"line":184,"column":22}},"id":156},"157":{"loc":{"start":{"line":178,"column":34},"end":{"line":178,"column":53}},"id":157},"158":{"loc":{"start":{"line":179,"column":24},"end":{"line":182,"column":28}},"id":158},"159":{"loc":{"start":{"line":179,"column":24},"end":{"line":182,"column":27}},"id":159},"160":{"loc":{"start":{"line":179,"column":48},"end":{"line":182,"column":26}},"id":160},"161":{"loc":{"start":{"line":180,"column":28},"end":{"line":180,"column":66}},"id":161},"162":{"loc":{"start":{"line":180,"column":39},"end":{"line":180,"column":65}},"id":162},"163":{"loc":{"start":{"line":181,"column":28},"end":{"line":181,"column":62}},"id":163},"164":{"loc":{"start":{"line":181,"column":35},"end":{"line":181,"column":61}},"id":164},"165":{"loc":{"start":{"line":183,"column":24},"end":{"line":183,"column":37}},"id":165},"166":{"loc":{"start":{"line":186,"column":20},"end":{"line":186,"column":33}},"id":166},"167":{"loc":{"start":{"line":190,"column":12},"end":{"line":190,"column":22}},"id":167},"168":{"loc":{"start":{"line":194,"column":4},"end":{"line":198,"column":6}},"id":168},"169":{"loc":{"start":{"line":195,"column":8},"end":{"line":197,"column":11}},"id":169},"170":{"loc":{"start":{"line":195,"column":15},"end":{"line":197,"column":10}},"id":170},"171":{"loc":{"start":{"line":196,"column":12},"end":{"line":196,"column":38}},"id":171},"172":{"loc":{"start":{"line":196,"column":19},"end":{"line":196,"column":37}},"id":172},"173":{"loc":{"start":{"line":200,"column":4},"end":{"line":224,"column":6}},"id":173},"174":{"loc":{"start":{"line":201,"column":8},"end":{"line":201,"column":24}},"id":174},"175":{"loc":{"start":{"line":202,"column":8},"end":{"line":202,"column":37}},"id":175},"176":{"loc":{"start":{"line":202,"column":20},"end":{"line":202,"column":36}},"id":176},"177":{"loc":{"start":{"line":203,"column":8},"end":{"line":203,"column":20}},"id":177},"178":{"loc":{"start":{"line":204,"column":12},"end":{"line":204,"column":33}},"id":178},"179":{"loc":{"start":{"line":207,"column":12},"end":{"line":207,"column":48}},"id":179},"180":{"loc":{"start":{"line":207,"column":12},"end":{"line":207,"column":47}},"id":180},"181":{"loc":{"start":{"line":207,"column":20},"end":{"line":207,"column":46}},"id":181},"182":{"loc":{"start":{"line":207,"column":20},"end":{"line":207,"column":33}},"id":182},"183":{"loc":{"start":{"line":209,"column":8},"end":{"line":223,"column":22}},"id":183},"184":{"loc":{"start":{"line":209,"column":15},"end":{"line":223,"column":21}},"id":184},"185":{"loc":{"start":{"line":210,"column":12},"end":{"line":222,"column":15}},"id":185},"186":{"loc":{"start":{"line":210,"column":19},"end":{"line":222,"column":14}},"id":186},"187":{"loc":{"start":{"line":211,"column":16},"end":{"line":211,"column":30}},"id":187},"188":{"loc":{"start":{"line":211,"column":16},"end":{"line":211,"column":29}},"id":188},"189":{"loc":{"start":{"line":212,"column":16},"end":{"line":212,"column":42}},"id":189},"190":{"loc":{"start":{"line":212,"column":28},"end":{"line":212,"column":41}},"id":190},"191":{"loc":{"start":{"line":213,"column":16},"end":{"line":213,"column":59}},"id":191},"192":{"loc":{"start":{"line":213,"column":27},"end":{"line":213,"column":58}},"id":192},"193":{"loc":{"start":{"line":214,"column":16},"end":{"line":221,"column":19}},"id":193},"194":{"loc":{"start":{"line":214,"column":23},"end":{"line":221,"column":18}},"id":194},"195":{"loc":{"start":{"line":217,"column":24},"end":{"line":217,"column":31}},"id":195},"196":{"loc":{"start":{"line":219,"column":24},"end":{"line":219,"column":36}},"id":196},"197":{"loc":{"start":{"line":226,"column":4},"end":{"line":246,"column":6}},"id":197},"198":{"loc":{"start":{"line":227,"column":8},"end":{"line":227,"column":24}},"id":198},"199":{"loc":{"start":{"line":228,"column":8},"end":{"line":245,"column":11}},"id":199},"200":{"loc":{"start":{"line":228,"column":15},"end":{"line":245,"column":10}},"id":200},"201":{"loc":{"start":{"line":228,"column":22},"end":{"line":228,"column":37}},"id":201},"202":{"loc":{"start":{"line":229,"column":16},"end":{"line":229,"column":37}},"id":202},"203":{"loc":{"start":{"line":230,"column":16},"end":{"line":230,"column":41}},"id":203},"204":{"loc":{"start":{"line":230,"column":23},"end":{"line":230,"column":40}},"id":204},"205":{"loc":{"start":{"line":231,"column":23},"end":{"line":231,"column":41}},"id":205},"206":{"loc":{"start":{"line":232,"column":16},"end":{"line":241,"column":19}},"id":206},"207":{"loc":{"start":{"line":232,"column":23},"end":{"line":241,"column":18}},"id":207},"208":{"loc":{"start":{"line":232,"column":32},"end":{"line":232,"column":38}},"id":208},"209":{"loc":{"start":{"line":235,"column":20},"end":{"line":240,"column":23}},"id":209},"210":{"loc":{"start":{"line":235,"column":27},"end":{"line":240,"column":22}},"id":210},"211":{"loc":{"start":{"line":235,"column":32},"end":{"line":237,"column":23}},"id":211},"212":{"loc":{"start":{"line":235,"column":33},"end":{"line":237,"column":22}},"id":212},"213":{"loc":{"start":{"line":236,"column":24},"end":{"line":236,"column":70}},"id":213},"214":{"loc":{"start":{"line":236,"column":31},"end":{"line":236,"column":69}},"id":214},"215":{"loc":{"start":{"line":236,"column":47},"end":{"line":236,"column":68}},"id":215},"216":{"loc":{"start":{"line":239,"column":24},"end":{"line":239,"column":58}},"id":216},"217":{"loc":{"start":{"line":239,"column":31},"end":{"line":239,"column":57}},"id":217},"218":{"loc":{"start":{"line":243,"column":16},"end":{"line":243,"column":41}},"id":218},"219":{"loc":{"start":{"line":243,"column":23},"end":{"line":243,"column":40}},"id":219},"220":{"loc":{"start":{"line":248,"column":4},"end":{"line":253,"column":6}},"id":220},"221":{"loc":{"start":{"line":249,"column":8},"end":{"line":249,"column":24}},"id":221},"222":{"loc":{"start":{"line":250,"column":8},"end":{"line":252,"column":11}},"id":222},"223":{"loc":{"start":{"line":250,"column":15},"end":{"line":252,"column":10}},"id":223},"224":{"loc":{"start":{"line":250,"column":22},"end":{"line":250,"column":51}},"id":224},"225":{"loc":{"start":{"line":251,"column":12},"end":{"line":251,"column":71}},"id":225},"226":{"loc":{"start":{"line":251,"column":19},"end":{"line":251,"column":70}},"id":226},"227":{"loc":{"start":{"line":251,"column":55},"end":{"line":251,"column":69}},"id":227},"228":{"loc":{"start":{"line":255,"column":4},"end":{"line":261,"column":6}},"id":228},"229":{"loc":{"start":{"line":256,"column":8},"end":{"line":260,"column":11}},"id":229},"230":{"loc":{"start":{"line":256,"column":15},"end":{"line":260,"column":10}},"id":230},"231":{"loc":{"start":{"line":256,"column":22},"end":{"line":256,"column":37}},"id":231},"232":{"loc":{"start":{"line":257,"column":12},"end":{"line":257,"column":24}},"id":232},"233":{"loc":{"start":{"line":259,"column":12},"end":{"line":259,"column":25}},"id":233},"234":{"loc":{"start":{"line":263,"column":4},"end":{"line":269,"column":6}},"id":234},"235":{"loc":{"start":{"line":264,"column":8},"end":{"line":268,"column":11}},"id":235},"236":{"loc":{"start":{"line":264,"column":15},"end":{"line":268,"column":10}},"id":236},"237":{"loc":{"start":{"line":264,"column":22},"end":{"line":264,"column":37}},"id":237},"238":{"loc":{"start":{"line":265,"column":12},"end":{"line":265,"column":33}},"id":238},"239":{"loc":{"start":{"line":265,"column":19},"end":{"line":265,"column":32}},"id":239},"240":{"loc":{"start":{"line":267,"column":12},"end":{"line":267,"column":25}},"id":240},"241":{"loc":{"start":{"line":271,"column":4},"end":{"line":277,"column":6}},"id":241},"242":{"loc":{"start":{"line":272,"column":8},"end":{"line":276,"column":11}},"id":242},"243":{"loc":{"start":{"line":272,"column":15},"end":{"line":276,"column":10}},"id":243},"244":{"loc":{"start":{"line":272,"column":22},"end":{"line":272,"column":37}},"id":244},"245":{"loc":{"start":{"line":273,"column":12},"end":{"line":273,"column":38}},"id":245},"246":{"loc":{"start":{"line":273,"column":19},"end":{"line":273,"column":37}},"id":246},"247":{"loc":{"start":{"line":275,"column":12},"end":{"line":275,"column":25}},"id":247},"248":{"loc":{"start":{"line":279,"column":4},"end":{"line":285,"column":6}},"id":248},"249":{"loc":{"start":{"line":280,"column":8},"end":{"line":284,"column":11}},"id":249},"250":{"loc":{"start":{"line":280,"column":15},"end":{"line":284,"column":10}},"id":250},"251":{"loc":{"start":{"line":280,"column":22},"end":{"line":280,"column":41}},"id":251},"252":{"loc":{"start":{"line":281,"column":12},"end":{"line":281,"column":41}},"id":252},"253":{"loc":{"start":{"line":281,"column":19},"end":{"line":281,"column":40}},"id":253},"254":{"loc":{"start":{"line":283,"column":12},"end":{"line":283,"column":25}},"id":254},"255":{"loc":{"start":{"line":287,"column":4},"end":{"line":290,"column":6}},"id":255},"256":{"loc":{"start":{"line":288,"column":8},"end":{"line":288,"column":24}},"id":256},"257":{"loc":{"start":{"line":289,"column":8},"end":{"line":289,"column":54}},"id":257},"258":{"loc":{"start":{"line":289,"column":15},"end":{"line":289,"column":53}},"id":258},"259":{"loc":{"start":{"line":289,"column":24},"end":{"line":289,"column":30}},"id":259},"260":{"loc":{"start":{"line":292,"column":4},"end":{"line":295,"column":6}},"id":260},"261":{"loc":{"start":{"line":293,"column":8},"end":{"line":293,"column":24}},"id":261},"262":{"loc":{"start":{"line":294,"column":8},"end":{"line":294,"column":54}},"id":262},"263":{"loc":{"start":{"line":294,"column":15},"end":{"line":294,"column":53}},"id":263},"264":{"loc":{"start":{"line":294,"column":24},"end":{"line":294,"column":30}},"id":264},"265":{"loc":{"start":{"line":297,"column":4},"end":{"line":301,"column":6}},"id":265},"266":{"loc":{"start":{"line":298,"column":12},"end":{"line":298,"column":33}},"id":266},"267":{"loc":{"start":{"line":299,"column":12},"end":{"line":299,"column":37}},"id":267},"268":{"loc":{"start":{"line":299,"column":19},"end":{"line":299,"column":36}},"id":268},"269":{"loc":{"start":{"line":300,"column":8},"end":{"line":300,"column":51}},"id":269},"270":{"loc":{"start":{"line":300,"column":15},"end":{"line":300,"column":50}},"id":270},"271":{"loc":{"start":{"line":300,"column":25},"end":{"line":300,"column":43}},"id":271},"272":{"loc":{"start":{"line":303,"column":4},"end":{"line":312,"column":6}},"id":272},"273":{"loc":{"start":{"line":304,"column":8},"end":{"line":304,"column":24}},"id":273},"274":{"loc":{"start":{"line":305,"column":8},"end":{"line":311,"column":11}},"id":274},"275":{"loc":{"start":{"line":305,"column":15},"end":{"line":311,"column":10}},"id":275},"276":{"loc":{"start":{"line":305,"column":22},"end":{"line":305,"column":46}},"id":276},"277":{"loc":{"start":{"line":307,"column":16},"end":{"line":307,"column":66}},"id":277},"278":{"loc":{"start":{"line":307,"column":23},"end":{"line":307,"column":65}},"id":278},"279":{"loc":{"start":{"line":309,"column":16},"end":{"line":309,"column":61}},"id":279},"280":{"loc":{"start":{"line":309,"column":23},"end":{"line":309,"column":60}},"id":280},"281":{"loc":{"start":{"line":314,"column":4},"end":{"line":334,"column":6}},"id":281},"282":{"loc":{"start":{"line":315,"column":8},"end":{"line":315,"column":24}},"id":282},"283":{"loc":{"start":{"line":316,"column":8},"end":{"line":316,"column":39}},"id":283},"284":{"loc":{"start":{"line":316,"column":17},"end":{"line":316,"column":38}},"id":284},"285":{"loc":{"start":{"line":317,"column":8},"end":{"line":317,"column":39}},"id":285},"286":{"loc":{"start":{"line":317,"column":17},"end":{"line":317,"column":38}},"id":286},"287":{"loc":{"start":{"line":318,"column":8},"end":{"line":318,"column":52}},"id":287},"288":{"loc":{"start":{"line":318,"column":17},"end":{"line":318,"column":51}},"id":288},"289":{"loc":{"start":{"line":318,"column":30},"end":{"line":318,"column":50}},"id":289},"290":{"loc":{"start":{"line":319,"column":8},"end":{"line":319,"column":52}},"id":290},"291":{"loc":{"start":{"line":319,"column":17},"end":{"line":319,"column":51}},"id":291},"292":{"loc":{"start":{"line":319,"column":30},"end":{"line":319,"column":50}},"id":292},"293":{"loc":{"start":{"line":320,"column":8},"end":{"line":320,"column":21}},"id":293},"294":{"loc":{"start":{"line":320,"column":8},"end":{"line":320,"column":20}},"id":294},"295":{"loc":{"start":{"line":322,"column":12},"end":{"line":324,"column":34}},"id":295},"296":{"loc":{"start":{"line":322,"column":12},"end":{"line":323,"column":25}},"id":296},"297":{"loc":{"start":{"line":324,"column":12},"end":{"line":324,"column":34}},"id":297},"298":{"loc":{"start":{"line":326,"column":12},"end":{"line":326,"column":27}},"id":298},"299":{"loc":{"start":{"line":326,"column":12},"end":{"line":326,"column":26}},"id":299},"300":{"loc":{"start":{"line":327,"column":12},"end":{"line":327,"column":27}},"id":300},"301":{"loc":{"start":{"line":327,"column":12},"end":{"line":327,"column":26}},"id":301},"302":{"loc":{"start":{"line":330,"column":12},"end":{"line":330,"column":27}},"id":302},"303":{"loc":{"start":{"line":330,"column":12},"end":{"line":330,"column":26}},"id":303},"304":{"loc":{"start":{"line":331,"column":12},"end":{"line":331,"column":33}},"id":304},"305":{"loc":{"start":{"line":331,"column":12},"end":{"line":331,"column":32}},"id":305},"306":{"loc":{"start":{"line":333,"column":8},"end":{"line":333,"column":43}},"id":306},"307":{"loc":{"start":{"line":333,"column":15},"end":{"line":333,"column":42}},"id":307},"308":{"loc":{"start":{"line":336,"column":4},"end":{"line":360,"column":6}},"id":308},"309":{"loc":{"start":{"line":338,"column":12},"end":{"line":338,"column":28}},"id":309},"310":{"loc":{"start":{"line":339,"column":12},"end":{"line":339,"column":40}},"id":310},"311":{"loc":{"start":{"line":339,"column":21},"end":{"line":339,"column":39}},"id":311},"312":{"loc":{"start":{"line":341,"column":8},"end":{"line":341,"column":39}},"id":312},"313":{"loc":{"start":{"line":341,"column":17},"end":{"line":341,"column":38}},"id":313},"314":{"loc":{"start":{"line":342,"column":8},"end":{"line":342,"column":39}},"id":314},"315":{"loc":{"start":{"line":342,"column":17},"end":{"line":342,"column":38}},"id":315},"316":{"loc":{"start":{"line":343,"column":8},"end":{"line":343,"column":52}},"id":316},"317":{"loc":{"start":{"line":343,"column":17},"end":{"line":343,"column":51}},"id":317},"318":{"loc":{"start":{"line":343,"column":30},"end":{"line":343,"column":50}},"id":318},"319":{"loc":{"start":{"line":344,"column":8},"end":{"line":344,"column":52}},"id":319},"320":{"loc":{"start":{"line":344,"column":17},"end":{"line":344,"column":51}},"id":320},"321":{"loc":{"start":{"line":344,"column":30},"end":{"line":344,"column":50}},"id":321},"322":{"loc":{"start":{"line":345,"column":12},"end":{"line":345,"column":51}},"id":322},"323":{"loc":{"start":{"line":345,"column":12},"end":{"line":345,"column":31}},"id":323},"324":{"loc":{"start":{"line":345,"column":35},"end":{"line":345,"column":51}},"id":324},"325":{"loc":{"start":{"line":346,"column":12},"end":{"line":346,"column":25}},"id":325},"326":{"loc":{"start":{"line":346,"column":12},"end":{"line":346,"column":24}},"id":326},"327":{"loc":{"start":{"line":348,"column":12},"end":{"line":350,"column":34}},"id":327},"328":{"loc":{"start":{"line":348,"column":12},"end":{"line":349,"column":25}},"id":328},"329":{"loc":{"start":{"line":350,"column":12},"end":{"line":350,"column":34}},"id":329},"330":{"loc":{"start":{"line":352,"column":12},"end":{"line":352,"column":27}},"id":330},"331":{"loc":{"start":{"line":352,"column":12},"end":{"line":352,"column":26}},"id":331},"332":{"loc":{"start":{"line":353,"column":12},"end":{"line":353,"column":27}},"id":332},"333":{"loc":{"start":{"line":353,"column":12},"end":{"line":353,"column":26}},"id":333},"334":{"loc":{"start":{"line":356,"column":12},"end":{"line":356,"column":27}},"id":334},"335":{"loc":{"start":{"line":356,"column":12},"end":{"line":356,"column":26}},"id":335},"336":{"loc":{"start":{"line":357,"column":12},"end":{"line":357,"column":33}},"id":336},"337":{"loc":{"start":{"line":357,"column":12},"end":{"line":357,"column":32}},"id":337},"338":{"loc":{"start":{"line":359,"column":8},"end":{"line":359,"column":43}},"id":338},"339":{"loc":{"start":{"line":359,"column":15},"end":{"line":359,"column":42}},"id":339},"340":{"loc":{"start":{"line":362,"column":4},"end":{"line":377,"column":6}},"id":340},"341":{"loc":{"start":{"line":363,"column":8},"end":{"line":363,"column":18}},"id":341},"342":{"loc":{"start":{"line":364,"column":8},"end":{"line":364,"column":39}},"id":342},"343":{"loc":{"start":{"line":364,"column":17},"end":{"line":364,"column":38}},"id":343},"344":{"loc":{"start":{"line":365,"column":8},"end":{"line":365,"column":37}},"id":344},"345":{"loc":{"start":{"line":365,"column":16},"end":{"line":365,"column":36}},"id":345},"346":{"loc":{"start":{"line":366,"column":8},"end":{"line":366,"column":52}},"id":346},"347":{"loc":{"start":{"line":366,"column":17},"end":{"line":366,"column":51}},"id":347},"348":{"loc":{"start":{"line":366,"column":30},"end":{"line":366,"column":50}},"id":348},"349":{"loc":{"start":{"line":367,"column":8},"end":{"line":367,"column":50}},"id":349},"350":{"loc":{"start":{"line":367,"column":16},"end":{"line":367,"column":49}},"id":350},"351":{"loc":{"start":{"line":367,"column":28},"end":{"line":367,"column":48}},"id":351},"352":{"loc":{"start":{"line":368,"column":12},"end":{"line":368,"column":51}},"id":352},"353":{"loc":{"start":{"line":368,"column":12},"end":{"line":368,"column":31}},"id":353},"354":{"loc":{"start":{"line":368,"column":35},"end":{"line":368,"column":51}},"id":354},"355":{"loc":{"start":{"line":369,"column":12},"end":{"line":369,"column":25}},"id":355},"356":{"loc":{"start":{"line":369,"column":12},"end":{"line":369,"column":24}},"id":356},"357":{"loc":{"start":{"line":370,"column":12},"end":{"line":370,"column":40}},"id":357},"358":{"loc":{"start":{"line":371,"column":12},"end":{"line":371,"column":25}},"id":358},"359":{"loc":{"start":{"line":372,"column":40},"end":{"line":372,"column":46}},"id":359},"360":{"loc":{"start":{"line":372,"column":48},"end":{"line":372,"column":51}},"id":360},"361":{"loc":{"start":{"line":373,"column":16},"end":{"line":373,"column":38}},"id":361},"362":{"loc":{"start":{"line":376,"column":8},"end":{"line":376,"column":23}},"id":362},"363":{"loc":{"start":{"line":376,"column":15},"end":{"line":376,"column":22}},"id":363},"364":{"loc":{"start":{"line":379,"column":4},"end":{"line":379,"column":28}},"id":364},"365":{"loc":{"start":{"line":381,"column":8},"end":{"line":381,"column":24}},"id":365},"366":{"loc":{"start":{"line":382,"column":8},"end":{"line":382,"column":33}},"id":366},"367":{"loc":{"start":{"line":382,"column":15},"end":{"line":382,"column":32}},"id":367},"368":{"loc":{"start":{"line":383,"column":8},"end":{"line":394,"column":11}},"id":368},"369":{"loc":{"start":{"line":383,"column":15},"end":{"line":394,"column":10}},"id":369},"370":{"loc":{"start":{"line":383,"column":22},"end":{"line":383,"column":37}},"id":370},"371":{"loc":{"start":{"line":384,"column":16},"end":{"line":384,"column":33}},"id":371},"372":{"loc":{"start":{"line":385,"column":16},"end":{"line":385,"column":42}},"id":372},"373":{"loc":{"start":{"line":385,"column":23},"end":{"line":385,"column":41}},"id":373},"374":{"loc":{"start":{"line":386,"column":12},"end":{"line":386,"column":52}},"id":374},"375":{"loc":{"start":{"line":386,"column":27},"end":{"line":386,"column":51}},"id":375},"376":{"loc":{"start":{"line":387,"column":12},"end":{"line":393,"column":15}},"id":376},"377":{"loc":{"start":{"line":387,"column":19},"end":{"line":393,"column":14}},"id":377},"378":{"loc":{"start":{"line":387,"column":26},"end":{"line":387,"column":45}},"id":378},"379":{"loc":{"start":{"line":388,"column":20},"end":{"line":388,"column":38}},"id":379},"380":{"loc":{"start":{"line":389,"column":20},"end":{"line":389,"column":44}},"id":380},"381":{"loc":{"start":{"line":389,"column":27},"end":{"line":389,"column":43}},"id":381},"382":{"loc":{"start":{"line":391,"column":20},"end":{"line":391,"column":46}},"id":382},"383":{"loc":{"start":{"line":391,"column":27},"end":{"line":391,"column":45}},"id":383},"384":{"loc":{"start":{"line":397,"column":4},"end":{"line":412,"column":6}},"id":384},"385":{"loc":{"start":{"line":398,"column":8},"end":{"line":398,"column":24}},"id":385},"386":{"loc":{"start":{"line":399,"column":8},"end":{"line":401,"column":11}},"id":386},"387":{"loc":{"start":{"line":399,"column":19},"end":{"line":401,"column":10}},"id":387},"388":{"loc":{"start":{"line":399,"column":33},"end":{"line":399,"column":43}},"id":388},"389":{"loc":{"start":{"line":400,"column":12},"end":{"line":400,"column":33}},"id":389},"390":{"loc":{"start":{"line":400,"column":19},"end":{"line":400,"column":32}},"id":390},"391":{"loc":{"start":{"line":402,"column":8},"end":{"line":411,"column":11}},"id":391},"392":{"loc":{"start":{"line":402,"column":15},"end":{"line":411,"column":10}},"id":392},"393":{"loc":{"start":{"line":403,"column":12},"end":{"line":403,"column":26}},"id":393},"394":{"loc":{"start":{"line":404,"column":12},"end":{"line":410,"column":15}},"id":394},"395":{"loc":{"start":{"line":404,"column":19},"end":{"line":410,"column":14}},"id":395},"396":{"loc":{"start":{"line":404,"column":24},"end":{"line":408,"column":15}},"id":396},"397":{"loc":{"start":{"line":404,"column":25},"end":{"line":408,"column":14}},"id":397},"398":{"loc":{"start":{"line":405,"column":16},"end":{"line":407,"column":19}},"id":398},"399":{"loc":{"start":{"line":405,"column":23},"end":{"line":407,"column":18}},"id":399},"400":{"loc":{"start":{"line":405,"column":30},"end":{"line":405,"column":51}},"id":400},"401":{"loc":{"start":{"line":406,"column":20},"end":{"line":406,"column":41}},"id":401},"402":{"loc":{"start":{"line":409,"column":16},"end":{"line":409,"column":28}},"id":402},"403":{"loc":{"start":{"line":414,"column":4},"end":{"line":434,"column":6}},"id":403},"404":{"loc":{"start":{"line":415,"column":8},"end":{"line":415,"column":22}},"id":404},"405":{"loc":{"start":{"line":416,"column":8},"end":{"line":416,"column":17}},"id":405},"406":{"loc":{"start":{"line":417,"column":8},"end":{"line":431,"column":8}},"id":406},"407":{"loc":{"start":{"line":417,"column":8},"end":{"line":430,"column":10}},"id":407},"408":{"loc":{"start":{"line":418,"column":12},"end":{"line":429,"column":15}},"id":408},"409":{"loc":{"start":{"line":418,"column":19},"end":{"line":429,"column":14}},"id":409},"410":{"loc":{"start":{"line":419,"column":16},"end":{"line":428,"column":19}},"id":410},"411":{"loc":{"start":{"line":419,"column":23},"end":{"line":428,"column":18}},"id":411},"412":{"loc":{"start":{"line":419,"column":34},"end":{"line":421,"column":18}},"id":412},"413":{"loc":{"start":{"line":420,"column":20},"end":{"line":420,"column":41}},"id":413},"414":{"loc":{"start":{"line":420,"column":27},"end":{"line":420,"column":40}},"id":414},"415":{"loc":{"start":{"line":423,"column":20},"end":{"line":427,"column":24}},"id":415},"416":{"loc":{"start":{"line":423,"column":27},"end":{"line":427,"column":23}},"id":416},"417":{"loc":{"start":{"line":423,"column":33},"end":{"line":427,"column":22}},"id":417},"418":{"loc":{"start":{"line":424,"column":24},"end":{"line":426,"column":27}},"id":418},"419":{"loc":{"start":{"line":424,"column":31},"end":{"line":426,"column":26}},"id":419},"420":{"loc":{"start":{"line":424,"column":38},"end":{"line":424,"column":57}},"id":420},"421":{"loc":{"start":{"line":425,"column":28},"end":{"line":425,"column":49}},"id":421},"422":{"loc":{"start":{"line":431,"column":8},"end":{"line":433,"column":11}},"id":422},"423":{"loc":{"start":{"line":431,"column":15},"end":{"line":433,"column":10}},"id":423},"424":{"loc":{"start":{"line":432,"column":12},"end":{"line":432,"column":32}},"id":424},"425":{"loc":{"start":{"line":432,"column":19},"end":{"line":432,"column":31}},"id":425}}}},"/Users/kris/q-io/fs-root.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":5},"10":{"index":10,"count":5},"13":{"index":13,"count":5},"14":{"index":14,"count":5},"15":{"index":15,"count":5},"16":{"index":16,"count":5},"17":{"index":17,"count":5},"18":{"index":18,"count":5},"19":{"index":19,"count":5},"20":{"index":20,"count":5},"21":{"index":21,"count":5},"22":{"index":22,"count":5},"23":{"index":23,"count":5},"24":{"index":24,"count":5},"25":{"index":25,"count":5},"26":{"index":26,"count":5},"27":{"index":27,"count":5},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"37":{"index":37,"count":1},"38":{"index":38,"count":1},"39":{"index":39,"count":1},"40":{"index":40,"count":1},"41":{"index":41,"count":1},"46":{"index":46,"count":1},"57":{"index":57,"count":1},"58":{"index":58,"count":4},"59":{"index":59,"count":4},"60":{"index":60,"count":4},"61":{"index":61,"count":4},"62":{"index":62,"count":4},"63":{"index":63,"count":4},"68":{"index":68,"count":1},"78":{"index":78,"count":1},"79":{"index":79,"count":1},"80":{"index":80,"count":1},"81":{"index":81,"count":1},"82":{"index":82,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":5},"3":{"index":3,"count":5},"4":{"index":4,"count":5},"5":{"index":5,"count":5},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"14":{"index":14,"count":4},"15":{"index":15,"count":4},"20":{"index":20,"count":1}},"hash":"0f5b78a15cb9d4d170bc48f1df919a3a","instrumentor":{"blockCounter":21,"nodeCounter":83,"source":"var Q = require(\"q\");\nvar BOOT = require(\"./fs-boot\");\nvar COMMON = require(\"./fs-common\");\n\nmodule.exports = RootFs;\n\nfunction RootFs(outer, root) {\n    var inner = Object.create(BOOT);\n\n    function attenuate(path) {\n\n        // the machinations of projecting a path inside a\n        // subroot\n        var actual;\n        // if it's absolute, we want the path relative to\n        // the root of the inner file system\n        if (outer.isAbsolute(path)) {\n            actual = outer.relativeFromDirectory(outer.ROOT, path);\n        } else {\n            actual = path;\n        }\n        // we join the path onto the root of the inner file\n        // system so that parent references from the root\n        // return to the root, emulating standard unix\n        // behavior\n        actual = outer.join(outer.ROOT, actual);\n        // then we reconstruct the path relative to the\n        // inner root\n        actual = outer.relativeFromDirectory(outer.ROOT, actual);\n        // and rejoin it on the outer root\n        actual = outer.join(root, actual);\n        // and find the corresponding real path\n        actual = outer.canonical(actual);\n        return Q.when(actual, function (actual) {\n            // and verify that the outer canonical path is\n            // actually inside the inner canonical path, to\n            // prevent break-outs\n            if (outer.contains(root, actual)) {\n                return {\n                    \"inner\": outer.join(outer.ROOT, outer.relativeFromDirectory(root, actual)),\n                    \"outer\": actual\n                };\n            } else {\n                return Q.reject(\"Can't find: \" + JSON.stringify(path));\n            }\n        });\n    }\n\n    function workingDirectory() {\n        return outer.ROOT;\n    }\n\n    COMMON.update(inner, workingDirectory);\n\n    inner.list = function (path) {\n        return Q.when(attenuate(path), function (path) {\n            return outer.list(path.outer);\n        }).then(null, function (reason) {\n            return Q.reject(\"Can't list \" + JSON.stringify(path));\n        });\n    };\n\n    inner.open = function (path, flags, charset) {\n        return Q.when(attenuate(path), function (path) {\n            return outer.open(path.outer, flags, charset);\n        }).then(null, function (reason) {\n            return Q.reject(\"Can't open \" + JSON.stringify(path));\n        });\n    };\n\n    inner.stat = function (path) {\n        return Q.when(attenuate(path), function (path) {\n            return outer.stat(path.outer);\n        }).then(null, function (reason) {\n            return Q.reject(\"Can't stat \" + JSON.stringify(path));\n        });\n    };\n\n    inner.canonical = function (path) {\n        return Q.when(attenuate(path), function (path) {\n            return path.inner;\n        }).then(null, function (reason) {\n            return Q.reject(\"Can't find canonical of \" + JSON.stringify(path));\n        });\n    };\n\n    return Q.when(outer.canonical(root), function (_root) {\n        root = _root;\n        return inner;\n    });\n}","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":21}},"id":0},"1":{"loc":{"start":{"line":1,"column":8},"end":{"line":1,"column":20}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":32}},"id":2},"3":{"loc":{"start":{"line":2,"column":11},"end":{"line":2,"column":31}},"id":3},"4":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"id":4},"5":{"loc":{"start":{"line":3,"column":13},"end":{"line":3,"column":35}},"id":5},"6":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":24}},"id":6},"7":{"loc":{"start":{"line":8,"column":4},"end":{"line":8,"column":36}},"id":7},"8":{"loc":{"start":{"line":8,"column":16},"end":{"line":8,"column":35}},"id":8},"9":{"loc":{"start":{"line":14,"column":8},"end":{"line":14,"column":19}},"id":9},"10":{"loc":{"start":{"line":17,"column":12},"end":{"line":17,"column":34}},"id":10},"11":{"loc":{"start":{"line":18,"column":12},"end":{"line":18,"column":67}},"id":11},"12":{"loc":{"start":{"line":18,"column":21},"end":{"line":18,"column":66}},"id":12},"13":{"loc":{"start":{"line":20,"column":12},"end":{"line":20,"column":26}},"id":13},"14":{"loc":{"start":{"line":26,"column":8},"end":{"line":26,"column":48}},"id":14},"15":{"loc":{"start":{"line":26,"column":17},"end":{"line":26,"column":47}},"id":15},"16":{"loc":{"start":{"line":29,"column":8},"end":{"line":29,"column":65}},"id":16},"17":{"loc":{"start":{"line":29,"column":17},"end":{"line":29,"column":64}},"id":17},"18":{"loc":{"start":{"line":31,"column":8},"end":{"line":31,"column":42}},"id":18},"19":{"loc":{"start":{"line":31,"column":17},"end":{"line":31,"column":41}},"id":19},"20":{"loc":{"start":{"line":33,"column":8},"end":{"line":33,"column":41}},"id":20},"21":{"loc":{"start":{"line":33,"column":17},"end":{"line":33,"column":40}},"id":21},"22":{"loc":{"start":{"line":34,"column":8},"end":{"line":46,"column":11}},"id":22},"23":{"loc":{"start":{"line":34,"column":15},"end":{"line":46,"column":10}},"id":23},"24":{"loc":{"start":{"line":38,"column":16},"end":{"line":38,"column":44}},"id":24},"25":{"loc":{"start":{"line":39,"column":16},"end":{"line":42,"column":18}},"id":25},"26":{"loc":{"start":{"line":40,"column":29},"end":{"line":40,"column":94}},"id":26},"27":{"loc":{"start":{"line":40,"column":52},"end":{"line":40,"column":93}},"id":27},"28":{"loc":{"start":{"line":44,"column":16},"end":{"line":44,"column":71}},"id":28},"29":{"loc":{"start":{"line":44,"column":23},"end":{"line":44,"column":70}},"id":29},"30":{"loc":{"start":{"line":44,"column":32},"end":{"line":44,"column":69}},"id":30},"31":{"loc":{"start":{"line":44,"column":49},"end":{"line":44,"column":69}},"id":31},"32":{"loc":{"start":{"line":50,"column":8},"end":{"line":50,"column":26}},"id":32},"33":{"loc":{"start":{"line":53,"column":4},"end":{"line":53,"column":43}},"id":33},"34":{"loc":{"start":{"line":53,"column":4},"end":{"line":53,"column":42}},"id":34},"35":{"loc":{"start":{"line":55,"column":4},"end":{"line":61,"column":6}},"id":35},"36":{"loc":{"start":{"line":56,"column":8},"end":{"line":60,"column":11}},"id":36},"37":{"loc":{"start":{"line":56,"column":15},"end":{"line":60,"column":10}},"id":37},"38":{"loc":{"start":{"line":56,"column":21},"end":{"line":58,"column":10}},"id":38},"39":{"loc":{"start":{"line":56,"column":22},"end":{"line":56,"column":37}},"id":39},"40":{"loc":{"start":{"line":57,"column":12},"end":{"line":57,"column":42}},"id":40},"41":{"loc":{"start":{"line":57,"column":19},"end":{"line":57,"column":41}},"id":41},"42":{"loc":{"start":{"line":59,"column":12},"end":{"line":59,"column":66}},"id":42},"43":{"loc":{"start":{"line":59,"column":19},"end":{"line":59,"column":65}},"id":43},"44":{"loc":{"start":{"line":59,"column":28},"end":{"line":59,"column":64}},"id":44},"45":{"loc":{"start":{"line":59,"column":44},"end":{"line":59,"column":64}},"id":45},"46":{"loc":{"start":{"line":63,"column":4},"end":{"line":69,"column":6}},"id":46},"47":{"loc":{"start":{"line":64,"column":8},"end":{"line":68,"column":11}},"id":47},"48":{"loc":{"start":{"line":64,"column":15},"end":{"line":68,"column":10}},"id":48},"49":{"loc":{"start":{"line":64,"column":21},"end":{"line":66,"column":10}},"id":49},"50":{"loc":{"start":{"line":64,"column":22},"end":{"line":64,"column":37}},"id":50},"51":{"loc":{"start":{"line":65,"column":12},"end":{"line":65,"column":58}},"id":51},"52":{"loc":{"start":{"line":65,"column":19},"end":{"line":65,"column":57}},"id":52},"53":{"loc":{"start":{"line":67,"column":12},"end":{"line":67,"column":66}},"id":53},"54":{"loc":{"start":{"line":67,"column":19},"end":{"line":67,"column":65}},"id":54},"55":{"loc":{"start":{"line":67,"column":28},"end":{"line":67,"column":64}},"id":55},"56":{"loc":{"start":{"line":67,"column":44},"end":{"line":67,"column":64}},"id":56},"57":{"loc":{"start":{"line":71,"column":4},"end":{"line":77,"column":6}},"id":57},"58":{"loc":{"start":{"line":72,"column":8},"end":{"line":76,"column":11}},"id":58},"59":{"loc":{"start":{"line":72,"column":15},"end":{"line":76,"column":10}},"id":59},"60":{"loc":{"start":{"line":72,"column":21},"end":{"line":74,"column":10}},"id":60},"61":{"loc":{"start":{"line":72,"column":22},"end":{"line":72,"column":37}},"id":61},"62":{"loc":{"start":{"line":73,"column":12},"end":{"line":73,"column":42}},"id":62},"63":{"loc":{"start":{"line":73,"column":19},"end":{"line":73,"column":41}},"id":63},"64":{"loc":{"start":{"line":75,"column":12},"end":{"line":75,"column":66}},"id":64},"65":{"loc":{"start":{"line":75,"column":19},"end":{"line":75,"column":65}},"id":65},"66":{"loc":{"start":{"line":75,"column":28},"end":{"line":75,"column":64}},"id":66},"67":{"loc":{"start":{"line":75,"column":44},"end":{"line":75,"column":64}},"id":67},"68":{"loc":{"start":{"line":79,"column":4},"end":{"line":85,"column":6}},"id":68},"69":{"loc":{"start":{"line":80,"column":8},"end":{"line":84,"column":11}},"id":69},"70":{"loc":{"start":{"line":80,"column":15},"end":{"line":84,"column":10}},"id":70},"71":{"loc":{"start":{"line":80,"column":21},"end":{"line":82,"column":10}},"id":71},"72":{"loc":{"start":{"line":80,"column":22},"end":{"line":80,"column":37}},"id":72},"73":{"loc":{"start":{"line":81,"column":12},"end":{"line":81,"column":30}},"id":73},"74":{"loc":{"start":{"line":83,"column":12},"end":{"line":83,"column":79}},"id":74},"75":{"loc":{"start":{"line":83,"column":19},"end":{"line":83,"column":78}},"id":75},"76":{"loc":{"start":{"line":83,"column":28},"end":{"line":83,"column":77}},"id":76},"77":{"loc":{"start":{"line":83,"column":57},"end":{"line":83,"column":77}},"id":77},"78":{"loc":{"start":{"line":87,"column":4},"end":{"line":90,"column":7}},"id":78},"79":{"loc":{"start":{"line":87,"column":11},"end":{"line":90,"column":6}},"id":79},"80":{"loc":{"start":{"line":87,"column":18},"end":{"line":87,"column":39}},"id":80},"81":{"loc":{"start":{"line":88,"column":8},"end":{"line":88,"column":21}},"id":81},"82":{"loc":{"start":{"line":89,"column":8},"end":{"line":89,"column":21}},"id":82}}}},"/Users/kris/q-io/fs-mock.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":58},"14":{"index":14,"count":29},"15":{"index":15,"count":29},"16":{"index":16,"count":29},"17":{"index":17,"count":29},"18":{"index":18,"count":215},"19":{"index":19,"count":29},"20":{"index":20,"count":29},"21":{"index":21,"count":27},"22":{"index":22,"count":27},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":39},"27":{"index":27,"count":39},"28":{"index":28,"count":39},"29":{"index":29,"count":39},"30":{"index":30,"count":39},"31":{"index":31,"count":64},"32":{"index":32,"count":64},"33":{"index":33,"count":64},"34":{"index":34,"count":64},"35":{"index":35,"count":64},"36":{"index":36,"count":64},"37":{"index":37,"count":64},"38":{"index":38,"count":64},"39":{"index":39,"count":64},"40":{"index":40,"count":64},"41":{"index":41,"count":64},"42":{"index":42,"count":30},"43":{"index":43,"count":12},"44":{"index":44,"count":12},"45":{"index":45,"count":12},"46":{"index":46,"count":12},"47":{"index":47,"count":12},"48":{"index":48,"count":18},"49":{"index":49,"count":18},"50":{"index":50,"count":52},"51":{"index":51,"count":52},"52":{"index":52,"count":1},"53":{"index":53,"count":51},"54":{"index":54,"count":51},"55":{"index":55,"count":51},"56":{"index":56,"count":51},"57":{"index":57,"count":51},"58":{"index":58,"count":51},"59":{"index":59,"count":51},"60":{"index":60,"count":51},"61":{"index":61,"count":51},"65":{"index":65,"count":51},"66":{"index":66,"count":51},"67":{"index":67,"count":51},"68":{"index":68,"count":1},"69":{"index":69,"count":38},"70":{"index":70,"count":38},"71":{"index":71,"count":38},"72":{"index":72,"count":38},"73":{"index":73,"count":38},"74":{"index":74,"count":38},"75":{"index":75,"count":38},"76":{"index":76,"count":38},"77":{"index":77,"count":38},"78":{"index":78,"count":38},"79":{"index":79,"count":38},"80":{"index":80,"count":38},"86":{"index":86,"count":38},"87":{"index":87,"count":38},"88":{"index":88,"count":38},"89":{"index":89,"count":38},"92":{"index":92,"count":38},"93":{"index":93,"count":38},"94":{"index":94,"count":38},"95":{"index":95,"count":38},"96":{"index":96,"count":38},"97":{"index":97,"count":38},"98":{"index":98,"count":38},"99":{"index":99,"count":38},"100":{"index":100,"count":26},"101":{"index":101,"count":26},"102":{"index":102,"count":4},"103":{"index":103,"count":8},"104":{"index":104,"count":8},"105":{"index":105,"count":8},"108":{"index":108,"count":8},"109":{"index":109,"count":8},"110":{"index":110,"count":8},"113":{"index":113,"count":30},"114":{"index":114,"count":30},"115":{"index":115,"count":30},"118":{"index":118,"count":30},"119":{"index":119,"count":30},"120":{"index":120,"count":30},"121":{"index":121,"count":1},"122":{"index":122,"count":1},"123":{"index":123,"count":1},"124":{"index":124,"count":1},"125":{"index":125,"count":29},"126":{"index":126,"count":1},"127":{"index":127,"count":2},"128":{"index":128,"count":2},"129":{"index":129,"count":2},"130":{"index":130,"count":2},"131":{"index":131,"count":2},"132":{"index":132,"count":2},"133":{"index":133,"count":2},"134":{"index":134,"count":2},"135":{"index":135,"count":2},"136":{"index":136,"count":2},"137":{"index":137,"count":2},"138":{"index":138,"count":2},"143":{"index":143,"count":2},"146":{"index":146,"count":2},"147":{"index":147,"count":1},"148":{"index":148,"count":19},"149":{"index":149,"count":19},"150":{"index":150,"count":19},"151":{"index":151,"count":19},"152":{"index":152,"count":19},"153":{"index":153,"count":19},"154":{"index":154,"count":19},"155":{"index":155,"count":19},"156":{"index":156,"count":19},"157":{"index":157,"count":19},"158":{"index":158,"count":19},"159":{"index":159,"count":19},"165":{"index":165,"count":6},"166":{"index":166,"count":6},"167":{"index":167,"count":6},"168":{"index":168,"count":6},"169":{"index":169,"count":6},"170":{"index":170,"count":6},"171":{"index":171,"count":13},"172":{"index":172,"count":1},"173":{"index":173,"count":2},"174":{"index":174,"count":2},"175":{"index":175,"count":2},"176":{"index":176,"count":2},"177":{"index":177,"count":2},"178":{"index":178,"count":2},"179":{"index":179,"count":2},"180":{"index":180,"count":2},"181":{"index":181,"count":2},"182":{"index":182,"count":2},"183":{"index":183,"count":2},"184":{"index":184,"count":2},"189":{"index":189,"count":2},"192":{"index":192,"count":2},"193":{"index":193,"count":1},"194":{"index":194,"count":109},"195":{"index":195,"count":109},"196":{"index":196,"count":109},"197":{"index":197,"count":109},"198":{"index":198,"count":109},"199":{"index":199,"count":109},"200":{"index":200,"count":109},"201":{"index":201,"count":109},"202":{"index":202,"count":1},"203":{"index":203,"count":2},"204":{"index":204,"count":2},"205":{"index":205,"count":2},"206":{"index":206,"count":2},"207":{"index":207,"count":2},"208":{"index":208,"count":2},"209":{"index":209,"count":2},"210":{"index":210,"count":1},"214":{"index":214,"count":1},"215":{"index":215,"count":1},"216":{"index":216,"count":1},"217":{"index":217,"count":1},"218":{"index":218,"count":1},"219":{"index":219,"count":1},"220":{"index":220,"count":1},"221":{"index":221,"count":1},"222":{"index":222,"count":1},"223":{"index":223,"count":1},"224":{"index":224,"count":1},"225":{"index":225,"count":1},"226":{"index":226,"count":1},"229":{"index":229,"count":1},"230":{"index":230,"count":1},"231":{"index":231,"count":1},"232":{"index":232,"count":1},"233":{"index":233,"count":1},"234":{"index":234,"count":1},"235":{"index":235,"count":1},"236":{"index":236,"count":1},"239":{"index":239,"count":1},"243":{"index":243,"count":1},"244":{"index":244,"count":1},"245":{"index":245,"count":3},"246":{"index":246,"count":3},"247":{"index":247,"count":3},"248":{"index":248,"count":3},"249":{"index":249,"count":3},"250":{"index":250,"count":3},"251":{"index":251,"count":3},"252":{"index":252,"count":3},"253":{"index":253,"count":3},"254":{"index":254,"count":3},"255":{"index":255,"count":3},"256":{"index":256,"count":3},"260":{"index":260,"count":3},"261":{"index":261,"count":1},"270":{"index":270,"count":1},"279":{"index":279,"count":1},"280":{"index":280,"count":5},"281":{"index":281,"count":5},"282":{"index":282,"count":5},"283":{"index":283,"count":5},"284":{"index":284,"count":5},"285":{"index":285,"count":5},"286":{"index":286,"count":5},"287":{"index":287,"count":5},"288":{"index":288,"count":5},"289":{"index":289,"count":5},"290":{"index":290,"count":5},"291":{"index":291,"count":5},"292":{"index":292,"count":5},"293":{"index":293,"count":5},"294":{"index":294,"count":5},"299":{"index":299,"count":5},"300":{"index":300,"count":5},"305":{"index":305,"count":5},"306":{"index":306,"count":5},"307":{"index":307,"count":5},"308":{"index":308,"count":5},"309":{"index":309,"count":5},"310":{"index":310,"count":5},"311":{"index":311,"count":5},"312":{"index":312,"count":5},"313":{"index":313,"count":4},"314":{"index":314,"count":4},"315":{"index":315,"count":5},"316":{"index":316,"count":4},"317":{"index":317,"count":2},"318":{"index":318,"count":2},"319":{"index":319,"count":2},"320":{"index":320,"count":2},"321":{"index":321,"count":3},"322":{"index":322,"count":2},"323":{"index":323,"count":1},"324":{"index":324,"count":1},"325":{"index":325,"count":1},"326":{"index":326,"count":1},"327":{"index":327,"count":1},"328":{"index":328,"count":1},"329":{"index":329,"count":1},"330":{"index":330,"count":1},"331":{"index":331,"count":1},"332":{"index":332,"count":1},"333":{"index":333,"count":1},"336":{"index":336,"count":1},"337":{"index":337,"count":1},"338":{"index":338,"count":7},"339":{"index":339,"count":7},"340":{"index":340,"count":7},"341":{"index":341,"count":7},"342":{"index":342,"count":7},"343":{"index":343,"count":7},"344":{"index":344,"count":7},"345":{"index":345,"count":1},"346":{"index":346,"count":14},"347":{"index":347,"count":14},"348":{"index":348,"count":14},"349":{"index":349,"count":14},"350":{"index":350,"count":14},"351":{"index":351,"count":14},"352":{"index":352,"count":14},"353":{"index":353,"count":14},"354":{"index":354,"count":44},"355":{"index":355,"count":44},"356":{"index":356,"count":44},"357":{"index":357,"count":44},"358":{"index":358,"count":44},"359":{"index":359,"count":44},"360":{"index":360,"count":44},"361":{"index":361,"count":44},"362":{"index":362,"count":29},"363":{"index":363,"count":29},"364":{"index":364,"count":29},"365":{"index":365,"count":29},"366":{"index":366,"count":14},"367":{"index":367,"count":14},"369":{"index":369,"count":137},"370":{"index":370,"count":137},"371":{"index":371,"count":137},"372":{"index":372,"count":137},"373":{"index":373,"count":137},"374":{"index":374,"count":1},"375":{"index":375,"count":323},"376":{"index":376,"count":323},"377":{"index":377,"count":323},"378":{"index":378,"count":319},"379":{"index":379,"count":319},"380":{"index":380,"count":319},"381":{"index":381,"count":319},"382":{"index":382,"count":4},"383":{"index":383,"count":4},"384":{"index":384,"count":4},"385":{"index":385,"count":1},"386":{"index":386,"count":55},"387":{"index":387,"count":55},"402":{"index":402,"count":1},"403":{"index":403,"count":8},"406":{"index":406,"count":8},"407":{"index":407,"count":8},"408":{"index":408,"count":8},"409":{"index":409,"count":8},"410":{"index":410,"count":8},"411":{"index":411,"count":8},"412":{"index":412,"count":8},"413":{"index":413,"count":8},"414":{"index":414,"count":1},"415":{"index":415,"count":4},"416":{"index":416,"count":4},"420":{"index":420,"count":1},"421":{"index":421,"count":212},"422":{"index":422,"count":1},"424":{"index":424,"count":1},"425":{"index":425,"count":1},"426":{"index":426,"count":1},"427":{"index":427,"count":7},"428":{"index":428,"count":54},"429":{"index":429,"count":1},"431":{"index":431,"count":1},"433":{"index":433,"count":68},"434":{"index":434,"count":68},"435":{"index":435,"count":68},"436":{"index":436,"count":1},"437":{"index":437,"count":1},"438":{"index":438,"count":1},"439":{"index":439,"count":52},"440":{"index":440,"count":66},"441":{"index":441,"count":66},"442":{"index":442,"count":66},"443":{"index":443,"count":66},"444":{"index":444,"count":66},"445":{"index":445,"count":66},"446":{"index":446,"count":1},"447":{"index":447,"count":1},"448":{"index":448,"count":1},"449":{"index":449,"count":173},"450":{"index":450,"count":1},"451":{"index":451,"count":827},"452":{"index":452,"count":827},"453":{"index":453,"count":827},"454":{"index":454,"count":260},"455":{"index":455,"count":567},"456":{"index":456,"count":567},"457":{"index":457,"count":567},"458":{"index":458,"count":120},"459":{"index":459,"count":120},"460":{"index":460,"count":120},"461":{"index":461,"count":24},"462":{"index":462,"count":8},"463":{"index":463,"count":8},"464":{"index":464,"count":8},"465":{"index":465,"count":8},"466":{"index":466,"count":8},"467":{"index":467,"count":8},"468":{"index":468,"count":8},"469":{"index":469,"count":439},"470":{"index":470,"count":439},"471":{"index":471,"count":439},"472":{"index":472,"count":1},"473":{"index":473,"count":24},"474":{"index":474,"count":3},"475":{"index":475,"count":21},"476":{"index":476,"count":21},"477":{"index":477,"count":21},"479":{"index":479,"count":21},"480":{"index":480,"count":8},"484":{"index":484,"count":21},"485":{"index":485,"count":21},"486":{"index":486,"count":21},"487":{"index":487,"count":3},"488":{"index":488,"count":3},"489":{"index":489,"count":3},"490":{"index":490,"count":1},"491":{"index":491,"count":1},"492":{"index":492,"count":1},"493":{"index":493,"count":2},"494":{"index":494,"count":1},"495":{"index":495,"count":8},"496":{"index":496,"count":8},"497":{"index":497,"count":8},"498":{"index":498,"count":8},"504":{"index":504,"count":8},"505":{"index":505,"count":8},"506":{"index":506,"count":8},"507":{"index":507,"count":8},"508":{"index":508,"count":8},"509":{"index":509,"count":8},"510":{"index":510,"count":8},"511":{"index":511,"count":1},"512":{"index":512,"count":1},"513":{"index":513,"count":1},"514":{"index":514,"count":1},"515":{"index":515,"count":1},"516":{"index":516,"count":1},"517":{"index":517,"count":1},"518":{"index":518,"count":1}},"blocks":{"0":{"index":0,"count":58},"1":{"index":1,"count":29},"3":{"index":3,"count":215},"4":{"index":4,"count":27},"5":{"index":5,"count":39},"6":{"index":6,"count":64},"7":{"index":7,"count":30},"8":{"index":8,"count":12},"9":{"index":9,"count":18},"10":{"index":10,"count":51},"11":{"index":11,"count":51},"13":{"index":13,"count":38},"14":{"index":14,"count":38},"16":{"index":16,"count":38},"18":{"index":18,"count":26},"19":{"index":19,"count":8},"20":{"index":20,"count":4},"22":{"index":22,"count":30},"25":{"index":25,"count":1},"26":{"index":26,"count":29},"27":{"index":27,"count":2},"28":{"index":28,"count":2},"32":{"index":32,"count":19},"33":{"index":33,"count":19},"35":{"index":35,"count":6},"36":{"index":36,"count":2},"37":{"index":37,"count":2},"41":{"index":41,"count":109},"42":{"index":42,"count":109},"43":{"index":43,"count":2},"44":{"index":44,"count":2},"46":{"index":46,"count":1},"47":{"index":47,"count":1},"51":{"index":51,"count":3},"52":{"index":52,"count":3},"58":{"index":58,"count":5},"59":{"index":59,"count":5},"62":{"index":62,"count":4},"63":{"index":63,"count":2},"64":{"index":64,"count":2},"65":{"index":65,"count":1},"66":{"index":66,"count":1},"68":{"index":68,"count":7},"69":{"index":69,"count":7},"70":{"index":70,"count":14},"71":{"index":71,"count":14},"72":{"index":72,"count":44},"73":{"index":73,"count":44},"74":{"index":74,"count":29},"75":{"index":75,"count":29},"76":{"index":76,"count":14},"77":{"index":77,"count":137},"79":{"index":79,"count":323},"80":{"index":80,"count":319},"81":{"index":81,"count":4},"82":{"index":82,"count":55},"83":{"index":83,"count":55},"87":{"index":87,"count":8},"89":{"index":89,"count":4},"90":{"index":90,"count":4},"91":{"index":91,"count":212},"93":{"index":93,"count":7},"94":{"index":94,"count":54},"97":{"index":97,"count":68},"98":{"index":98,"count":52},"99":{"index":99,"count":66},"100":{"index":100,"count":173},"101":{"index":101,"count":827},"102":{"index":102,"count":260},"103":{"index":103,"count":120},"104":{"index":104,"count":32},"105":{"index":105,"count":24},"106":{"index":106,"count":8},"107":{"index":107,"count":24},"108":{"index":108,"count":3},"110":{"index":110,"count":8},"112":{"index":112,"count":3},"113":{"index":113,"count":2},"114":{"index":114,"count":8},"116":{"index":116,"count":1}},"hash":"4d2ab4f2ca7a6c88defa17173d3f7881","instrumentor":{"blockCounter":117,"nodeCounter":519,"source":"var Q = require(\"q\");\nvar Boot = require(\"./fs-boot\");\nvar Common = require(\"./fs-common\");\nvar BufferStream = require(\"./buffer-stream\");\nvar Reader = require(\"./reader\");\nvar Set = require(\"collections/set\");\n\nmodule.exports = MockFs;\n\nfunction MockFs(files, workingDirectory) {\n    if (!(this instanceof MockFs)) {\n        return new MockFs(files, workingDirectory);\n    }\n    this._root = new DirectoryNode(this, \"/\");\n\n    function init() {\n        // construct a file tree\n    }\n\n    Common.update(this, function () {\n        return workingDirectory;\n    });\n\n    workingDirectory = workingDirectory || this.ROOT;\n    if (files) {\n        this._init(files);\n    }\n}\n\nMockFs.prototype = Object.create(Boot);\n\nMockFs.prototype._init = function (files, tree) {\n    tree = tree || this.ROOT;\n    Object.keys(files).forEach(function (path) {\n        var content = files[path];\n        path = this.join(tree, path);\n        var directory = this.directory(path);\n        var base = this.base(path);\n        var directoryNode = this._root._walk(directory, true);\n        var fileNode = new FileNode(this);\n        if (!(content instanceof Buffer)) {\n            if (typeof content === \"object\") {\n                // make directory\n                this._root._walk(path, true);\n                // make content\n                this._init(content, path);\n                return;\n            } else {\n                content = new Buffer(String(content), \"utf-8\");\n            }\n        }\n        directoryNode._entries[base] = fileNode;\n        fileNode._chunks = [content];\n    }, this);\n};\n\nMockFs.prototype.list = function (path) {\n    var self = this;\n    return Q.fcall(function () {\n        path = self.absolute(path);\n        var node = self._root._walk(path)._follow(path);\n        if (!node.isDirectory()) {\n            new Error(\"Can't list non-directory: \" + JSON.stringify(path));\n        }\n        return Object.keys(node._entries).sort();\n    });\n};\n\nMockFs.prototype.open = function (path, flags, charset, options) {\n    var self = this;\n    return Q.fcall(function () {\n        path = self.absolute(path);\n        var directory = self.directory(path);\n        var base = self.base(path);\n        var node = self._root._walk(directory);\n        if (!node.isDirectory()) {\n            throw new Error(\"Can't find \" + path + \" because \" + directory + \" is not a directory\");\n        }\n        if (typeof flags == \"object\") {\n            options = flags;\n            flags = options.flags;\n            charset = options.charset;\n        } else {\n            options = options || {};\n        }\n        flags = flags || \"r\";\n        var binary = flags.indexOf(\"b\") >= 0;\n        var write = flags.indexOf(\"w\") >= 0;\n        if (!binary) {\n            charset = charset || \"utf-8\";\n        }\n        if (write) {\n            if (!node._entries[base]) {\n                node._entries[base] = new FileNode(this);\n            }\n            var fileNode = node._entries[base]._follow(path);\n            if (!fileNode.isFile()) {\n                throw new Error(\"Can't write non-file \" + path);\n            }\n            fileNode._lastModified = new Date();\n            fileNode._lastAccessed = new Date();\n            return new BufferStream(fileNode._chunks, charset);\n        } else { // read\n            if (!node._entries[base]) {\n                throw new Error(\"Can't read non-existant \" + path);\n            }\n            var fileNode = node._entries[base]._follow(path);\n            if (!fileNode.isFile()) {\n                throw new Error(\"Can't read non-file \" + path);\n            }\n            fileNode._lastAccessed = new Date();\n            if (\"begin\" in options && \"end\" in options) {\n                return new BufferStream(\n                    [\n                        Reader.join(fileNode._chunks)\n                        .slice(options.begin, options.end)\n                    ],\n                    charset\n                );\n            } else {\n                return new BufferStream(fileNode._chunks, charset);\n            }\n        }\n    });\n};\n\nMockFs.prototype.remove = function (path) {\n    var self = this;\n    return Q.fcall(function () {\n        path = self.absolute(path);\n        var directory = self.directory(path);\n        var name = self.base(path);\n        var node = self._root._walk(directory);\n        if (!node.isDirectory()) {\n            throw new Error(\"Can't remove file from non-directory: \" + path);\n        }\n        if (!node._entries[name]) {\n            throw new Error(\"Can't remove non-existant file: \" + path);\n        }\n        if (node._entries[name].isDirectory()) {\n            throw new Error(\"Can't remove directory. Use removeDirectory: \" + path);\n        }\n        delete node._entries[name];\n    });\n};\n\nMockFs.prototype.makeDirectory = function (path) {\n    var self = this;\n    return Q.fcall(function () {\n        path = self.absolute(path);\n        var directory = self.directory(path);\n        var name = self.base(path);\n        var node = self._root._walk(directory);\n        if (!node.isDirectory()) {\n            var error =  new Error(\"Can't make directory in non-directory: \" + path);\n            error.code = \"EEXISTS\";\n            error.exists = true;\n            throw error;\n        }\n        if (node._entries[name]) {\n            var error = new Error(\"Can't make directory. Entry exists: \" + path);\n            error.code = \"EISDIR\";\n            error.exists = true;\n            error.isDirectory = true;\n            throw error;\n        }\n        node._entries[name] = new DirectoryNode(self);\n    });\n};\n\nMockFs.prototype.removeDirectory = function (path) {\n    var self = this;\n    return Q.fcall(function () {\n        path = self.absolute(path);\n        var directory = self.directory(path);\n        var name = self.base(path);\n        var node = self._root._walk(directory);\n        if (!node.isDirectory()) {\n            throw new Error(\"Can't remove directory from non-directory: \" + path);\n        }\n        if (!node._entries[name]) {\n            throw new Error(\"Can't remove non-existant directory: \" + path);\n        }\n        if (!node._entries[name].isDirectory()) {\n            throw new Error(\"Can't remove non-directory: \" + path);\n        }\n        delete node._entries[name];\n    });\n};\n\nMockFs.prototype.stat = function (path) {\n    var self = this;\n    return Q.fcall(function () {\n        path = self.absolute(path);\n        return self._root._walk(path)._follow(path);\n    });\n};\n\nMockFs.prototype.statLink = function (path) {\n    var self = this;\n    return Q.fcall(function () {\n        path = self.absolute(path);\n        var node = self._root._walk(path);\n        if (!node.isSymbolicLink()) {\n            throw new Error(\"Path is not symbolic link: \" + JSON.stringify(path));\n        }\n        return node;\n    });\n};\n\nMockFs.prototype.link = function (source, target) {\n    var self = this;\n    return Q.fcall(function () {\n        source = self.absolute(source);\n        target = self.absolute(target);\n        var sourceNode = self._root._walk(source)._follow(source);\n        if (!sourceNode.isFile()) {\n            throw new Error(\"Can't link non-file: \" + source);\n        }\n        var directory = self.directory(target);\n        var base = self.base(target);\n        var targetNode = self._root._walk(directory)._follow(directory);\n        if (!targetNode.isDirectory()) {\n            throw new Error(\"Can't create link in non-directory: \" + target);\n        }\n        if (targetNode._entries[base] && targetNode._entries[base].isDirectory()) {\n            throw new Error(\"Can't overwrite existing directory with hard link: \" + target);\n        }\n        targetNode._entries[base] = sourceNode;\n    });\n};\n\nMockFs.prototype.symbolicLink = function (target, relative, type) {\n    var self = this;\n    return Q.fcall(function () {\n        target = self.absolute(target);\n        var directory = self.directory(target);\n        var base = self.base(target);\n        var node = self._root._walk(directory);\n        if (node._entries[base] && node._entries[base].isDirectory()) {\n            throw new Error(\"Can't overwrite existing directory with symbolic link: \" + target);\n        }\n        node._entries[base] = new LinkNode(self, relative);\n    });\n};\n\nMockFs.prototype.chown = function (path, owner) {\n    var self = this;\n    return Q.fcall(function () {\n        path = self.absolute(path);\n        self._root._walk(path)._follow(path)._owner = owner;\n    });\n};\n\nMockFs.prototype.chmod = function (path, mode) {\n    var self = this;\n    return Q.fcall(function () {\n        path = self.absolute(path);\n        self._root._walk(path)._follow(path)._mode = mode;\n    });\n};\n\nMockFs.prototype.move = function (source, target) {\n    var self = this;\n    return Q.fcall(function () {\n        source = self.absolute(source);\n        target = self.absolute(target);\n\n        var sourceDirectory = self.directory(source);\n        var sourceDirectoryNode = self._root._walk(sourceDirectory)._follow(sourceDirectory);\n        var sourceName = self.base(source);\n        var sourceNode = sourceDirectoryNode._entries[sourceName];\n\n        if (!sourceNode) {\n            var error = new Error(\"Can't copy non-existent file: \" + source);\n            error.code = \"ENOENT\";\n            throw error;\n        }\n\n        sourceNode = sourceNode._follow(source);\n\n        // check again after following symbolic links\n        if (!sourceNode) {\n            var error = new Error(\"Can't copy non-existent file: \" + source);\n            error.code = \"ENOENT\";\n            throw error;\n        }\n\n        var targetDirectory = self.directory(target);\n        var targetDirectoryNode = self._root._walk(targetDirectory)._follow(targetDirectory);\n        var targetName = self.base(target);\n        var targetNode = targetDirectoryNode._entries[targetName]; // might not exist, not followed\n\n        if (targetNode) {\n            targetNode = targetNode._follow(target);\n        }\n\n        if (targetNode && targetNode.isDirectory()) {\n            var error = new Error(\"Can't copy over existing directory: \" + target);\n            error.code = \"EISDIR\";\n            throw error;\n        }\n\n        // do not copy over self, even with symbolic links to confuse the issue\n        if (targetNode === sourceNode) {\n            return;\n        }\n\n        targetDirectoryNode._entries[targetName] = sourceNode;\n        delete sourceDirectoryNode._entries[sourceName];\n    });\n};\n\nMockFs.prototype.readLink = function (path) {\n    var self = this;\n    return Q.fcall(function () {\n        path = self.absolute(path);\n        var node = self._root._walk(path);\n        if (!self.isSymbolicLink()) {\n            throw new Error(\"Can't read non-symbolic link: \" + path);\n        }\n        return node._link;\n    });\n};\n\nMockFs.prototype.canonical = function (path) {\n    var self = this;\n    return Q.fcall(function () {\n        path = self.absolute(path);\n        return self._root._canonical(path);\n    });\n};\n\nMockFs.mock = mock;\nfunction mock(fs, root) {\n    return Q.when(fs.listTree(root), function (list) {\n        var tree = {};\n        return Q.all(list.map(function (path) {\n            var actual = fs.join(root, path);\n            var relative = fs.relativeFromDirectory(root, actual);\n            return Q.when(fs.stat(actual), function (stat) {\n                if (stat.isFile()) {\n                    return Q.when(fs.read(path, \"rb\"), function (content) {\n                        tree[relative] = content;\n                    });\n                }\n            });\n        })).then(function () {\n            return MockFs(tree);\n        });\n    });\n}\n\nfunction Node(fs) {\n    if (!fs)\n        throw new Error(\"FS required argument\");\n    this._fs = fs;\n    this._accessed = this._modified = new Date();\n    this._mode = parseInt(\"0644\", 8);\n    this._owner = null;\n}\n\nNode.prototype._walk = function (path, make, via) {\n    var parts = this._fs.split(path);\n    if (this._fs.isAbsolute(path)) {\n        parts.shift();\n        return this._fs._root._walkParts(parts, make, this._fs.ROOT);\n    } else {\n        return this._walkParts(parts, make, via || this._fs.ROOT);\n    }\n};\n\nNode.prototype._walkParts = function (parts, make, via) {\n    if (parts.length === 0) {\n        return this;\n    } else {\n        var part = parts.shift();\n        if (part === \"\") {\n            return this._walkParts(parts, make, this._fs.join(via, part));\n        } else {\n            throw new Error(\"Can't find \" + JSON.stringify(this._fs.resolve(part, this._fs.join(parts))) + \" via \" + JSON.stringify(via));\n        }\n    }\n};\n\nNode.prototype._canonical = function (path) {\n    if (!this._fs.isAbsolute(path)) {\n        throw new Error(\"Path must be absolute for _canonical: \" + path);\n    }\n    var parts = this._fs.split(path);\n    parts.shift();\n    var via = this._fs.ROOT;\n    return via + this._fs._root._canonicalParts(parts, via);\n};\n\nNode.prototype._canonicalParts = function (parts, via) {\n    if (parts.length === 0) {\n        return via;\n    }\n    return this._fs.join(via, this._fs.join(parts));\n};\n\nNode.prototype._follow = function () {\n    return this;\n};\n\nNode.prototype._touch = function () {\n    this._modified = new Date();\n};\n\nvar stats = [\n    \"isDirectory\",\n    \"isFile\",\n    \"isBlockDevice\",\n    \"isCharacterDevice\",\n    \"isSymbolicLink\",\n    \"isFIFO\",\n    \"isSocket\"\n];\n\nstats.forEach(function (name) {\n    Node.prototype[name] = function () {\n        return false;\n    };\n});\n\nNode.prototype.lastAccessed = function () {\n    return this._accessed;\n};\n\nNode.prototype.lastModified = function () {\n    return this._modified;\n};\n\nfunction FileNode(fs) {\n    Node.call(this, fs);\n    this._chunks = [];\n}\n\nFileNode.prototype = Object.create(Node.prototype);\n\nFileNode.prototype.isFile = function () {\n    return true;\n};\n\nfunction DirectoryNode(fs) {\n    Node.call(this, fs);\n    this._entries = Object.create(null);\n    this._mode = parseInt(\"0755\", 8);\n}\n\nDirectoryNode.prototype = Object.create(Node.prototype);\n\nDirectoryNode.prototype.isDirectory = function () {\n    return true;\n};\n\nDirectoryNode.prototype._walkParts = function (parts, make, via) {\n    via = via || this._fs.ROOT;\n    if (parts.length === 0) {\n        return this;\n    }\n    var part = parts.shift();\n    if (part === \"\") {\n        return this._walkParts(parts, make, this._fs.join(via, part));\n    }\n    if (!this._entries[part]) {\n        if (make) {\n            this._entries[part] = new DirectoryNode(this._fs);\n        } else {\n            throw new Error(\"Can't find \" + JSON.stringify(this._fs.join(parts)) + \" via \" + JSON.stringify(via));\n        }\n    }\n    return this._entries[part]._walkParts(parts, make, this._fs.join(via, part));\n};\n\nDirectoryNode.prototype._canonicalParts = function (parts, via) {\n    if (parts.length === 0) {\n        return via;\n    }\n    var part = parts.shift();\n    if (part === \"\") {\n        return via;\n    }\n    if (via === this._fs.ROOT) {\n        via = \"\";\n    }\n    if (!this._entries[part]) {\n        return this._fs.join(via, part, this._fs.join(parts));\n    }\n    return this._entries[part]._canonicalParts(\n        parts,\n        this._fs.join(via, part)\n    );\n};\n\nfunction LinkNode(fs, link) {\n    Node.call(this, fs);\n    this._link = link;\n}\n\nLinkNode.prototype = Object.create(Node.prototype);\n\nLinkNode.prototype.isSymbolicLink = function () {\n    return true;\n};\n\nLinkNode.prototype._follow = function (via, memo) {\n    memo = memo || Set();\n    if (memo.has(this)) {\n        var error = new Error(\"Can't follow symbolic link cycle at \" + JSON.stringify(via));\n        error.code = \"ELOOP\";\n        throw error;\n    }\n    memo.add(this);\n    var link = this._fs.join(via, \"..\", this._link);\n    return this._walk(link, null, \"<link>\")._follow(link, memo);\n};\n\nLinkNode.prototype._canonicalParts = function (parts, via) {\n    return this._fs.relativeFromDirectory(this._fs.ROOT,\n        this._fs._root._canonical(\n            this._fs.absolute(this._fs.join(via, \"..\", this._link))\n        )\n    );\n};\n\n// cycle breaking\nvar FS = require(\"./fs\");","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":21}},"id":0},"1":{"loc":{"start":{"line":1,"column":8},"end":{"line":1,"column":20}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":32}},"id":2},"3":{"loc":{"start":{"line":2,"column":11},"end":{"line":2,"column":31}},"id":3},"4":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"id":4},"5":{"loc":{"start":{"line":3,"column":13},"end":{"line":3,"column":35}},"id":5},"6":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":46}},"id":6},"7":{"loc":{"start":{"line":4,"column":19},"end":{"line":4,"column":45}},"id":7},"8":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":33}},"id":8},"9":{"loc":{"start":{"line":5,"column":13},"end":{"line":5,"column":32}},"id":9},"10":{"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":37}},"id":10},"11":{"loc":{"start":{"line":6,"column":10},"end":{"line":6,"column":36}},"id":11},"12":{"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":24}},"id":12},"13":{"loc":{"start":{"line":11,"column":9},"end":{"line":11,"column":33}},"id":13},"14":{"loc":{"start":{"line":12,"column":8},"end":{"line":12,"column":51}},"id":14},"15":{"loc":{"start":{"line":14,"column":4},"end":{"line":14,"column":46}},"id":15},"16":{"loc":{"start":{"line":20,"column":4},"end":{"line":22,"column":7}},"id":16},"17":{"loc":{"start":{"line":20,"column":4},"end":{"line":22,"column":6}},"id":17},"18":{"loc":{"start":{"line":21,"column":8},"end":{"line":21,"column":32}},"id":18},"19":{"loc":{"start":{"line":24,"column":4},"end":{"line":24,"column":53}},"id":19},"20":{"loc":{"start":{"line":24,"column":23},"end":{"line":24,"column":52}},"id":20},"21":{"loc":{"start":{"line":26,"column":8},"end":{"line":26,"column":26}},"id":21},"22":{"loc":{"start":{"line":26,"column":8},"end":{"line":26,"column":25}},"id":22},"23":{"loc":{"start":{"line":30,"column":0},"end":{"line":30,"column":39}},"id":23},"24":{"loc":{"start":{"line":30,"column":19},"end":{"line":30,"column":38}},"id":24},"25":{"loc":{"start":{"line":32,"column":0},"end":{"line":55,"column":2}},"id":25},"26":{"loc":{"start":{"line":33,"column":4},"end":{"line":33,"column":29}},"id":26},"27":{"loc":{"start":{"line":33,"column":11},"end":{"line":33,"column":28}},"id":27},"28":{"loc":{"start":{"line":34,"column":4},"end":{"line":54,"column":13}},"id":28},"29":{"loc":{"start":{"line":34,"column":4},"end":{"line":54,"column":12}},"id":29},"30":{"loc":{"start":{"line":34,"column":15},"end":{"line":34,"column":22}},"id":30},"31":{"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":34}},"id":31},"32":{"loc":{"start":{"line":36,"column":8},"end":{"line":36,"column":37}},"id":32},"33":{"loc":{"start":{"line":36,"column":15},"end":{"line":36,"column":36}},"id":33},"34":{"loc":{"start":{"line":37,"column":8},"end":{"line":37,"column":45}},"id":34},"35":{"loc":{"start":{"line":37,"column":24},"end":{"line":37,"column":44}},"id":35},"36":{"loc":{"start":{"line":38,"column":8},"end":{"line":38,"column":35}},"id":36},"37":{"loc":{"start":{"line":38,"column":19},"end":{"line":38,"column":34}},"id":37},"38":{"loc":{"start":{"line":39,"column":8},"end":{"line":39,"column":62}},"id":38},"39":{"loc":{"start":{"line":39,"column":28},"end":{"line":39,"column":61}},"id":39},"40":{"loc":{"start":{"line":40,"column":8},"end":{"line":40,"column":42}},"id":40},"41":{"loc":{"start":{"line":41,"column":13},"end":{"line":41,"column":40}},"id":41},"42":{"loc":{"start":{"line":42,"column":16},"end":{"line":42,"column":43}},"id":42},"43":{"loc":{"start":{"line":44,"column":16},"end":{"line":44,"column":45}},"id":43},"44":{"loc":{"start":{"line":44,"column":16},"end":{"line":44,"column":44}},"id":44},"45":{"loc":{"start":{"line":46,"column":16},"end":{"line":46,"column":42}},"id":45},"46":{"loc":{"start":{"line":46,"column":16},"end":{"line":46,"column":41}},"id":46},"47":{"loc":{"start":{"line":47,"column":16},"end":{"line":47,"column":23}},"id":47},"48":{"loc":{"start":{"line":49,"column":16},"end":{"line":49,"column":63}},"id":48},"49":{"loc":{"start":{"line":49,"column":37},"end":{"line":49,"column":52}},"id":49},"50":{"loc":{"start":{"line":52,"column":8},"end":{"line":52,"column":48}},"id":50},"51":{"loc":{"start":{"line":53,"column":8},"end":{"line":53,"column":37}},"id":51},"52":{"loc":{"start":{"line":57,"column":0},"end":{"line":67,"column":2}},"id":52},"53":{"loc":{"start":{"line":58,"column":4},"end":{"line":58,"column":20}},"id":53},"54":{"loc":{"start":{"line":59,"column":4},"end":{"line":66,"column":7}},"id":54},"55":{"loc":{"start":{"line":59,"column":11},"end":{"line":66,"column":6}},"id":55},"56":{"loc":{"start":{"line":60,"column":8},"end":{"line":60,"column":35}},"id":56},"57":{"loc":{"start":{"line":60,"column":15},"end":{"line":60,"column":34}},"id":57},"58":{"loc":{"start":{"line":61,"column":8},"end":{"line":61,"column":56}},"id":58},"59":{"loc":{"start":{"line":61,"column":19},"end":{"line":61,"column":55}},"id":59},"60":{"loc":{"start":{"line":61,"column":35},"end":{"line":61,"column":41}},"id":60},"61":{"loc":{"start":{"line":62,"column":13},"end":{"line":62,"column":31}},"id":61},"62":{"loc":{"start":{"line":63,"column":12},"end":{"line":63,"column":75}},"id":62},"63":{"loc":{"start":{"line":63,"column":22},"end":{"line":63,"column":73}},"id":63},"64":{"loc":{"start":{"line":63,"column":53},"end":{"line":63,"column":73}},"id":64},"65":{"loc":{"start":{"line":65,"column":8},"end":{"line":65,"column":49}},"id":65},"66":{"loc":{"start":{"line":65,"column":15},"end":{"line":65,"column":48}},"id":66},"67":{"loc":{"start":{"line":65,"column":26},"end":{"line":65,"column":41}},"id":67},"68":{"loc":{"start":{"line":69,"column":0},"end":{"line":125,"column":2}},"id":68},"69":{"loc":{"start":{"line":70,"column":4},"end":{"line":70,"column":20}},"id":69},"70":{"loc":{"start":{"line":71,"column":4},"end":{"line":124,"column":7}},"id":70},"71":{"loc":{"start":{"line":71,"column":11},"end":{"line":124,"column":6}},"id":71},"72":{"loc":{"start":{"line":72,"column":8},"end":{"line":72,"column":35}},"id":72},"73":{"loc":{"start":{"line":72,"column":15},"end":{"line":72,"column":34}},"id":73},"74":{"loc":{"start":{"line":73,"column":8},"end":{"line":73,"column":45}},"id":74},"75":{"loc":{"start":{"line":73,"column":24},"end":{"line":73,"column":44}},"id":75},"76":{"loc":{"start":{"line":74,"column":8},"end":{"line":74,"column":35}},"id":76},"77":{"loc":{"start":{"line":74,"column":19},"end":{"line":74,"column":34}},"id":77},"78":{"loc":{"start":{"line":75,"column":8},"end":{"line":75,"column":47}},"id":78},"79":{"loc":{"start":{"line":75,"column":19},"end":{"line":75,"column":46}},"id":79},"80":{"loc":{"start":{"line":76,"column":13},"end":{"line":76,"column":31}},"id":80},"81":{"loc":{"start":{"line":77,"column":12},"end":{"line":77,"column":100}},"id":81},"82":{"loc":{"start":{"line":77,"column":28},"end":{"line":77,"column":98}},"id":82},"83":{"loc":{"start":{"line":77,"column":28},"end":{"line":77,"column":74}},"id":83},"84":{"loc":{"start":{"line":77,"column":28},"end":{"line":77,"column":62}},"id":84},"85":{"loc":{"start":{"line":77,"column":28},"end":{"line":77,"column":48}},"id":85},"86":{"loc":{"start":{"line":79,"column":12},"end":{"line":79,"column":36}},"id":86},"87":{"loc":{"start":{"line":80,"column":12},"end":{"line":80,"column":28}},"id":87},"88":{"loc":{"start":{"line":81,"column":12},"end":{"line":81,"column":34}},"id":88},"89":{"loc":{"start":{"line":82,"column":12},"end":{"line":82,"column":38}},"id":89},"90":{"loc":{"start":{"line":84,"column":12},"end":{"line":84,"column":36}},"id":90},"91":{"loc":{"start":{"line":84,"column":22},"end":{"line":84,"column":35}},"id":91},"92":{"loc":{"start":{"line":86,"column":8},"end":{"line":86,"column":29}},"id":92},"93":{"loc":{"start":{"line":86,"column":16},"end":{"line":86,"column":28}},"id":93},"94":{"loc":{"start":{"line":87,"column":8},"end":{"line":87,"column":45}},"id":94},"95":{"loc":{"start":{"line":87,"column":21},"end":{"line":87,"column":44}},"id":95},"96":{"loc":{"start":{"line":87,"column":21},"end":{"line":87,"column":39}},"id":96},"97":{"loc":{"start":{"line":88,"column":8},"end":{"line":88,"column":44}},"id":97},"98":{"loc":{"start":{"line":88,"column":20},"end":{"line":88,"column":43}},"id":98},"99":{"loc":{"start":{"line":88,"column":20},"end":{"line":88,"column":38}},"id":99},"100":{"loc":{"start":{"line":90,"column":12},"end":{"line":90,"column":41}},"id":100},"101":{"loc":{"start":{"line":90,"column":22},"end":{"line":90,"column":40}},"id":101},"102":{"loc":{"start":{"line":94,"column":16},"end":{"line":94,"column":57}},"id":102},"103":{"loc":{"start":{"line":96,"column":12},"end":{"line":96,"column":61}},"id":103},"104":{"loc":{"start":{"line":96,"column":27},"end":{"line":96,"column":60}},"id":104},"105":{"loc":{"start":{"line":97,"column":17},"end":{"line":97,"column":34}},"id":105},"106":{"loc":{"start":{"line":98,"column":16},"end":{"line":98,"column":64}},"id":106},"107":{"loc":{"start":{"line":98,"column":32},"end":{"line":98,"column":62}},"id":107},"108":{"loc":{"start":{"line":100,"column":12},"end":{"line":100,"column":48}},"id":108},"109":{"loc":{"start":{"line":101,"column":12},"end":{"line":101,"column":48}},"id":109},"110":{"loc":{"start":{"line":102,"column":12},"end":{"line":102,"column":63}},"id":110},"111":{"loc":{"start":{"line":105,"column":16},"end":{"line":105,"column":67}},"id":111},"112":{"loc":{"start":{"line":105,"column":32},"end":{"line":105,"column":65}},"id":112},"113":{"loc":{"start":{"line":107,"column":12},"end":{"line":107,"column":61}},"id":113},"114":{"loc":{"start":{"line":107,"column":27},"end":{"line":107,"column":60}},"id":114},"115":{"loc":{"start":{"line":108,"column":17},"end":{"line":108,"column":34}},"id":115},"116":{"loc":{"start":{"line":109,"column":16},"end":{"line":109,"column":63}},"id":116},"117":{"loc":{"start":{"line":109,"column":32},"end":{"line":109,"column":61}},"id":117},"118":{"loc":{"start":{"line":111,"column":12},"end":{"line":111,"column":48}},"id":118},"119":{"loc":{"start":{"line":112,"column":16},"end":{"line":112,"column":54}},"id":119},"120":{"loc":{"start":{"line":112,"column":16},"end":{"line":112,"column":34}},"id":120},"121":{"loc":{"start":{"line":112,"column":38},"end":{"line":112,"column":54}},"id":121},"122":{"loc":{"start":{"line":113,"column":16},"end":{"line":119,"column":18}},"id":122},"123":{"loc":{"start":{"line":115,"column":24},"end":{"line":116,"column":58}},"id":123},"124":{"loc":{"start":{"line":115,"column":35},"end":{"line":115,"column":53}},"id":124},"125":{"loc":{"start":{"line":121,"column":16},"end":{"line":121,"column":67}},"id":125},"126":{"loc":{"start":{"line":127,"column":0},"end":{"line":145,"column":2}},"id":126},"127":{"loc":{"start":{"line":128,"column":4},"end":{"line":128,"column":20}},"id":127},"128":{"loc":{"start":{"line":129,"column":4},"end":{"line":144,"column":7}},"id":128},"129":{"loc":{"start":{"line":129,"column":11},"end":{"line":144,"column":6}},"id":129},"130":{"loc":{"start":{"line":130,"column":8},"end":{"line":130,"column":35}},"id":130},"131":{"loc":{"start":{"line":130,"column":15},"end":{"line":130,"column":34}},"id":131},"132":{"loc":{"start":{"line":131,"column":8},"end":{"line":131,"column":45}},"id":132},"133":{"loc":{"start":{"line":131,"column":24},"end":{"line":131,"column":44}},"id":133},"134":{"loc":{"start":{"line":132,"column":8},"end":{"line":132,"column":35}},"id":134},"135":{"loc":{"start":{"line":132,"column":19},"end":{"line":132,"column":34}},"id":135},"136":{"loc":{"start":{"line":133,"column":8},"end":{"line":133,"column":47}},"id":136},"137":{"loc":{"start":{"line":133,"column":19},"end":{"line":133,"column":46}},"id":137},"138":{"loc":{"start":{"line":134,"column":13},"end":{"line":134,"column":31}},"id":138},"139":{"loc":{"start":{"line":135,"column":12},"end":{"line":135,"column":77}},"id":139},"140":{"loc":{"start":{"line":135,"column":28},"end":{"line":135,"column":75}},"id":140},"141":{"loc":{"start":{"line":138,"column":12},"end":{"line":138,"column":71}},"id":141},"142":{"loc":{"start":{"line":138,"column":28},"end":{"line":138,"column":69}},"id":142},"143":{"loc":{"start":{"line":140,"column":12},"end":{"line":140,"column":45}},"id":143},"144":{"loc":{"start":{"line":141,"column":12},"end":{"line":141,"column":84}},"id":144},"145":{"loc":{"start":{"line":141,"column":28},"end":{"line":141,"column":82}},"id":145},"146":{"loc":{"start":{"line":143,"column":8},"end":{"line":143,"column":35}},"id":146},"147":{"loc":{"start":{"line":147,"column":0},"end":{"line":169,"column":2}},"id":147},"148":{"loc":{"start":{"line":148,"column":4},"end":{"line":148,"column":20}},"id":148},"149":{"loc":{"start":{"line":149,"column":4},"end":{"line":168,"column":7}},"id":149},"150":{"loc":{"start":{"line":149,"column":11},"end":{"line":168,"column":6}},"id":150},"151":{"loc":{"start":{"line":150,"column":8},"end":{"line":150,"column":35}},"id":151},"152":{"loc":{"start":{"line":150,"column":15},"end":{"line":150,"column":34}},"id":152},"153":{"loc":{"start":{"line":151,"column":8},"end":{"line":151,"column":45}},"id":153},"154":{"loc":{"start":{"line":151,"column":24},"end":{"line":151,"column":44}},"id":154},"155":{"loc":{"start":{"line":152,"column":8},"end":{"line":152,"column":35}},"id":155},"156":{"loc":{"start":{"line":152,"column":19},"end":{"line":152,"column":34}},"id":156},"157":{"loc":{"start":{"line":153,"column":8},"end":{"line":153,"column":47}},"id":157},"158":{"loc":{"start":{"line":153,"column":19},"end":{"line":153,"column":46}},"id":158},"159":{"loc":{"start":{"line":154,"column":13},"end":{"line":154,"column":31}},"id":159},"160":{"loc":{"start":{"line":155,"column":12},"end":{"line":155,"column":85}},"id":160},"161":{"loc":{"start":{"line":155,"column":35},"end":{"line":155,"column":83}},"id":161},"162":{"loc":{"start":{"line":156,"column":12},"end":{"line":156,"column":35}},"id":162},"163":{"loc":{"start":{"line":157,"column":12},"end":{"line":157,"column":32}},"id":163},"164":{"loc":{"start":{"line":158,"column":12},"end":{"line":158,"column":24}},"id":164},"165":{"loc":{"start":{"line":161,"column":12},"end":{"line":161,"column":81}},"id":165},"166":{"loc":{"start":{"line":161,"column":34},"end":{"line":161,"column":79}},"id":166},"167":{"loc":{"start":{"line":162,"column":12},"end":{"line":162,"column":34}},"id":167},"168":{"loc":{"start":{"line":163,"column":12},"end":{"line":163,"column":32}},"id":168},"169":{"loc":{"start":{"line":164,"column":12},"end":{"line":164,"column":37}},"id":169},"170":{"loc":{"start":{"line":165,"column":12},"end":{"line":165,"column":24}},"id":170},"171":{"loc":{"start":{"line":167,"column":8},"end":{"line":167,"column":54}},"id":171},"172":{"loc":{"start":{"line":171,"column":0},"end":{"line":189,"column":2}},"id":172},"173":{"loc":{"start":{"line":172,"column":4},"end":{"line":172,"column":20}},"id":173},"174":{"loc":{"start":{"line":173,"column":4},"end":{"line":188,"column":7}},"id":174},"175":{"loc":{"start":{"line":173,"column":11},"end":{"line":188,"column":6}},"id":175},"176":{"loc":{"start":{"line":174,"column":8},"end":{"line":174,"column":35}},"id":176},"177":{"loc":{"start":{"line":174,"column":15},"end":{"line":174,"column":34}},"id":177},"178":{"loc":{"start":{"line":175,"column":8},"end":{"line":175,"column":45}},"id":178},"179":{"loc":{"start":{"line":175,"column":24},"end":{"line":175,"column":44}},"id":179},"180":{"loc":{"start":{"line":176,"column":8},"end":{"line":176,"column":35}},"id":180},"181":{"loc":{"start":{"line":176,"column":19},"end":{"line":176,"column":34}},"id":181},"182":{"loc":{"start":{"line":177,"column":8},"end":{"line":177,"column":47}},"id":182},"183":{"loc":{"start":{"line":177,"column":19},"end":{"line":177,"column":46}},"id":183},"184":{"loc":{"start":{"line":178,"column":13},"end":{"line":178,"column":31}},"id":184},"185":{"loc":{"start":{"line":179,"column":12},"end":{"line":179,"column":82}},"id":185},"186":{"loc":{"start":{"line":179,"column":28},"end":{"line":179,"column":80}},"id":186},"187":{"loc":{"start":{"line":182,"column":12},"end":{"line":182,"column":76}},"id":187},"188":{"loc":{"start":{"line":182,"column":28},"end":{"line":182,"column":74}},"id":188},"189":{"loc":{"start":{"line":184,"column":13},"end":{"line":184,"column":46}},"id":189},"190":{"loc":{"start":{"line":185,"column":12},"end":{"line":185,"column":67}},"id":190},"191":{"loc":{"start":{"line":185,"column":28},"end":{"line":185,"column":65}},"id":191},"192":{"loc":{"start":{"line":187,"column":8},"end":{"line":187,"column":35}},"id":192},"193":{"loc":{"start":{"line":191,"column":0},"end":{"line":197,"column":2}},"id":193},"194":{"loc":{"start":{"line":192,"column":4},"end":{"line":192,"column":20}},"id":194},"195":{"loc":{"start":{"line":193,"column":4},"end":{"line":196,"column":7}},"id":195},"196":{"loc":{"start":{"line":193,"column":11},"end":{"line":196,"column":6}},"id":196},"197":{"loc":{"start":{"line":194,"column":8},"end":{"line":194,"column":35}},"id":197},"198":{"loc":{"start":{"line":194,"column":15},"end":{"line":194,"column":34}},"id":198},"199":{"loc":{"start":{"line":195,"column":8},"end":{"line":195,"column":52}},"id":199},"200":{"loc":{"start":{"line":195,"column":15},"end":{"line":195,"column":51}},"id":200},"201":{"loc":{"start":{"line":195,"column":31},"end":{"line":195,"column":37}},"id":201},"202":{"loc":{"start":{"line":199,"column":0},"end":{"line":209,"column":2}},"id":202},"203":{"loc":{"start":{"line":200,"column":4},"end":{"line":200,"column":20}},"id":203},"204":{"loc":{"start":{"line":201,"column":4},"end":{"line":208,"column":7}},"id":204},"205":{"loc":{"start":{"line":201,"column":11},"end":{"line":208,"column":6}},"id":205},"206":{"loc":{"start":{"line":202,"column":8},"end":{"line":202,"column":35}},"id":206},"207":{"loc":{"start":{"line":202,"column":15},"end":{"line":202,"column":34}},"id":207},"208":{"loc":{"start":{"line":203,"column":8},"end":{"line":203,"column":42}},"id":208},"209":{"loc":{"start":{"line":203,"column":19},"end":{"line":203,"column":41}},"id":209},"210":{"loc":{"start":{"line":204,"column":13},"end":{"line":204,"column":34}},"id":210},"211":{"loc":{"start":{"line":205,"column":12},"end":{"line":205,"column":82}},"id":211},"212":{"loc":{"start":{"line":205,"column":28},"end":{"line":205,"column":80}},"id":212},"213":{"loc":{"start":{"line":205,"column":60},"end":{"line":205,"column":80}},"id":213},"214":{"loc":{"start":{"line":207,"column":8},"end":{"line":207,"column":20}},"id":214},"215":{"loc":{"start":{"line":211,"column":0},"end":{"line":231,"column":2}},"id":215},"216":{"loc":{"start":{"line":212,"column":4},"end":{"line":212,"column":20}},"id":216},"217":{"loc":{"start":{"line":213,"column":4},"end":{"line":230,"column":7}},"id":217},"218":{"loc":{"start":{"line":213,"column":11},"end":{"line":230,"column":6}},"id":218},"219":{"loc":{"start":{"line":214,"column":8},"end":{"line":214,"column":39}},"id":219},"220":{"loc":{"start":{"line":214,"column":17},"end":{"line":214,"column":38}},"id":220},"221":{"loc":{"start":{"line":215,"column":8},"end":{"line":215,"column":39}},"id":221},"222":{"loc":{"start":{"line":215,"column":17},"end":{"line":215,"column":38}},"id":222},"223":{"loc":{"start":{"line":216,"column":8},"end":{"line":216,"column":66}},"id":223},"224":{"loc":{"start":{"line":216,"column":25},"end":{"line":216,"column":65}},"id":224},"225":{"loc":{"start":{"line":216,"column":41},"end":{"line":216,"column":49}},"id":225},"226":{"loc":{"start":{"line":217,"column":13},"end":{"line":217,"column":32}},"id":226},"227":{"loc":{"start":{"line":218,"column":12},"end":{"line":218,"column":62}},"id":227},"228":{"loc":{"start":{"line":218,"column":28},"end":{"line":218,"column":60}},"id":228},"229":{"loc":{"start":{"line":220,"column":8},"end":{"line":220,"column":47}},"id":229},"230":{"loc":{"start":{"line":220,"column":24},"end":{"line":220,"column":46}},"id":230},"231":{"loc":{"start":{"line":221,"column":8},"end":{"line":221,"column":37}},"id":231},"232":{"loc":{"start":{"line":221,"column":19},"end":{"line":221,"column":36}},"id":232},"233":{"loc":{"start":{"line":222,"column":8},"end":{"line":222,"column":72}},"id":233},"234":{"loc":{"start":{"line":222,"column":25},"end":{"line":222,"column":71}},"id":234},"235":{"loc":{"start":{"line":222,"column":41},"end":{"line":222,"column":52}},"id":235},"236":{"loc":{"start":{"line":223,"column":13},"end":{"line":223,"column":37}},"id":236},"237":{"loc":{"start":{"line":224,"column":12},"end":{"line":224,"column":77}},"id":237},"238":{"loc":{"start":{"line":224,"column":28},"end":{"line":224,"column":75}},"id":238},"239":{"loc":{"start":{"line":226,"column":12},"end":{"line":226,"column":80}},"id":239},"240":{"loc":{"start":{"line":226,"column":41},"end":{"line":226,"column":80}},"id":240},"241":{"loc":{"start":{"line":227,"column":12},"end":{"line":227,"column":92}},"id":241},"242":{"loc":{"start":{"line":227,"column":28},"end":{"line":227,"column":90}},"id":242},"243":{"loc":{"start":{"line":229,"column":8},"end":{"line":229,"column":47}},"id":243},"244":{"loc":{"start":{"line":233,"column":0},"end":{"line":245,"column":2}},"id":244},"245":{"loc":{"start":{"line":234,"column":4},"end":{"line":234,"column":20}},"id":245},"246":{"loc":{"start":{"line":235,"column":4},"end":{"line":244,"column":7}},"id":246},"247":{"loc":{"start":{"line":235,"column":11},"end":{"line":244,"column":6}},"id":247},"248":{"loc":{"start":{"line":236,"column":8},"end":{"line":236,"column":39}},"id":248},"249":{"loc":{"start":{"line":236,"column":17},"end":{"line":236,"column":38}},"id":249},"250":{"loc":{"start":{"line":237,"column":8},"end":{"line":237,"column":47}},"id":250},"251":{"loc":{"start":{"line":237,"column":24},"end":{"line":237,"column":46}},"id":251},"252":{"loc":{"start":{"line":238,"column":8},"end":{"line":238,"column":37}},"id":252},"253":{"loc":{"start":{"line":238,"column":19},"end":{"line":238,"column":36}},"id":253},"254":{"loc":{"start":{"line":239,"column":8},"end":{"line":239,"column":47}},"id":254},"255":{"loc":{"start":{"line":239,"column":19},"end":{"line":239,"column":46}},"id":255},"256":{"loc":{"start":{"line":240,"column":12},"end":{"line":240,"column":68}},"id":256},"257":{"loc":{"start":{"line":240,"column":35},"end":{"line":240,"column":68}},"id":257},"258":{"loc":{"start":{"line":241,"column":12},"end":{"line":241,"column":96}},"id":258},"259":{"loc":{"start":{"line":241,"column":28},"end":{"line":241,"column":94}},"id":259},"260":{"loc":{"start":{"line":243,"column":8},"end":{"line":243,"column":59}},"id":260},"261":{"loc":{"start":{"line":247,"column":0},"end":{"line":253,"column":2}},"id":261},"262":{"loc":{"start":{"line":248,"column":4},"end":{"line":248,"column":20}},"id":262},"263":{"loc":{"start":{"line":249,"column":4},"end":{"line":252,"column":7}},"id":263},"264":{"loc":{"start":{"line":249,"column":11},"end":{"line":252,"column":6}},"id":264},"265":{"loc":{"start":{"line":250,"column":8},"end":{"line":250,"column":35}},"id":265},"266":{"loc":{"start":{"line":250,"column":15},"end":{"line":250,"column":34}},"id":266},"267":{"loc":{"start":{"line":251,"column":8},"end":{"line":251,"column":60}},"id":267},"268":{"loc":{"start":{"line":251,"column":38},"end":{"line":251,"column":44}},"id":268},"269":{"loc":{"start":{"line":251,"column":24},"end":{"line":251,"column":30}},"id":269},"270":{"loc":{"start":{"line":255,"column":0},"end":{"line":261,"column":2}},"id":270},"271":{"loc":{"start":{"line":256,"column":4},"end":{"line":256,"column":20}},"id":271},"272":{"loc":{"start":{"line":257,"column":4},"end":{"line":260,"column":7}},"id":272},"273":{"loc":{"start":{"line":257,"column":11},"end":{"line":260,"column":6}},"id":273},"274":{"loc":{"start":{"line":258,"column":8},"end":{"line":258,"column":35}},"id":274},"275":{"loc":{"start":{"line":258,"column":15},"end":{"line":258,"column":34}},"id":275},"276":{"loc":{"start":{"line":259,"column":8},"end":{"line":259,"column":58}},"id":276},"277":{"loc":{"start":{"line":259,"column":38},"end":{"line":259,"column":44}},"id":277},"278":{"loc":{"start":{"line":259,"column":24},"end":{"line":259,"column":30}},"id":278},"279":{"loc":{"start":{"line":263,"column":0},"end":{"line":312,"column":2}},"id":279},"280":{"loc":{"start":{"line":264,"column":4},"end":{"line":264,"column":20}},"id":280},"281":{"loc":{"start":{"line":265,"column":4},"end":{"line":311,"column":7}},"id":281},"282":{"loc":{"start":{"line":265,"column":11},"end":{"line":311,"column":6}},"id":282},"283":{"loc":{"start":{"line":266,"column":8},"end":{"line":266,"column":39}},"id":283},"284":{"loc":{"start":{"line":266,"column":17},"end":{"line":266,"column":38}},"id":284},"285":{"loc":{"start":{"line":267,"column":8},"end":{"line":267,"column":39}},"id":285},"286":{"loc":{"start":{"line":267,"column":17},"end":{"line":267,"column":38}},"id":286},"287":{"loc":{"start":{"line":269,"column":8},"end":{"line":269,"column":53}},"id":287},"288":{"loc":{"start":{"line":269,"column":30},"end":{"line":269,"column":52}},"id":288},"289":{"loc":{"start":{"line":270,"column":8},"end":{"line":270,"column":93}},"id":289},"290":{"loc":{"start":{"line":270,"column":34},"end":{"line":270,"column":92}},"id":290},"291":{"loc":{"start":{"line":270,"column":50},"end":{"line":270,"column":67}},"id":291},"292":{"loc":{"start":{"line":271,"column":8},"end":{"line":271,"column":43}},"id":292},"293":{"loc":{"start":{"line":271,"column":25},"end":{"line":271,"column":42}},"id":293},"294":{"loc":{"start":{"line":272,"column":8},"end":{"line":272,"column":66}},"id":294},"295":{"loc":{"start":{"line":275,"column":12},"end":{"line":275,"column":77}},"id":295},"296":{"loc":{"start":{"line":275,"column":34},"end":{"line":275,"column":75}},"id":296},"297":{"loc":{"start":{"line":276,"column":12},"end":{"line":276,"column":34}},"id":297},"298":{"loc":{"start":{"line":277,"column":12},"end":{"line":277,"column":24}},"id":298},"299":{"loc":{"start":{"line":280,"column":8},"end":{"line":280,"column":48}},"id":299},"300":{"loc":{"start":{"line":280,"column":21},"end":{"line":280,"column":47}},"id":300},"301":{"loc":{"start":{"line":284,"column":12},"end":{"line":284,"column":77}},"id":301},"302":{"loc":{"start":{"line":284,"column":34},"end":{"line":284,"column":75}},"id":302},"303":{"loc":{"start":{"line":285,"column":12},"end":{"line":285,"column":34}},"id":303},"304":{"loc":{"start":{"line":286,"column":12},"end":{"line":286,"column":24}},"id":304},"305":{"loc":{"start":{"line":289,"column":8},"end":{"line":289,"column":53}},"id":305},"306":{"loc":{"start":{"line":289,"column":30},"end":{"line":289,"column":52}},"id":306},"307":{"loc":{"start":{"line":290,"column":8},"end":{"line":290,"column":93}},"id":307},"308":{"loc":{"start":{"line":290,"column":34},"end":{"line":290,"column":92}},"id":308},"309":{"loc":{"start":{"line":290,"column":50},"end":{"line":290,"column":67}},"id":309},"310":{"loc":{"start":{"line":291,"column":8},"end":{"line":291,"column":43}},"id":310},"311":{"loc":{"start":{"line":291,"column":25},"end":{"line":291,"column":42}},"id":311},"312":{"loc":{"start":{"line":292,"column":8},"end":{"line":292,"column":66}},"id":312},"313":{"loc":{"start":{"line":295,"column":12},"end":{"line":295,"column":52}},"id":313},"314":{"loc":{"start":{"line":295,"column":25},"end":{"line":295,"column":51}},"id":314},"315":{"loc":{"start":{"line":298,"column":12},"end":{"line":298,"column":50}},"id":315},"316":{"loc":{"start":{"line":298,"column":26},"end":{"line":298,"column":50}},"id":316},"317":{"loc":{"start":{"line":299,"column":12},"end":{"line":299,"column":83}},"id":317},"318":{"loc":{"start":{"line":299,"column":34},"end":{"line":299,"column":81}},"id":318},"319":{"loc":{"start":{"line":300,"column":12},"end":{"line":300,"column":34}},"id":319},"320":{"loc":{"start":{"line":301,"column":12},"end":{"line":301,"column":24}},"id":320},"321":{"loc":{"start":{"line":305,"column":12},"end":{"line":305,"column":37}},"id":321},"322":{"loc":{"start":{"line":306,"column":12},"end":{"line":306,"column":19}},"id":322},"323":{"loc":{"start":{"line":309,"column":8},"end":{"line":309,"column":62}},"id":323},"324":{"loc":{"start":{"line":310,"column":8},"end":{"line":310,"column":56}},"id":324},"325":{"loc":{"start":{"line":314,"column":0},"end":{"line":324,"column":2}},"id":325},"326":{"loc":{"start":{"line":315,"column":4},"end":{"line":315,"column":20}},"id":326},"327":{"loc":{"start":{"line":316,"column":4},"end":{"line":323,"column":7}},"id":327},"328":{"loc":{"start":{"line":316,"column":11},"end":{"line":323,"column":6}},"id":328},"329":{"loc":{"start":{"line":317,"column":8},"end":{"line":317,"column":35}},"id":329},"330":{"loc":{"start":{"line":317,"column":15},"end":{"line":317,"column":34}},"id":330},"331":{"loc":{"start":{"line":318,"column":8},"end":{"line":318,"column":42}},"id":331},"332":{"loc":{"start":{"line":318,"column":19},"end":{"line":318,"column":41}},"id":332},"333":{"loc":{"start":{"line":319,"column":13},"end":{"line":319,"column":34}},"id":333},"334":{"loc":{"start":{"line":320,"column":12},"end":{"line":320,"column":69}},"id":334},"335":{"loc":{"start":{"line":320,"column":28},"end":{"line":320,"column":67}},"id":335},"336":{"loc":{"start":{"line":322,"column":8},"end":{"line":322,"column":26}},"id":336},"337":{"loc":{"start":{"line":326,"column":0},"end":{"line":332,"column":2}},"id":337},"338":{"loc":{"start":{"line":327,"column":4},"end":{"line":327,"column":20}},"id":338},"339":{"loc":{"start":{"line":328,"column":4},"end":{"line":331,"column":7}},"id":339},"340":{"loc":{"start":{"line":328,"column":11},"end":{"line":331,"column":6}},"id":340},"341":{"loc":{"start":{"line":329,"column":8},"end":{"line":329,"column":35}},"id":341},"342":{"loc":{"start":{"line":329,"column":15},"end":{"line":329,"column":34}},"id":342},"343":{"loc":{"start":{"line":330,"column":8},"end":{"line":330,"column":43}},"id":343},"344":{"loc":{"start":{"line":330,"column":15},"end":{"line":330,"column":42}},"id":344},"345":{"loc":{"start":{"line":334,"column":0},"end":{"line":334,"column":19}},"id":345},"346":{"loc":{"start":{"line":336,"column":4},"end":{"line":351,"column":7}},"id":346},"347":{"loc":{"start":{"line":336,"column":11},"end":{"line":351,"column":6}},"id":347},"348":{"loc":{"start":{"line":336,"column":18},"end":{"line":336,"column":35}},"id":348},"349":{"loc":{"start":{"line":337,"column":8},"end":{"line":337,"column":22}},"id":349},"350":{"loc":{"start":{"line":338,"column":8},"end":{"line":350,"column":11}},"id":350},"351":{"loc":{"start":{"line":338,"column":15},"end":{"line":350,"column":10}},"id":351},"352":{"loc":{"start":{"line":338,"column":20},"end":{"line":348,"column":11}},"id":352},"353":{"loc":{"start":{"line":338,"column":21},"end":{"line":348,"column":10}},"id":353},"354":{"loc":{"start":{"line":339,"column":12},"end":{"line":339,"column":45}},"id":354},"355":{"loc":{"start":{"line":339,"column":25},"end":{"line":339,"column":44}},"id":355},"356":{"loc":{"start":{"line":340,"column":12},"end":{"line":340,"column":66}},"id":356},"357":{"loc":{"start":{"line":340,"column":27},"end":{"line":340,"column":65}},"id":357},"358":{"loc":{"start":{"line":341,"column":12},"end":{"line":347,"column":15}},"id":358},"359":{"loc":{"start":{"line":341,"column":19},"end":{"line":347,"column":14}},"id":359},"360":{"loc":{"start":{"line":341,"column":26},"end":{"line":341,"column":41}},"id":360},"361":{"loc":{"start":{"line":342,"column":20},"end":{"line":342,"column":33}},"id":361},"362":{"loc":{"start":{"line":343,"column":20},"end":{"line":345,"column":23}},"id":362},"363":{"loc":{"start":{"line":343,"column":27},"end":{"line":345,"column":22}},"id":363},"364":{"loc":{"start":{"line":343,"column":34},"end":{"line":343,"column":53}},"id":364},"365":{"loc":{"start":{"line":344,"column":24},"end":{"line":344,"column":49}},"id":365},"366":{"loc":{"start":{"line":349,"column":12},"end":{"line":349,"column":32}},"id":366},"367":{"loc":{"start":{"line":349,"column":19},"end":{"line":349,"column":31}},"id":367},"368":{"loc":{"start":{"line":356,"column":8},"end":{"line":356,"column":48}},"id":368},"369":{"loc":{"start":{"line":357,"column":4},"end":{"line":357,"column":18}},"id":369},"370":{"loc":{"start":{"line":358,"column":4},"end":{"line":358,"column":49}},"id":370},"371":{"loc":{"start":{"line":359,"column":4},"end":{"line":359,"column":37}},"id":371},"372":{"loc":{"start":{"line":359,"column":17},"end":{"line":359,"column":36}},"id":372},"373":{"loc":{"start":{"line":360,"column":4},"end":{"line":360,"column":23}},"id":373},"374":{"loc":{"start":{"line":363,"column":0},"end":{"line":371,"column":2}},"id":374},"375":{"loc":{"start":{"line":364,"column":4},"end":{"line":364,"column":37}},"id":375},"376":{"loc":{"start":{"line":364,"column":16},"end":{"line":364,"column":36}},"id":376},"377":{"loc":{"start":{"line":365,"column":8},"end":{"line":365,"column":33}},"id":377},"378":{"loc":{"start":{"line":366,"column":8},"end":{"line":366,"column":22}},"id":378},"379":{"loc":{"start":{"line":366,"column":8},"end":{"line":366,"column":21}},"id":379},"380":{"loc":{"start":{"line":367,"column":8},"end":{"line":367,"column":69}},"id":380},"381":{"loc":{"start":{"line":367,"column":15},"end":{"line":367,"column":68}},"id":381},"382":{"loc":{"start":{"line":369,"column":8},"end":{"line":369,"column":66}},"id":382},"383":{"loc":{"start":{"line":369,"column":15},"end":{"line":369,"column":65}},"id":383},"384":{"loc":{"start":{"line":369,"column":44},"end":{"line":369,"column":64}},"id":384},"385":{"loc":{"start":{"line":373,"column":0},"end":{"line":384,"column":2}},"id":385},"386":{"loc":{"start":{"line":374,"column":8},"end":{"line":374,"column":26}},"id":386},"387":{"loc":{"start":{"line":375,"column":8},"end":{"line":375,"column":20}},"id":387},"388":{"loc":{"start":{"line":377,"column":8},"end":{"line":377,"column":33}},"id":388},"389":{"loc":{"start":{"line":377,"column":19},"end":{"line":377,"column":32}},"id":389},"390":{"loc":{"start":{"line":378,"column":12},"end":{"line":378,"column":23}},"id":390},"391":{"loc":{"start":{"line":379,"column":12},"end":{"line":379,"column":74}},"id":391},"392":{"loc":{"start":{"line":379,"column":19},"end":{"line":379,"column":73}},"id":392},"393":{"loc":{"start":{"line":379,"column":48},"end":{"line":379,"column":72}},"id":393},"394":{"loc":{"start":{"line":381,"column":12},"end":{"line":381,"column":138}},"id":394},"395":{"loc":{"start":{"line":381,"column":28},"end":{"line":381,"column":136}},"id":395},"396":{"loc":{"start":{"line":381,"column":28},"end":{"line":381,"column":114}},"id":396},"397":{"loc":{"start":{"line":381,"column":28},"end":{"line":381,"column":104}},"id":397},"398":{"loc":{"start":{"line":381,"column":44},"end":{"line":381,"column":104}},"id":398},"399":{"loc":{"start":{"line":381,"column":59},"end":{"line":381,"column":103}},"id":399},"400":{"loc":{"start":{"line":381,"column":82},"end":{"line":381,"column":102}},"id":400},"401":{"loc":{"start":{"line":381,"column":117},"end":{"line":381,"column":136}},"id":401},"402":{"loc":{"start":{"line":386,"column":0},"end":{"line":394,"column":2}},"id":402},"403":{"loc":{"start":{"line":387,"column":9},"end":{"line":387,"column":34}},"id":403},"404":{"loc":{"start":{"line":388,"column":8},"end":{"line":388,"column":73}},"id":404},"405":{"loc":{"start":{"line":388,"column":24},"end":{"line":388,"column":71}},"id":405},"406":{"loc":{"start":{"line":390,"column":4},"end":{"line":390,"column":37}},"id":406},"407":{"loc":{"start":{"line":390,"column":16},"end":{"line":390,"column":36}},"id":407},"408":{"loc":{"start":{"line":391,"column":4},"end":{"line":391,"column":18}},"id":408},"409":{"loc":{"start":{"line":391,"column":4},"end":{"line":391,"column":17}},"id":409},"410":{"loc":{"start":{"line":392,"column":4},"end":{"line":392,"column":28}},"id":410},"411":{"loc":{"start":{"line":393,"column":4},"end":{"line":393,"column":60}},"id":411},"412":{"loc":{"start":{"line":393,"column":11},"end":{"line":393,"column":59}},"id":412},"413":{"loc":{"start":{"line":393,"column":17},"end":{"line":393,"column":59}},"id":413},"414":{"loc":{"start":{"line":396,"column":0},"end":{"line":401,"column":2}},"id":414},"415":{"loc":{"start":{"line":397,"column":8},"end":{"line":397,"column":26}},"id":415},"416":{"loc":{"start":{"line":398,"column":8},"end":{"line":398,"column":19}},"id":416},"417":{"loc":{"start":{"line":400,"column":4},"end":{"line":400,"column":52}},"id":417},"418":{"loc":{"start":{"line":400,"column":11},"end":{"line":400,"column":51}},"id":418},"419":{"loc":{"start":{"line":400,"column":30},"end":{"line":400,"column":50}},"id":419},"420":{"loc":{"start":{"line":403,"column":0},"end":{"line":405,"column":2}},"id":420},"421":{"loc":{"start":{"line":404,"column":4},"end":{"line":404,"column":16}},"id":421},"422":{"loc":{"start":{"line":407,"column":0},"end":{"line":409,"column":2}},"id":422},"423":{"loc":{"start":{"line":408,"column":4},"end":{"line":408,"column":32}},"id":423},"424":{"loc":{"start":{"line":411,"column":0},"end":{"line":419,"column":2}},"id":424},"425":{"loc":{"start":{"line":421,"column":0},"end":{"line":425,"column":3}},"id":425},"426":{"loc":{"start":{"line":421,"column":0},"end":{"line":425,"column":2}},"id":426},"427":{"loc":{"start":{"line":422,"column":4},"end":{"line":424,"column":6}},"id":427},"428":{"loc":{"start":{"line":423,"column":8},"end":{"line":423,"column":21}},"id":428},"429":{"loc":{"start":{"line":427,"column":0},"end":{"line":429,"column":2}},"id":429},"430":{"loc":{"start":{"line":428,"column":4},"end":{"line":428,"column":26}},"id":430},"431":{"loc":{"start":{"line":431,"column":0},"end":{"line":433,"column":2}},"id":431},"432":{"loc":{"start":{"line":432,"column":4},"end":{"line":432,"column":26}},"id":432},"433":{"loc":{"start":{"line":436,"column":4},"end":{"line":436,"column":24}},"id":433},"434":{"loc":{"start":{"line":436,"column":4},"end":{"line":436,"column":23}},"id":434},"435":{"loc":{"start":{"line":437,"column":4},"end":{"line":437,"column":22}},"id":435},"436":{"loc":{"start":{"line":440,"column":0},"end":{"line":440,"column":51}},"id":436},"437":{"loc":{"start":{"line":440,"column":21},"end":{"line":440,"column":50}},"id":437},"438":{"loc":{"start":{"line":442,"column":0},"end":{"line":444,"column":2}},"id":438},"439":{"loc":{"start":{"line":443,"column":4},"end":{"line":443,"column":16}},"id":439},"440":{"loc":{"start":{"line":447,"column":4},"end":{"line":447,"column":24}},"id":440},"441":{"loc":{"start":{"line":447,"column":4},"end":{"line":447,"column":23}},"id":441},"442":{"loc":{"start":{"line":448,"column":4},"end":{"line":448,"column":40}},"id":442},"443":{"loc":{"start":{"line":448,"column":20},"end":{"line":448,"column":39}},"id":443},"444":{"loc":{"start":{"line":449,"column":4},"end":{"line":449,"column":37}},"id":444},"445":{"loc":{"start":{"line":449,"column":17},"end":{"line":449,"column":36}},"id":445},"446":{"loc":{"start":{"line":452,"column":0},"end":{"line":452,"column":56}},"id":446},"447":{"loc":{"start":{"line":452,"column":26},"end":{"line":452,"column":55}},"id":447},"448":{"loc":{"start":{"line":454,"column":0},"end":{"line":456,"column":2}},"id":448},"449":{"loc":{"start":{"line":455,"column":4},"end":{"line":455,"column":16}},"id":449},"450":{"loc":{"start":{"line":458,"column":0},"end":{"line":475,"column":2}},"id":450},"451":{"loc":{"start":{"line":459,"column":4},"end":{"line":459,"column":31}},"id":451},"452":{"loc":{"start":{"line":459,"column":10},"end":{"line":459,"column":30}},"id":452},"453":{"loc":{"start":{"line":460,"column":8},"end":{"line":460,"column":26}},"id":453},"454":{"loc":{"start":{"line":461,"column":8},"end":{"line":461,"column":20}},"id":454},"455":{"loc":{"start":{"line":463,"column":4},"end":{"line":463,"column":29}},"id":455},"456":{"loc":{"start":{"line":463,"column":15},"end":{"line":463,"column":28}},"id":456},"457":{"loc":{"start":{"line":464,"column":8},"end":{"line":464,"column":19}},"id":457},"458":{"loc":{"start":{"line":465,"column":8},"end":{"line":465,"column":70}},"id":458},"459":{"loc":{"start":{"line":465,"column":15},"end":{"line":465,"column":69}},"id":459},"460":{"loc":{"start":{"line":465,"column":44},"end":{"line":465,"column":68}},"id":460},"461":{"loc":{"start":{"line":469,"column":12},"end":{"line":469,"column":62}},"id":461},"462":{"loc":{"start":{"line":471,"column":12},"end":{"line":471,"column":114}},"id":462},"463":{"loc":{"start":{"line":471,"column":28},"end":{"line":471,"column":112}},"id":463},"464":{"loc":{"start":{"line":471,"column":28},"end":{"line":471,"column":90}},"id":464},"465":{"loc":{"start":{"line":471,"column":28},"end":{"line":471,"column":80}},"id":465},"466":{"loc":{"start":{"line":471,"column":44},"end":{"line":471,"column":80}},"id":466},"467":{"loc":{"start":{"line":471,"column":59},"end":{"line":471,"column":79}},"id":467},"468":{"loc":{"start":{"line":471,"column":93},"end":{"line":471,"column":112}},"id":468},"469":{"loc":{"start":{"line":474,"column":4},"end":{"line":474,"column":81}},"id":469},"470":{"loc":{"start":{"line":474,"column":11},"end":{"line":474,"column":80}},"id":470},"471":{"loc":{"start":{"line":474,"column":55},"end":{"line":474,"column":79}},"id":471},"472":{"loc":{"start":{"line":477,"column":0},"end":{"line":495,"column":2}},"id":472},"473":{"loc":{"start":{"line":478,"column":8},"end":{"line":478,"column":26}},"id":473},"474":{"loc":{"start":{"line":479,"column":8},"end":{"line":479,"column":19}},"id":474},"475":{"loc":{"start":{"line":481,"column":4},"end":{"line":481,"column":29}},"id":475},"476":{"loc":{"start":{"line":481,"column":15},"end":{"line":481,"column":28}},"id":476},"477":{"loc":{"start":{"line":482,"column":8},"end":{"line":482,"column":19}},"id":477},"478":{"loc":{"start":{"line":483,"column":8},"end":{"line":483,"column":19}},"id":478},"479":{"loc":{"start":{"line":485,"column":8},"end":{"line":485,"column":29}},"id":479},"480":{"loc":{"start":{"line":486,"column":8},"end":{"line":486,"column":17}},"id":480},"481":{"loc":{"start":{"line":489,"column":8},"end":{"line":489,"column":62}},"id":481},"482":{"loc":{"start":{"line":489,"column":15},"end":{"line":489,"column":61}},"id":482},"483":{"loc":{"start":{"line":489,"column":40},"end":{"line":489,"column":60}},"id":483},"484":{"loc":{"start":{"line":491,"column":4},"end":{"line":494,"column":6}},"id":484},"485":{"loc":{"start":{"line":491,"column":11},"end":{"line":494,"column":5}},"id":485},"486":{"loc":{"start":{"line":493,"column":8},"end":{"line":493,"column":32}},"id":486},"487":{"loc":{"start":{"line":498,"column":4},"end":{"line":498,"column":24}},"id":487},"488":{"loc":{"start":{"line":498,"column":4},"end":{"line":498,"column":23}},"id":488},"489":{"loc":{"start":{"line":499,"column":4},"end":{"line":499,"column":22}},"id":489},"490":{"loc":{"start":{"line":502,"column":0},"end":{"line":502,"column":51}},"id":490},"491":{"loc":{"start":{"line":502,"column":21},"end":{"line":502,"column":50}},"id":491},"492":{"loc":{"start":{"line":504,"column":0},"end":{"line":506,"column":2}},"id":492},"493":{"loc":{"start":{"line":505,"column":4},"end":{"line":505,"column":16}},"id":493},"494":{"loc":{"start":{"line":508,"column":0},"end":{"line":518,"column":2}},"id":494},"495":{"loc":{"start":{"line":509,"column":4},"end":{"line":509,"column":25}},"id":495},"496":{"loc":{"start":{"line":509,"column":11},"end":{"line":509,"column":24}},"id":496},"497":{"loc":{"start":{"line":509,"column":19},"end":{"line":509,"column":24}},"id":497},"498":{"loc":{"start":{"line":510,"column":8},"end":{"line":510,"column":22}},"id":498},"499":{"loc":{"start":{"line":511,"column":8},"end":{"line":511,"column":92}},"id":499},"500":{"loc":{"start":{"line":511,"column":30},"end":{"line":511,"column":90}},"id":500},"501":{"loc":{"start":{"line":511,"column":71},"end":{"line":511,"column":90}},"id":501},"502":{"loc":{"start":{"line":512,"column":8},"end":{"line":512,"column":29}},"id":502},"503":{"loc":{"start":{"line":513,"column":8},"end":{"line":513,"column":20}},"id":503},"504":{"loc":{"start":{"line":515,"column":4},"end":{"line":515,"column":19}},"id":504},"505":{"loc":{"start":{"line":515,"column":4},"end":{"line":515,"column":18}},"id":505},"506":{"loc":{"start":{"line":516,"column":4},"end":{"line":516,"column":52}},"id":506},"507":{"loc":{"start":{"line":516,"column":15},"end":{"line":516,"column":51}},"id":507},"508":{"loc":{"start":{"line":517,"column":4},"end":{"line":517,"column":64}},"id":508},"509":{"loc":{"start":{"line":517,"column":11},"end":{"line":517,"column":63}},"id":509},"510":{"loc":{"start":{"line":517,"column":21},"end":{"line":517,"column":43}},"id":510},"511":{"loc":{"start":{"line":520,"column":0},"end":{"line":526,"column":2}},"id":511},"512":{"loc":{"start":{"line":521,"column":4},"end":{"line":525,"column":6}},"id":512},"513":{"loc":{"start":{"line":521,"column":11},"end":{"line":525,"column":5}},"id":513},"514":{"loc":{"start":{"line":522,"column":8},"end":{"line":524,"column":9}},"id":514},"515":{"loc":{"start":{"line":523,"column":12},"end":{"line":523,"column":67}},"id":515},"516":{"loc":{"start":{"line":523,"column":30},"end":{"line":523,"column":66}},"id":516},"517":{"loc":{"start":{"line":529,"column":0},"end":{"line":529,"column":25}},"id":517},"518":{"loc":{"start":{"line":529,"column":9},"end":{"line":529,"column":24}},"id":518}}}},"/Users/kris/q-io/buffer-stream.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":38},"8":{"index":8,"count":38},"10":{"index":10,"count":38},"11":{"index":11,"count":38},"12":{"index":12,"count":38},"13":{"index":13,"count":38},"14":{"index":14,"count":38},"15":{"index":15,"count":1},"16":{"index":16,"count":2},"17":{"index":17,"count":2},"18":{"index":18,"count":2},"19":{"index":19,"count":2},"20":{"index":20,"count":2},"21":{"index":21,"count":2},"22":{"index":22,"count":2},"23":{"index":23,"count":1},"24":{"index":24,"count":28},"25":{"index":25,"count":28},"26":{"index":26,"count":28},"27":{"index":27,"count":20},"28":{"index":28,"count":20},"29":{"index":29,"count":28},"30":{"index":30,"count":28},"31":{"index":31,"count":1},"32":{"index":32,"count":6},"33":{"index":33,"count":6},"34":{"index":34,"count":2},"37":{"index":37,"count":8},"38":{"index":38,"count":8},"39":{"index":39,"count":8},"40":{"index":40,"count":8},"41":{"index":41,"count":1},"42":{"index":42,"count":10},"43":{"index":43,"count":10},"44":{"index":44,"count":10},"45":{"index":45,"count":10},"46":{"index":46,"count":1}},"blocks":{"0":{"index":0,"count":38},"4":{"index":4,"count":2},"5":{"index":5,"count":2},"6":{"index":6,"count":28},"7":{"index":7,"count":20},"8":{"index":8,"count":8},"9":{"index":9,"count":6},"10":{"index":10,"count":2},"12":{"index":12,"count":10}},"hash":"cefdc526b6f9a887b2e346b5864ae9f6","instrumentor":{"blockCounter":14,"nodeCounter":51,"source":"var Q = require(\"q\");\nvar Reader = require(\"./reader\");\n\nmodule.exports = BufferStream;\nfunction BufferStream(chunks, charset) {\n    if (!(this instanceof BufferStream)) {\n        return new BufferStream(chunks, charset);\n    }\n    if (!chunks) {\n        chunks = [];\n    } else if (!Array.isArray(chunks)) {\n        chunks = [chunks];\n    }\n    this._charset = charset;\n    this._chunks = chunks;\n    this._close = Q.defer();\n    this.closed = this._close.promise;\n}\n\nBufferStream.prototype.forEach = function (write, thisp) {\n    var self = this;\n    var chunks = self._chunks;\n    return Q.fcall(function () {\n        chunks.splice(0, chunks.length).forEach(write, thisp);\n    });\n};\n\nBufferStream.prototype.read = function () {\n    var result;\n    result = Reader.join(this._chunks);\n    if (this._charset) {\n        result = result.toString(this._charset);\n    }\n    return Q.resolve(result);\n};\n\nBufferStream.prototype.write = function (chunk) {\n    if (this._charset) {\n        chunk = new Buffer(String(chunk), this._charset);\n    } else {\n        if (!(chunk instanceof Buffer)) {\n            throw new Error(\"Can't write strings to buffer stream without a charset: \" + chunk);\n        }\n    }\n    this._chunks.push(chunk);\n    return Q.resolve();\n};\n\nBufferStream.prototype.close = function () {\n    this._close.resolve();\n    return Q.resolve();\n};\n\nBufferStream.prototype.destroy = function () {\n    this._close.resolve();\n    return Q.resolve();\n};","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":21}},"id":0},"1":{"loc":{"start":{"line":1,"column":8},"end":{"line":1,"column":20}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":33}},"id":2},"3":{"loc":{"start":{"line":2,"column":13},"end":{"line":2,"column":32}},"id":3},"4":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":30}},"id":4},"5":{"loc":{"start":{"line":6,"column":9},"end":{"line":6,"column":39}},"id":5},"6":{"loc":{"start":{"line":7,"column":8},"end":{"line":7,"column":49}},"id":6},"7":{"loc":{"start":{"line":10,"column":8},"end":{"line":10,"column":20}},"id":7},"8":{"loc":{"start":{"line":11,"column":16},"end":{"line":11,"column":37}},"id":8},"9":{"loc":{"start":{"line":12,"column":8},"end":{"line":12,"column":26}},"id":9},"10":{"loc":{"start":{"line":14,"column":4},"end":{"line":14,"column":28}},"id":10},"11":{"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":26}},"id":11},"12":{"loc":{"start":{"line":16,"column":4},"end":{"line":16,"column":28}},"id":12},"13":{"loc":{"start":{"line":16,"column":18},"end":{"line":16,"column":27}},"id":13},"14":{"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":38}},"id":14},"15":{"loc":{"start":{"line":20,"column":0},"end":{"line":26,"column":2}},"id":15},"16":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":20}},"id":16},"17":{"loc":{"start":{"line":22,"column":4},"end":{"line":22,"column":30}},"id":17},"18":{"loc":{"start":{"line":23,"column":4},"end":{"line":25,"column":7}},"id":18},"19":{"loc":{"start":{"line":23,"column":11},"end":{"line":25,"column":6}},"id":19},"20":{"loc":{"start":{"line":24,"column":8},"end":{"line":24,"column":62}},"id":20},"21":{"loc":{"start":{"line":24,"column":8},"end":{"line":24,"column":61}},"id":21},"22":{"loc":{"start":{"line":24,"column":21},"end":{"line":24,"column":39}},"id":22},"23":{"loc":{"start":{"line":28,"column":0},"end":{"line":35,"column":2}},"id":23},"24":{"loc":{"start":{"line":29,"column":4},"end":{"line":29,"column":15}},"id":24},"25":{"loc":{"start":{"line":30,"column":4},"end":{"line":30,"column":39}},"id":25},"26":{"loc":{"start":{"line":30,"column":13},"end":{"line":30,"column":38}},"id":26},"27":{"loc":{"start":{"line":32,"column":8},"end":{"line":32,"column":48}},"id":27},"28":{"loc":{"start":{"line":32,"column":17},"end":{"line":32,"column":47}},"id":28},"29":{"loc":{"start":{"line":34,"column":4},"end":{"line":34,"column":29}},"id":29},"30":{"loc":{"start":{"line":34,"column":11},"end":{"line":34,"column":28}},"id":30},"31":{"loc":{"start":{"line":37,"column":0},"end":{"line":47,"column":2}},"id":31},"32":{"loc":{"start":{"line":39,"column":8},"end":{"line":39,"column":57}},"id":32},"33":{"loc":{"start":{"line":39,"column":27},"end":{"line":39,"column":40}},"id":33},"34":{"loc":{"start":{"line":41,"column":13},"end":{"line":41,"column":38}},"id":34},"35":{"loc":{"start":{"line":42,"column":12},"end":{"line":42,"column":96}},"id":35},"36":{"loc":{"start":{"line":42,"column":28},"end":{"line":42,"column":94}},"id":36},"37":{"loc":{"start":{"line":45,"column":4},"end":{"line":45,"column":29}},"id":37},"38":{"loc":{"start":{"line":45,"column":4},"end":{"line":45,"column":28}},"id":38},"39":{"loc":{"start":{"line":46,"column":4},"end":{"line":46,"column":23}},"id":39},"40":{"loc":{"start":{"line":46,"column":11},"end":{"line":46,"column":22}},"id":40},"41":{"loc":{"start":{"line":49,"column":0},"end":{"line":52,"column":2}},"id":41},"42":{"loc":{"start":{"line":50,"column":4},"end":{"line":50,"column":26}},"id":42},"43":{"loc":{"start":{"line":50,"column":4},"end":{"line":50,"column":25}},"id":43},"44":{"loc":{"start":{"line":51,"column":4},"end":{"line":51,"column":23}},"id":44},"45":{"loc":{"start":{"line":51,"column":11},"end":{"line":51,"column":22}},"id":45},"46":{"loc":{"start":{"line":54,"column":0},"end":{"line":57,"column":2}},"id":46},"47":{"loc":{"start":{"line":55,"column":4},"end":{"line":55,"column":26}},"id":47},"48":{"loc":{"start":{"line":55,"column":4},"end":{"line":55,"column":25}},"id":48},"49":{"loc":{"start":{"line":56,"column":4},"end":{"line":56,"column":23}},"id":49},"50":{"loc":{"start":{"line":56,"column":11},"end":{"line":56,"column":22}},"id":50}}}},"/Users/kris/q-io/spec/fs/make-tree-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"37":{"index":37,"count":1},"38":{"index":38,"count":1},"39":{"index":39,"count":1},"40":{"index":40,"count":1},"41":{"index":41,"count":1},"42":{"index":42,"count":1},"43":{"index":43,"count":1},"44":{"index":44,"count":1},"45":{"index":45,"count":1},"46":{"index":46,"count":1},"47":{"index":47,"count":1},"48":{"index":48,"count":1},"49":{"index":49,"count":1},"50":{"index":50,"count":1},"51":{"index":51,"count":1},"52":{"index":52,"count":1},"53":{"index":53,"count":1},"54":{"index":54,"count":1},"55":{"index":55,"count":1},"56":{"index":56,"count":1},"57":{"index":57,"count":1},"58":{"index":58,"count":1},"59":{"index":59,"count":1},"60":{"index":60,"count":1},"61":{"index":61,"count":1},"62":{"index":62,"count":1},"63":{"index":63,"count":1},"64":{"index":64,"count":1},"65":{"index":65,"count":1},"66":{"index":66,"count":1},"67":{"index":67,"count":1},"68":{"index":68,"count":1},"69":{"index":69,"count":1},"70":{"index":70,"count":1},"71":{"index":71,"count":1},"72":{"index":72,"count":1},"73":{"index":73,"count":1},"74":{"index":74,"count":1},"75":{"index":75,"count":1},"76":{"index":76,"count":1},"77":{"index":77,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1}},"hash":"0e9e4c7d73c75a7a660b160917ba78ad","instrumentor":{"blockCounter":19,"nodeCounter":78,"source":"\"use strict\";\n\nrequire(\"../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar FS = require(\"../../fs\");\nvar _n = FS.normal;\n\ndescribe(\"makeTree\", function () {\n    it(\"should make a branch of a tree\", function () {\n\n        return Q.fcall(function () {\n            return FS.makeTree(\"a/b/c\");\n        })\n\n        .then(function () {\n            return FS.listTree(\"a\");\n        })\n        .then(function (list) {\n            expect(list).toEqual([\n                \"a\",\n                _n(\"a/b\"),\n                _n(\"a/b/c\")\n            ]);\n        })\n\n        .then(function () {\n            return FS.exists(\"a/b/c\");\n        })\n        .then(function (exists) {\n            expect(exists).toBe(true);\n        })\n\n        .then(function () {\n            return FS.isDirectory(\"a/b/c\");\n        })\n        .then(function (isDirectory) {\n            expect(isDirectory).toBe(true);\n        })\n\n    });\n\n    it(\"should make a branch of a tree even if some of it already exists\", function () {\n\n        return Q.fcall(function () {\n            return FS.makeTree(\"a/b/c/d\");\n        })\n\n        .then(function () {\n            return FS.listTree(\"a\");\n        })\n        .then(function (list) {\n            expect(list).toEqual([\n                \"a\",\n                _n(\"a/b\"),\n                _n(\"a/b/c\"),\n                _n(\"a/b/c/d\")\n            ]);\n        })\n        .then(function () {\n            return FS.removeTree(\"a\");\n        })\n    });\n\n    it(\"should make branch from an absolute path\", function () {\n\n        return Q.fcall(function () {\n            return FS.makeTree(FS.absolute(\"a/b/c/d\"));\n        })\n\n        .then(function () {\n            return FS.listTree(\"a\");\n        })\n        .then(function (list) {\n            expect(list).toEqual([\n                \"a\",\n                _n(\"a/b\"),\n                _n(\"a/b/c\"),\n                _n(\"a/b/c/d\")\n            ]);\n        })\n        .then(function () {\n            return FS.removeTree(\"a\");\n        })\n    });\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":34}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":33}},"id":2},"3":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"id":3},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":20}},"id":4},"5":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":29}},"id":5},"6":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":28}},"id":6},"7":{"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":19}},"id":7},"8":{"loc":{"start":{"line":8,"column":0},"end":{"line":85,"column":3}},"id":8},"9":{"loc":{"start":{"line":8,"column":0},"end":{"line":85,"column":2}},"id":9},"10":{"loc":{"start":{"line":9,"column":4},"end":{"line":40,"column":7}},"id":10},"11":{"loc":{"start":{"line":9,"column":4},"end":{"line":40,"column":6}},"id":11},"12":{"loc":{"start":{"line":11,"column":8},"end":{"line":40,"column":4}},"id":12},"13":{"loc":{"start":{"line":11,"column":15},"end":{"line":38,"column":10}},"id":13},"14":{"loc":{"start":{"line":33,"column":13},"end":{"line":35,"column":10}},"id":14},"15":{"loc":{"start":{"line":29,"column":13},"end":{"line":31,"column":10}},"id":15},"16":{"loc":{"start":{"line":26,"column":13},"end":{"line":28,"column":10}},"id":16},"17":{"loc":{"start":{"line":18,"column":13},"end":{"line":24,"column":10}},"id":17},"18":{"loc":{"start":{"line":15,"column":13},"end":{"line":17,"column":10}},"id":18},"19":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":10}},"id":19},"20":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":40}},"id":20},"21":{"loc":{"start":{"line":12,"column":19},"end":{"line":12,"column":39}},"id":21},"22":{"loc":{"start":{"line":16,"column":12},"end":{"line":16,"column":36}},"id":22},"23":{"loc":{"start":{"line":16,"column":19},"end":{"line":16,"column":35}},"id":23},"24":{"loc":{"start":{"line":19,"column":12},"end":{"line":23,"column":15}},"id":24},"25":{"loc":{"start":{"line":19,"column":12},"end":{"line":23,"column":14}},"id":25},"26":{"loc":{"start":{"line":19,"column":18},"end":{"line":19,"column":24}},"id":26},"27":{"loc":{"start":{"line":21,"column":16},"end":{"line":21,"column":25}},"id":27},"28":{"loc":{"start":{"line":22,"column":16},"end":{"line":22,"column":27}},"id":28},"29":{"loc":{"start":{"line":27,"column":12},"end":{"line":27,"column":38}},"id":29},"30":{"loc":{"start":{"line":27,"column":19},"end":{"line":27,"column":37}},"id":30},"31":{"loc":{"start":{"line":30,"column":12},"end":{"line":30,"column":38}},"id":31},"32":{"loc":{"start":{"line":30,"column":12},"end":{"line":30,"column":37}},"id":32},"33":{"loc":{"start":{"line":30,"column":18},"end":{"line":30,"column":26}},"id":33},"34":{"loc":{"start":{"line":34,"column":12},"end":{"line":34,"column":43}},"id":34},"35":{"loc":{"start":{"line":34,"column":19},"end":{"line":34,"column":42}},"id":35},"36":{"loc":{"start":{"line":37,"column":12},"end":{"line":37,"column":43}},"id":36},"37":{"loc":{"start":{"line":37,"column":12},"end":{"line":37,"column":42}},"id":37},"38":{"loc":{"start":{"line":37,"column":18},"end":{"line":37,"column":31}},"id":38},"39":{"loc":{"start":{"line":42,"column":4},"end":{"line":62,"column":7}},"id":39},"40":{"loc":{"start":{"line":42,"column":4},"end":{"line":62,"column":6}},"id":40},"41":{"loc":{"start":{"line":44,"column":8},"end":{"line":62,"column":4}},"id":41},"42":{"loc":{"start":{"line":44,"column":15},"end":{"line":61,"column":10}},"id":42},"43":{"loc":{"start":{"line":51,"column":13},"end":{"line":58,"column":10}},"id":43},"44":{"loc":{"start":{"line":48,"column":13},"end":{"line":50,"column":10}},"id":44},"45":{"loc":{"start":{"line":44,"column":22},"end":{"line":46,"column":10}},"id":45},"46":{"loc":{"start":{"line":45,"column":12},"end":{"line":45,"column":42}},"id":46},"47":{"loc":{"start":{"line":45,"column":19},"end":{"line":45,"column":41}},"id":47},"48":{"loc":{"start":{"line":49,"column":12},"end":{"line":49,"column":36}},"id":48},"49":{"loc":{"start":{"line":49,"column":19},"end":{"line":49,"column":35}},"id":49},"50":{"loc":{"start":{"line":52,"column":12},"end":{"line":57,"column":15}},"id":50},"51":{"loc":{"start":{"line":52,"column":12},"end":{"line":57,"column":14}},"id":51},"52":{"loc":{"start":{"line":52,"column":18},"end":{"line":52,"column":24}},"id":52},"53":{"loc":{"start":{"line":54,"column":16},"end":{"line":54,"column":25}},"id":53},"54":{"loc":{"start":{"line":55,"column":16},"end":{"line":55,"column":27}},"id":54},"55":{"loc":{"start":{"line":56,"column":16},"end":{"line":56,"column":29}},"id":55},"56":{"loc":{"start":{"line":60,"column":12},"end":{"line":60,"column":38}},"id":56},"57":{"loc":{"start":{"line":60,"column":19},"end":{"line":60,"column":37}},"id":57},"58":{"loc":{"start":{"line":64,"column":4},"end":{"line":84,"column":7}},"id":58},"59":{"loc":{"start":{"line":64,"column":4},"end":{"line":84,"column":6}},"id":59},"60":{"loc":{"start":{"line":66,"column":8},"end":{"line":84,"column":4}},"id":60},"61":{"loc":{"start":{"line":66,"column":15},"end":{"line":83,"column":10}},"id":61},"62":{"loc":{"start":{"line":73,"column":13},"end":{"line":80,"column":10}},"id":62},"63":{"loc":{"start":{"line":70,"column":13},"end":{"line":72,"column":10}},"id":63},"64":{"loc":{"start":{"line":66,"column":22},"end":{"line":68,"column":10}},"id":64},"65":{"loc":{"start":{"line":67,"column":12},"end":{"line":67,"column":55}},"id":65},"66":{"loc":{"start":{"line":67,"column":19},"end":{"line":67,"column":54}},"id":66},"67":{"loc":{"start":{"line":67,"column":31},"end":{"line":67,"column":53}},"id":67},"68":{"loc":{"start":{"line":71,"column":12},"end":{"line":71,"column":36}},"id":68},"69":{"loc":{"start":{"line":71,"column":19},"end":{"line":71,"column":35}},"id":69},"70":{"loc":{"start":{"line":74,"column":12},"end":{"line":79,"column":15}},"id":70},"71":{"loc":{"start":{"line":74,"column":12},"end":{"line":79,"column":14}},"id":71},"72":{"loc":{"start":{"line":74,"column":18},"end":{"line":74,"column":24}},"id":72},"73":{"loc":{"start":{"line":76,"column":16},"end":{"line":76,"column":25}},"id":73},"74":{"loc":{"start":{"line":77,"column":16},"end":{"line":77,"column":27}},"id":74},"75":{"loc":{"start":{"line":78,"column":16},"end":{"line":78,"column":29}},"id":75},"76":{"loc":{"start":{"line":82,"column":12},"end":{"line":82,"column":38}},"id":76},"77":{"loc":{"start":{"line":82,"column":19},"end":{"line":82,"column":37}},"id":77}}}},"/Users/kris/q-io/spec/fs/mock/append-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"37":{"index":37,"count":1},"38":{"index":38,"count":1},"39":{"index":39,"count":1},"40":{"index":40,"count":1},"41":{"index":41,"count":1},"42":{"index":42,"count":1},"43":{"index":43,"count":1},"44":{"index":44,"count":1},"45":{"index":45,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1}},"hash":"39401e1b2cba0bb5d03044d36aa2e5a0","instrumentor":{"blockCounter":11,"nodeCounter":46,"source":"\"use strict\";\n\nrequire(\"../../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar FS = require(\"../../../fs\");\n/*global describe,it,expect */\n\ndescribe(\"append\", function () {\n\n    it(\"appends to a file on a mock filesystem\", function () {\n        return FS.mock(FS.join(__dirname, \"fixture\"))\n        .then(function (mock) {\n            return Q.fcall(function () {\n                return mock.append(\"hello.txt\", \"Goodbye!\\n\");\n            })\n            .then(function () {\n                return mock.read(\"hello.txt\");\n            })\n            .then(function (contents) {\n                expect(contents).toBe(\"Hello, World!\\nGoodbye!\\n\");\n            });\n        });\n    });\n\n    it(\"calls open correctly\", function () {\n        return FS.mock(FS.join(__dirname, \"fixture\"))\n        .then(function (mock) {\n            mock.open = function (path, options) {\n                expect(path).toBe(\"hello.txt\");\n                expect(options.flags).toBe(\"w+a\");\n                expect(options.charset).toBe(\"utf8\");\n\n                return Q.resolve({write: function () {}, close: function () {}});\n            };\n\n            return mock.append(\"hello.txt\", \"Goodbye!\\n\", \"a\", \"utf8\");\n        });\n    });\n\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"id":2},"3":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"id":3},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":20}},"id":4},"5":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":32}},"id":5},"6":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":31}},"id":6},"7":{"loc":{"start":{"line":8,"column":0},"end":{"line":40,"column":3}},"id":7},"8":{"loc":{"start":{"line":8,"column":0},"end":{"line":40,"column":2}},"id":8},"9":{"loc":{"start":{"line":10,"column":4},"end":{"line":23,"column":7}},"id":9},"10":{"loc":{"start":{"line":10,"column":4},"end":{"line":23,"column":6}},"id":10},"11":{"loc":{"start":{"line":11,"column":8},"end":{"line":22,"column":11}},"id":11},"12":{"loc":{"start":{"line":11,"column":15},"end":{"line":22,"column":10}},"id":12},"13":{"loc":{"start":{"line":11,"column":22},"end":{"line":11,"column":53}},"id":13},"14":{"loc":{"start":{"line":11,"column":23},"end":{"line":11,"column":52}},"id":14},"15":{"loc":{"start":{"line":13,"column":12},"end":{"line":21,"column":15}},"id":15},"16":{"loc":{"start":{"line":13,"column":19},"end":{"line":21,"column":14}},"id":16},"17":{"loc":{"start":{"line":16,"column":17},"end":{"line":18,"column":14}},"id":17},"18":{"loc":{"start":{"line":13,"column":26},"end":{"line":15,"column":14}},"id":18},"19":{"loc":{"start":{"line":14,"column":16},"end":{"line":14,"column":62}},"id":19},"20":{"loc":{"start":{"line":14,"column":23},"end":{"line":14,"column":61}},"id":20},"21":{"loc":{"start":{"line":17,"column":16},"end":{"line":17,"column":46}},"id":21},"22":{"loc":{"start":{"line":17,"column":23},"end":{"line":17,"column":45}},"id":22},"23":{"loc":{"start":{"line":20,"column":16},"end":{"line":20,"column":67}},"id":23},"24":{"loc":{"start":{"line":20,"column":16},"end":{"line":20,"column":66}},"id":24},"25":{"loc":{"start":{"line":20,"column":22},"end":{"line":20,"column":32}},"id":25},"26":{"loc":{"start":{"line":25,"column":4},"end":{"line":38,"column":7}},"id":26},"27":{"loc":{"start":{"line":25,"column":4},"end":{"line":38,"column":6}},"id":27},"28":{"loc":{"start":{"line":26,"column":8},"end":{"line":37,"column":11}},"id":28},"29":{"loc":{"start":{"line":26,"column":15},"end":{"line":37,"column":10}},"id":29},"30":{"loc":{"start":{"line":26,"column":22},"end":{"line":26,"column":53}},"id":30},"31":{"loc":{"start":{"line":26,"column":23},"end":{"line":26,"column":52}},"id":31},"32":{"loc":{"start":{"line":28,"column":12},"end":{"line":34,"column":14}},"id":32},"33":{"loc":{"start":{"line":29,"column":16},"end":{"line":29,"column":47}},"id":33},"34":{"loc":{"start":{"line":29,"column":16},"end":{"line":29,"column":46}},"id":34},"35":{"loc":{"start":{"line":29,"column":22},"end":{"line":29,"column":28}},"id":35},"36":{"loc":{"start":{"line":30,"column":16},"end":{"line":30,"column":50}},"id":36},"37":{"loc":{"start":{"line":30,"column":16},"end":{"line":30,"column":49}},"id":37},"38":{"loc":{"start":{"line":30,"column":22},"end":{"line":30,"column":37}},"id":38},"39":{"loc":{"start":{"line":31,"column":16},"end":{"line":31,"column":53}},"id":39},"40":{"loc":{"start":{"line":31,"column":16},"end":{"line":31,"column":52}},"id":40},"41":{"loc":{"start":{"line":31,"column":22},"end":{"line":31,"column":39}},"id":41},"42":{"loc":{"start":{"line":33,"column":16},"end":{"line":33,"column":81}},"id":42},"43":{"loc":{"start":{"line":33,"column":23},"end":{"line":33,"column":80}},"id":43},"44":{"loc":{"start":{"line":36,"column":12},"end":{"line":36,"column":71}},"id":44},"45":{"loc":{"start":{"line":36,"column":19},"end":{"line":36,"column":70}},"id":45}}}},"/Users/kris/q-io/spec/fs/mock/copy-tree-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"37":{"index":37,"count":1},"38":{"index":38,"count":1},"39":{"index":39,"count":1},"40":{"index":40,"count":1},"41":{"index":41,"count":1},"42":{"index":42,"count":1},"43":{"index":43,"count":1},"44":{"index":44,"count":1},"45":{"index":45,"count":1},"46":{"index":46,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1}},"hash":"c87c363cff5a8e60132f77e64bc9bcb7","instrumentor":{"blockCounter":7,"nodeCounter":47,"source":"\"use strict\";\n\nrequire(\"../../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar FS = require(\"../../../fs\");\nvar Mock = require(\"../../../fs-mock\");\nvar normalize = FS.normal;\n\ndescribe(\"copyTree\", function () {\n    it(\"should copy a tree\", function () {\n\n        var mock = Mock({\n            \"a/b\": {\n                \"c\": {\n                    \"d\": 66,\n                    \"e\": 99\n                }\n            }\n        });\n\n        return Q.fcall(function () {\n            return mock.copyTree(\"a/b\", \"a/f\");\n        })\n        .then(function () {\n            return Q.all([\n                mock.isDirectory(\"a/f\"),\n                mock.exists(\"a/f/c\"),\n                mock.isFile(\"a/f/c/d\"),\n                mock.read(\"a/f/c/e\")\n            ])\n        })\n        .then(function (existence) {\n            expect(existence.every(Boolean)).toBe(true);\n        })\n\n        .then(function () {\n            return mock.listTree();\n        })\n        .then(function (list) {\n            expect(list).toEqual([\n                \".\",\n                \"a\",\n                normalize(\"a/b\"),\n                normalize(\"a/b/c\"),\n                normalize(\"a/b/c/d\"),\n                normalize(\"a/b/c/e\"),\n                normalize(\"a/f\"),\n                normalize(\"a/f/c\"),\n                normalize(\"a/f/c/d\"),\n                normalize(\"a/f/c/e\")\n            ]);\n        })\n\n    });\n\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"id":2},"3":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"id":3},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":20}},"id":4},"5":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":32}},"id":5},"6":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":31}},"id":6},"7":{"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":39}},"id":7},"8":{"loc":{"start":{"line":6,"column":11},"end":{"line":6,"column":38}},"id":8},"9":{"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":26}},"id":9},"10":{"loc":{"start":{"line":9,"column":0},"end":{"line":56,"column":3}},"id":10},"11":{"loc":{"start":{"line":9,"column":0},"end":{"line":56,"column":2}},"id":11},"12":{"loc":{"start":{"line":10,"column":4},"end":{"line":54,"column":7}},"id":12},"13":{"loc":{"start":{"line":10,"column":4},"end":{"line":54,"column":6}},"id":13},"14":{"loc":{"start":{"line":12,"column":8},"end":{"line":19,"column":11}},"id":14},"15":{"loc":{"start":{"line":12,"column":19},"end":{"line":19,"column":10}},"id":15},"16":{"loc":{"start":{"line":21,"column":8},"end":{"line":54,"column":4}},"id":16},"17":{"loc":{"start":{"line":21,"column":15},"end":{"line":52,"column":10}},"id":17},"18":{"loc":{"start":{"line":36,"column":13},"end":{"line":38,"column":10}},"id":18},"19":{"loc":{"start":{"line":32,"column":13},"end":{"line":34,"column":10}},"id":19},"20":{"loc":{"start":{"line":24,"column":13},"end":{"line":31,"column":10}},"id":20},"21":{"loc":{"start":{"line":21,"column":22},"end":{"line":23,"column":10}},"id":21},"22":{"loc":{"start":{"line":22,"column":12},"end":{"line":22,"column":47}},"id":22},"23":{"loc":{"start":{"line":22,"column":19},"end":{"line":22,"column":46}},"id":23},"24":{"loc":{"start":{"line":25,"column":12},"end":{"line":31,"column":8}},"id":24},"25":{"loc":{"start":{"line":25,"column":19},"end":{"line":30,"column":14}},"id":25},"26":{"loc":{"start":{"line":26,"column":16},"end":{"line":26,"column":39}},"id":26},"27":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":36}},"id":27},"28":{"loc":{"start":{"line":28,"column":16},"end":{"line":28,"column":38}},"id":28},"29":{"loc":{"start":{"line":29,"column":16},"end":{"line":29,"column":36}},"id":29},"30":{"loc":{"start":{"line":33,"column":12},"end":{"line":33,"column":56}},"id":30},"31":{"loc":{"start":{"line":33,"column":12},"end":{"line":33,"column":55}},"id":31},"32":{"loc":{"start":{"line":33,"column":18},"end":{"line":33,"column":44}},"id":32},"33":{"loc":{"start":{"line":33,"column":19},"end":{"line":33,"column":43}},"id":33},"34":{"loc":{"start":{"line":37,"column":12},"end":{"line":37,"column":35}},"id":34},"35":{"loc":{"start":{"line":37,"column":19},"end":{"line":37,"column":34}},"id":35},"36":{"loc":{"start":{"line":40,"column":12},"end":{"line":51,"column":15}},"id":36},"37":{"loc":{"start":{"line":40,"column":12},"end":{"line":51,"column":14}},"id":37},"38":{"loc":{"start":{"line":40,"column":18},"end":{"line":40,"column":24}},"id":38},"39":{"loc":{"start":{"line":43,"column":16},"end":{"line":43,"column":32}},"id":39},"40":{"loc":{"start":{"line":44,"column":16},"end":{"line":44,"column":34}},"id":40},"41":{"loc":{"start":{"line":45,"column":16},"end":{"line":45,"column":36}},"id":41},"42":{"loc":{"start":{"line":46,"column":16},"end":{"line":46,"column":36}},"id":42},"43":{"loc":{"start":{"line":47,"column":16},"end":{"line":47,"column":32}},"id":43},"44":{"loc":{"start":{"line":48,"column":16},"end":{"line":48,"column":34}},"id":44},"45":{"loc":{"start":{"line":49,"column":16},"end":{"line":49,"column":36}},"id":45},"46":{"loc":{"start":{"line":50,"column":16},"end":{"line":50,"column":36}},"id":46}}}},"/Users/kris/q-io/spec/fs/mock/link-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"37":{"index":37,"count":1},"38":{"index":38,"count":1},"39":{"index":39,"count":1},"40":{"index":40,"count":1},"41":{"index":41,"count":1},"42":{"index":42,"count":1},"43":{"index":43,"count":1},"44":{"index":44,"count":1},"45":{"index":45,"count":1},"46":{"index":46,"count":1},"47":{"index":47,"count":1},"48":{"index":48,"count":1},"49":{"index":49,"count":1},"50":{"index":50,"count":1},"51":{"index":51,"count":1},"52":{"index":52,"count":1},"53":{"index":53,"count":1},"54":{"index":54,"count":1},"55":{"index":55,"count":1},"56":{"index":56,"count":1},"57":{"index":57,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1}},"hash":"101065f24b6a07a42ee8954c3d801d48","instrumentor":{"blockCounter":14,"nodeCounter":58,"source":"require(\"../../lib/jasmine-promise\");\nvar MockFs = require(\"../../../fs-mock\");\nvar normalize = require('../../../fs').normal;\n\ndescribe(\"link\", function () {\n    it(\"should\", function () {\n        var mock = MockFs();\n\n        // make some content\n        return mock.makeTree(\"a/b\")\n        .then(function () {\n            return mock.write(\"a/b/c.txt\", \"Hello, World!\")\n        })\n\n        // verify content\n        .then(function () {\n            return mock.read(\"a/b/c.txt\")\n        })\n        .then(function (content) {\n            expect(content).toBe(\"Hello, World!\");\n        })\n\n        // link it\n        .then(function () {\n            return mock.link(\"a/b/c.txt\", \"a/b/d.txt\")\n        })\n\n        // should be non-destructive\n        .then(function () {\n            return mock.read(\"a/b/c.txt\")\n        })\n        .then(function (content) {\n            expect(content).toBe(\"Hello, World!\");\n        })\n\n        // should be listed\n        .then(function () {\n            return mock.listTree()\n        })\n        .then(function (content) {\n            expect(content).toEqual([\n                \".\",\n                \"a\",\n                normalize(\"a/b\"),\n                normalize(\"a/b/c.txt\"),\n                normalize(\"a/b/d.txt\")\n            ])\n        })\n\n        // should be identified as a file\n        .then(function () {\n            return mock.isFile(\"a/b/d.txt\");\n        })\n        .then(function (isFile) {\n            expect(isFile).toBe(true);\n        })\n\n        // should have the same content\n        .then(function () {\n            return mock.read(\"a/b/d.txt\");\n        })\n        .then(function (content) {\n            expect(content).toBe(\"Hello, World!\");\n        });\n\n    });\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":37}},"id":0},"1":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":36}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":41}},"id":2},"3":{"loc":{"start":{"line":2,"column":13},"end":{"line":2,"column":40}},"id":3},"4":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":46}},"id":4},"5":{"loc":{"start":{"line":3,"column":23},"end":{"line":3,"column":38}},"id":5},"6":{"loc":{"start":{"line":5,"column":0},"end":{"line":67,"column":3}},"id":6},"7":{"loc":{"start":{"line":5,"column":0},"end":{"line":67,"column":2}},"id":7},"8":{"loc":{"start":{"line":6,"column":4},"end":{"line":66,"column":7}},"id":8},"9":{"loc":{"start":{"line":6,"column":4},"end":{"line":66,"column":6}},"id":9},"10":{"loc":{"start":{"line":7,"column":8},"end":{"line":7,"column":28}},"id":10},"11":{"loc":{"start":{"line":7,"column":19},"end":{"line":7,"column":27}},"id":11},"12":{"loc":{"start":{"line":10,"column":8},"end":{"line":64,"column":11}},"id":12},"13":{"loc":{"start":{"line":10,"column":15},"end":{"line":64,"column":10}},"id":13},"14":{"loc":{"start":{"line":59,"column":13},"end":{"line":61,"column":10}},"id":14},"15":{"loc":{"start":{"line":54,"column":13},"end":{"line":56,"column":10}},"id":15},"16":{"loc":{"start":{"line":51,"column":13},"end":{"line":53,"column":10}},"id":16},"17":{"loc":{"start":{"line":40,"column":13},"end":{"line":48,"column":10}},"id":17},"18":{"loc":{"start":{"line":37,"column":13},"end":{"line":39,"column":10}},"id":18},"19":{"loc":{"start":{"line":32,"column":13},"end":{"line":34,"column":10}},"id":19},"20":{"loc":{"start":{"line":29,"column":13},"end":{"line":31,"column":10}},"id":20},"21":{"loc":{"start":{"line":24,"column":13},"end":{"line":26,"column":10}},"id":21},"22":{"loc":{"start":{"line":19,"column":13},"end":{"line":21,"column":10}},"id":22},"23":{"loc":{"start":{"line":16,"column":13},"end":{"line":18,"column":10}},"id":23},"24":{"loc":{"start":{"line":11,"column":13},"end":{"line":13,"column":10}},"id":24},"25":{"loc":{"start":{"line":10,"column":28},"end":{"line":10,"column":35}},"id":25},"26":{"loc":{"start":{"line":12,"column":12},"end":{"line":13,"column":8}},"id":26},"27":{"loc":{"start":{"line":12,"column":19},"end":{"line":12,"column":59}},"id":27},"28":{"loc":{"start":{"line":17,"column":12},"end":{"line":18,"column":8}},"id":28},"29":{"loc":{"start":{"line":17,"column":19},"end":{"line":17,"column":41}},"id":29},"30":{"loc":{"start":{"line":20,"column":12},"end":{"line":20,"column":50}},"id":30},"31":{"loc":{"start":{"line":20,"column":12},"end":{"line":20,"column":49}},"id":31},"32":{"loc":{"start":{"line":20,"column":18},"end":{"line":20,"column":27}},"id":32},"33":{"loc":{"start":{"line":25,"column":12},"end":{"line":26,"column":8}},"id":33},"34":{"loc":{"start":{"line":25,"column":19},"end":{"line":25,"column":54}},"id":34},"35":{"loc":{"start":{"line":30,"column":12},"end":{"line":31,"column":8}},"id":35},"36":{"loc":{"start":{"line":30,"column":19},"end":{"line":30,"column":41}},"id":36},"37":{"loc":{"start":{"line":33,"column":12},"end":{"line":33,"column":50}},"id":37},"38":{"loc":{"start":{"line":33,"column":12},"end":{"line":33,"column":49}},"id":38},"39":{"loc":{"start":{"line":33,"column":18},"end":{"line":33,"column":27}},"id":39},"40":{"loc":{"start":{"line":38,"column":12},"end":{"line":39,"column":8}},"id":40},"41":{"loc":{"start":{"line":38,"column":19},"end":{"line":38,"column":34}},"id":41},"42":{"loc":{"start":{"line":41,"column":12},"end":{"line":48,"column":8}},"id":42},"43":{"loc":{"start":{"line":41,"column":12},"end":{"line":47,"column":14}},"id":43},"44":{"loc":{"start":{"line":41,"column":18},"end":{"line":41,"column":27}},"id":44},"45":{"loc":{"start":{"line":44,"column":16},"end":{"line":44,"column":32}},"id":45},"46":{"loc":{"start":{"line":45,"column":16},"end":{"line":45,"column":38}},"id":46},"47":{"loc":{"start":{"line":46,"column":16},"end":{"line":46,"column":38}},"id":47},"48":{"loc":{"start":{"line":52,"column":12},"end":{"line":52,"column":44}},"id":48},"49":{"loc":{"start":{"line":52,"column":19},"end":{"line":52,"column":43}},"id":49},"50":{"loc":{"start":{"line":55,"column":12},"end":{"line":55,"column":38}},"id":50},"51":{"loc":{"start":{"line":55,"column":12},"end":{"line":55,"column":37}},"id":51},"52":{"loc":{"start":{"line":55,"column":18},"end":{"line":55,"column":26}},"id":52},"53":{"loc":{"start":{"line":60,"column":12},"end":{"line":60,"column":42}},"id":53},"54":{"loc":{"start":{"line":60,"column":19},"end":{"line":60,"column":41}},"id":54},"55":{"loc":{"start":{"line":63,"column":12},"end":{"line":63,"column":50}},"id":55},"56":{"loc":{"start":{"line":63,"column":12},"end":{"line":63,"column":49}},"id":56},"57":{"loc":{"start":{"line":63,"column":18},"end":{"line":63,"column":27}},"id":57}}}},"/Users/kris/q-io/spec/fs/mock/make-tree-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"37":{"index":37,"count":1},"38":{"index":38,"count":1},"39":{"index":39,"count":1},"40":{"index":40,"count":1},"41":{"index":41,"count":1},"42":{"index":42,"count":1},"43":{"index":43,"count":1},"44":{"index":44,"count":1},"45":{"index":45,"count":1},"46":{"index":46,"count":1},"47":{"index":47,"count":1},"48":{"index":48,"count":1},"49":{"index":49,"count":1},"50":{"index":50,"count":1},"51":{"index":51,"count":1},"52":{"index":52,"count":1},"53":{"index":53,"count":1},"54":{"index":54,"count":1},"55":{"index":55,"count":1},"56":{"index":56,"count":1},"57":{"index":57,"count":1},"58":{"index":58,"count":1},"59":{"index":59,"count":1},"60":{"index":60,"count":1},"61":{"index":61,"count":1},"62":{"index":62,"count":1},"63":{"index":63,"count":1},"64":{"index":64,"count":1},"65":{"index":65,"count":1},"66":{"index":66,"count":1},"67":{"index":67,"count":1},"68":{"index":68,"count":1},"69":{"index":69,"count":1},"70":{"index":70,"count":1},"71":{"index":71,"count":1},"72":{"index":72,"count":1},"73":{"index":73,"count":1},"74":{"index":74,"count":1},"75":{"index":75,"count":1},"76":{"index":76,"count":1},"77":{"index":77,"count":1},"78":{"index":78,"count":1},"79":{"index":79,"count":1},"80":{"index":80,"count":1},"81":{"index":81,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1}},"hash":"a1c7e97d4755b112212980d6ab4c7ca0","instrumentor":{"blockCounter":18,"nodeCounter":82,"source":"\"use strict\";\n\nrequire(\"../../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar FS = require(\"../../../fs\");\nvar Mock = require(\"../../../fs-mock\");\nvar normalize = FS.normal;\n\ndescribe(\"makeTree\", function () {\n    it(\"should make a branch of a tree\", function () {\n\n        var mock = Mock({\n            \"a\": {}\n        });\n\n        return Q.fcall(function () {\n            return mock.makeTree(\"a/b/c\");\n        })\n\n        .then(function () {\n            return mock.listTree();\n        })\n        .then(function (list) {\n            expect(list).toEqual([\n                \".\",\n                \"a\",\n                normalize(\"a/b\"),\n                normalize(\"a/b/c\")\n            ]);\n        })\n\n        .then(function () {\n            return mock.exists(\"a/b/c\")\n        })\n        .then(function (exists) {\n            expect(exists).toBe(true);\n        })\n\n        .then(function () {\n            return mock.isDirectory(\"a/b/c\")\n        })\n        .then(function (isDirectory) {\n            expect(isDirectory).toBe(true);\n        })\n\n    });\n\n    it(\"should make a branch of a tree even if some of it already exists\", function () {\n\n        var mock = Mock({\n            \"a/b\": {}\n        });\n\n        return Q.fcall(function () {\n            return mock.makeTree(\"a/b/c/d\");\n        })\n\n        .then(function () {\n            return mock.listTree();\n        })\n        .then(function (list) {\n            expect(list).toEqual([\n                \".\",\n                \"a\",\n                normalize(\"a/b\"),\n                normalize(\"a/b/c\"),\n                normalize(\"a/b/c/d\")\n            ]);\n        })\n    });\n\n    it(\"should make an absolute tree from a subdirectory\", function () {\n        var mock = Mock({\n            \"a/b\": {\n                \"c\": {\n                    \"d.ext\": 66\n                }\n            }\n        }, \"/a/b\");\n\n        return Q.fcall(function () {\n            return mock.makeTree(\"/a/b/c/x/y/z\");\n        })\n        .then(function () {\n            return Q.all([\n                mock.isDirectory(\"a/b/c/x\"),\n                mock.isDirectory(\"a/b/c/x/y\"),\n                mock.isDirectory(\"a/b/c/x/y/z\")\n            ]);\n        })\n        .then(function () {\n            return mock.listTree(\"/\");\n        })\n        .then(function (list) {\n            expect(list).toEqual([\n                \"/\",\n                \"/a\",\n                \"/a/b\",\n                \"/a/b/c\",\n                \"/a/b/c/d.ext\",\n                \"/a/b/c/x\",\n                \"/a/b/c/x/y\",\n                \"/a/b/c/x/y/z\"\n            ]);\n        });\n    });\n\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"id":2},"3":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"id":3},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":20}},"id":4},"5":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":32}},"id":5},"6":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":31}},"id":6},"7":{"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":39}},"id":7},"8":{"loc":{"start":{"line":6,"column":11},"end":{"line":6,"column":38}},"id":8},"9":{"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":26}},"id":9},"10":{"loc":{"start":{"line":9,"column":0},"end":{"line":108,"column":3}},"id":10},"11":{"loc":{"start":{"line":9,"column":0},"end":{"line":108,"column":2}},"id":11},"12":{"loc":{"start":{"line":10,"column":4},"end":{"line":46,"column":7}},"id":12},"13":{"loc":{"start":{"line":10,"column":4},"end":{"line":46,"column":6}},"id":13},"14":{"loc":{"start":{"line":12,"column":8},"end":{"line":14,"column":11}},"id":14},"15":{"loc":{"start":{"line":12,"column":19},"end":{"line":14,"column":10}},"id":15},"16":{"loc":{"start":{"line":16,"column":8},"end":{"line":46,"column":4}},"id":16},"17":{"loc":{"start":{"line":16,"column":15},"end":{"line":44,"column":10}},"id":17},"18":{"loc":{"start":{"line":39,"column":13},"end":{"line":41,"column":10}},"id":18},"19":{"loc":{"start":{"line":35,"column":13},"end":{"line":37,"column":10}},"id":19},"20":{"loc":{"start":{"line":32,"column":13},"end":{"line":34,"column":10}},"id":20},"21":{"loc":{"start":{"line":23,"column":13},"end":{"line":30,"column":10}},"id":21},"22":{"loc":{"start":{"line":20,"column":13},"end":{"line":22,"column":10}},"id":22},"23":{"loc":{"start":{"line":16,"column":22},"end":{"line":18,"column":10}},"id":23},"24":{"loc":{"start":{"line":17,"column":12},"end":{"line":17,"column":42}},"id":24},"25":{"loc":{"start":{"line":17,"column":19},"end":{"line":17,"column":41}},"id":25},"26":{"loc":{"start":{"line":21,"column":12},"end":{"line":21,"column":35}},"id":26},"27":{"loc":{"start":{"line":21,"column":19},"end":{"line":21,"column":34}},"id":27},"28":{"loc":{"start":{"line":24,"column":12},"end":{"line":29,"column":15}},"id":28},"29":{"loc":{"start":{"line":24,"column":12},"end":{"line":29,"column":14}},"id":29},"30":{"loc":{"start":{"line":24,"column":18},"end":{"line":24,"column":24}},"id":30},"31":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":32}},"id":31},"32":{"loc":{"start":{"line":28,"column":16},"end":{"line":28,"column":34}},"id":32},"33":{"loc":{"start":{"line":33,"column":12},"end":{"line":34,"column":8}},"id":33},"34":{"loc":{"start":{"line":33,"column":19},"end":{"line":33,"column":39}},"id":34},"35":{"loc":{"start":{"line":36,"column":12},"end":{"line":36,"column":38}},"id":35},"36":{"loc":{"start":{"line":36,"column":12},"end":{"line":36,"column":37}},"id":36},"37":{"loc":{"start":{"line":36,"column":18},"end":{"line":36,"column":26}},"id":37},"38":{"loc":{"start":{"line":40,"column":12},"end":{"line":41,"column":8}},"id":38},"39":{"loc":{"start":{"line":40,"column":19},"end":{"line":40,"column":44}},"id":39},"40":{"loc":{"start":{"line":43,"column":12},"end":{"line":43,"column":43}},"id":40},"41":{"loc":{"start":{"line":43,"column":12},"end":{"line":43,"column":42}},"id":41},"42":{"loc":{"start":{"line":43,"column":18},"end":{"line":43,"column":31}},"id":42},"43":{"loc":{"start":{"line":48,"column":4},"end":{"line":70,"column":7}},"id":43},"44":{"loc":{"start":{"line":48,"column":4},"end":{"line":70,"column":6}},"id":44},"45":{"loc":{"start":{"line":50,"column":8},"end":{"line":52,"column":11}},"id":45},"46":{"loc":{"start":{"line":50,"column":19},"end":{"line":52,"column":10}},"id":46},"47":{"loc":{"start":{"line":54,"column":8},"end":{"line":70,"column":4}},"id":47},"48":{"loc":{"start":{"line":54,"column":15},"end":{"line":69,"column":10}},"id":48},"49":{"loc":{"start":{"line":58,"column":13},"end":{"line":60,"column":10}},"id":49},"50":{"loc":{"start":{"line":54,"column":22},"end":{"line":56,"column":10}},"id":50},"51":{"loc":{"start":{"line":55,"column":12},"end":{"line":55,"column":44}},"id":51},"52":{"loc":{"start":{"line":55,"column":19},"end":{"line":55,"column":43}},"id":52},"53":{"loc":{"start":{"line":59,"column":12},"end":{"line":59,"column":35}},"id":53},"54":{"loc":{"start":{"line":59,"column":19},"end":{"line":59,"column":34}},"id":54},"55":{"loc":{"start":{"line":62,"column":12},"end":{"line":68,"column":15}},"id":55},"56":{"loc":{"start":{"line":62,"column":12},"end":{"line":68,"column":14}},"id":56},"57":{"loc":{"start":{"line":62,"column":18},"end":{"line":62,"column":24}},"id":57},"58":{"loc":{"start":{"line":65,"column":16},"end":{"line":65,"column":32}},"id":58},"59":{"loc":{"start":{"line":66,"column":16},"end":{"line":66,"column":34}},"id":59},"60":{"loc":{"start":{"line":67,"column":16},"end":{"line":67,"column":36}},"id":60},"61":{"loc":{"start":{"line":72,"column":4},"end":{"line":106,"column":7}},"id":61},"62":{"loc":{"start":{"line":72,"column":4},"end":{"line":106,"column":6}},"id":62},"63":{"loc":{"start":{"line":73,"column":8},"end":{"line":79,"column":19}},"id":63},"64":{"loc":{"start":{"line":73,"column":19},"end":{"line":79,"column":18}},"id":64},"65":{"loc":{"start":{"line":81,"column":8},"end":{"line":105,"column":11}},"id":65},"66":{"loc":{"start":{"line":81,"column":15},"end":{"line":105,"column":10}},"id":66},"67":{"loc":{"start":{"line":91,"column":13},"end":{"line":93,"column":10}},"id":67},"68":{"loc":{"start":{"line":84,"column":13},"end":{"line":90,"column":10}},"id":68},"69":{"loc":{"start":{"line":81,"column":22},"end":{"line":83,"column":10}},"id":69},"70":{"loc":{"start":{"line":82,"column":12},"end":{"line":82,"column":49}},"id":70},"71":{"loc":{"start":{"line":82,"column":19},"end":{"line":82,"column":48}},"id":71},"72":{"loc":{"start":{"line":85,"column":12},"end":{"line":89,"column":15}},"id":72},"73":{"loc":{"start":{"line":85,"column":19},"end":{"line":89,"column":14}},"id":73},"74":{"loc":{"start":{"line":86,"column":16},"end":{"line":86,"column":43}},"id":74},"75":{"loc":{"start":{"line":87,"column":16},"end":{"line":87,"column":45}},"id":75},"76":{"loc":{"start":{"line":88,"column":16},"end":{"line":88,"column":47}},"id":76},"77":{"loc":{"start":{"line":92,"column":12},"end":{"line":92,"column":38}},"id":77},"78":{"loc":{"start":{"line":92,"column":19},"end":{"line":92,"column":37}},"id":78},"79":{"loc":{"start":{"line":95,"column":12},"end":{"line":104,"column":15}},"id":79},"80":{"loc":{"start":{"line":95,"column":12},"end":{"line":104,"column":14}},"id":80},"81":{"loc":{"start":{"line":95,"column":18},"end":{"line":95,"column":24}},"id":81}}}},"/Users/kris/q-io/spec/fs/mock/merge-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"37":{"index":37,"count":1},"38":{"index":38,"count":1},"39":{"index":39,"count":1},"40":{"index":40,"count":1},"41":{"index":41,"count":1},"42":{"index":42,"count":1},"43":{"index":43,"count":1},"44":{"index":44,"count":1},"45":{"index":45,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1}},"hash":"2b703cbff03f658b0e619e82b43277e2","instrumentor":{"blockCounter":9,"nodeCounter":46,"source":"\"use strict\";\n\nrequire(\"../../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar FS = require(\"../../../fs\");\nvar Mock = require(\"../../../fs-mock\");\nvar normalize = FS.normal;\n\ndescribe(\"makeTree\", function () {\n    it(\"should make a branch of a tree\", function () {\n\n        var merged = FS.merge([\n            Mock({\n                \"a\": 10,\n                \"b\": 20,\n                \"1/2/3\": \"123\"\n            }),\n            Mock({\n                \"a\": 20,\n                \"c\": 30\n            }),\n            Mock({\n                \"a\": 30,\n                \"d\": 40\n            }),\n        ])\n\n        return merged.then(function (merged) {\n\n            return Q.fcall(function () {\n                return merged.listTree();\n            })\n            .then(function (list) {\n                expect(list.sort()).toEqual([\n                    \".\",\n                    \"1\",\n                    normalize(\"1/2\"),\n                    normalize(\"1/2/3\"),\n                    \"a\",\n                    \"b\",\n                    \"c\",\n                    \"d\",\n                ]);\n            })\n\n            // overridden by a previous tree\n            .then(function () {\n                return merged.read(\"a\");\n            })\n            .then(function (a) {\n                expect(a).toBe(\"30\");\n            })\n\n            // not overridden\n            .then(function () {\n                return merged.read(\"b\");\n            })\n            .then(function (a) {\n                expect(a).toBe(\"20\");\n            })\n\n        })\n\n    });\n\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"id":2},"3":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"id":3},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":20}},"id":4},"5":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":32}},"id":5},"6":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":31}},"id":6},"7":{"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":39}},"id":7},"8":{"loc":{"start":{"line":6,"column":11},"end":{"line":6,"column":38}},"id":8},"9":{"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":26}},"id":9},"10":{"loc":{"start":{"line":9,"column":0},"end":{"line":66,"column":3}},"id":10},"11":{"loc":{"start":{"line":9,"column":0},"end":{"line":66,"column":2}},"id":11},"12":{"loc":{"start":{"line":10,"column":4},"end":{"line":64,"column":7}},"id":12},"13":{"loc":{"start":{"line":10,"column":4},"end":{"line":64,"column":6}},"id":13},"14":{"loc":{"start":{"line":12,"column":8},"end":{"line":28,"column":8}},"id":14},"15":{"loc":{"start":{"line":12,"column":21},"end":{"line":26,"column":10}},"id":15},"16":{"loc":{"start":{"line":13,"column":12},"end":{"line":17,"column":14}},"id":16},"17":{"loc":{"start":{"line":18,"column":12},"end":{"line":21,"column":14}},"id":17},"18":{"loc":{"start":{"line":22,"column":12},"end":{"line":25,"column":14}},"id":18},"19":{"loc":{"start":{"line":28,"column":8},"end":{"line":64,"column":4}},"id":19},"20":{"loc":{"start":{"line":28,"column":15},"end":{"line":62,"column":10}},"id":20},"21":{"loc":{"start":{"line":30,"column":12},"end":{"line":62,"column":8}},"id":21},"22":{"loc":{"start":{"line":30,"column":19},"end":{"line":60,"column":14}},"id":22},"23":{"loc":{"start":{"line":55,"column":17},"end":{"line":57,"column":14}},"id":23},"24":{"loc":{"start":{"line":50,"column":17},"end":{"line":52,"column":14}},"id":24},"25":{"loc":{"start":{"line":47,"column":17},"end":{"line":49,"column":14}},"id":25},"26":{"loc":{"start":{"line":33,"column":17},"end":{"line":44,"column":14}},"id":26},"27":{"loc":{"start":{"line":30,"column":26},"end":{"line":32,"column":14}},"id":27},"28":{"loc":{"start":{"line":31,"column":16},"end":{"line":31,"column":41}},"id":28},"29":{"loc":{"start":{"line":31,"column":23},"end":{"line":31,"column":40}},"id":29},"30":{"loc":{"start":{"line":34,"column":16},"end":{"line":43,"column":19}},"id":30},"31":{"loc":{"start":{"line":34,"column":16},"end":{"line":43,"column":18}},"id":31},"32":{"loc":{"start":{"line":34,"column":22},"end":{"line":34,"column":35}},"id":32},"33":{"loc":{"start":{"line":34,"column":23},"end":{"line":34,"column":34}},"id":33},"34":{"loc":{"start":{"line":37,"column":20},"end":{"line":37,"column":36}},"id":34},"35":{"loc":{"start":{"line":38,"column":20},"end":{"line":38,"column":38}},"id":35},"36":{"loc":{"start":{"line":48,"column":16},"end":{"line":48,"column":40}},"id":36},"37":{"loc":{"start":{"line":48,"column":23},"end":{"line":48,"column":39}},"id":37},"38":{"loc":{"start":{"line":51,"column":16},"end":{"line":51,"column":37}},"id":38},"39":{"loc":{"start":{"line":51,"column":16},"end":{"line":51,"column":36}},"id":39},"40":{"loc":{"start":{"line":51,"column":22},"end":{"line":51,"column":25}},"id":40},"41":{"loc":{"start":{"line":56,"column":16},"end":{"line":56,"column":40}},"id":41},"42":{"loc":{"start":{"line":56,"column":23},"end":{"line":56,"column":39}},"id":42},"43":{"loc":{"start":{"line":59,"column":16},"end":{"line":59,"column":37}},"id":43},"44":{"loc":{"start":{"line":59,"column":16},"end":{"line":59,"column":36}},"id":44},"45":{"loc":{"start":{"line":59,"column":22},"end":{"line":59,"column":25}},"id":45}}}},"/Users/kris/q-io/spec/fs/mock/move-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"37":{"index":37,"count":1},"38":{"index":38,"count":1},"39":{"index":39,"count":1},"40":{"index":40,"count":1},"41":{"index":41,"count":1},"42":{"index":42,"count":1},"43":{"index":43,"count":1},"44":{"index":44,"count":1},"45":{"index":45,"count":1},"46":{"index":46,"count":1},"47":{"index":47,"count":1},"48":{"index":48,"count":1},"49":{"index":49,"count":1},"50":{"index":50,"count":1},"51":{"index":51,"count":1},"52":{"index":52,"count":1},"53":{"index":53,"count":1},"54":{"index":54,"count":1},"55":{"index":55,"count":1},"56":{"index":56,"count":1},"57":{"index":57,"count":1},"58":{"index":58,"count":1},"59":{"index":59,"count":1},"60":{"index":60,"count":1},"61":{"index":61,"count":1},"62":{"index":62,"count":1},"63":{"index":63,"count":1},"64":{"index":64,"count":1},"65":{"index":65,"count":1},"66":{"index":66,"count":1},"67":{"index":67,"count":1},"68":{"index":68,"count":1},"69":{"index":69,"count":1},"70":{"index":70,"count":1},"71":{"index":71,"count":1},"72":{"index":72,"count":1},"73":{"index":73,"count":1},"74":{"index":74,"count":1},"75":{"index":75,"count":1},"76":{"index":76,"count":1},"77":{"index":77,"count":1},"78":{"index":78,"count":1},"79":{"index":79,"count":1},"80":{"index":80,"count":1},"81":{"index":81,"count":1},"82":{"index":82,"count":1},"83":{"index":83,"count":1},"84":{"index":84,"count":1},"85":{"index":85,"count":1},"86":{"index":86,"count":1},"87":{"index":87,"count":1},"88":{"index":88,"count":1},"89":{"index":89,"count":1},"90":{"index":90,"count":1},"91":{"index":91,"count":1},"92":{"index":92,"count":1},"93":{"index":93,"count":1},"94":{"index":94,"count":1},"95":{"index":95,"count":1},"96":{"index":96,"count":1},"97":{"index":97,"count":1},"98":{"index":98,"count":1},"99":{"index":99,"count":1},"100":{"index":100,"count":1},"101":{"index":101,"count":1},"102":{"index":102,"count":1},"103":{"index":103,"count":1},"104":{"index":104,"count":1},"105":{"index":105,"count":1},"106":{"index":106,"count":1},"107":{"index":107,"count":1},"108":{"index":108,"count":1},"109":{"index":109,"count":1},"110":{"index":110,"count":1},"111":{"index":111,"count":1},"112":{"index":112,"count":1},"113":{"index":113,"count":1},"114":{"index":114,"count":1},"115":{"index":115,"count":1},"116":{"index":116,"count":1},"117":{"index":117,"count":1},"118":{"index":118,"count":1},"119":{"index":119,"count":1},"120":{"index":120,"count":1},"121":{"index":121,"count":1},"122":{"index":122,"count":1},"123":{"index":123,"count":1},"124":{"index":124,"count":1},"125":{"index":125,"count":1},"126":{"index":126,"count":1},"127":{"index":127,"count":1},"128":{"index":128,"count":1},"129":{"index":129,"count":1},"130":{"index":130,"count":1},"131":{"index":131,"count":1},"132":{"index":132,"count":1},"133":{"index":133,"count":1},"134":{"index":134,"count":1},"135":{"index":135,"count":1},"136":{"index":136,"count":1},"137":{"index":137,"count":1},"138":{"index":138,"count":1},"139":{"index":139,"count":1},"140":{"index":140,"count":1},"141":{"index":141,"count":1},"142":{"index":142,"count":1},"143":{"index":143,"count":1},"144":{"index":144,"count":1},"145":{"index":145,"count":1},"147":{"index":147,"count":1},"148":{"index":148,"count":1},"149":{"index":149,"count":1},"150":{"index":150,"count":1},"151":{"index":151,"count":1},"152":{"index":152,"count":1},"153":{"index":153,"count":1},"154":{"index":154,"count":1},"155":{"index":155,"count":1},"156":{"index":156,"count":1},"157":{"index":157,"count":1},"158":{"index":158,"count":1},"159":{"index":159,"count":1},"160":{"index":160,"count":1},"161":{"index":161,"count":1},"162":{"index":162,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"37":{"index":37,"count":1},"38":{"index":38,"count":1},"40":{"index":40,"count":1},"41":{"index":41,"count":1},"42":{"index":42,"count":1},"43":{"index":43,"count":1},"44":{"index":44,"count":1},"46":{"index":46,"count":1}},"hash":"62b7376a4f8a786ebe49ba5c7e66f207","instrumentor":{"blockCounter":47,"nodeCounter":164,"source":"\"use strict\";\n\nrequire(\"../../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar FS = require(\"../../../fs\");\nvar Mock = require(\"../../../fs-mock\");\n\ndescribe(\"move\", function () {\n    it(\"should move\", function () {\n\n        return FS.mock(FS.join(__dirname, \"fixture\"))\n        .then(function (mock) {\n\n            // initial list\n            return Q.fcall(function () {\n                return mock.listTree()\n            })\n            .then(function (list) {\n                expect(list).toEqual([\n                    \".\",\n                    \"hello.txt\"\n                ]);\n            })\n\n            // initial content\n            .then(function () {\n                return mock.read(\"hello.txt\");\n            })\n            .then(function (content) {\n                expect(content).toBe(\"Hello, World!\\n\");\n            })\n\n            // move!\n            .then(function () {\n                return mock.move(\"hello.txt\", \"new-hello.txt\");\n            })\n\n            // list after\n            .then(function () {\n                return mock.listTree();\n            })\n            .then(function (list) {\n                expect(list).toEqual([\n                    \".\",\n                    \"new-hello.txt\"\n                ]);\n            })\n\n            // content after\n            .then(function () {\n                return mock.read(\"new-hello.txt\");\n            })\n            .then(function (content) {\n                expect(content).toBe(\"Hello, World!\\n\");\n            })\n\n        });\n    });\n\n    it(\"should not delete a node if the source and target are the same\", function () {\n\n        return FS.mock(FS.join(__dirname, \"fixture\"))\n        .then(function (mock) {\n\n            // initial list\n            return Q.fcall(function () {\n                return mock.listTree()\n            })\n            .then(function (list) {\n                expect(list).toEqual([\n                    \".\",\n                    \"hello.txt\"\n                ]);\n            })\n\n            // initial content\n            .then(function () {\n                return mock.read(\"hello.txt\");\n            })\n            .then(function (content) {\n                expect(content).toBe(\"Hello, World!\\n\");\n            })\n\n            // move!\n            .then(function () {\n                return mock.move(\"hello.txt\", \"hello.txt\");\n            })\n\n            // list after\n            .then(function () {\n                return mock.listTree();\n            })\n            .then(function (list) {\n                expect(list).toEqual([\n                    \".\",\n                    \"hello.txt\"\n                ]);\n            })\n\n            // content after\n            .then(function () {\n                return mock.read(\"hello.txt\");\n            })\n            .then(function (content) {\n                expect(content).toBe(\"Hello, World!\\n\");\n            })\n        });\n\n    });\n\n    it(\"should not delete a node if the source and target refer to the same node\", function () {\n\n        return FS.mock(FS.join(__dirname, \"fixture\"))\n        .then(function (mock) {\n\n            return Q.fcall(function () {\n                return Q.all([\n                    mock.symbolicCopy(\"hello.txt\", \"a.txt\"),\n                    mock.symbolicCopy(\"hello.txt\", \"b.txt\"),\n                ]);\n            })\n\n            // initial list\n            .then(function () {\n                return mock.listTree()\n            })\n            .then(function (list) {\n                expect(list).toEqual([\n                    \".\",\n                    \"a.txt\",\n                    \"b.txt\",\n                    \"hello.txt\"\n                ]);\n            })\n\n            // initial content\n            .then(function () {\n                return mock.read(\"hello.txt\");\n            })\n            .then(function (content) {\n                expect(content).toBe(\"Hello, World!\\n\");\n            })\n\n            // move!\n            .then(function () {\n                return mock.move(\"a.txt\", \"b.txt\");\n            })\n\n            // list after\n            .then(function () {\n                return mock.listTree();\n            })\n            .then(function (list) {\n                expect(list).toEqual([\n                    \".\",\n                    \"a.txt\",\n                    \"b.txt\",\n                    \"hello.txt\"\n                ]);\n            })\n\n            // content after\n            .then(function () {\n                return mock.read(\"hello.txt\");\n            })\n            .then(function (content) {\n                expect(content).toBe(\"Hello, World!\\n\");\n            })\n        });\n\n    });\n\n    it(\"should fail to move over an existing directory\", function () {\n        var mock = Mock({\n            \"hi.txt\": \"Hello, World!\",\n            \"hello\": {}\n        });\n\n        return Q.fcall(function () {\n            return mock.isDirectory(\"/hello\");\n        })\n        .then(function (isDirectory) {\n            expect(isDirectory).toBe(true);\n        })\n\n        .then(function () {\n            return mock.move(\"/hi.txt\", \"/hello\");\n        })\n        .then(function () {\n            throw new Error(\"Move should not succeed.\");\n        }, function (error) {\n        })\n\n    });\n\n    it(\"should fail to move over an existing directory of the same name\", function () {\n        var mock = Mock({\n            \"hello\": {}\n        });\n\n        return Q.fcall(function () {\n            return mock.isDirectory(\"/hello\");\n        })\n        .then(function (isDirectory) {\n            expect(isDirectory).toBe(true);\n        })\n\n        .then(function () {\n            return mock.move(\"/hello\", \"/hello\");\n        })\n        .then(function () {\n            throw new Error(\"Move should not succeed.\");\n        }, function (error) {\n        })\n\n    });\n\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"id":2},"3":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"id":3},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":20}},"id":4},"5":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":32}},"id":5},"6":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":31}},"id":6},"7":{"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":39}},"id":7},"8":{"loc":{"start":{"line":6,"column":11},"end":{"line":6,"column":38}},"id":8},"9":{"loc":{"start":{"line":8,"column":0},"end":{"line":218,"column":3}},"id":9},"10":{"loc":{"start":{"line":8,"column":0},"end":{"line":218,"column":2}},"id":10},"11":{"loc":{"start":{"line":9,"column":4},"end":{"line":58,"column":7}},"id":11},"12":{"loc":{"start":{"line":9,"column":4},"end":{"line":58,"column":6}},"id":12},"13":{"loc":{"start":{"line":11,"column":8},"end":{"line":57,"column":11}},"id":13},"14":{"loc":{"start":{"line":11,"column":15},"end":{"line":57,"column":10}},"id":14},"15":{"loc":{"start":{"line":11,"column":22},"end":{"line":11,"column":53}},"id":15},"16":{"loc":{"start":{"line":11,"column":23},"end":{"line":11,"column":52}},"id":16},"17":{"loc":{"start":{"line":15,"column":12},"end":{"line":57,"column":8}},"id":17},"18":{"loc":{"start":{"line":15,"column":19},"end":{"line":55,"column":14}},"id":18},"19":{"loc":{"start":{"line":50,"column":17},"end":{"line":52,"column":14}},"id":19},"20":{"loc":{"start":{"line":42,"column":17},"end":{"line":47,"column":14}},"id":20},"21":{"loc":{"start":{"line":39,"column":17},"end":{"line":41,"column":14}},"id":21},"22":{"loc":{"start":{"line":34,"column":17},"end":{"line":36,"column":14}},"id":22},"23":{"loc":{"start":{"line":29,"column":17},"end":{"line":31,"column":14}},"id":23},"24":{"loc":{"start":{"line":26,"column":17},"end":{"line":28,"column":14}},"id":24},"25":{"loc":{"start":{"line":18,"column":17},"end":{"line":23,"column":14}},"id":25},"26":{"loc":{"start":{"line":15,"column":26},"end":{"line":17,"column":14}},"id":26},"27":{"loc":{"start":{"line":16,"column":16},"end":{"line":17,"column":12}},"id":27},"28":{"loc":{"start":{"line":16,"column":23},"end":{"line":16,"column":38}},"id":28},"29":{"loc":{"start":{"line":19,"column":16},"end":{"line":22,"column":19}},"id":29},"30":{"loc":{"start":{"line":19,"column":16},"end":{"line":22,"column":18}},"id":30},"31":{"loc":{"start":{"line":19,"column":22},"end":{"line":19,"column":28}},"id":31},"32":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":46}},"id":32},"33":{"loc":{"start":{"line":27,"column":23},"end":{"line":27,"column":45}},"id":33},"34":{"loc":{"start":{"line":30,"column":16},"end":{"line":30,"column":56}},"id":34},"35":{"loc":{"start":{"line":30,"column":16},"end":{"line":30,"column":55}},"id":35},"36":{"loc":{"start":{"line":30,"column":22},"end":{"line":30,"column":31}},"id":36},"37":{"loc":{"start":{"line":35,"column":16},"end":{"line":35,"column":63}},"id":37},"38":{"loc":{"start":{"line":35,"column":23},"end":{"line":35,"column":62}},"id":38},"39":{"loc":{"start":{"line":40,"column":16},"end":{"line":40,"column":39}},"id":39},"40":{"loc":{"start":{"line":40,"column":23},"end":{"line":40,"column":38}},"id":40},"41":{"loc":{"start":{"line":43,"column":16},"end":{"line":46,"column":19}},"id":41},"42":{"loc":{"start":{"line":43,"column":16},"end":{"line":46,"column":18}},"id":42},"43":{"loc":{"start":{"line":43,"column":22},"end":{"line":43,"column":28}},"id":43},"44":{"loc":{"start":{"line":51,"column":16},"end":{"line":51,"column":50}},"id":44},"45":{"loc":{"start":{"line":51,"column":23},"end":{"line":51,"column":49}},"id":45},"46":{"loc":{"start":{"line":54,"column":16},"end":{"line":54,"column":56}},"id":46},"47":{"loc":{"start":{"line":54,"column":16},"end":{"line":54,"column":55}},"id":47},"48":{"loc":{"start":{"line":54,"column":22},"end":{"line":54,"column":31}},"id":48},"49":{"loc":{"start":{"line":60,"column":4},"end":{"line":109,"column":7}},"id":49},"50":{"loc":{"start":{"line":60,"column":4},"end":{"line":109,"column":6}},"id":50},"51":{"loc":{"start":{"line":62,"column":8},"end":{"line":107,"column":11}},"id":51},"52":{"loc":{"start":{"line":62,"column":15},"end":{"line":107,"column":10}},"id":52},"53":{"loc":{"start":{"line":62,"column":22},"end":{"line":62,"column":53}},"id":53},"54":{"loc":{"start":{"line":62,"column":23},"end":{"line":62,"column":52}},"id":54},"55":{"loc":{"start":{"line":66,"column":12},"end":{"line":107,"column":8}},"id":55},"56":{"loc":{"start":{"line":66,"column":19},"end":{"line":106,"column":14}},"id":56},"57":{"loc":{"start":{"line":101,"column":17},"end":{"line":103,"column":14}},"id":57},"58":{"loc":{"start":{"line":93,"column":17},"end":{"line":98,"column":14}},"id":58},"59":{"loc":{"start":{"line":90,"column":17},"end":{"line":92,"column":14}},"id":59},"60":{"loc":{"start":{"line":85,"column":17},"end":{"line":87,"column":14}},"id":60},"61":{"loc":{"start":{"line":80,"column":17},"end":{"line":82,"column":14}},"id":61},"62":{"loc":{"start":{"line":77,"column":17},"end":{"line":79,"column":14}},"id":62},"63":{"loc":{"start":{"line":69,"column":17},"end":{"line":74,"column":14}},"id":63},"64":{"loc":{"start":{"line":66,"column":26},"end":{"line":68,"column":14}},"id":64},"65":{"loc":{"start":{"line":67,"column":16},"end":{"line":68,"column":12}},"id":65},"66":{"loc":{"start":{"line":67,"column":23},"end":{"line":67,"column":38}},"id":66},"67":{"loc":{"start":{"line":70,"column":16},"end":{"line":73,"column":19}},"id":67},"68":{"loc":{"start":{"line":70,"column":16},"end":{"line":73,"column":18}},"id":68},"69":{"loc":{"start":{"line":70,"column":22},"end":{"line":70,"column":28}},"id":69},"70":{"loc":{"start":{"line":78,"column":16},"end":{"line":78,"column":46}},"id":70},"71":{"loc":{"start":{"line":78,"column":23},"end":{"line":78,"column":45}},"id":71},"72":{"loc":{"start":{"line":81,"column":16},"end":{"line":81,"column":56}},"id":72},"73":{"loc":{"start":{"line":81,"column":16},"end":{"line":81,"column":55}},"id":73},"74":{"loc":{"start":{"line":81,"column":22},"end":{"line":81,"column":31}},"id":74},"75":{"loc":{"start":{"line":86,"column":16},"end":{"line":86,"column":59}},"id":75},"76":{"loc":{"start":{"line":86,"column":23},"end":{"line":86,"column":58}},"id":76},"77":{"loc":{"start":{"line":91,"column":16},"end":{"line":91,"column":39}},"id":77},"78":{"loc":{"start":{"line":91,"column":23},"end":{"line":91,"column":38}},"id":78},"79":{"loc":{"start":{"line":94,"column":16},"end":{"line":97,"column":19}},"id":79},"80":{"loc":{"start":{"line":94,"column":16},"end":{"line":97,"column":18}},"id":80},"81":{"loc":{"start":{"line":94,"column":22},"end":{"line":94,"column":28}},"id":81},"82":{"loc":{"start":{"line":102,"column":16},"end":{"line":102,"column":46}},"id":82},"83":{"loc":{"start":{"line":102,"column":23},"end":{"line":102,"column":45}},"id":83},"84":{"loc":{"start":{"line":105,"column":16},"end":{"line":105,"column":56}},"id":84},"85":{"loc":{"start":{"line":105,"column":16},"end":{"line":105,"column":55}},"id":85},"86":{"loc":{"start":{"line":105,"column":22},"end":{"line":105,"column":31}},"id":86},"87":{"loc":{"start":{"line":111,"column":4},"end":{"line":171,"column":7}},"id":87},"88":{"loc":{"start":{"line":111,"column":4},"end":{"line":171,"column":6}},"id":88},"89":{"loc":{"start":{"line":113,"column":8},"end":{"line":169,"column":11}},"id":89},"90":{"loc":{"start":{"line":113,"column":15},"end":{"line":169,"column":10}},"id":90},"91":{"loc":{"start":{"line":113,"column":22},"end":{"line":113,"column":53}},"id":91},"92":{"loc":{"start":{"line":113,"column":23},"end":{"line":113,"column":52}},"id":92},"93":{"loc":{"start":{"line":116,"column":12},"end":{"line":169,"column":8}},"id":93},"94":{"loc":{"start":{"line":116,"column":19},"end":{"line":168,"column":14}},"id":94},"95":{"loc":{"start":{"line":163,"column":17},"end":{"line":165,"column":14}},"id":95},"96":{"loc":{"start":{"line":153,"column":17},"end":{"line":160,"column":14}},"id":96},"97":{"loc":{"start":{"line":150,"column":17},"end":{"line":152,"column":14}},"id":97},"98":{"loc":{"start":{"line":145,"column":17},"end":{"line":147,"column":14}},"id":98},"99":{"loc":{"start":{"line":140,"column":17},"end":{"line":142,"column":14}},"id":99},"100":{"loc":{"start":{"line":137,"column":17},"end":{"line":139,"column":14}},"id":100},"101":{"loc":{"start":{"line":127,"column":17},"end":{"line":134,"column":14}},"id":101},"102":{"loc":{"start":{"line":124,"column":17},"end":{"line":126,"column":14}},"id":102},"103":{"loc":{"start":{"line":116,"column":26},"end":{"line":121,"column":14}},"id":103},"104":{"loc":{"start":{"line":117,"column":16},"end":{"line":120,"column":19}},"id":104},"105":{"loc":{"start":{"line":117,"column":23},"end":{"line":120,"column":18}},"id":105},"106":{"loc":{"start":{"line":118,"column":20},"end":{"line":118,"column":59}},"id":106},"107":{"loc":{"start":{"line":119,"column":20},"end":{"line":119,"column":59}},"id":107},"108":{"loc":{"start":{"line":125,"column":16},"end":{"line":126,"column":12}},"id":108},"109":{"loc":{"start":{"line":125,"column":23},"end":{"line":125,"column":38}},"id":109},"110":{"loc":{"start":{"line":128,"column":16},"end":{"line":133,"column":19}},"id":110},"111":{"loc":{"start":{"line":128,"column":16},"end":{"line":133,"column":18}},"id":111},"112":{"loc":{"start":{"line":128,"column":22},"end":{"line":128,"column":28}},"id":112},"113":{"loc":{"start":{"line":138,"column":16},"end":{"line":138,"column":46}},"id":113},"114":{"loc":{"start":{"line":138,"column":23},"end":{"line":138,"column":45}},"id":114},"115":{"loc":{"start":{"line":141,"column":16},"end":{"line":141,"column":56}},"id":115},"116":{"loc":{"start":{"line":141,"column":16},"end":{"line":141,"column":55}},"id":116},"117":{"loc":{"start":{"line":141,"column":22},"end":{"line":141,"column":31}},"id":117},"118":{"loc":{"start":{"line":146,"column":16},"end":{"line":146,"column":51}},"id":118},"119":{"loc":{"start":{"line":146,"column":23},"end":{"line":146,"column":50}},"id":119},"120":{"loc":{"start":{"line":151,"column":16},"end":{"line":151,"column":39}},"id":120},"121":{"loc":{"start":{"line":151,"column":23},"end":{"line":151,"column":38}},"id":121},"122":{"loc":{"start":{"line":154,"column":16},"end":{"line":159,"column":19}},"id":122},"123":{"loc":{"start":{"line":154,"column":16},"end":{"line":159,"column":18}},"id":123},"124":{"loc":{"start":{"line":154,"column":22},"end":{"line":154,"column":28}},"id":124},"125":{"loc":{"start":{"line":164,"column":16},"end":{"line":164,"column":46}},"id":125},"126":{"loc":{"start":{"line":164,"column":23},"end":{"line":164,"column":45}},"id":126},"127":{"loc":{"start":{"line":167,"column":16},"end":{"line":167,"column":56}},"id":127},"128":{"loc":{"start":{"line":167,"column":16},"end":{"line":167,"column":55}},"id":128},"129":{"loc":{"start":{"line":167,"column":22},"end":{"line":167,"column":31}},"id":129},"130":{"loc":{"start":{"line":173,"column":4},"end":{"line":194,"column":7}},"id":130},"131":{"loc":{"start":{"line":173,"column":4},"end":{"line":194,"column":6}},"id":131},"132":{"loc":{"start":{"line":174,"column":8},"end":{"line":177,"column":11}},"id":132},"133":{"loc":{"start":{"line":174,"column":19},"end":{"line":177,"column":10}},"id":133},"134":{"loc":{"start":{"line":179,"column":8},"end":{"line":194,"column":4}},"id":134},"135":{"loc":{"start":{"line":179,"column":15},"end":{"line":192,"column":10}},"id":135},"136":{"loc":{"start":{"line":186,"column":13},"end":{"line":188,"column":10}},"id":136},"137":{"loc":{"start":{"line":182,"column":13},"end":{"line":184,"column":10}},"id":137},"138":{"loc":{"start":{"line":179,"column":22},"end":{"line":181,"column":10}},"id":138},"139":{"loc":{"start":{"line":180,"column":12},"end":{"line":180,"column":46}},"id":139},"140":{"loc":{"start":{"line":180,"column":19},"end":{"line":180,"column":45}},"id":140},"141":{"loc":{"start":{"line":183,"column":12},"end":{"line":183,"column":43}},"id":141},"142":{"loc":{"start":{"line":183,"column":12},"end":{"line":183,"column":42}},"id":142},"143":{"loc":{"start":{"line":183,"column":18},"end":{"line":183,"column":31}},"id":143},"144":{"loc":{"start":{"line":187,"column":12},"end":{"line":187,"column":50}},"id":144},"145":{"loc":{"start":{"line":187,"column":19},"end":{"line":187,"column":49}},"id":145},"146":{"loc":{"start":{"line":190,"column":12},"end":{"line":190,"column":56}},"id":146},"147":{"loc":{"start":{"line":196,"column":4},"end":{"line":216,"column":7}},"id":147},"148":{"loc":{"start":{"line":196,"column":4},"end":{"line":216,"column":6}},"id":148},"149":{"loc":{"start":{"line":197,"column":8},"end":{"line":199,"column":11}},"id":149},"150":{"loc":{"start":{"line":197,"column":19},"end":{"line":199,"column":10}},"id":150},"151":{"loc":{"start":{"line":201,"column":8},"end":{"line":216,"column":4}},"id":151},"152":{"loc":{"start":{"line":201,"column":15},"end":{"line":214,"column":10}},"id":152},"153":{"loc":{"start":{"line":208,"column":13},"end":{"line":210,"column":10}},"id":153},"154":{"loc":{"start":{"line":204,"column":13},"end":{"line":206,"column":10}},"id":154},"155":{"loc":{"start":{"line":201,"column":22},"end":{"line":203,"column":10}},"id":155},"156":{"loc":{"start":{"line":202,"column":12},"end":{"line":202,"column":46}},"id":156},"157":{"loc":{"start":{"line":202,"column":19},"end":{"line":202,"column":45}},"id":157},"158":{"loc":{"start":{"line":205,"column":12},"end":{"line":205,"column":43}},"id":158},"159":{"loc":{"start":{"line":205,"column":12},"end":{"line":205,"column":42}},"id":159},"160":{"loc":{"start":{"line":205,"column":18},"end":{"line":205,"column":31}},"id":160},"161":{"loc":{"start":{"line":209,"column":12},"end":{"line":209,"column":49}},"id":161},"162":{"loc":{"start":{"line":209,"column":19},"end":{"line":209,"column":48}},"id":162},"163":{"loc":{"start":{"line":212,"column":12},"end":{"line":212,"column":56}},"id":163}}}},"/Users/kris/q-io/spec/fs/mock/object-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1}},"hash":"6ff4b49e7a83c9d339b5a47180f84047","instrumentor":{"blockCounter":3,"nodeCounter":24,"source":"\"use strict\";\n\nrequire(\"../../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar FS = require(\"../../../fs\");\n\ndescribe(\"toObject\", function () {\n    it(\"should take a snapshot of a tree\", function () {\n\n        return FS.mock(FS.join(__dirname, \"fixture\"))\n        .invoke(\"toObject\")\n        .then(function (tree) {\n\n            expect(tree[\"hello.txt\"].toString(\"utf-8\")).toEqual(\"Hello, World!\\n\");\n            expect(Object.keys(tree)).toEqual([\"hello.txt\"]);\n\n        });\n    });\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"id":2},"3":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"id":3},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":20}},"id":4},"5":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":32}},"id":5},"6":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":31}},"id":6},"7":{"loc":{"start":{"line":7,"column":0},"end":{"line":19,"column":3}},"id":7},"8":{"loc":{"start":{"line":7,"column":0},"end":{"line":19,"column":2}},"id":8},"9":{"loc":{"start":{"line":8,"column":4},"end":{"line":18,"column":7}},"id":9},"10":{"loc":{"start":{"line":8,"column":4},"end":{"line":18,"column":6}},"id":10},"11":{"loc":{"start":{"line":10,"column":8},"end":{"line":17,"column":11}},"id":11},"12":{"loc":{"start":{"line":10,"column":15},"end":{"line":17,"column":10}},"id":12},"13":{"loc":{"start":{"line":11,"column":15},"end":{"line":11,"column":27}},"id":13},"14":{"loc":{"start":{"line":10,"column":22},"end":{"line":10,"column":53}},"id":14},"15":{"loc":{"start":{"line":10,"column":23},"end":{"line":10,"column":52}},"id":15},"16":{"loc":{"start":{"line":14,"column":12},"end":{"line":14,"column":83}},"id":16},"17":{"loc":{"start":{"line":14,"column":12},"end":{"line":14,"column":82}},"id":17},"18":{"loc":{"start":{"line":14,"column":18},"end":{"line":14,"column":55}},"id":18},"19":{"loc":{"start":{"line":14,"column":19},"end":{"line":14,"column":54}},"id":19},"20":{"loc":{"start":{"line":15,"column":12},"end":{"line":15,"column":61}},"id":20},"21":{"loc":{"start":{"line":15,"column":12},"end":{"line":15,"column":60}},"id":21},"22":{"loc":{"start":{"line":15,"column":18},"end":{"line":15,"column":37}},"id":22},"23":{"loc":{"start":{"line":15,"column":19},"end":{"line":15,"column":36}},"id":23}}}},"/Users/kris/q-io/spec/fs/mock/range-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1}},"hash":"a53e87155446bc253642a4ff9ea35692","instrumentor":{"blockCounter":4,"nodeCounter":23,"source":"\"use strict\";\n\nrequire(\"../../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar FS = require(\"../../../fs\");\nvar Mock = require(\"../../../fs-mock\");\n\ndescribe(\"open range\", function () {\n    it(\"read a partial range of a file\", function () {\n\n        return FS.mock(FS.join(__dirname, \"fixture\"))\n        .then(function (mock) {\n\n            return mock.read(\"hello.txt\", {\n                begin: 1,\n                end: 3\n            })\n            .then(function (content) {\n                expect(content).toBe(\"el\");\n            })\n\n        });\n\n    });\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"id":2},"3":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"id":3},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":20}},"id":4},"5":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":32}},"id":5},"6":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":31}},"id":6},"7":{"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":39}},"id":7},"8":{"loc":{"start":{"line":6,"column":11},"end":{"line":6,"column":38}},"id":8},"9":{"loc":{"start":{"line":8,"column":0},"end":{"line":25,"column":3}},"id":9},"10":{"loc":{"start":{"line":8,"column":0},"end":{"line":25,"column":2}},"id":10},"11":{"loc":{"start":{"line":9,"column":4},"end":{"line":24,"column":7}},"id":11},"12":{"loc":{"start":{"line":9,"column":4},"end":{"line":24,"column":6}},"id":12},"13":{"loc":{"start":{"line":11,"column":8},"end":{"line":22,"column":11}},"id":13},"14":{"loc":{"start":{"line":11,"column":15},"end":{"line":22,"column":10}},"id":14},"15":{"loc":{"start":{"line":11,"column":22},"end":{"line":11,"column":53}},"id":15},"16":{"loc":{"start":{"line":11,"column":23},"end":{"line":11,"column":52}},"id":16},"17":{"loc":{"start":{"line":14,"column":12},"end":{"line":22,"column":8}},"id":17},"18":{"loc":{"start":{"line":14,"column":19},"end":{"line":20,"column":14}},"id":18},"19":{"loc":{"start":{"line":14,"column":28},"end":{"line":17,"column":14}},"id":19},"20":{"loc":{"start":{"line":19,"column":16},"end":{"line":19,"column":43}},"id":20},"21":{"loc":{"start":{"line":19,"column":16},"end":{"line":19,"column":42}},"id":21},"22":{"loc":{"start":{"line":19,"column":22},"end":{"line":19,"column":31}},"id":22}}}},"/Users/kris/q-io/spec/fs/mock/read-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"37":{"index":37,"count":1},"38":{"index":38,"count":1},"39":{"index":39,"count":1},"40":{"index":40,"count":1},"41":{"index":41,"count":1},"42":{"index":42,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1}},"hash":"838f3490148f610ae66aecd3755d1b3e","instrumentor":{"blockCounter":10,"nodeCounter":43,"source":"\"use strict\";\n\nrequire(\"../../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar FS = require(\"../../../fs\");\n/*global describe,it,expect */\n\ndescribe(\"read\", function () {\n    it(\"should read a file from a mock filesystem\", function () {\n\n        return FS.mock(FS.join(__dirname, \"fixture\"))\n        .then(function (mock) {\n\n            return Q.fcall(function () {\n                return mock.read(\"hello.txt\");\n            })\n            .then(function (content) {\n                expect(content).toBe(\"Hello, World!\\n\");\n            })\n\n        });\n    });\n\n    it(\"calls open correctly\", function () {\n        return FS.mock(FS.join(__dirname, \"fixture\"))\n        .then(function (mock) {\n            mock.open = function (path, options) {\n                expect(path).toBe(\"hello.txt\");\n                expect(options.flags).toBe(\"ra\");\n                expect(options.charset).toBe(\"utf8\");\n\n                return Q.resolve({read: function () {}, close: function () {}});\n            };\n\n            return mock.read(\"hello.txt\", \"a\", \"utf8\");\n        });\n    });\n\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"id":2},"3":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"id":3},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":20}},"id":4},"5":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":32}},"id":5},"6":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":31}},"id":6},"7":{"loc":{"start":{"line":8,"column":0},"end":{"line":39,"column":3}},"id":7},"8":{"loc":{"start":{"line":8,"column":0},"end":{"line":39,"column":2}},"id":8},"9":{"loc":{"start":{"line":9,"column":4},"end":{"line":22,"column":7}},"id":9},"10":{"loc":{"start":{"line":9,"column":4},"end":{"line":22,"column":6}},"id":10},"11":{"loc":{"start":{"line":11,"column":8},"end":{"line":21,"column":11}},"id":11},"12":{"loc":{"start":{"line":11,"column":15},"end":{"line":21,"column":10}},"id":12},"13":{"loc":{"start":{"line":11,"column":22},"end":{"line":11,"column":53}},"id":13},"14":{"loc":{"start":{"line":11,"column":23},"end":{"line":11,"column":52}},"id":14},"15":{"loc":{"start":{"line":14,"column":12},"end":{"line":21,"column":8}},"id":15},"16":{"loc":{"start":{"line":14,"column":19},"end":{"line":19,"column":14}},"id":16},"17":{"loc":{"start":{"line":14,"column":26},"end":{"line":16,"column":14}},"id":17},"18":{"loc":{"start":{"line":15,"column":16},"end":{"line":15,"column":46}},"id":18},"19":{"loc":{"start":{"line":15,"column":23},"end":{"line":15,"column":45}},"id":19},"20":{"loc":{"start":{"line":18,"column":16},"end":{"line":18,"column":56}},"id":20},"21":{"loc":{"start":{"line":18,"column":16},"end":{"line":18,"column":55}},"id":21},"22":{"loc":{"start":{"line":18,"column":22},"end":{"line":18,"column":31}},"id":22},"23":{"loc":{"start":{"line":24,"column":4},"end":{"line":37,"column":7}},"id":23},"24":{"loc":{"start":{"line":24,"column":4},"end":{"line":37,"column":6}},"id":24},"25":{"loc":{"start":{"line":25,"column":8},"end":{"line":36,"column":11}},"id":25},"26":{"loc":{"start":{"line":25,"column":15},"end":{"line":36,"column":10}},"id":26},"27":{"loc":{"start":{"line":25,"column":22},"end":{"line":25,"column":53}},"id":27},"28":{"loc":{"start":{"line":25,"column":23},"end":{"line":25,"column":52}},"id":28},"29":{"loc":{"start":{"line":27,"column":12},"end":{"line":33,"column":14}},"id":29},"30":{"loc":{"start":{"line":28,"column":16},"end":{"line":28,"column":47}},"id":30},"31":{"loc":{"start":{"line":28,"column":16},"end":{"line":28,"column":46}},"id":31},"32":{"loc":{"start":{"line":28,"column":22},"end":{"line":28,"column":28}},"id":32},"33":{"loc":{"start":{"line":29,"column":16},"end":{"line":29,"column":49}},"id":33},"34":{"loc":{"start":{"line":29,"column":16},"end":{"line":29,"column":48}},"id":34},"35":{"loc":{"start":{"line":29,"column":22},"end":{"line":29,"column":37}},"id":35},"36":{"loc":{"start":{"line":30,"column":16},"end":{"line":30,"column":53}},"id":36},"37":{"loc":{"start":{"line":30,"column":16},"end":{"line":30,"column":52}},"id":37},"38":{"loc":{"start":{"line":30,"column":22},"end":{"line":30,"column":39}},"id":38},"39":{"loc":{"start":{"line":32,"column":16},"end":{"line":32,"column":80}},"id":39},"40":{"loc":{"start":{"line":32,"column":23},"end":{"line":32,"column":79}},"id":40},"41":{"loc":{"start":{"line":35,"column":12},"end":{"line":35,"column":55}},"id":41},"42":{"loc":{"start":{"line":35,"column":19},"end":{"line":35,"column":54}},"id":42}}}},"/Users/kris/q-io/spec/fs/mock/remove-directory-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1}},"hash":"b3f3583fd1eeaaa5ef565a73c2f2a26e","instrumentor":{"blockCounter":8,"nodeCounter":33,"source":"\"use strict\";\n\nrequire(\"../../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar FS = require(\"../../../fs\");\n\ndescribe(\"removeDirectory\", function () {\n    it(\"should remove a directory\", function () {\n\n        return FS.mock(FS.join(__dirname))\n        .then(function (mock) {\n\n            // now you see it\n            return Q.fcall(function () {\n                return mock.isDirectory(\"fixture\");\n            })\n            .then(function (isDirectory) {\n                expect(isDirectory).toBe(true);\n            })\n\n            .then(function () {\n                return mock.removeDirectory(\"fixture\");\n            })\n\n            // now you don't\n            .then(function () {\n                return mock.isDirectory(\"fixture\");\n            })\n            .then(function (isDirectory) {\n                expect(isDirectory).toBe(false);\n            })\n\n        });\n\n    });\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"id":2},"3":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"id":3},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":20}},"id":4},"5":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":32}},"id":5},"6":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":31}},"id":6},"7":{"loc":{"start":{"line":7,"column":0},"end":{"line":36,"column":3}},"id":7},"8":{"loc":{"start":{"line":7,"column":0},"end":{"line":36,"column":2}},"id":8},"9":{"loc":{"start":{"line":8,"column":4},"end":{"line":35,"column":7}},"id":9},"10":{"loc":{"start":{"line":8,"column":4},"end":{"line":35,"column":6}},"id":10},"11":{"loc":{"start":{"line":10,"column":8},"end":{"line":33,"column":11}},"id":11},"12":{"loc":{"start":{"line":10,"column":15},"end":{"line":33,"column":10}},"id":12},"13":{"loc":{"start":{"line":10,"column":22},"end":{"line":10,"column":42}},"id":13},"14":{"loc":{"start":{"line":10,"column":23},"end":{"line":10,"column":41}},"id":14},"15":{"loc":{"start":{"line":14,"column":12},"end":{"line":33,"column":8}},"id":15},"16":{"loc":{"start":{"line":14,"column":19},"end":{"line":31,"column":14}},"id":16},"17":{"loc":{"start":{"line":26,"column":17},"end":{"line":28,"column":14}},"id":17},"18":{"loc":{"start":{"line":21,"column":17},"end":{"line":23,"column":14}},"id":18},"19":{"loc":{"start":{"line":17,"column":17},"end":{"line":19,"column":14}},"id":19},"20":{"loc":{"start":{"line":14,"column":26},"end":{"line":16,"column":14}},"id":20},"21":{"loc":{"start":{"line":15,"column":16},"end":{"line":15,"column":51}},"id":21},"22":{"loc":{"start":{"line":15,"column":23},"end":{"line":15,"column":50}},"id":22},"23":{"loc":{"start":{"line":18,"column":16},"end":{"line":18,"column":47}},"id":23},"24":{"loc":{"start":{"line":18,"column":16},"end":{"line":18,"column":46}},"id":24},"25":{"loc":{"start":{"line":18,"column":22},"end":{"line":18,"column":35}},"id":25},"26":{"loc":{"start":{"line":22,"column":16},"end":{"line":22,"column":55}},"id":26},"27":{"loc":{"start":{"line":22,"column":23},"end":{"line":22,"column":54}},"id":27},"28":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":51}},"id":28},"29":{"loc":{"start":{"line":27,"column":23},"end":{"line":27,"column":50}},"id":29},"30":{"loc":{"start":{"line":30,"column":16},"end":{"line":30,"column":48}},"id":30},"31":{"loc":{"start":{"line":30,"column":16},"end":{"line":30,"column":47}},"id":31},"32":{"loc":{"start":{"line":30,"column":22},"end":{"line":30,"column":35}},"id":32}}}},"/Users/kris/q-io/spec/fs/mock/remove-tree-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1}},"hash":"c9a2ac2b44830af6b1b22a1e1c617e08","instrumentor":{"blockCounter":5,"nodeCounter":28,"source":"\"use strict\";\n\nrequire(\"../../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar FS = require(\"../../../fs\");\nvar Mock = require(\"../../../fs-mock\");\nvar normalize = FS.normal;\n\ndescribe(\"removeTree\", function () {\n    it(\"should remove a tree\", function () {\n\n        var mock = Mock({\n            \"a/b\": {\n                \"c\": {\n                    \"d\": 66,\n                    \"e\": 99\n                }\n            }\n        });\n\n        return Q.fcall(function () {\n            return mock.removeTree(\"a/b/c\");\n        })\n\n        .then(function () {\n            return mock.listTree();\n        })\n        .then(function (list) {\n            expect(list).toEqual([\n                \".\",\n                \"a\",\n                normalize(\"a/b\")\n            ]);\n        })\n\n    });\n\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"id":2},"3":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"id":3},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":20}},"id":4},"5":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":32}},"id":5},"6":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":31}},"id":6},"7":{"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":39}},"id":7},"8":{"loc":{"start":{"line":6,"column":11},"end":{"line":6,"column":38}},"id":8},"9":{"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":26}},"id":9},"10":{"loc":{"start":{"line":9,"column":0},"end":{"line":38,"column":3}},"id":10},"11":{"loc":{"start":{"line":9,"column":0},"end":{"line":38,"column":2}},"id":11},"12":{"loc":{"start":{"line":10,"column":4},"end":{"line":36,"column":7}},"id":12},"13":{"loc":{"start":{"line":10,"column":4},"end":{"line":36,"column":6}},"id":13},"14":{"loc":{"start":{"line":12,"column":8},"end":{"line":19,"column":11}},"id":14},"15":{"loc":{"start":{"line":12,"column":19},"end":{"line":19,"column":10}},"id":15},"16":{"loc":{"start":{"line":21,"column":8},"end":{"line":36,"column":4}},"id":16},"17":{"loc":{"start":{"line":21,"column":15},"end":{"line":34,"column":10}},"id":17},"18":{"loc":{"start":{"line":25,"column":13},"end":{"line":27,"column":10}},"id":18},"19":{"loc":{"start":{"line":21,"column":22},"end":{"line":23,"column":10}},"id":19},"20":{"loc":{"start":{"line":22,"column":12},"end":{"line":22,"column":44}},"id":20},"21":{"loc":{"start":{"line":22,"column":19},"end":{"line":22,"column":43}},"id":21},"22":{"loc":{"start":{"line":26,"column":12},"end":{"line":26,"column":35}},"id":22},"23":{"loc":{"start":{"line":26,"column":19},"end":{"line":26,"column":34}},"id":23},"24":{"loc":{"start":{"line":29,"column":12},"end":{"line":33,"column":15}},"id":24},"25":{"loc":{"start":{"line":29,"column":12},"end":{"line":33,"column":14}},"id":25},"26":{"loc":{"start":{"line":29,"column":18},"end":{"line":29,"column":24}},"id":26},"27":{"loc":{"start":{"line":32,"column":16},"end":{"line":32,"column":32}},"id":27}}}},"/Users/kris/q-io/spec/fs/mock/root-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1}},"hash":"eea3a69862bc928fb03397376a95f540","instrumentor":{"blockCounter":3,"nodeCounter":25,"source":"\"use strict\";\n\nrequire(\"../../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar FS = require(\"../../../fs\");\nvar Mock = require(\"../../../fs-mock\");\nvar Root = require(\"../../../fs-root\");\n\ndescribe(\"root\", function () {\n    it(\"should make a filesystem from a subtree of a mock filesystem\", function () {\n\n        var mock = Mock({\n            \"a/b/1\": 10,\n            \"a/b/2\": 20,\n            \"a/b/3\": 30\n        });\n\n        var chroot = Root(mock, \"a/b\");\n\n        return chroot.invoke(\"listTree\")\n        .then(function (list) {\n            expect(list).toEqual([\n                \".\",\n                \"1\",\n                \"2\",\n                \"3\"\n            ]);\n        });\n\n    });\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"id":2},"3":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"id":3},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":20}},"id":4},"5":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":32}},"id":5},"6":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":31}},"id":6},"7":{"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":39}},"id":7},"8":{"loc":{"start":{"line":6,"column":11},"end":{"line":6,"column":38}},"id":8},"9":{"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":39}},"id":9},"10":{"loc":{"start":{"line":7,"column":11},"end":{"line":7,"column":38}},"id":10},"11":{"loc":{"start":{"line":9,"column":0},"end":{"line":31,"column":3}},"id":11},"12":{"loc":{"start":{"line":9,"column":0},"end":{"line":31,"column":2}},"id":12},"13":{"loc":{"start":{"line":10,"column":4},"end":{"line":30,"column":7}},"id":13},"14":{"loc":{"start":{"line":10,"column":4},"end":{"line":30,"column":6}},"id":14},"15":{"loc":{"start":{"line":12,"column":8},"end":{"line":16,"column":11}},"id":15},"16":{"loc":{"start":{"line":12,"column":19},"end":{"line":16,"column":10}},"id":16},"17":{"loc":{"start":{"line":18,"column":8},"end":{"line":18,"column":39}},"id":17},"18":{"loc":{"start":{"line":18,"column":21},"end":{"line":18,"column":38}},"id":18},"19":{"loc":{"start":{"line":20,"column":8},"end":{"line":28,"column":11}},"id":19},"20":{"loc":{"start":{"line":20,"column":15},"end":{"line":28,"column":10}},"id":20},"21":{"loc":{"start":{"line":20,"column":28},"end":{"line":20,"column":40}},"id":21},"22":{"loc":{"start":{"line":22,"column":12},"end":{"line":27,"column":15}},"id":22},"23":{"loc":{"start":{"line":22,"column":12},"end":{"line":27,"column":14}},"id":23},"24":{"loc":{"start":{"line":22,"column":18},"end":{"line":22,"column":24}},"id":24}}}},"/Users/kris/q-io/spec/fs/mock/symbolic-link-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"37":{"index":37,"count":1},"38":{"index":38,"count":1},"39":{"index":39,"count":1},"40":{"index":40,"count":1},"41":{"index":41,"count":1},"42":{"index":42,"count":1},"43":{"index":43,"count":1},"44":{"index":44,"count":1},"45":{"index":45,"count":1},"46":{"index":46,"count":1},"47":{"index":47,"count":1},"48":{"index":48,"count":1},"49":{"index":49,"count":1},"50":{"index":50,"count":1},"51":{"index":51,"count":1},"52":{"index":52,"count":1},"53":{"index":53,"count":1},"54":{"index":54,"count":1},"55":{"index":55,"count":1},"56":{"index":56,"count":1},"57":{"index":57,"count":1},"58":{"index":58,"count":1},"59":{"index":59,"count":1},"60":{"index":60,"count":1},"61":{"index":61,"count":1},"62":{"index":62,"count":1},"63":{"index":63,"count":1},"64":{"index":64,"count":1},"65":{"index":65,"count":1},"66":{"index":66,"count":1},"67":{"index":67,"count":1},"68":{"index":68,"count":1},"69":{"index":69,"count":1},"70":{"index":70,"count":1},"71":{"index":71,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1}},"hash":"841d1c9c0650fcd6e35d3f7ccda562a1","instrumentor":{"blockCounter":18,"nodeCounter":72,"source":"require(\"../../lib/jasmine-promise\");\nvar MockFs = require(\"../../../fs-mock\");\nvar normalize = require('../../../fs').normal;\n\ndescribe(\"symbolic link\", function () {\n    it(\"should\", function () {\n        var mock = MockFs();\n\n        // make some content\n        return mock.makeTree(\"a/b\")\n        .then(function () {\n            return mock.write(\"a/b/c.txt\", \"Hello, World!\")\n        })\n\n        // verify content\n        .then(function () {\n            return mock.read(\"a/b/c.txt\")\n        })\n        .then(function (content) {\n            expect(content).toBe(\"Hello, World!\");\n        })\n\n        // link it\n        .then(function () {\n            return mock.symbolicCopy(\"/a/b/c.txt\", \"a/b/d.txt\", \"file\")\n        })\n\n        // should have a link\n        .then(function () {\n            return mock.readLink(\"a/b/d.txt\")\n        })\n        .then(function (link) {\n            expect(link).toBe(\"c.txt\");\n        })\n\n        // should have a canonical path\n        .then(function () {\n            return mock.canonical(\"a/b/d.txt\")\n        })\n        .then(function (canonical) {\n            expect(canonical).toBe(\"/a/b/c.txt\");\n        })\n\n        // should be listed\n        .then(function () {\n            return mock.listTree()\n        })\n        .then(function (content) {\n            expect(content).toEqual([\n                \".\",\n                \"a\",\n                normalize(\"a/b\"),\n                normalize(\"a/b/c.txt\"),\n                normalize(\"a/b/d.txt\")\n            ])\n        })\n\n        // should be non-destructive\n        .then(function () {\n            return mock.read(\"a/b/c.txt\")\n        })\n        .then(function (content) {\n            expect(content).toBe(\"Hello, World!\");\n        })\n\n        // should be identified as a file\n        .then(function () {\n            return mock.isSymbolicLink(\"a/b/d.txt\");\n        })\n        .then(function (isSymbolicLink) {\n            expect(isSymbolicLink).toBe(true);\n        })\n\n        // should have the same content\n        .then(function () {\n            return mock.read(\"a/b/d.txt\");\n        })\n        .then(function (content) {\n            expect(content).toBe(\"Hello, World!\");\n        });\n\n    });\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":37}},"id":0},"1":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":36}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":41}},"id":2},"3":{"loc":{"start":{"line":2,"column":13},"end":{"line":2,"column":40}},"id":3},"4":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":46}},"id":4},"5":{"loc":{"start":{"line":3,"column":23},"end":{"line":3,"column":38}},"id":5},"6":{"loc":{"start":{"line":5,"column":0},"end":{"line":83,"column":3}},"id":6},"7":{"loc":{"start":{"line":5,"column":0},"end":{"line":83,"column":2}},"id":7},"8":{"loc":{"start":{"line":6,"column":4},"end":{"line":82,"column":7}},"id":8},"9":{"loc":{"start":{"line":6,"column":4},"end":{"line":82,"column":6}},"id":9},"10":{"loc":{"start":{"line":7,"column":8},"end":{"line":7,"column":28}},"id":10},"11":{"loc":{"start":{"line":7,"column":19},"end":{"line":7,"column":27}},"id":11},"12":{"loc":{"start":{"line":10,"column":8},"end":{"line":80,"column":11}},"id":12},"13":{"loc":{"start":{"line":10,"column":15},"end":{"line":80,"column":10}},"id":13},"14":{"loc":{"start":{"line":75,"column":13},"end":{"line":77,"column":10}},"id":14},"15":{"loc":{"start":{"line":70,"column":13},"end":{"line":72,"column":10}},"id":15},"16":{"loc":{"start":{"line":67,"column":13},"end":{"line":69,"column":10}},"id":16},"17":{"loc":{"start":{"line":62,"column":13},"end":{"line":64,"column":10}},"id":17},"18":{"loc":{"start":{"line":59,"column":13},"end":{"line":61,"column":10}},"id":18},"19":{"loc":{"start":{"line":48,"column":13},"end":{"line":56,"column":10}},"id":19},"20":{"loc":{"start":{"line":45,"column":13},"end":{"line":47,"column":10}},"id":20},"21":{"loc":{"start":{"line":40,"column":13},"end":{"line":42,"column":10}},"id":21},"22":{"loc":{"start":{"line":37,"column":13},"end":{"line":39,"column":10}},"id":22},"23":{"loc":{"start":{"line":32,"column":13},"end":{"line":34,"column":10}},"id":23},"24":{"loc":{"start":{"line":29,"column":13},"end":{"line":31,"column":10}},"id":24},"25":{"loc":{"start":{"line":24,"column":13},"end":{"line":26,"column":10}},"id":25},"26":{"loc":{"start":{"line":19,"column":13},"end":{"line":21,"column":10}},"id":26},"27":{"loc":{"start":{"line":16,"column":13},"end":{"line":18,"column":10}},"id":27},"28":{"loc":{"start":{"line":11,"column":13},"end":{"line":13,"column":10}},"id":28},"29":{"loc":{"start":{"line":10,"column":28},"end":{"line":10,"column":35}},"id":29},"30":{"loc":{"start":{"line":12,"column":12},"end":{"line":13,"column":8}},"id":30},"31":{"loc":{"start":{"line":12,"column":19},"end":{"line":12,"column":59}},"id":31},"32":{"loc":{"start":{"line":17,"column":12},"end":{"line":18,"column":8}},"id":32},"33":{"loc":{"start":{"line":17,"column":19},"end":{"line":17,"column":41}},"id":33},"34":{"loc":{"start":{"line":20,"column":12},"end":{"line":20,"column":50}},"id":34},"35":{"loc":{"start":{"line":20,"column":12},"end":{"line":20,"column":49}},"id":35},"36":{"loc":{"start":{"line":20,"column":18},"end":{"line":20,"column":27}},"id":36},"37":{"loc":{"start":{"line":25,"column":12},"end":{"line":26,"column":8}},"id":37},"38":{"loc":{"start":{"line":25,"column":19},"end":{"line":25,"column":71}},"id":38},"39":{"loc":{"start":{"line":30,"column":12},"end":{"line":31,"column":8}},"id":39},"40":{"loc":{"start":{"line":30,"column":19},"end":{"line":30,"column":45}},"id":40},"41":{"loc":{"start":{"line":33,"column":12},"end":{"line":33,"column":39}},"id":41},"42":{"loc":{"start":{"line":33,"column":12},"end":{"line":33,"column":38}},"id":42},"43":{"loc":{"start":{"line":33,"column":18},"end":{"line":33,"column":24}},"id":43},"44":{"loc":{"start":{"line":38,"column":12},"end":{"line":39,"column":8}},"id":44},"45":{"loc":{"start":{"line":38,"column":19},"end":{"line":38,"column":46}},"id":45},"46":{"loc":{"start":{"line":41,"column":12},"end":{"line":41,"column":49}},"id":46},"47":{"loc":{"start":{"line":41,"column":12},"end":{"line":41,"column":48}},"id":47},"48":{"loc":{"start":{"line":41,"column":18},"end":{"line":41,"column":29}},"id":48},"49":{"loc":{"start":{"line":46,"column":12},"end":{"line":47,"column":8}},"id":49},"50":{"loc":{"start":{"line":46,"column":19},"end":{"line":46,"column":34}},"id":50},"51":{"loc":{"start":{"line":49,"column":12},"end":{"line":56,"column":8}},"id":51},"52":{"loc":{"start":{"line":49,"column":12},"end":{"line":55,"column":14}},"id":52},"53":{"loc":{"start":{"line":49,"column":18},"end":{"line":49,"column":27}},"id":53},"54":{"loc":{"start":{"line":52,"column":16},"end":{"line":52,"column":32}},"id":54},"55":{"loc":{"start":{"line":53,"column":16},"end":{"line":53,"column":38}},"id":55},"56":{"loc":{"start":{"line":54,"column":16},"end":{"line":54,"column":38}},"id":56},"57":{"loc":{"start":{"line":60,"column":12},"end":{"line":61,"column":8}},"id":57},"58":{"loc":{"start":{"line":60,"column":19},"end":{"line":60,"column":41}},"id":58},"59":{"loc":{"start":{"line":63,"column":12},"end":{"line":63,"column":50}},"id":59},"60":{"loc":{"start":{"line":63,"column":12},"end":{"line":63,"column":49}},"id":60},"61":{"loc":{"start":{"line":63,"column":18},"end":{"line":63,"column":27}},"id":61},"62":{"loc":{"start":{"line":68,"column":12},"end":{"line":68,"column":52}},"id":62},"63":{"loc":{"start":{"line":68,"column":19},"end":{"line":68,"column":51}},"id":63},"64":{"loc":{"start":{"line":71,"column":12},"end":{"line":71,"column":46}},"id":64},"65":{"loc":{"start":{"line":71,"column":12},"end":{"line":71,"column":45}},"id":65},"66":{"loc":{"start":{"line":71,"column":18},"end":{"line":71,"column":34}},"id":66},"67":{"loc":{"start":{"line":76,"column":12},"end":{"line":76,"column":42}},"id":67},"68":{"loc":{"start":{"line":76,"column":19},"end":{"line":76,"column":41}},"id":68},"69":{"loc":{"start":{"line":79,"column":12},"end":{"line":79,"column":50}},"id":69},"70":{"loc":{"start":{"line":79,"column":12},"end":{"line":79,"column":49}},"id":70},"71":{"loc":{"start":{"line":79,"column":18},"end":{"line":79,"column":27}},"id":71}}}},"/Users/kris/q-io/spec/fs/mock/working-directory-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1}},"hash":"9ff3f9732f0a14293f7fcc2e19997009","instrumentor":{"blockCounter":3,"nodeCounter":19,"source":"\"use strict\";\n\nrequire(\"../../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar Mock = require(\"../../../fs-mock\");\n\ndescribe(\"mock working directory\", function () {\n    it(\"should perform actions relative to the given working directory\", function () {\n\n        var mock = Mock({\n            \"a/b\": {\n                \"c\": {\n                    \"d\": 66,\n                    \"e\": 99\n                }\n            }\n        }, \"a/b/c\");\n\n        return mock.listTree()\n        .then(function (list) {\n            expect(list).toEqual([\n                \".\",\n                \"d\",\n                \"e\"\n            ]);\n        })\n\n    });\n\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"id":2},"3":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"id":3},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":20}},"id":4},"5":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":39}},"id":5},"6":{"loc":{"start":{"line":5,"column":11},"end":{"line":5,"column":38}},"id":6},"7":{"loc":{"start":{"line":7,"column":0},"end":{"line":30,"column":3}},"id":7},"8":{"loc":{"start":{"line":7,"column":0},"end":{"line":30,"column":2}},"id":8},"9":{"loc":{"start":{"line":8,"column":4},"end":{"line":28,"column":7}},"id":9},"10":{"loc":{"start":{"line":8,"column":4},"end":{"line":28,"column":6}},"id":10},"11":{"loc":{"start":{"line":10,"column":8},"end":{"line":17,"column":20}},"id":11},"12":{"loc":{"start":{"line":10,"column":19},"end":{"line":17,"column":19}},"id":12},"13":{"loc":{"start":{"line":19,"column":8},"end":{"line":28,"column":4}},"id":13},"14":{"loc":{"start":{"line":19,"column":15},"end":{"line":26,"column":10}},"id":14},"15":{"loc":{"start":{"line":19,"column":28},"end":{"line":19,"column":30}},"id":15},"16":{"loc":{"start":{"line":21,"column":12},"end":{"line":25,"column":15}},"id":16},"17":{"loc":{"start":{"line":21,"column":12},"end":{"line":25,"column":14}},"id":17},"18":{"loc":{"start":{"line":21,"column":18},"end":{"line":21,"column":24}},"id":18}}}},"/Users/kris/q-io/spec/fs/mock/write-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"37":{"index":37,"count":1},"38":{"index":38,"count":1},"39":{"index":39,"count":1},"40":{"index":40,"count":1},"41":{"index":41,"count":1},"42":{"index":42,"count":1},"43":{"index":43,"count":1},"44":{"index":44,"count":1},"45":{"index":45,"count":1},"46":{"index":46,"count":1},"47":{"index":47,"count":1},"48":{"index":48,"count":1},"49":{"index":49,"count":1},"50":{"index":50,"count":1},"51":{"index":51,"count":1},"52":{"index":52,"count":1},"53":{"index":53,"count":1},"54":{"index":54,"count":1},"55":{"index":55,"count":1},"56":{"index":56,"count":1},"57":{"index":57,"count":1},"58":{"index":58,"count":1},"59":{"index":59,"count":1},"60":{"index":60,"count":1},"61":{"index":61,"count":1},"62":{"index":62,"count":1},"63":{"index":63,"count":1},"64":{"index":64,"count":1},"65":{"index":65,"count":1},"66":{"index":66,"count":1},"67":{"index":67,"count":1},"68":{"index":68,"count":1},"69":{"index":69,"count":1},"70":{"index":70,"count":1},"71":{"index":71,"count":1},"72":{"index":72,"count":1},"73":{"index":73,"count":1},"74":{"index":74,"count":1},"75":{"index":75,"count":1},"76":{"index":76,"count":1},"77":{"index":77,"count":1},"78":{"index":78,"count":1},"79":{"index":79,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1}},"hash":"7e07490f39a76c2a9c929a2727c08fc8","instrumentor":{"blockCounter":21,"nodeCounter":80,"source":"\"use strict\";\n\nrequire(\"../../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar FS = require(\"../../../fs\");\n/*global describe,it,expect */\n\ndescribe(\"write\", function () {\n    it(\"should write a file to a mock filesystem\", function () {\n        return FS.mock(FS.join(__dirname, \"fixture\"))\n        .then(function (mock) {\n\n            return Q.fcall(function () {\n                return mock.write(\"hello.txt\", \"Goodbye!\\n\");\n            })\n            .then(function () {\n                return mock.isFile(\"hello.txt\");\n            })\n            .then(function (isFile) {\n                expect(isFile).toBe(true);\n            });\n        });\n    });\n\n    it(\"takes a flags argument\", function () {\n        return FS.mock(FS.join(__dirname, \"fixture\"))\n        .then(function (mock) {\n            return Q.fcall(function () {\n                return mock.write(\"hello.txt\", \"Goodbye!\\n\", \"a\");\n            })\n            .then(function () {\n                return mock.read(\"hello.txt\");\n            })\n            .then(function (contents) {\n                expect(contents).toBe(\"Hello, World!\\nGoodbye!\\n\");\n            });\n        });\n    });\n\n    it(\"takes an options object with flags\", function () {\n        return FS.mock(FS.join(__dirname, \"fixture\"))\n        .then(function (mock) {\n            return Q.fcall(function () {\n                return mock.write(\"hello.txt\", \"Goodbye!\\n\", { flags: \"a\" });\n            })\n            .then(function () {\n                return mock.read(\"hello.txt\");\n            })\n            .then(function (contents) {\n                expect(contents).toBe(\"Hello, World!\\nGoodbye!\\n\");\n            });\n        });\n    });\n\n    it(\"calls open correctly\", function () {\n        return FS.mock(FS.join(__dirname, \"fixture\"))\n        .then(function (mock) {\n            mock.open = function (path, options) {\n                expect(path).toBe(\"hello.txt\");\n                expect(options.flags).toBe(\"wa\");\n                expect(options.charset).toBe(\"utf8\");\n                return Q.resolve({write: function () {}, close: function () {}});\n            };\n\n            return mock.write(\"hello.txt\", \"Goodbye!\\n\", \"a\", \"utf8\");\n        });\n    });\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"id":2},"3":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"id":3},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":20}},"id":4},"5":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":32}},"id":5},"6":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":31}},"id":6},"7":{"loc":{"start":{"line":8,"column":0},"end":{"line":68,"column":3}},"id":7},"8":{"loc":{"start":{"line":8,"column":0},"end":{"line":68,"column":2}},"id":8},"9":{"loc":{"start":{"line":9,"column":4},"end":{"line":23,"column":7}},"id":9},"10":{"loc":{"start":{"line":9,"column":4},"end":{"line":23,"column":6}},"id":10},"11":{"loc":{"start":{"line":10,"column":8},"end":{"line":22,"column":11}},"id":11},"12":{"loc":{"start":{"line":10,"column":15},"end":{"line":22,"column":10}},"id":12},"13":{"loc":{"start":{"line":10,"column":22},"end":{"line":10,"column":53}},"id":13},"14":{"loc":{"start":{"line":10,"column":23},"end":{"line":10,"column":52}},"id":14},"15":{"loc":{"start":{"line":13,"column":12},"end":{"line":21,"column":15}},"id":15},"16":{"loc":{"start":{"line":13,"column":19},"end":{"line":21,"column":14}},"id":16},"17":{"loc":{"start":{"line":16,"column":17},"end":{"line":18,"column":14}},"id":17},"18":{"loc":{"start":{"line":13,"column":26},"end":{"line":15,"column":14}},"id":18},"19":{"loc":{"start":{"line":14,"column":16},"end":{"line":14,"column":61}},"id":19},"20":{"loc":{"start":{"line":14,"column":23},"end":{"line":14,"column":60}},"id":20},"21":{"loc":{"start":{"line":17,"column":16},"end":{"line":17,"column":48}},"id":21},"22":{"loc":{"start":{"line":17,"column":23},"end":{"line":17,"column":47}},"id":22},"23":{"loc":{"start":{"line":20,"column":16},"end":{"line":20,"column":42}},"id":23},"24":{"loc":{"start":{"line":20,"column":16},"end":{"line":20,"column":41}},"id":24},"25":{"loc":{"start":{"line":20,"column":22},"end":{"line":20,"column":30}},"id":25},"26":{"loc":{"start":{"line":25,"column":4},"end":{"line":38,"column":7}},"id":26},"27":{"loc":{"start":{"line":25,"column":4},"end":{"line":38,"column":6}},"id":27},"28":{"loc":{"start":{"line":26,"column":8},"end":{"line":37,"column":11}},"id":28},"29":{"loc":{"start":{"line":26,"column":15},"end":{"line":37,"column":10}},"id":29},"30":{"loc":{"start":{"line":26,"column":22},"end":{"line":26,"column":53}},"id":30},"31":{"loc":{"start":{"line":26,"column":23},"end":{"line":26,"column":52}},"id":31},"32":{"loc":{"start":{"line":28,"column":12},"end":{"line":36,"column":15}},"id":32},"33":{"loc":{"start":{"line":28,"column":19},"end":{"line":36,"column":14}},"id":33},"34":{"loc":{"start":{"line":31,"column":17},"end":{"line":33,"column":14}},"id":34},"35":{"loc":{"start":{"line":28,"column":26},"end":{"line":30,"column":14}},"id":35},"36":{"loc":{"start":{"line":29,"column":16},"end":{"line":29,"column":66}},"id":36},"37":{"loc":{"start":{"line":29,"column":23},"end":{"line":29,"column":65}},"id":37},"38":{"loc":{"start":{"line":32,"column":16},"end":{"line":32,"column":46}},"id":38},"39":{"loc":{"start":{"line":32,"column":23},"end":{"line":32,"column":45}},"id":39},"40":{"loc":{"start":{"line":35,"column":16},"end":{"line":35,"column":67}},"id":40},"41":{"loc":{"start":{"line":35,"column":16},"end":{"line":35,"column":66}},"id":41},"42":{"loc":{"start":{"line":35,"column":22},"end":{"line":35,"column":32}},"id":42},"43":{"loc":{"start":{"line":40,"column":4},"end":{"line":53,"column":7}},"id":43},"44":{"loc":{"start":{"line":40,"column":4},"end":{"line":53,"column":6}},"id":44},"45":{"loc":{"start":{"line":41,"column":8},"end":{"line":52,"column":11}},"id":45},"46":{"loc":{"start":{"line":41,"column":15},"end":{"line":52,"column":10}},"id":46},"47":{"loc":{"start":{"line":41,"column":22},"end":{"line":41,"column":53}},"id":47},"48":{"loc":{"start":{"line":41,"column":23},"end":{"line":41,"column":52}},"id":48},"49":{"loc":{"start":{"line":43,"column":12},"end":{"line":51,"column":15}},"id":49},"50":{"loc":{"start":{"line":43,"column":19},"end":{"line":51,"column":14}},"id":50},"51":{"loc":{"start":{"line":46,"column":17},"end":{"line":48,"column":14}},"id":51},"52":{"loc":{"start":{"line":43,"column":26},"end":{"line":45,"column":14}},"id":52},"53":{"loc":{"start":{"line":44,"column":16},"end":{"line":44,"column":77}},"id":53},"54":{"loc":{"start":{"line":44,"column":23},"end":{"line":44,"column":76}},"id":54},"55":{"loc":{"start":{"line":47,"column":16},"end":{"line":47,"column":46}},"id":55},"56":{"loc":{"start":{"line":47,"column":23},"end":{"line":47,"column":45}},"id":56},"57":{"loc":{"start":{"line":50,"column":16},"end":{"line":50,"column":67}},"id":57},"58":{"loc":{"start":{"line":50,"column":16},"end":{"line":50,"column":66}},"id":58},"59":{"loc":{"start":{"line":50,"column":22},"end":{"line":50,"column":32}},"id":59},"60":{"loc":{"start":{"line":55,"column":4},"end":{"line":67,"column":7}},"id":60},"61":{"loc":{"start":{"line":55,"column":4},"end":{"line":67,"column":6}},"id":61},"62":{"loc":{"start":{"line":56,"column":8},"end":{"line":66,"column":11}},"id":62},"63":{"loc":{"start":{"line":56,"column":15},"end":{"line":66,"column":10}},"id":63},"64":{"loc":{"start":{"line":56,"column":22},"end":{"line":56,"column":53}},"id":64},"65":{"loc":{"start":{"line":56,"column":23},"end":{"line":56,"column":52}},"id":65},"66":{"loc":{"start":{"line":58,"column":12},"end":{"line":63,"column":14}},"id":66},"67":{"loc":{"start":{"line":59,"column":16},"end":{"line":59,"column":47}},"id":67},"68":{"loc":{"start":{"line":59,"column":16},"end":{"line":59,"column":46}},"id":68},"69":{"loc":{"start":{"line":59,"column":22},"end":{"line":59,"column":28}},"id":69},"70":{"loc":{"start":{"line":60,"column":16},"end":{"line":60,"column":49}},"id":70},"71":{"loc":{"start":{"line":60,"column":16},"end":{"line":60,"column":48}},"id":71},"72":{"loc":{"start":{"line":60,"column":22},"end":{"line":60,"column":37}},"id":72},"73":{"loc":{"start":{"line":61,"column":16},"end":{"line":61,"column":53}},"id":73},"74":{"loc":{"start":{"line":61,"column":16},"end":{"line":61,"column":52}},"id":74},"75":{"loc":{"start":{"line":61,"column":22},"end":{"line":61,"column":39}},"id":75},"76":{"loc":{"start":{"line":62,"column":16},"end":{"line":62,"column":81}},"id":76},"77":{"loc":{"start":{"line":62,"column":23},"end":{"line":62,"column":80}},"id":77},"78":{"loc":{"start":{"line":65,"column":12},"end":{"line":65,"column":70}},"id":78},"79":{"loc":{"start":{"line":65,"column":19},"end":{"line":65,"column":69}},"id":79}}}},"/Users/kris/q-io/spec/fs/range-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1}},"hash":"56b279f509eb873fc332e9d6a13b5869","instrumentor":{"blockCounter":3,"nodeCounter":21,"source":"\"use strict\";\n\nrequire(\"../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar FS = require(\"../../fs\");\n\ndescribe(\"open range\", function () {\n    it(\"read a partial range of a file\", function () {\n\n        var name = FS.join(module.directory || __dirname, \"range-spec.txt\");\n\n        return FS.open(name, {\n            begin: 1,\n            end: 3\n        })\n        .invoke(\"read\")\n        .then(function (content) {\n            expect(content).toBe(\"23\");\n        })\n\n    });\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":34}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":33}},"id":2},"3":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"id":3},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":20}},"id":4},"5":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":29}},"id":5},"6":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":28}},"id":6},"7":{"loc":{"start":{"line":7,"column":0},"end":{"line":22,"column":3}},"id":7},"8":{"loc":{"start":{"line":7,"column":0},"end":{"line":22,"column":2}},"id":8},"9":{"loc":{"start":{"line":8,"column":4},"end":{"line":21,"column":7}},"id":9},"10":{"loc":{"start":{"line":8,"column":4},"end":{"line":21,"column":6}},"id":10},"11":{"loc":{"start":{"line":10,"column":8},"end":{"line":10,"column":76}},"id":11},"12":{"loc":{"start":{"line":10,"column":19},"end":{"line":10,"column":75}},"id":12},"13":{"loc":{"start":{"line":10,"column":27},"end":{"line":10,"column":56}},"id":13},"14":{"loc":{"start":{"line":12,"column":8},"end":{"line":21,"column":4}},"id":14},"15":{"loc":{"start":{"line":12,"column":15},"end":{"line":19,"column":10}},"id":15},"16":{"loc":{"start":{"line":16,"column":15},"end":{"line":16,"column":23}},"id":16},"17":{"loc":{"start":{"line":12,"column":22},"end":{"line":15,"column":10}},"id":17},"18":{"loc":{"start":{"line":18,"column":12},"end":{"line":18,"column":39}},"id":18},"19":{"loc":{"start":{"line":18,"column":12},"end":{"line":18,"column":38}},"id":19},"20":{"loc":{"start":{"line":18,"column":18},"end":{"line":18,"column":27}},"id":20}}}},"/Users/kris/q-io/spec/fs/relative-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"37":{"index":37,"count":1},"38":{"index":38,"count":1},"39":{"index":39,"count":1},"40":{"index":40,"count":1},"41":{"index":41,"count":1},"42":{"index":42,"count":1},"43":{"index":43,"count":1},"44":{"index":44,"count":1},"45":{"index":45,"count":1},"46":{"index":46,"count":1},"47":{"index":47,"count":1},"48":{"index":48,"count":1},"49":{"index":49,"count":1},"50":{"index":50,"count":1},"51":{"index":51,"count":1},"52":{"index":52,"count":1},"53":{"index":53,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1}},"hash":"a311eb73c505ad327e709d39efce923f","instrumentor":{"blockCounter":2,"nodeCounter":54,"source":"var FS = require(\"../../fs\");\n\ndescribe(\"relativeFromDirectory\", function () {\n\n    it(\"should find the relative path from a directory\", function () {\n\n        expect(FS.relativeFromDirectory(\"/a/b\", \"/a/b\")).toBe(\"\");\n        expect(FS.relativeFromDirectory(\"/a/b/\", \"/a/b\")).toBe(\"\");\n        expect(FS.relativeFromDirectory(\"/a/b\", \"/a/b/\")).toBe(\"\");\n        expect(FS.relativeFromDirectory(\"/a/b/\", \"/a/b/\")).toBe(\"\");\n\n        expect(FS.relativeFromDirectory(\"/a/b\", \"/a/b/c\")).toBe(\"c\");\n        expect(FS.relativeFromDirectory(\"/a/b/\", \"/a/b/c\")).toBe(\"c\");\n        expect(FS.relativeFromDirectory(\"/a/b\", \"/a/b/c/\")).toBe(\"c\");\n        expect(FS.relativeFromDirectory(\"/a/b/\", \"/a/b/c/\")).toBe(\"c\");\n\n        expect(FS.relativeFromDirectory(\"/a/b\", \"/a\")).toBe(\"..\");\n        expect(FS.relativeFromDirectory(\"/a/b/\", \"/a\")).toBe(\"..\");\n        expect(FS.relativeFromDirectory(\"/a/b\", \"/a/\")).toBe(\"..\");\n        expect(FS.relativeFromDirectory(\"/a/b/\", \"/a/\")).toBe(\"..\");\n\n    });\n\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":29}},"id":0},"1":{"loc":{"start":{"line":1,"column":9},"end":{"line":1,"column":28}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":24,"column":3}},"id":2},"3":{"loc":{"start":{"line":3,"column":0},"end":{"line":24,"column":2}},"id":3},"4":{"loc":{"start":{"line":5,"column":4},"end":{"line":22,"column":7}},"id":4},"5":{"loc":{"start":{"line":5,"column":4},"end":{"line":22,"column":6}},"id":5},"6":{"loc":{"start":{"line":7,"column":8},"end":{"line":7,"column":66}},"id":6},"7":{"loc":{"start":{"line":7,"column":8},"end":{"line":7,"column":65}},"id":7},"8":{"loc":{"start":{"line":7,"column":14},"end":{"line":7,"column":56}},"id":8},"9":{"loc":{"start":{"line":7,"column":15},"end":{"line":7,"column":55}},"id":9},"10":{"loc":{"start":{"line":8,"column":8},"end":{"line":8,"column":67}},"id":10},"11":{"loc":{"start":{"line":8,"column":8},"end":{"line":8,"column":66}},"id":11},"12":{"loc":{"start":{"line":8,"column":14},"end":{"line":8,"column":57}},"id":12},"13":{"loc":{"start":{"line":8,"column":15},"end":{"line":8,"column":56}},"id":13},"14":{"loc":{"start":{"line":9,"column":8},"end":{"line":9,"column":67}},"id":14},"15":{"loc":{"start":{"line":9,"column":8},"end":{"line":9,"column":66}},"id":15},"16":{"loc":{"start":{"line":9,"column":14},"end":{"line":9,"column":57}},"id":16},"17":{"loc":{"start":{"line":9,"column":15},"end":{"line":9,"column":56}},"id":17},"18":{"loc":{"start":{"line":10,"column":8},"end":{"line":10,"column":68}},"id":18},"19":{"loc":{"start":{"line":10,"column":8},"end":{"line":10,"column":67}},"id":19},"20":{"loc":{"start":{"line":10,"column":14},"end":{"line":10,"column":58}},"id":20},"21":{"loc":{"start":{"line":10,"column":15},"end":{"line":10,"column":57}},"id":21},"22":{"loc":{"start":{"line":12,"column":8},"end":{"line":12,"column":69}},"id":22},"23":{"loc":{"start":{"line":12,"column":8},"end":{"line":12,"column":68}},"id":23},"24":{"loc":{"start":{"line":12,"column":14},"end":{"line":12,"column":58}},"id":24},"25":{"loc":{"start":{"line":12,"column":15},"end":{"line":12,"column":57}},"id":25},"26":{"loc":{"start":{"line":13,"column":8},"end":{"line":13,"column":70}},"id":26},"27":{"loc":{"start":{"line":13,"column":8},"end":{"line":13,"column":69}},"id":27},"28":{"loc":{"start":{"line":13,"column":14},"end":{"line":13,"column":59}},"id":28},"29":{"loc":{"start":{"line":13,"column":15},"end":{"line":13,"column":58}},"id":29},"30":{"loc":{"start":{"line":14,"column":8},"end":{"line":14,"column":70}},"id":30},"31":{"loc":{"start":{"line":14,"column":8},"end":{"line":14,"column":69}},"id":31},"32":{"loc":{"start":{"line":14,"column":14},"end":{"line":14,"column":59}},"id":32},"33":{"loc":{"start":{"line":14,"column":15},"end":{"line":14,"column":58}},"id":33},"34":{"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":71}},"id":34},"35":{"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":70}},"id":35},"36":{"loc":{"start":{"line":15,"column":14},"end":{"line":15,"column":60}},"id":36},"37":{"loc":{"start":{"line":15,"column":15},"end":{"line":15,"column":59}},"id":37},"38":{"loc":{"start":{"line":17,"column":8},"end":{"line":17,"column":66}},"id":38},"39":{"loc":{"start":{"line":17,"column":8},"end":{"line":17,"column":65}},"id":39},"40":{"loc":{"start":{"line":17,"column":14},"end":{"line":17,"column":54}},"id":40},"41":{"loc":{"start":{"line":17,"column":15},"end":{"line":17,"column":53}},"id":41},"42":{"loc":{"start":{"line":18,"column":8},"end":{"line":18,"column":67}},"id":42},"43":{"loc":{"start":{"line":18,"column":8},"end":{"line":18,"column":66}},"id":43},"44":{"loc":{"start":{"line":18,"column":14},"end":{"line":18,"column":55}},"id":44},"45":{"loc":{"start":{"line":18,"column":15},"end":{"line":18,"column":54}},"id":45},"46":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":67}},"id":46},"47":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":66}},"id":47},"48":{"loc":{"start":{"line":19,"column":14},"end":{"line":19,"column":55}},"id":48},"49":{"loc":{"start":{"line":19,"column":15},"end":{"line":19,"column":54}},"id":49},"50":{"loc":{"start":{"line":20,"column":8},"end":{"line":20,"column":68}},"id":50},"51":{"loc":{"start":{"line":20,"column":8},"end":{"line":20,"column":67}},"id":51},"52":{"loc":{"start":{"line":20,"column":14},"end":{"line":20,"column":56}},"id":52},"53":{"loc":{"start":{"line":20,"column":15},"end":{"line":20,"column":55}},"id":53}}}},"/Users/kris/q-io/spec/http-apps/cookie-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":2},"14":{"index":14,"count":2},"15":{"index":15,"count":2},"16":{"index":16,"count":2},"17":{"index":17,"count":2},"18":{"index":18,"count":4},"19":{"index":19,"count":4},"20":{"index":20,"count":2},"21":{"index":21,"count":2},"22":{"index":22,"count":2},"23":{"index":23,"count":2},"24":{"index":24,"count":2},"25":{"index":25,"count":2},"26":{"index":26,"count":2},"27":{"index":27,"count":2},"28":{"index":28,"count":2},"29":{"index":29,"count":2},"30":{"index":30,"count":2},"31":{"index":31,"count":2},"32":{"index":32,"count":2},"33":{"index":33,"count":2},"34":{"index":34,"count":2},"35":{"index":35,"count":2},"36":{"index":36,"count":2},"37":{"index":37,"count":2},"38":{"index":38,"count":2},"39":{"index":39,"count":2},"40":{"index":40,"count":2},"41":{"index":41,"count":2},"42":{"index":42,"count":2},"43":{"index":43,"count":2},"44":{"index":44,"count":2},"45":{"index":45,"count":2},"46":{"index":46,"count":2},"47":{"index":47,"count":2},"48":{"index":48,"count":2},"49":{"index":49,"count":2},"50":{"index":50,"count":2},"51":{"index":51,"count":2},"52":{"index":52,"count":2},"53":{"index":53,"count":2},"54":{"index":54,"count":2}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":2},"2":{"index":2,"count":2},"3":{"index":3,"count":4},"4":{"index":4,"count":2},"5":{"index":5,"count":2},"6":{"index":6,"count":2},"7":{"index":7,"count":2}},"hash":"5e750c3836f40ec27dc74aa9a2de0dbb","instrumentor":{"blockCounter":8,"nodeCounter":55,"source":"require(\"../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar Http = require(\"../../http\");\nvar Apps = require(\"../../http-apps\");\n\ndescribe(\"http cookies\", function () {\n\n    var hosts = [\"localhost\", \"127.0.0.1\"];\n\n    hosts.forEach(function (host) {\n        it(\"should work on host\" + host, function () {\n\n            var server = Http.Server(function (request) {\n                return {\n                    status: 200,\n                    headers: {\n                        \"set-cookie\": \"a=10; MaxAge=1\"\n                    },\n                    body: [request.headers.cookie || \"\"]\n                };\n            });\n\n            var request = Apps.Normalize(Apps.CookieJar(Http.request));\n\n            return server.listen(0)\n            .then(function (server) {\n                var address = server.node.address();\n                return request(\"http://\" + host + \":\" + address.port)\n                .get(\"body\")\n                .invoke(\"read\")\n                .invoke(\"toString\", \"utf-8\")\n                .then(function (content) {\n                    expect(content).toEqual(\"\"); // no cookie first time\n                })\n                .then(function () {\n                    return request(\"http://\" + host + \":\" + address.port)\n                    .get(\"body\")\n                    .invoke(\"read\")\n                    .invoke(\"toString\", \"utf-8\")\n                })\n                .then(function (content) {\n                    expect(content).toEqual(\"a=10\"); // cookie set second time\n                })\n            })\n            .timeout(1000)\n            .finally(server.stop)\n        });\n    });\n\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":34}},"id":0},"1":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":33}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":21}},"id":2},"3":{"loc":{"start":{"line":2,"column":8},"end":{"line":2,"column":20}},"id":3},"4":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":33}},"id":4},"5":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":32}},"id":5},"6":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":38}},"id":6},"7":{"loc":{"start":{"line":4,"column":11},"end":{"line":4,"column":37}},"id":7},"8":{"loc":{"start":{"line":6,"column":0},"end":{"line":50,"column":3}},"id":8},"9":{"loc":{"start":{"line":6,"column":0},"end":{"line":50,"column":2}},"id":9},"10":{"loc":{"start":{"line":8,"column":4},"end":{"line":8,"column":43}},"id":10},"11":{"loc":{"start":{"line":10,"column":4},"end":{"line":48,"column":7}},"id":11},"12":{"loc":{"start":{"line":10,"column":4},"end":{"line":48,"column":6}},"id":12},"13":{"loc":{"start":{"line":11,"column":8},"end":{"line":47,"column":11}},"id":13},"14":{"loc":{"start":{"line":11,"column":8},"end":{"line":47,"column":10}},"id":14},"15":{"loc":{"start":{"line":11,"column":11},"end":{"line":11,"column":39}},"id":15},"16":{"loc":{"start":{"line":13,"column":12},"end":{"line":21,"column":15}},"id":16},"17":{"loc":{"start":{"line":13,"column":25},"end":{"line":21,"column":14}},"id":17},"18":{"loc":{"start":{"line":14,"column":16},"end":{"line":20,"column":18}},"id":18},"19":{"loc":{"start":{"line":19,"column":27},"end":{"line":19,"column":55}},"id":19},"20":{"loc":{"start":{"line":23,"column":12},"end":{"line":23,"column":71}},"id":20},"21":{"loc":{"start":{"line":23,"column":26},"end":{"line":23,"column":70}},"id":21},"22":{"loc":{"start":{"line":23,"column":41},"end":{"line":23,"column":69}},"id":22},"23":{"loc":{"start":{"line":25,"column":12},"end":{"line":47,"column":8}},"id":23},"24":{"loc":{"start":{"line":25,"column":19},"end":{"line":46,"column":33}},"id":24},"25":{"loc":{"start":{"line":45,"column":20},"end":{"line":45,"column":26}},"id":25},"26":{"loc":{"start":{"line":26,"column":17},"end":{"line":44,"column":14}},"id":26},"27":{"loc":{"start":{"line":25,"column":32},"end":{"line":25,"column":35}},"id":27},"28":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":52}},"id":28},"29":{"loc":{"start":{"line":27,"column":30},"end":{"line":27,"column":51}},"id":29},"30":{"loc":{"start":{"line":28,"column":16},"end":{"line":44,"column":12}},"id":30},"31":{"loc":{"start":{"line":28,"column":23},"end":{"line":43,"column":18}},"id":31},"32":{"loc":{"start":{"line":35,"column":21},"end":{"line":40,"column":18}},"id":32},"33":{"loc":{"start":{"line":32,"column":21},"end":{"line":34,"column":18}},"id":33},"34":{"loc":{"start":{"line":31,"column":23},"end":{"line":31,"column":44}},"id":34},"35":{"loc":{"start":{"line":30,"column":23},"end":{"line":30,"column":31}},"id":35},"36":{"loc":{"start":{"line":29,"column":20},"end":{"line":29,"column":28}},"id":36},"37":{"loc":{"start":{"line":28,"column":30},"end":{"line":28,"column":69}},"id":37},"38":{"loc":{"start":{"line":28,"column":31},"end":{"line":28,"column":68}},"id":38},"39":{"loc":{"start":{"line":28,"column":31},"end":{"line":28,"column":53}},"id":39},"40":{"loc":{"start":{"line":28,"column":31},"end":{"line":28,"column":47}},"id":40},"41":{"loc":{"start":{"line":33,"column":20},"end":{"line":33,"column":48}},"id":41},"42":{"loc":{"start":{"line":33,"column":20},"end":{"line":33,"column":47}},"id":42},"43":{"loc":{"start":{"line":33,"column":26},"end":{"line":33,"column":35}},"id":43},"44":{"loc":{"start":{"line":36,"column":20},"end":{"line":40,"column":16}},"id":44},"45":{"loc":{"start":{"line":36,"column":27},"end":{"line":39,"column":48}},"id":45},"46":{"loc":{"start":{"line":38,"column":27},"end":{"line":38,"column":35}},"id":46},"47":{"loc":{"start":{"line":37,"column":24},"end":{"line":37,"column":32}},"id":47},"48":{"loc":{"start":{"line":36,"column":34},"end":{"line":36,"column":73}},"id":48},"49":{"loc":{"start":{"line":36,"column":35},"end":{"line":36,"column":72}},"id":49},"50":{"loc":{"start":{"line":36,"column":35},"end":{"line":36,"column":57}},"id":50},"51":{"loc":{"start":{"line":36,"column":35},"end":{"line":36,"column":51}},"id":51},"52":{"loc":{"start":{"line":42,"column":20},"end":{"line":42,"column":52}},"id":52},"53":{"loc":{"start":{"line":42,"column":20},"end":{"line":42,"column":51}},"id":53},"54":{"loc":{"start":{"line":42,"column":26},"end":{"line":42,"column":35}},"id":54}}}},"/Users/kris/q-io/http.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":9},"12":{"index":12,"count":9},"13":{"index":13,"count":9},"14":{"index":14,"count":9},"15":{"index":15,"count":11},"16":{"index":16,"count":11},"17":{"index":17,"count":11},"18":{"index":18,"count":11},"19":{"index":19,"count":11},"20":{"index":20,"count":11},"21":{"index":21,"count":11},"22":{"index":22,"count":11},"25":{"index":25,"count":11},"26":{"index":26,"count":11},"27":{"index":27,"count":11},"28":{"index":28,"count":11},"29":{"index":29,"count":11},"30":{"index":30,"count":11},"31":{"index":31,"count":11},"32":{"index":32,"count":11},"34":{"index":34,"count":11},"35":{"index":35,"count":11},"36":{"index":36,"count":11},"40":{"index":40,"count":11},"41":{"index":41,"count":11},"42":{"index":42,"count":11},"43":{"index":43,"count":11},"44":{"index":44,"count":11},"45":{"index":45,"count":11},"46":{"index":46,"count":6},"47":{"index":47,"count":6},"48":{"index":48,"count":6},"49":{"index":49,"count":6},"50":{"index":50,"count":6},"51":{"index":51,"count":6},"52":{"index":52,"count":6},"55":{"index":55,"count":6},"56":{"index":56,"count":6},"57":{"index":57,"count":5},"58":{"index":58,"count":5},"59":{"index":59,"count":5},"60":{"index":60,"count":19},"61":{"index":61,"count":19},"62":{"index":62,"count":19},"63":{"index":63,"count":19},"64":{"index":64,"count":19},"65":{"index":65,"count":19},"66":{"index":66,"count":5},"67":{"index":67,"count":5},"68":{"index":68,"count":5},"69":{"index":69,"count":5},"70":{"index":70,"count":5},"71":{"index":71,"count":5},"74":{"index":74,"count":9},"75":{"index":75,"count":9},"76":{"index":76,"count":9},"77":{"index":77,"count":9},"80":{"index":80,"count":9},"81":{"index":81,"count":9},"82":{"index":82,"count":9},"83":{"index":83,"count":9},"84":{"index":84,"count":9},"85":{"index":85,"count":9},"86":{"index":86,"count":9},"87":{"index":87,"count":9},"88":{"index":88,"count":9},"89":{"index":89,"count":9},"90":{"index":90,"count":9},"93":{"index":93,"count":9},"94":{"index":94,"count":9},"95":{"index":95,"count":9},"96":{"index":96,"count":9},"100":{"index":100,"count":9},"101":{"index":101,"count":9},"102":{"index":102,"count":9},"103":{"index":103,"count":9},"104":{"index":104,"count":9},"105":{"index":105,"count":9},"106":{"index":106,"count":9},"107":{"index":107,"count":9},"108":{"index":108,"count":9},"109":{"index":109,"count":1},"110":{"index":110,"count":1},"113":{"index":113,"count":1},"114":{"index":114,"count":11},"115":{"index":115,"count":11},"116":{"index":116,"count":11},"117":{"index":117,"count":11},"118":{"index":118,"count":11},"119":{"index":119,"count":11},"120":{"index":120,"count":11},"121":{"index":121,"count":11},"122":{"index":122,"count":11},"123":{"index":123,"count":11},"124":{"index":124,"count":11},"125":{"index":125,"count":11},"126":{"index":126,"count":11},"127":{"index":127,"count":11},"128":{"index":128,"count":11},"129":{"index":129,"count":11},"130":{"index":130,"count":11},"131":{"index":131,"count":11},"132":{"index":132,"count":11},"134":{"index":134,"count":11},"135":{"index":135,"count":11},"137":{"index":137,"count":11},"138":{"index":138,"count":11},"139":{"index":139,"count":11},"140":{"index":140,"count":11},"141":{"index":141,"count":11},"142":{"index":142,"count":11},"143":{"index":143,"count":11},"144":{"index":144,"count":11},"145":{"index":145,"count":11},"146":{"index":146,"count":11},"147":{"index":147,"count":11},"148":{"index":148,"count":1},"149":{"index":149,"count":11},"150":{"index":150,"count":11},"151":{"index":151,"count":11},"152":{"index":152,"count":11},"153":{"index":153,"count":11},"154":{"index":154,"count":11},"155":{"index":155,"count":1},"156":{"index":156,"count":15},"157":{"index":157,"count":4},"158":{"index":158,"count":13},"159":{"index":159,"count":13},"160":{"index":160,"count":13},"161":{"index":161,"count":13},"162":{"index":162,"count":13},"163":{"index":163,"count":13},"164":{"index":164,"count":13},"165":{"index":165,"count":13},"166":{"index":166,"count":13},"167":{"index":167,"count":13},"168":{"index":168,"count":13},"169":{"index":169,"count":13},"170":{"index":170,"count":13},"171":{"index":171,"count":13},"172":{"index":172,"count":13},"173":{"index":173,"count":15},"174":{"index":174,"count":1},"175":{"index":175,"count":4},"177":{"index":177,"count":4},"180":{"index":180,"count":4},"181":{"index":181,"count":1},"182":{"index":182,"count":11},"183":{"index":183,"count":11},"184":{"index":184,"count":11},"185":{"index":185,"count":11},"186":{"index":186,"count":11},"187":{"index":187,"count":11},"188":{"index":188,"count":11},"189":{"index":189,"count":11},"191":{"index":191,"count":11},"192":{"index":192,"count":11},"193":{"index":193,"count":11},"194":{"index":194,"count":11},"195":{"index":195,"count":11},"196":{"index":196,"count":11},"197":{"index":197,"count":11},"198":{"index":198,"count":11},"201":{"index":201,"count":11},"202":{"index":202,"count":11},"203":{"index":203,"count":11},"204":{"index":204,"count":11},"205":{"index":205,"count":11},"206":{"index":206,"count":11},"207":{"index":207,"count":11},"214":{"index":214,"count":11},"215":{"index":215,"count":11},"218":{"index":218,"count":11},"219":{"index":219,"count":11},"220":{"index":220,"count":11},"221":{"index":221,"count":1},"222":{"index":222,"count":1},"229":{"index":229,"count":11},"230":{"index":230,"count":11},"231":{"index":231,"count":11},"232":{"index":232,"count":11},"233":{"index":233,"count":11},"234":{"index":234,"count":11},"235":{"index":235,"count":11},"236":{"index":236,"count":1},"237":{"index":237,"count":4},"238":{"index":238,"count":4},"239":{"index":239,"count":3},"240":{"index":240,"count":3},"241":{"index":241,"count":4},"242":{"index":242,"count":4},"243":{"index":243,"count":4},"244":{"index":244,"count":4},"249":{"index":249,"count":4},"250":{"index":250,"count":4},"251":{"index":251,"count":1},"252":{"index":252,"count":11},"253":{"index":253,"count":11},"254":{"index":254,"count":11},"255":{"index":255,"count":11},"256":{"index":256,"count":11},"257":{"index":257,"count":11},"258":{"index":258,"count":11},"259":{"index":259,"count":11},"260":{"index":260,"count":11},"261":{"index":261,"count":11},"262":{"index":262,"count":11},"263":{"index":263,"count":11},"264":{"index":264,"count":11}},"blocks":{"0":{"index":0,"count":9},"1":{"index":1,"count":11},"2":{"index":2,"count":11},"4":{"index":4,"count":11},"5":{"index":5,"count":11},"6":{"index":6,"count":11},"9":{"index":9,"count":11},"10":{"index":10,"count":6},"11":{"index":11,"count":6},"12":{"index":12,"count":6},"14":{"index":14,"count":6},"15":{"index":15,"count":5},"16":{"index":16,"count":19},"17":{"index":17,"count":19},"18":{"index":18,"count":19},"19":{"index":19,"count":5},"20":{"index":20,"count":5},"22":{"index":22,"count":9},"24":{"index":24,"count":9},"25":{"index":25,"count":9},"26":{"index":26,"count":9},"28":{"index":28,"count":9},"29":{"index":29,"count":9},"33":{"index":33,"count":11},"34":{"index":34,"count":11},"35":{"index":35,"count":11},"36":{"index":36,"count":15},"37":{"index":37,"count":4},"38":{"index":38,"count":13},"39":{"index":39,"count":4},"43":{"index":43,"count":11},"44":{"index":44,"count":11},"45":{"index":45,"count":11},"48":{"index":48,"count":11},"49":{"index":49,"count":1},"53":{"index":53,"count":11},"54":{"index":54,"count":11},"55":{"index":55,"count":4},"56":{"index":56,"count":3},"57":{"index":57,"count":4},"59":{"index":59,"count":11},"60":{"index":60,"count":11}},"hash":"15471e3864d798bf82331cd2228a2716","instrumentor":{"blockCounter":61,"nodeCounter":265,"source":"/**\n * A promise-based Q-JSGI server and client API.\n * @module\n */\n\n/*whatsupdoc*/\n\nvar HTTP = require(\"http\"); // node\nvar HTTPS = require(\"https\"); // node\nvar URL = require(\"url2\"); // node\nvar Q = require(\"q\");\nvar Reader = require(\"./reader\");\n\n/**\n * @param {respond(request Request)} respond a JSGI responder function that\n * receives a Request object as its argument.  The JSGI responder promises to\n * return an object of the form `{status, headers, body}`.  The status and\n * headers must be fully resolved, but the body may be a promise for an object\n * with a `forEach(write(chunk String))` method, albeit an array of strings.\n * The `forEach` method may promise to resolve when all chunks have been\n * written.\n * @returns a Node Server object.\n */\nexports.Server = function (respond) {\n    var self = Object.create(exports.Server.prototype);\n\n    var server = HTTP.createServer(function (_request, _response) {\n        var request = exports.ServerRequest(_request);\n        var response = exports.ServerResponse(_response);\n\n        var closed = Q.defer();\n        _request.on(\"end\", function (error, value) {\n            if (error) {\n                closed.reject(error);\n            } else {\n                closed.resolve(value);\n            }\n        });\n\n        Q.when(request, function (request) {\n            return Q.when(respond(request, response), function (response) {\n                if (!response)\n                    return;\n\n                _response.writeHead(response.status, response.headers);\n\n                if (response.onclose || response.onClose)\n                    Q.when(closed, response.onclose || response.onClose);\n\n                return Q.when(response.body, function (body) {\n                    var length;\n                    if (\n                        Array.isArray(body) &&\n                        (length = body.length) &&\n                        body.every(function (chunk) {\n                            return typeof chunk === \"string\"\n                        })\n                    ) {\n                        body.forEach(function (chunk, i) {\n                            if (i < length - 1) {\n                                _response.write(chunk, response.charset);\n                            } else {\n                                _response.end(chunk, response.charset);\n                            }\n                        });\n                    } else if (body) {\n                        var end;\n                        var done = body.forEach(function (chunk) {\n                            end = Q.when(end, function () {\n                                return Q.when(chunk, function (chunk) {\n                                    _response.write(chunk, response.charset);\n                                });\n                            });\n                        });\n                        return Q.when(done, function () {\n                            return Q.when(end, function () {\n                                _response.end();\n                            });\n                        });\n                    } else {\n                        _response.end();\n                    }\n                });\n\n            })\n        })\n        .done(); // should be .fail(self.emitter(\"error\"))\n\n    });\n\n    var stopped = Q.defer();\n    server.on(\"close\", function (err) {\n        if (err) {\n            stopped.reject(err);\n        } else {\n            stopped.resolve();\n        }\n    });\n\n    /***\n     * Stops the server.\n     * @returns {Promise * Undefined} a promise that will\n     * resolve when the server is stopped.\n     */\n    self.stop = function () {\n        server.close();\n        listening = undefined;\n        return stopped.promise;\n    };\n\n    var listening = Q.defer();\n    server.on(\"listening\", function (err) {\n        if (err) {\n            listening.reject(err);\n        } else {\n            listening.resolve(self);\n        }\n    });\n\n    /***\n     * Starts the server, listening on the given port\n     * @param {Number} port\n     * @returns {Promise * Undefined} a promise that will\n     * resolve when the server is ready to receive\n     * connections\n     */\n    self.listen = function (/*...args*/) {\n        if (typeof server.port !== \"undefined\")\n            return Q.reject(new Error(\"A server cannot be restarted or \" +\n            \"started on a new port\"));\n        server.listen.apply(server, arguments);\n        return listening.promise;\n    };\n\n    self.stopped = stopped.promise;\n\n    self.node = server;\n    self.nodeServer = server; // Deprecated\n    self.address = server.address.bind(server);\n\n    return self;\n};\n\nObject.defineProperties(exports.Server, {\n\n    port: {\n        get: function () {\n            return this.node.port;\n        }\n    },\n\n    host: {\n        get: function () {\n            return this.node.host;\n        }\n    }\n\n});\n\n/**\n * A wrapper for a Node HTTP Request, as received by\n * the Q HTTP Server, suitable for use by the Q HTTP Client.\n */\nexports.ServerRequest = function (_request, ssl) {\n    var request = Object.create(_request);\n    /*** {Array} HTTP version. (JSGI) */\n    request.version = _request.httpVersion.split(\".\").map(Math.floor);\n    /*** {String} HTTP method, e.g., `\"GET\"` (JSGI) */\n    request.method = _request.method;\n    /*** {String} path, starting with `\"/\"` */\n    request.path = _request.url;\n    /*** {String} pathInfo, starting with `\"/\"`, the\n     * portion of the path that has not yet\n     * been routed (JSGI) */\n    request.pathInfo = URL.parse(_request.url).pathname;\n    /*** {String} scriptName, the portion of the path that\n     * has already been routed (JSGI) */\n    request.scriptName = \"\";\n    /*** {String} (JSGI) */\n    request.scheme = \"http\";\n\n    request.host = _request.headers.host;\n    request.port = _request.connection.address().port;\n\n    var socket = _request.socket;\n    /*** {String} */\n    request.remoteHost = socket.remoteAddress;\n    /*** {Number} */\n    request.remotePort = socket.remotePort;\n\n    /*** {String} url */\n    request.url = URL.format({\n        protocol: request.scheme,\n        host: _request.headers.host,\n        port: request.port === (ssl ? 443 : 80) ? null : request.port,\n        path: request.path\n    });\n    /*** A Q IO asynchronous text reader */\n    request.body = Reader(_request);\n    /*** {Object} HTTP headers (JSGI)*/\n    request.headers = _request.headers;\n    /*** The underlying Node request */\n    request.node = _request;\n    request.nodeRequest = _request; // Deprecated\n    /*** The underlying Node TCP connection */\n    request.nodeConnection = _request.connection;\n\n    return Q.when(request.body, function (body) {\n        request.body = body;\n        return request;\n    });\n};\n\nexports.ServerResponse = function (_response, ssl) {\n    var response = Object.create(_response);\n    response.ssl = ssl;\n    response.node = _response;\n    response.nodeResponse = _response; // Deprecated\n    return response;\n};\n\nexports.normalizeRequest = function (request) {\n    if (typeof request === \"string\") {\n        request = {\n            url: request\n        };\n    }\n    if (request.url) {\n        var url = URL.parse(request.url);\n        request.host = url.hostname;\n        request.port = url.port;\n        request.ssl = url.protocol === \"https:\";\n        request.method = request.method || \"GET\";\n        request.path = (url.pathname || \"\") + (url.search || \"\");\n        request.headers = request.headers || {};\n        request.headers.host = url.hostname; // FIXME name consistency\n    }\n    return request;\n};\n\nexports.normalizeResponse = function (response) {\n    if (response === void 0) {\n        return;\n    }\n    if (typeof response == \"string\") {\n        response = [response];\n    }\n    if (response.forEach) {\n        response = {\n            status: 200,\n            headers: {},\n            body: response\n        }\n    }\n    return response;\n};\n\n/**\n * Issues an HTTP request.\n *\n * @param {Request {host, port, method, path, headers,\n * body}} request (may be a promise)\n * @returns {Promise * Response} promise for a response\n */\nexports.request = function (request) {\n    return Q.when(request, function (request) {\n\n        request = exports.normalizeRequest(request);\n\n        var deferred = Q.defer();\n        var ssl = request.ssl;\n        var http = ssl ? HTTPS : HTTP;\n\n        var headers = request.headers || {};\n\n        headers.host = headers.host || request.host;\n\n        var _request = http.request({\n            \"host\": request.host,\n            \"port\": request.port || (ssl ? 443 : 80),\n            \"path\": request.path || \"/\",\n            \"method\": request.method || \"GET\",\n            \"headers\": headers\n        }, function (_response) {\n            deferred.resolve(exports.ClientResponse(_response, request.charset));\n            _response.on(\"error\", function (error) {\n                // TODO find a better way to channel\n                // this into the response\n                console.warn(error && error.stack || error);\n                deferred.reject(error);\n            });\n        });\n\n        _request.on(\"error\", function (error) {\n            deferred.reject(error);\n        });\n\n        Q.when(request.body, function (body) {\n            var end, done;\n            if (body) {\n                done = body.forEach(function (chunk) {\n                    end = Q.when(end, function () {\n                        return Q.when(chunk, function (chunk) {\n                            _request.write(chunk, request.charset);\n                        });\n                    });\n                });\n            }\n            return Q.when(end, function () {\n                return Q.when(done, function () {\n                    _request.end();\n                });\n            });\n        });\n\n        return deferred.promise;\n    });\n};\n\n/**\n * Issues a GET request to the given URL and returns\n * a promise for a `String` containing the entirety\n * of the response.\n *\n * @param {String} url\n * @returns {Promise * String} or a rejection if the\n * status code is not exactly 200.  The reason for the\n * rejection is the full response object.\n */\nexports.read = function (request, qualifier) {\n    qualifier = qualifier || function (response) {\n        return response.status === 200;\n    };\n    return Q.when(exports.request(request), function (response) {\n        if (!qualifier(response)){\n            var error = new Error(\"HTTP request failed with code \" + response.status);\n            error.response = response;\n            throw error;\n        }\n        return Q.post(response.body, 'read', []);\n    });\n};\n\n\n/**\n * A wrapper for the Node HTTP Response as provided\n * by the Q HTTP Client API, suitable for use by the\n * Q HTTP Server API.\n */\nexports.ClientResponse = function (_response, charset) {\n    var response = Object.create(exports.ClientResponse.prototype);\n    /*** {Number} HTTP status code */\n    response.status = _response.statusCode;\n    /*** HTTP version */\n    response.version = _response.httpVersion;\n    /*** {Object} HTTP headers */\n    response.headers = _response.headers;\n    /***\n     * A Q IO asynchronous text reader.\n     */\n    response.node = _response;\n    response.nodeResponse = _response; // Deprecated\n    response.nodeConnection = _response.connection; // Deprecated\n    return Q.when(Reader(_response, charset), function (body) {\n        response.body = body;\n        return response;\n    });\n};","nodes":{"0":{"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":27}},"id":0},"1":{"loc":{"start":{"line":8,"column":11},"end":{"line":8,"column":26}},"id":1},"2":{"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":29}},"id":2},"3":{"loc":{"start":{"line":9,"column":12},"end":{"line":9,"column":28}},"id":3},"4":{"loc":{"start":{"line":10,"column":0},"end":{"line":10,"column":26}},"id":4},"5":{"loc":{"start":{"line":10,"column":10},"end":{"line":10,"column":25}},"id":5},"6":{"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":21}},"id":6},"7":{"loc":{"start":{"line":11,"column":8},"end":{"line":11,"column":20}},"id":7},"8":{"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":33}},"id":8},"9":{"loc":{"start":{"line":12,"column":13},"end":{"line":12,"column":32}},"id":9},"10":{"loc":{"start":{"line":24,"column":0},"end":{"line":142,"column":2}},"id":10},"11":{"loc":{"start":{"line":25,"column":4},"end":{"line":25,"column":55}},"id":11},"12":{"loc":{"start":{"line":25,"column":15},"end":{"line":25,"column":54}},"id":12},"13":{"loc":{"start":{"line":27,"column":4},"end":{"line":89,"column":7}},"id":13},"14":{"loc":{"start":{"line":27,"column":17},"end":{"line":89,"column":6}},"id":14},"15":{"loc":{"start":{"line":28,"column":8},"end":{"line":28,"column":54}},"id":15},"16":{"loc":{"start":{"line":28,"column":22},"end":{"line":28,"column":53}},"id":16},"17":{"loc":{"start":{"line":29,"column":8},"end":{"line":29,"column":57}},"id":17},"18":{"loc":{"start":{"line":29,"column":23},"end":{"line":29,"column":56}},"id":18},"19":{"loc":{"start":{"line":31,"column":8},"end":{"line":31,"column":31}},"id":19},"20":{"loc":{"start":{"line":31,"column":21},"end":{"line":31,"column":30}},"id":20},"21":{"loc":{"start":{"line":32,"column":8},"end":{"line":38,"column":11}},"id":21},"22":{"loc":{"start":{"line":32,"column":8},"end":{"line":38,"column":10}},"id":22},"23":{"loc":{"start":{"line":34,"column":16},"end":{"line":34,"column":37}},"id":23},"24":{"loc":{"start":{"line":34,"column":16},"end":{"line":34,"column":36}},"id":24},"25":{"loc":{"start":{"line":36,"column":16},"end":{"line":36,"column":38}},"id":25},"26":{"loc":{"start":{"line":36,"column":16},"end":{"line":36,"column":37}},"id":26},"27":{"loc":{"start":{"line":40,"column":8},"end":{"line":87,"column":16}},"id":27},"28":{"loc":{"start":{"line":40,"column":8},"end":{"line":87,"column":15}},"id":28},"29":{"loc":{"start":{"line":40,"column":14},"end":{"line":86,"column":10}},"id":29},"30":{"loc":{"start":{"line":41,"column":12},"end":{"line":86,"column":8}},"id":30},"31":{"loc":{"start":{"line":41,"column":19},"end":{"line":85,"column":14}},"id":31},"32":{"loc":{"start":{"line":41,"column":26},"end":{"line":41,"column":52}},"id":32},"33":{"loc":{"start":{"line":43,"column":20},"end":{"line":43,"column":27}},"id":33},"34":{"loc":{"start":{"line":45,"column":16},"end":{"line":45,"column":71}},"id":34},"35":{"loc":{"start":{"line":45,"column":16},"end":{"line":45,"column":70}},"id":35},"36":{"loc":{"start":{"line":47,"column":20},"end":{"line":47,"column":56}},"id":36},"37":{"loc":{"start":{"line":48,"column":20},"end":{"line":48,"column":73}},"id":37},"38":{"loc":{"start":{"line":48,"column":20},"end":{"line":48,"column":72}},"id":38},"39":{"loc":{"start":{"line":48,"column":35},"end":{"line":48,"column":71}},"id":39},"40":{"loc":{"start":{"line":50,"column":16},"end":{"line":83,"column":19}},"id":40},"41":{"loc":{"start":{"line":50,"column":23},"end":{"line":83,"column":18}},"id":41},"42":{"loc":{"start":{"line":51,"column":20},"end":{"line":51,"column":31}},"id":42},"43":{"loc":{"start":{"line":53,"column":24},"end":{"line":57,"column":26}},"id":43},"44":{"loc":{"start":{"line":53,"column":24},"end":{"line":54,"column":46}},"id":44},"45":{"loc":{"start":{"line":53,"column":24},"end":{"line":53,"column":43}},"id":45},"46":{"loc":{"start":{"line":55,"column":24},"end":{"line":57,"column":26}},"id":46},"47":{"loc":{"start":{"line":56,"column":28},"end":{"line":57,"column":24}},"id":47},"48":{"loc":{"start":{"line":56,"column":35},"end":{"line":56,"column":60}},"id":48},"49":{"loc":{"start":{"line":59,"column":24},"end":{"line":65,"column":27}},"id":49},"50":{"loc":{"start":{"line":59,"column":24},"end":{"line":65,"column":26}},"id":50},"51":{"loc":{"start":{"line":60,"column":32},"end":{"line":60,"column":46}},"id":51},"52":{"loc":{"start":{"line":60,"column":36},"end":{"line":60,"column":46}},"id":52},"53":{"loc":{"start":{"line":61,"column":32},"end":{"line":61,"column":73}},"id":53},"54":{"loc":{"start":{"line":61,"column":32},"end":{"line":61,"column":72}},"id":54},"55":{"loc":{"start":{"line":63,"column":32},"end":{"line":63,"column":71}},"id":55},"56":{"loc":{"start":{"line":63,"column":32},"end":{"line":63,"column":70}},"id":56},"57":{"loc":{"start":{"line":67,"column":24},"end":{"line":67,"column":32}},"id":57},"58":{"loc":{"start":{"line":68,"column":24},"end":{"line":74,"column":27}},"id":58},"59":{"loc":{"start":{"line":68,"column":35},"end":{"line":74,"column":26}},"id":59},"60":{"loc":{"start":{"line":69,"column":28},"end":{"line":73,"column":31}},"id":60},"61":{"loc":{"start":{"line":69,"column":34},"end":{"line":73,"column":30}},"id":61},"62":{"loc":{"start":{"line":70,"column":32},"end":{"line":72,"column":35}},"id":62},"63":{"loc":{"start":{"line":70,"column":39},"end":{"line":72,"column":34}},"id":63},"64":{"loc":{"start":{"line":71,"column":36},"end":{"line":71,"column":77}},"id":64},"65":{"loc":{"start":{"line":71,"column":36},"end":{"line":71,"column":76}},"id":65},"66":{"loc":{"start":{"line":75,"column":24},"end":{"line":79,"column":27}},"id":66},"67":{"loc":{"start":{"line":75,"column":31},"end":{"line":79,"column":26}},"id":67},"68":{"loc":{"start":{"line":76,"column":28},"end":{"line":78,"column":31}},"id":68},"69":{"loc":{"start":{"line":76,"column":35},"end":{"line":78,"column":30}},"id":69},"70":{"loc":{"start":{"line":77,"column":32},"end":{"line":77,"column":48}},"id":70},"71":{"loc":{"start":{"line":77,"column":32},"end":{"line":77,"column":47}},"id":71},"72":{"loc":{"start":{"line":81,"column":24},"end":{"line":81,"column":40}},"id":72},"73":{"loc":{"start":{"line":81,"column":24},"end":{"line":81,"column":39}},"id":73},"74":{"loc":{"start":{"line":91,"column":4},"end":{"line":91,"column":28}},"id":74},"75":{"loc":{"start":{"line":91,"column":18},"end":{"line":91,"column":27}},"id":75},"76":{"loc":{"start":{"line":92,"column":4},"end":{"line":98,"column":7}},"id":76},"77":{"loc":{"start":{"line":92,"column":4},"end":{"line":98,"column":6}},"id":77},"78":{"loc":{"start":{"line":94,"column":12},"end":{"line":94,"column":32}},"id":78},"79":{"loc":{"start":{"line":94,"column":12},"end":{"line":94,"column":31}},"id":79},"80":{"loc":{"start":{"line":96,"column":12},"end":{"line":96,"column":30}},"id":80},"81":{"loc":{"start":{"line":96,"column":12},"end":{"line":96,"column":29}},"id":81},"82":{"loc":{"start":{"line":105,"column":4},"end":{"line":109,"column":6}},"id":82},"83":{"loc":{"start":{"line":106,"column":8},"end":{"line":106,"column":23}},"id":83},"84":{"loc":{"start":{"line":106,"column":8},"end":{"line":106,"column":22}},"id":84},"85":{"loc":{"start":{"line":107,"column":8},"end":{"line":107,"column":30}},"id":85},"86":{"loc":{"start":{"line":108,"column":8},"end":{"line":108,"column":31}},"id":86},"87":{"loc":{"start":{"line":111,"column":4},"end":{"line":111,"column":30}},"id":87},"88":{"loc":{"start":{"line":111,"column":20},"end":{"line":111,"column":29}},"id":88},"89":{"loc":{"start":{"line":112,"column":4},"end":{"line":118,"column":7}},"id":89},"90":{"loc":{"start":{"line":112,"column":4},"end":{"line":118,"column":6}},"id":90},"91":{"loc":{"start":{"line":114,"column":12},"end":{"line":114,"column":34}},"id":91},"92":{"loc":{"start":{"line":114,"column":12},"end":{"line":114,"column":33}},"id":92},"93":{"loc":{"start":{"line":116,"column":12},"end":{"line":116,"column":36}},"id":93},"94":{"loc":{"start":{"line":116,"column":12},"end":{"line":116,"column":35}},"id":94},"95":{"loc":{"start":{"line":127,"column":4},"end":{"line":133,"column":6}},"id":95},"96":{"loc":{"start":{"line":128,"column":12},"end":{"line":128,"column":46}},"id":96},"97":{"loc":{"start":{"line":129,"column":12},"end":{"line":130,"column":38}},"id":97},"98":{"loc":{"start":{"line":129,"column":19},"end":{"line":130,"column":37}},"id":98},"99":{"loc":{"start":{"line":129,"column":38},"end":{"line":130,"column":35}},"id":99},"100":{"loc":{"start":{"line":131,"column":8},"end":{"line":131,"column":47}},"id":100},"101":{"loc":{"start":{"line":131,"column":8},"end":{"line":131,"column":46}},"id":101},"102":{"loc":{"start":{"line":132,"column":8},"end":{"line":132,"column":33}},"id":102},"103":{"loc":{"start":{"line":135,"column":4},"end":{"line":135,"column":35}},"id":103},"104":{"loc":{"start":{"line":137,"column":4},"end":{"line":137,"column":23}},"id":104},"105":{"loc":{"start":{"line":138,"column":4},"end":{"line":138,"column":29}},"id":105},"106":{"loc":{"start":{"line":139,"column":4},"end":{"line":139,"column":47}},"id":106},"107":{"loc":{"start":{"line":139,"column":19},"end":{"line":139,"column":46}},"id":107},"108":{"loc":{"start":{"line":141,"column":4},"end":{"line":141,"column":16}},"id":108},"109":{"loc":{"start":{"line":144,"column":0},"end":{"line":158,"column":3}},"id":109},"110":{"loc":{"start":{"line":144,"column":0},"end":{"line":158,"column":2}},"id":110},"111":{"loc":{"start":{"line":148,"column":12},"end":{"line":148,"column":34}},"id":111},"112":{"loc":{"start":{"line":154,"column":12},"end":{"line":154,"column":34}},"id":112},"113":{"loc":{"start":{"line":164,"column":0},"end":{"line":212,"column":2}},"id":113},"114":{"loc":{"start":{"line":165,"column":4},"end":{"line":165,"column":42}},"id":114},"115":{"loc":{"start":{"line":165,"column":18},"end":{"line":165,"column":41}},"id":115},"116":{"loc":{"start":{"line":167,"column":4},"end":{"line":167,"column":70}},"id":116},"117":{"loc":{"start":{"line":167,"column":22},"end":{"line":167,"column":69}},"id":117},"118":{"loc":{"start":{"line":167,"column":48},"end":{"line":167,"column":53}},"id":118},"119":{"loc":{"start":{"line":169,"column":4},"end":{"line":169,"column":37}},"id":119},"120":{"loc":{"start":{"line":171,"column":4},"end":{"line":171,"column":32}},"id":120},"121":{"loc":{"start":{"line":175,"column":4},"end":{"line":175,"column":56}},"id":121},"122":{"loc":{"start":{"line":175,"column":32},"end":{"line":175,"column":46}},"id":122},"123":{"loc":{"start":{"line":178,"column":4},"end":{"line":178,"column":28}},"id":123},"124":{"loc":{"start":{"line":180,"column":4},"end":{"line":180,"column":28}},"id":124},"125":{"loc":{"start":{"line":182,"column":4},"end":{"line":182,"column":41}},"id":125},"126":{"loc":{"start":{"line":183,"column":4},"end":{"line":183,"column":54}},"id":126},"127":{"loc":{"start":{"line":183,"column":46},"end":{"line":183,"column":48}},"id":127},"128":{"loc":{"start":{"line":185,"column":4},"end":{"line":185,"column":33}},"id":128},"129":{"loc":{"start":{"line":187,"column":4},"end":{"line":187,"column":46}},"id":129},"130":{"loc":{"start":{"line":189,"column":4},"end":{"line":189,"column":43}},"id":130},"131":{"loc":{"start":{"line":192,"column":4},"end":{"line":197,"column":7}},"id":131},"132":{"loc":{"start":{"line":192,"column":18},"end":{"line":197,"column":6}},"id":132},"133":{"loc":{"start":{"line":195,"column":50},"end":{"line":195,"column":54}},"id":133},"134":{"loc":{"start":{"line":195,"column":57},"end":{"line":195,"column":69}},"id":134},"135":{"loc":{"start":{"line":195,"column":14},"end":{"line":195,"column":47}},"id":135},"136":{"loc":{"start":{"line":195,"column":38},"end":{"line":195,"column":41}},"id":136},"137":{"loc":{"start":{"line":195,"column":44},"end":{"line":195,"column":46}},"id":137},"138":{"loc":{"start":{"line":199,"column":4},"end":{"line":199,"column":36}},"id":138},"139":{"loc":{"start":{"line":199,"column":19},"end":{"line":199,"column":35}},"id":139},"140":{"loc":{"start":{"line":201,"column":4},"end":{"line":201,"column":39}},"id":140},"141":{"loc":{"start":{"line":203,"column":4},"end":{"line":203,"column":28}},"id":141},"142":{"loc":{"start":{"line":204,"column":4},"end":{"line":204,"column":35}},"id":142},"143":{"loc":{"start":{"line":206,"column":4},"end":{"line":206,"column":49}},"id":143},"144":{"loc":{"start":{"line":208,"column":4},"end":{"line":211,"column":7}},"id":144},"145":{"loc":{"start":{"line":208,"column":11},"end":{"line":211,"column":6}},"id":145},"146":{"loc":{"start":{"line":209,"column":8},"end":{"line":209,"column":28}},"id":146},"147":{"loc":{"start":{"line":210,"column":8},"end":{"line":210,"column":23}},"id":147},"148":{"loc":{"start":{"line":214,"column":0},"end":{"line":220,"column":2}},"id":148},"149":{"loc":{"start":{"line":215,"column":4},"end":{"line":215,"column":44}},"id":149},"150":{"loc":{"start":{"line":215,"column":19},"end":{"line":215,"column":43}},"id":150},"151":{"loc":{"start":{"line":216,"column":4},"end":{"line":216,"column":23}},"id":151},"152":{"loc":{"start":{"line":217,"column":4},"end":{"line":217,"column":30}},"id":152},"153":{"loc":{"start":{"line":218,"column":4},"end":{"line":218,"column":38}},"id":153},"154":{"loc":{"start":{"line":219,"column":4},"end":{"line":219,"column":20}},"id":154},"155":{"loc":{"start":{"line":222,"column":0},"end":{"line":239,"column":2}},"id":155},"156":{"loc":{"start":{"line":223,"column":8},"end":{"line":223,"column":35}},"id":156},"157":{"loc":{"start":{"line":224,"column":8},"end":{"line":226,"column":10}},"id":157},"158":{"loc":{"start":{"line":229,"column":8},"end":{"line":229,"column":41}},"id":158},"159":{"loc":{"start":{"line":229,"column":18},"end":{"line":229,"column":40}},"id":159},"160":{"loc":{"start":{"line":230,"column":8},"end":{"line":230,"column":36}},"id":160},"161":{"loc":{"start":{"line":231,"column":8},"end":{"line":231,"column":32}},"id":161},"162":{"loc":{"start":{"line":232,"column":8},"end":{"line":232,"column":48}},"id":162},"163":{"loc":{"start":{"line":232,"column":22},"end":{"line":232,"column":47}},"id":163},"164":{"loc":{"start":{"line":233,"column":8},"end":{"line":233,"column":49}},"id":164},"165":{"loc":{"start":{"line":233,"column":25},"end":{"line":233,"column":48}},"id":165},"166":{"loc":{"start":{"line":234,"column":8},"end":{"line":234,"column":65}},"id":166},"167":{"loc":{"start":{"line":234,"column":23},"end":{"line":234,"column":64}},"id":167},"168":{"loc":{"start":{"line":234,"column":23},"end":{"line":234,"column":43}},"id":168},"169":{"loc":{"start":{"line":234,"column":46},"end":{"line":234,"column":64}},"id":169},"170":{"loc":{"start":{"line":235,"column":8},"end":{"line":235,"column":48}},"id":170},"171":{"loc":{"start":{"line":235,"column":26},"end":{"line":235,"column":47}},"id":171},"172":{"loc":{"start":{"line":236,"column":8},"end":{"line":236,"column":44}},"id":172},"173":{"loc":{"start":{"line":238,"column":4},"end":{"line":238,"column":19}},"id":173},"174":{"loc":{"start":{"line":241,"column":0},"end":{"line":256,"column":2}},"id":174},"175":{"loc":{"start":{"line":242,"column":8},"end":{"line":242,"column":27}},"id":175},"176":{"loc":{"start":{"line":243,"column":8},"end":{"line":243,"column":15}},"id":176},"177":{"loc":{"start":{"line":245,"column":8},"end":{"line":245,"column":35}},"id":177},"178":{"loc":{"start":{"line":246,"column":8},"end":{"line":246,"column":30}},"id":178},"179":{"loc":{"start":{"line":249,"column":8},"end":{"line":254,"column":4}},"id":179},"180":{"loc":{"start":{"line":255,"column":4},"end":{"line":255,"column":20}},"id":180},"181":{"loc":{"start":{"line":265,"column":0},"end":{"line":318,"column":2}},"id":181},"182":{"loc":{"start":{"line":266,"column":4},"end":{"line":317,"column":7}},"id":182},"183":{"loc":{"start":{"line":266,"column":11},"end":{"line":317,"column":6}},"id":183},"184":{"loc":{"start":{"line":268,"column":8},"end":{"line":268,"column":52}},"id":184},"185":{"loc":{"start":{"line":268,"column":18},"end":{"line":268,"column":51}},"id":185},"186":{"loc":{"start":{"line":270,"column":8},"end":{"line":270,"column":33}},"id":186},"187":{"loc":{"start":{"line":270,"column":23},"end":{"line":270,"column":32}},"id":187},"188":{"loc":{"start":{"line":271,"column":8},"end":{"line":271,"column":30}},"id":188},"189":{"loc":{"start":{"line":272,"column":8},"end":{"line":272,"column":38}},"id":189},"190":{"loc":{"start":{"line":272,"column":25},"end":{"line":272,"column":30}},"id":190},"191":{"loc":{"start":{"line":272,"column":33},"end":{"line":272,"column":37}},"id":191},"192":{"loc":{"start":{"line":274,"column":8},"end":{"line":274,"column":44}},"id":192},"193":{"loc":{"start":{"line":274,"column":22},"end":{"line":274,"column":43}},"id":193},"194":{"loc":{"start":{"line":276,"column":8},"end":{"line":276,"column":52}},"id":194},"195":{"loc":{"start":{"line":276,"column":23},"end":{"line":276,"column":51}},"id":195},"196":{"loc":{"start":{"line":278,"column":8},"end":{"line":292,"column":11}},"id":196},"197":{"loc":{"start":{"line":278,"column":23},"end":{"line":292,"column":10}},"id":197},"198":{"loc":{"start":{"line":280,"column":20},"end":{"line":280,"column":52}},"id":198},"199":{"loc":{"start":{"line":280,"column":43},"end":{"line":280,"column":46}},"id":199},"200":{"loc":{"start":{"line":280,"column":49},"end":{"line":280,"column":51}},"id":200},"201":{"loc":{"start":{"line":281,"column":20},"end":{"line":281,"column":39}},"id":201},"202":{"loc":{"start":{"line":282,"column":22},"end":{"line":282,"column":45}},"id":202},"203":{"loc":{"start":{"line":285,"column":12},"end":{"line":285,"column":81}},"id":203},"204":{"loc":{"start":{"line":285,"column":12},"end":{"line":285,"column":80}},"id":204},"205":{"loc":{"start":{"line":285,"column":29},"end":{"line":285,"column":79}},"id":205},"206":{"loc":{"start":{"line":286,"column":12},"end":{"line":291,"column":15}},"id":206},"207":{"loc":{"start":{"line":286,"column":12},"end":{"line":291,"column":14}},"id":207},"208":{"loc":{"start":{"line":289,"column":16},"end":{"line":289,"column":60}},"id":208},"209":{"loc":{"start":{"line":289,"column":16},"end":{"line":289,"column":59}},"id":209},"210":{"loc":{"start":{"line":289,"column":29},"end":{"line":289,"column":58}},"id":210},"211":{"loc":{"start":{"line":289,"column":29},"end":{"line":289,"column":49}},"id":211},"212":{"loc":{"start":{"line":290,"column":16},"end":{"line":290,"column":39}},"id":212},"213":{"loc":{"start":{"line":290,"column":16},"end":{"line":290,"column":38}},"id":213},"214":{"loc":{"start":{"line":294,"column":8},"end":{"line":296,"column":11}},"id":214},"215":{"loc":{"start":{"line":294,"column":8},"end":{"line":296,"column":10}},"id":215},"216":{"loc":{"start":{"line":295,"column":12},"end":{"line":295,"column":35}},"id":216},"217":{"loc":{"start":{"line":295,"column":12},"end":{"line":295,"column":34}},"id":217},"218":{"loc":{"start":{"line":298,"column":8},"end":{"line":314,"column":11}},"id":218},"219":{"loc":{"start":{"line":298,"column":8},"end":{"line":314,"column":10}},"id":219},"220":{"loc":{"start":{"line":299,"column":12},"end":{"line":299,"column":26}},"id":220},"221":{"loc":{"start":{"line":301,"column":16},"end":{"line":307,"column":19}},"id":221},"222":{"loc":{"start":{"line":301,"column":23},"end":{"line":307,"column":18}},"id":222},"223":{"loc":{"start":{"line":302,"column":20},"end":{"line":306,"column":23}},"id":223},"224":{"loc":{"start":{"line":302,"column":26},"end":{"line":306,"column":22}},"id":224},"225":{"loc":{"start":{"line":303,"column":24},"end":{"line":305,"column":27}},"id":225},"226":{"loc":{"start":{"line":303,"column":31},"end":{"line":305,"column":26}},"id":226},"227":{"loc":{"start":{"line":304,"column":28},"end":{"line":304,"column":67}},"id":227},"228":{"loc":{"start":{"line":304,"column":28},"end":{"line":304,"column":66}},"id":228},"229":{"loc":{"start":{"line":309,"column":12},"end":{"line":313,"column":15}},"id":229},"230":{"loc":{"start":{"line":309,"column":19},"end":{"line":313,"column":14}},"id":230},"231":{"loc":{"start":{"line":310,"column":16},"end":{"line":312,"column":19}},"id":231},"232":{"loc":{"start":{"line":310,"column":23},"end":{"line":312,"column":18}},"id":232},"233":{"loc":{"start":{"line":311,"column":20},"end":{"line":311,"column":35}},"id":233},"234":{"loc":{"start":{"line":311,"column":20},"end":{"line":311,"column":34}},"id":234},"235":{"loc":{"start":{"line":316,"column":8},"end":{"line":316,"column":32}},"id":235},"236":{"loc":{"start":{"line":330,"column":0},"end":{"line":342,"column":2}},"id":236},"237":{"loc":{"start":{"line":331,"column":4},"end":{"line":333,"column":6}},"id":237},"238":{"loc":{"start":{"line":331,"column":16},"end":{"line":333,"column":5}},"id":238},"239":{"loc":{"start":{"line":332,"column":8},"end":{"line":332,"column":39}},"id":239},"240":{"loc":{"start":{"line":332,"column":15},"end":{"line":332,"column":38}},"id":240},"241":{"loc":{"start":{"line":334,"column":4},"end":{"line":341,"column":7}},"id":241},"242":{"loc":{"start":{"line":334,"column":11},"end":{"line":341,"column":6}},"id":242},"243":{"loc":{"start":{"line":334,"column":18},"end":{"line":334,"column":42}},"id":243},"244":{"loc":{"start":{"line":335,"column":13},"end":{"line":335,"column":32}},"id":244},"245":{"loc":{"start":{"line":336,"column":12},"end":{"line":336,"column":86}},"id":245},"246":{"loc":{"start":{"line":336,"column":34},"end":{"line":336,"column":84}},"id":246},"247":{"loc":{"start":{"line":337,"column":12},"end":{"line":337,"column":38}},"id":247},"248":{"loc":{"start":{"line":338,"column":12},"end":{"line":338,"column":24}},"id":248},"249":{"loc":{"start":{"line":340,"column":8},"end":{"line":340,"column":49}},"id":249},"250":{"loc":{"start":{"line":340,"column":15},"end":{"line":340,"column":48}},"id":250},"251":{"loc":{"start":{"line":350,"column":0},"end":{"line":368,"column":2}},"id":251},"252":{"loc":{"start":{"line":351,"column":4},"end":{"line":351,"column":67}},"id":252},"253":{"loc":{"start":{"line":351,"column":19},"end":{"line":351,"column":66}},"id":253},"254":{"loc":{"start":{"line":353,"column":4},"end":{"line":353,"column":43}},"id":254},"255":{"loc":{"start":{"line":355,"column":4},"end":{"line":355,"column":45}},"id":255},"256":{"loc":{"start":{"line":357,"column":4},"end":{"line":357,"column":41}},"id":256},"257":{"loc":{"start":{"line":361,"column":4},"end":{"line":361,"column":30}},"id":257},"258":{"loc":{"start":{"line":362,"column":4},"end":{"line":362,"column":38}},"id":258},"259":{"loc":{"start":{"line":363,"column":4},"end":{"line":363,"column":51}},"id":259},"260":{"loc":{"start":{"line":364,"column":4},"end":{"line":367,"column":7}},"id":260},"261":{"loc":{"start":{"line":364,"column":11},"end":{"line":367,"column":6}},"id":261},"262":{"loc":{"start":{"line":364,"column":18},"end":{"line":364,"column":44}},"id":262},"263":{"loc":{"start":{"line":365,"column":8},"end":{"line":365,"column":29}},"id":263},"264":{"loc":{"start":{"line":366,"column":8},"end":{"line":366,"column":24}},"id":264}}}},"/Users/kris/q-io/http-apps.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"37":{"index":37,"count":1},"38":{"index":38,"count":1},"39":{"index":39,"count":1},"40":{"index":40,"count":1},"41":{"index":41,"count":1},"42":{"index":42,"count":1},"43":{"index":43,"count":1},"44":{"index":44,"count":1},"45":{"index":45,"count":1},"46":{"index":46,"count":1},"47":{"index":47,"count":1},"48":{"index":48,"count":1},"49":{"index":49,"count":1},"50":{"index":50,"count":1},"51":{"index":51,"count":1},"52":{"index":52,"count":1},"53":{"index":53,"count":1},"54":{"index":54,"count":1},"55":{"index":55,"count":1},"56":{"index":56,"count":1},"57":{"index":57,"count":1},"58":{"index":58,"count":1},"59":{"index":59,"count":1},"60":{"index":60,"count":1},"61":{"index":61,"count":1},"62":{"index":62,"count":1},"63":{"index":63,"count":1},"64":{"index":64,"count":1},"65":{"index":65,"count":1},"66":{"index":66,"count":1},"67":{"index":67,"count":1},"68":{"index":68,"count":1},"69":{"index":69,"count":1},"70":{"index":70,"count":1},"71":{"index":71,"count":1},"72":{"index":72,"count":1},"73":{"index":73,"count":1},"74":{"index":74,"count":1},"75":{"index":75,"count":1},"76":{"index":76,"count":1},"77":{"index":77,"count":1},"78":{"index":78,"count":1},"79":{"index":79,"count":1},"80":{"index":80,"count":1},"81":{"index":81,"count":1},"82":{"index":82,"count":1},"83":{"index":83,"count":1},"84":{"index":84,"count":1},"85":{"index":85,"count":1},"86":{"index":86,"count":1},"87":{"index":87,"count":1},"88":{"index":88,"count":1},"89":{"index":89,"count":1},"90":{"index":90,"count":1},"91":{"index":91,"count":1},"92":{"index":92,"count":1},"93":{"index":93,"count":1},"94":{"index":94,"count":1},"95":{"index":95,"count":1},"96":{"index":96,"count":1},"97":{"index":97,"count":1},"98":{"index":98,"count":1},"99":{"index":99,"count":1},"100":{"index":100,"count":1},"101":{"index":101,"count":1},"102":{"index":102,"count":1},"103":{"index":103,"count":1},"104":{"index":104,"count":1},"105":{"index":105,"count":1},"106":{"index":106,"count":1},"107":{"index":107,"count":1},"108":{"index":108,"count":1},"109":{"index":109,"count":1},"110":{"index":110,"count":1},"111":{"index":111,"count":1},"112":{"index":112,"count":1},"113":{"index":113,"count":1},"114":{"index":114,"count":1}},"blocks":{},"hash":"aab528a3d414d2619a1ece261b28b54c","instrumentor":{"blockCounter":0,"nodeCounter":115,"source":"/**\n * Provides tools for making, routing, adapting, and decorating\n * Q-JSGI web applications.\n *\n * Duck Types\n * ----------\n *\n * A Q-JSGI _app_ is a function that accepts a request and returns a\n * response.  The response may be promised.\n *\n * A Q-JSGI _request_ is an object or a promise for an object that has\n * the following properties:\n *\n * * `method` is the HTTP request method as a string.\n * * `path` is a string, guaranteed to start with `\"/\"`.\n * * `headers` is an object mapping lower-case HTTP headers to\n *   their corresponding values as strings.\n * * `body` is a Q-JSGI content body.\n *\n * A Q-JSGI _response_ is an object or a promise for an object that\n * has the following properties:\n *\n * * `status` is the HTTP response status code as a number.\n * * `headers` is an object mapping lower-case HTTP headers to their\n *   corresponding values as strings.\n * * `body` is a Q-JSGI content body.\n *\n * A Q-JSGI response and request content _body_ can be as simple as an\n * array of strings.  It can be a promise.  In general, it must be an\n * object that has a `forEach` method.  The `forEach` method accepts a\n * `write` function.  It goes without saying that `forEach` returns\n * `undefined`, but it can return a promise for `undefined` that will\n * resolve when it has made all of its `write` calls and the request\n * or response can be closed, re-used, or kept alive..  The `forEach`\n * function may call `write` with a `String` any number of times.  The\n * `String` may be promised.\n *\n * @module\n */\n\nrequire(\"collections/shim\");\nvar Q = require(\"q\");\nvar HTTP = require(\"./http\");\nvar FS = require(\"./fs\");\nvar URL = require(\"url2\");\nvar inspect = require(\"util\").inspect;\n\nexports.Chain = require(\"./http-apps/chain\");\n\nvar RouteApps = require(\"./http-apps/route\");\nexports.Cap = RouteApps.Cap;\nexports.Tap = RouteApps.Tap;\nexports.Trap = RouteApps.Trap;\nexports.Branch = RouteApps.Branch;\n\nvar ContentApps = require(\"./http-apps/content\");\nexports.Content = ContentApps.Content;\nexports.content = ContentApps.content;\nexports.ok = ContentApps.ok;\nexports.ContentRequest = ContentApps.ContentRequest;\nexports.Inspect = ContentApps.Inspect;\nexports.ParseQuery = ContentApps.ParseQuery;\n\nvar FsApps = require(\"./http-apps/fs\");\nexports.File = FsApps.File;\nexports.FileTree = FsApps.FileTree;\nexports.file = FsApps.file;\nexports.directory = FsApps.directory;\nexports.etag = FsApps.etag;\n\nexports.ListDirectories = FsApps.ListDirectories;\nexports.listDirectory = FsApps.listDirectory;\nexports.listDirectoryHtmlFragment = FsApps.listDirectoryHtmlFragment;\nexports.listDirectoryText = FsApps.listDirectoryText;\nexports.listDirectoryMarkdown = FsApps.listDirectoryMarkdown;\nexports.listDirectoryJson = FsApps.listDirectoryJson;\nexports.listDirectoryData = FsApps.listDirectoryData;\nexports.DirectoryIndex = FsApps.DirectoryIndex;\n\nvar HtmlApps = require(\"./http-apps/html\");\nexports.HandleHtmlFragmentResponses = HtmlApps.HandleHtmlFragmentResponses;\nexports.handleHtmlFragmentResponse = HtmlApps.handleHtmlFragmentResponse;\nexports.escapeHtml = HtmlApps.escapeHtml;\n\nvar JsonApps = require(\"./http-apps/json\");\nexports.HandleJsonResponses = JsonApps.HandleJsonResponses;\nexports.handleJsonResponse = JsonApps.handleJsonResponse;\nexports.Json = JsonApps.Json;\nexports.json = JsonApps.json;\nexports.JsonRequest = JsonApps.JsonRequest;\n\nvar RedirectApps = require(\"./http-apps/redirect\");\nexports.PermanentRedirect = RedirectApps.PermanentRedirect;\nexports.PermanentRedirectTree = RedirectApps.PermanentRedirectTree;\nexports.TemporaryRedirect = RedirectApps.TemporaryRedirect;\nexports.TemporaryRedirectTree = RedirectApps.TemporaryRedirectTree;\nexports.Redirect = RedirectApps.Redirect;\nexports.RedirectTree = RedirectApps.RedirectTree;\nexports.permanentRedirect = RedirectApps.permanentRedirect;\nexports.permanentRedirectTree = RedirectApps.permanentRedirectTree;\nexports.temporaryRedirect = RedirectApps.temporaryRedirect;\nexports.temporaryRedirectTree = RedirectApps.temporaryRedirectTree;\nexports.redirectTree = RedirectApps.redirectTree;\nexports.redirect = RedirectApps.redirect;\nexports.redirectText = RedirectApps.redirectText;\nexports.redirectHtml = RedirectApps.redirectHtml;\nexports.RedirectTrap = RedirectApps.RedirectTrap;\nexports.isRedirect = RedirectApps.isRedirect;\n\nvar ProxyApps = require(\"./http-apps/proxy\");\nexports.Proxy = ProxyApps.Proxy;\nexports.ProxyTree = ProxyApps.ProxyTree;\n\nvar NegotiationApps = require(\"./http-apps/negotiate\");\nexports.negotiate = NegotiationApps.negotiate;\nexports.Method = NegotiationApps.Method;\nexports.ContentType = NegotiationApps.ContentType;\nexports.Language = NegotiationApps.Language;\nexports.Charset = NegotiationApps.Charset;\nexports.Encoding = NegotiationApps.Encoding;\nexports.Host = NegotiationApps.Host;\nexports.Select = NegotiationApps.Select;\n\nvar StatusApps = require(\"./http-apps/status\");\nexports.statusCodes = StatusApps.statusCodes;\nexports.statusMessages = StatusApps.statusMessages;\nexports.statusWithNoEntityBody = StatusApps.statusWithNoEntityBody;\nexports.appForStatus = StatusApps.appForStatus;\nexports.responseForStatus = StatusApps.responseForStatus;\nexports.textResponseForStatus = StatusApps.textResponseForStatus;\nexports.htmlResponseForStatus = StatusApps.htmlResponseForStatus;\nexports.badRequest = StatusApps.badRequest;\nexports.notFound = StatusApps.notFound;\nexports.methodNotAllowed = StatusApps.methodNotAllowed;\nexports.noLanguage = StatusApps.noLanguage;\nexports.notAcceptable = StatusApps.notAcceptable;\n\nvar DecoratorApps = require(\"./http-apps/decorators\");\nexports.Normalize = DecoratorApps.Normalize;\nexports.Date = DecoratorApps.Date;\nexports.Error = DecoratorApps.Error;\nexports.Debug = DecoratorApps.Debug;\nexports.Log = DecoratorApps.Log;\nexports.Time = DecoratorApps.Time;\nexports.Headers = DecoratorApps.Headers;\nexports.Permanent = DecoratorApps.Permanent;\nexports.Decorators = DecoratorApps.Decorators;\n\nvar CookieApps = require(\"./http-apps/cookie\");\nexports.CookieJar = CookieApps.CookieJar;","nodes":{"0":{"loc":{"start":{"line":41,"column":0},"end":{"line":41,"column":28}},"id":0},"1":{"loc":{"start":{"line":41,"column":0},"end":{"line":41,"column":27}},"id":1},"2":{"loc":{"start":{"line":42,"column":0},"end":{"line":42,"column":21}},"id":2},"3":{"loc":{"start":{"line":42,"column":8},"end":{"line":42,"column":20}},"id":3},"4":{"loc":{"start":{"line":43,"column":0},"end":{"line":43,"column":29}},"id":4},"5":{"loc":{"start":{"line":43,"column":11},"end":{"line":43,"column":28}},"id":5},"6":{"loc":{"start":{"line":44,"column":0},"end":{"line":44,"column":25}},"id":6},"7":{"loc":{"start":{"line":44,"column":9},"end":{"line":44,"column":24}},"id":7},"8":{"loc":{"start":{"line":45,"column":0},"end":{"line":45,"column":26}},"id":8},"9":{"loc":{"start":{"line":45,"column":10},"end":{"line":45,"column":25}},"id":9},"10":{"loc":{"start":{"line":46,"column":0},"end":{"line":46,"column":38}},"id":10},"11":{"loc":{"start":{"line":46,"column":21},"end":{"line":46,"column":29}},"id":11},"12":{"loc":{"start":{"line":48,"column":0},"end":{"line":48,"column":45}},"id":12},"13":{"loc":{"start":{"line":48,"column":16},"end":{"line":48,"column":44}},"id":13},"14":{"loc":{"start":{"line":50,"column":0},"end":{"line":50,"column":45}},"id":14},"15":{"loc":{"start":{"line":50,"column":16},"end":{"line":50,"column":44}},"id":15},"16":{"loc":{"start":{"line":51,"column":0},"end":{"line":51,"column":28}},"id":16},"17":{"loc":{"start":{"line":52,"column":0},"end":{"line":52,"column":28}},"id":17},"18":{"loc":{"start":{"line":53,"column":0},"end":{"line":53,"column":30}},"id":18},"19":{"loc":{"start":{"line":54,"column":0},"end":{"line":54,"column":34}},"id":19},"20":{"loc":{"start":{"line":56,"column":0},"end":{"line":56,"column":49}},"id":20},"21":{"loc":{"start":{"line":56,"column":18},"end":{"line":56,"column":48}},"id":21},"22":{"loc":{"start":{"line":57,"column":0},"end":{"line":57,"column":38}},"id":22},"23":{"loc":{"start":{"line":58,"column":0},"end":{"line":58,"column":38}},"id":23},"24":{"loc":{"start":{"line":59,"column":0},"end":{"line":59,"column":28}},"id":24},"25":{"loc":{"start":{"line":60,"column":0},"end":{"line":60,"column":52}},"id":25},"26":{"loc":{"start":{"line":61,"column":0},"end":{"line":61,"column":38}},"id":26},"27":{"loc":{"start":{"line":62,"column":0},"end":{"line":62,"column":44}},"id":27},"28":{"loc":{"start":{"line":64,"column":0},"end":{"line":64,"column":39}},"id":28},"29":{"loc":{"start":{"line":64,"column":13},"end":{"line":64,"column":38}},"id":29},"30":{"loc":{"start":{"line":65,"column":0},"end":{"line":65,"column":27}},"id":30},"31":{"loc":{"start":{"line":66,"column":0},"end":{"line":66,"column":35}},"id":31},"32":{"loc":{"start":{"line":67,"column":0},"end":{"line":67,"column":27}},"id":32},"33":{"loc":{"start":{"line":68,"column":0},"end":{"line":68,"column":37}},"id":33},"34":{"loc":{"start":{"line":69,"column":0},"end":{"line":69,"column":27}},"id":34},"35":{"loc":{"start":{"line":71,"column":0},"end":{"line":71,"column":49}},"id":35},"36":{"loc":{"start":{"line":72,"column":0},"end":{"line":72,"column":45}},"id":36},"37":{"loc":{"start":{"line":73,"column":0},"end":{"line":73,"column":69}},"id":37},"38":{"loc":{"start":{"line":74,"column":0},"end":{"line":74,"column":53}},"id":38},"39":{"loc":{"start":{"line":75,"column":0},"end":{"line":75,"column":61}},"id":39},"40":{"loc":{"start":{"line":76,"column":0},"end":{"line":76,"column":53}},"id":40},"41":{"loc":{"start":{"line":77,"column":0},"end":{"line":77,"column":53}},"id":41},"42":{"loc":{"start":{"line":78,"column":0},"end":{"line":78,"column":47}},"id":42},"43":{"loc":{"start":{"line":80,"column":0},"end":{"line":80,"column":43}},"id":43},"44":{"loc":{"start":{"line":80,"column":15},"end":{"line":80,"column":42}},"id":44},"45":{"loc":{"start":{"line":81,"column":0},"end":{"line":81,"column":75}},"id":45},"46":{"loc":{"start":{"line":82,"column":0},"end":{"line":82,"column":73}},"id":46},"47":{"loc":{"start":{"line":83,"column":0},"end":{"line":83,"column":41}},"id":47},"48":{"loc":{"start":{"line":85,"column":0},"end":{"line":85,"column":43}},"id":48},"49":{"loc":{"start":{"line":85,"column":15},"end":{"line":85,"column":42}},"id":49},"50":{"loc":{"start":{"line":86,"column":0},"end":{"line":86,"column":59}},"id":50},"51":{"loc":{"start":{"line":87,"column":0},"end":{"line":87,"column":57}},"id":51},"52":{"loc":{"start":{"line":88,"column":0},"end":{"line":88,"column":29}},"id":52},"53":{"loc":{"start":{"line":89,"column":0},"end":{"line":89,"column":29}},"id":53},"54":{"loc":{"start":{"line":90,"column":0},"end":{"line":90,"column":43}},"id":54},"55":{"loc":{"start":{"line":92,"column":0},"end":{"line":92,"column":51}},"id":55},"56":{"loc":{"start":{"line":92,"column":19},"end":{"line":92,"column":50}},"id":56},"57":{"loc":{"start":{"line":93,"column":0},"end":{"line":93,"column":59}},"id":57},"58":{"loc":{"start":{"line":94,"column":0},"end":{"line":94,"column":67}},"id":58},"59":{"loc":{"start":{"line":95,"column":0},"end":{"line":95,"column":59}},"id":59},"60":{"loc":{"start":{"line":96,"column":0},"end":{"line":96,"column":67}},"id":60},"61":{"loc":{"start":{"line":97,"column":0},"end":{"line":97,"column":41}},"id":61},"62":{"loc":{"start":{"line":98,"column":0},"end":{"line":98,"column":49}},"id":62},"63":{"loc":{"start":{"line":99,"column":0},"end":{"line":99,"column":59}},"id":63},"64":{"loc":{"start":{"line":100,"column":0},"end":{"line":100,"column":67}},"id":64},"65":{"loc":{"start":{"line":101,"column":0},"end":{"line":101,"column":59}},"id":65},"66":{"loc":{"start":{"line":102,"column":0},"end":{"line":102,"column":67}},"id":66},"67":{"loc":{"start":{"line":103,"column":0},"end":{"line":103,"column":49}},"id":67},"68":{"loc":{"start":{"line":104,"column":0},"end":{"line":104,"column":41}},"id":68},"69":{"loc":{"start":{"line":105,"column":0},"end":{"line":105,"column":49}},"id":69},"70":{"loc":{"start":{"line":106,"column":0},"end":{"line":106,"column":49}},"id":70},"71":{"loc":{"start":{"line":107,"column":0},"end":{"line":107,"column":49}},"id":71},"72":{"loc":{"start":{"line":108,"column":0},"end":{"line":108,"column":45}},"id":72},"73":{"loc":{"start":{"line":110,"column":0},"end":{"line":110,"column":45}},"id":73},"74":{"loc":{"start":{"line":110,"column":16},"end":{"line":110,"column":44}},"id":74},"75":{"loc":{"start":{"line":111,"column":0},"end":{"line":111,"column":32}},"id":75},"76":{"loc":{"start":{"line":112,"column":0},"end":{"line":112,"column":40}},"id":76},"77":{"loc":{"start":{"line":114,"column":0},"end":{"line":114,"column":55}},"id":77},"78":{"loc":{"start":{"line":114,"column":22},"end":{"line":114,"column":54}},"id":78},"79":{"loc":{"start":{"line":115,"column":0},"end":{"line":115,"column":46}},"id":79},"80":{"loc":{"start":{"line":116,"column":0},"end":{"line":116,"column":40}},"id":80},"81":{"loc":{"start":{"line":117,"column":0},"end":{"line":117,"column":50}},"id":81},"82":{"loc":{"start":{"line":118,"column":0},"end":{"line":118,"column":44}},"id":82},"83":{"loc":{"start":{"line":119,"column":0},"end":{"line":119,"column":42}},"id":83},"84":{"loc":{"start":{"line":120,"column":0},"end":{"line":120,"column":44}},"id":84},"85":{"loc":{"start":{"line":121,"column":0},"end":{"line":121,"column":36}},"id":85},"86":{"loc":{"start":{"line":122,"column":0},"end":{"line":122,"column":40}},"id":86},"87":{"loc":{"start":{"line":124,"column":0},"end":{"line":124,"column":47}},"id":87},"88":{"loc":{"start":{"line":124,"column":17},"end":{"line":124,"column":46}},"id":88},"89":{"loc":{"start":{"line":125,"column":0},"end":{"line":125,"column":45}},"id":89},"90":{"loc":{"start":{"line":126,"column":0},"end":{"line":126,"column":51}},"id":90},"91":{"loc":{"start":{"line":127,"column":0},"end":{"line":127,"column":67}},"id":91},"92":{"loc":{"start":{"line":128,"column":0},"end":{"line":128,"column":47}},"id":92},"93":{"loc":{"start":{"line":129,"column":0},"end":{"line":129,"column":57}},"id":93},"94":{"loc":{"start":{"line":130,"column":0},"end":{"line":130,"column":65}},"id":94},"95":{"loc":{"start":{"line":131,"column":0},"end":{"line":131,"column":65}},"id":95},"96":{"loc":{"start":{"line":132,"column":0},"end":{"line":132,"column":43}},"id":96},"97":{"loc":{"start":{"line":133,"column":0},"end":{"line":133,"column":39}},"id":97},"98":{"loc":{"start":{"line":134,"column":0},"end":{"line":134,"column":55}},"id":98},"99":{"loc":{"start":{"line":135,"column":0},"end":{"line":135,"column":43}},"id":99},"100":{"loc":{"start":{"line":136,"column":0},"end":{"line":136,"column":49}},"id":100},"101":{"loc":{"start":{"line":138,"column":0},"end":{"line":138,"column":54}},"id":101},"102":{"loc":{"start":{"line":138,"column":20},"end":{"line":138,"column":53}},"id":102},"103":{"loc":{"start":{"line":139,"column":0},"end":{"line":139,"column":44}},"id":103},"104":{"loc":{"start":{"line":140,"column":0},"end":{"line":140,"column":34}},"id":104},"105":{"loc":{"start":{"line":141,"column":0},"end":{"line":141,"column":36}},"id":105},"106":{"loc":{"start":{"line":142,"column":0},"end":{"line":142,"column":36}},"id":106},"107":{"loc":{"start":{"line":143,"column":0},"end":{"line":143,"column":32}},"id":107},"108":{"loc":{"start":{"line":144,"column":0},"end":{"line":144,"column":34}},"id":108},"109":{"loc":{"start":{"line":145,"column":0},"end":{"line":145,"column":40}},"id":109},"110":{"loc":{"start":{"line":146,"column":0},"end":{"line":146,"column":44}},"id":110},"111":{"loc":{"start":{"line":147,"column":0},"end":{"line":147,"column":46}},"id":111},"112":{"loc":{"start":{"line":149,"column":0},"end":{"line":149,"column":47}},"id":112},"113":{"loc":{"start":{"line":149,"column":17},"end":{"line":149,"column":46}},"id":113},"114":{"loc":{"start":{"line":150,"column":0},"end":{"line":150,"column":41}},"id":114}}}},"/Users/kris/q-io/http-apps/chain.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":5},"2":{"index":2,"count":5},"3":{"index":3,"count":5},"4":{"index":4,"count":5},"5":{"index":5,"count":5},"6":{"index":6,"count":5},"7":{"index":7,"count":1},"10":{"index":10,"count":14},"11":{"index":11,"count":14},"12":{"index":12,"count":14},"13":{"index":13,"count":14},"14":{"index":14,"count":14},"15":{"index":15,"count":14},"16":{"index":16,"count":14},"17":{"index":17,"count":14},"20":{"index":20,"count":14},"21":{"index":21,"count":14},"22":{"index":22,"count":14},"23":{"index":23,"count":14},"24":{"index":24,"count":14},"25":{"index":25,"count":14}},"blocks":{"0":{"index":0,"count":5},"1":{"index":1,"count":5},"2":{"index":2,"count":14},"4":{"index":4,"count":14},"5":{"index":5,"count":14}},"hash":"724d87dd904b80d19083c43efde28c67","instrumentor":{"blockCounter":7,"nodeCounter":26,"source":"module.exports = Chain;\nfunction Chain(end) {\n    var self = Object.create(Chain.prototype);\n    self.end = end || function (next) {\n        return next;\n    };\n    return self;\n};\n\nChain.prototype.use = function (App /*, ...args*/) {\n    if (!App) throw new Error(\"App is not defined after \" + this.app);\n    var args = Array.prototype.slice.call(arguments, 1);\n    var self = this;\n    this.end = (function (End) {\n        return function Self(next) {\n            if (self.end !== Self && !next) throw new Error(\"App chain is broken after \" + App);\n            return End(App.apply(null, [next].concat(args)));\n        };\n    })(this.end);\n    this.app = App;\n    return this;\n};","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":23}},"id":0},"1":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":46}},"id":1},"2":{"loc":{"start":{"line":3,"column":15},"end":{"line":3,"column":45}},"id":2},"3":{"loc":{"start":{"line":4,"column":4},"end":{"line":6,"column":6}},"id":3},"4":{"loc":{"start":{"line":4,"column":15},"end":{"line":6,"column":5}},"id":4},"5":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":20}},"id":5},"6":{"loc":{"start":{"line":7,"column":4},"end":{"line":7,"column":16}},"id":6},"7":{"loc":{"start":{"line":10,"column":0},"end":{"line":22,"column":2}},"id":7},"8":{"loc":{"start":{"line":11,"column":14},"end":{"line":11,"column":70}},"id":8},"9":{"loc":{"start":{"line":11,"column":30},"end":{"line":11,"column":68}},"id":9},"10":{"loc":{"start":{"line":12,"column":4},"end":{"line":12,"column":56}},"id":10},"11":{"loc":{"start":{"line":12,"column":15},"end":{"line":12,"column":55}},"id":11},"12":{"loc":{"start":{"line":13,"column":4},"end":{"line":13,"column":20}},"id":12},"13":{"loc":{"start":{"line":14,"column":4},"end":{"line":19,"column":17}},"id":13},"14":{"loc":{"start":{"line":14,"column":15},"end":{"line":19,"column":16}},"id":14},"15":{"loc":{"start":{"line":15,"column":8},"end":{"line":18,"column":10}},"id":15},"16":{"loc":{"start":{"line":16,"column":16},"end":{"line":16,"column":42}},"id":16},"17":{"loc":{"start":{"line":16,"column":16},"end":{"line":16,"column":33}},"id":17},"18":{"loc":{"start":{"line":16,"column":44},"end":{"line":16,"column":96}},"id":18},"19":{"loc":{"start":{"line":16,"column":60},"end":{"line":16,"column":94}},"id":19},"20":{"loc":{"start":{"line":17,"column":12},"end":{"line":17,"column":61}},"id":20},"21":{"loc":{"start":{"line":17,"column":19},"end":{"line":17,"column":60}},"id":21},"22":{"loc":{"start":{"line":17,"column":23},"end":{"line":17,"column":59}},"id":22},"23":{"loc":{"start":{"line":17,"column":39},"end":{"line":17,"column":58}},"id":23},"24":{"loc":{"start":{"line":20,"column":4},"end":{"line":20,"column":19}},"id":24},"25":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":16}},"id":25}}}},"/Users/kris/q-io/http-apps/route.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":4},"6":{"index":6,"count":4},"7":{"index":7,"count":4},"8":{"index":8,"count":4},"9":{"index":9,"count":4},"10":{"index":10,"count":3},"11":{"index":11,"count":4},"12":{"index":12,"count":4},"15":{"index":15,"count":1},"16":{"index":16,"count":2},"17":{"index":17,"count":2},"18":{"index":18,"count":2},"19":{"index":19,"count":2},"20":{"index":20,"count":2},"22":{"index":22,"count":2},"23":{"index":23,"count":2},"24":{"index":24,"count":1},"25":{"index":25,"count":2},"26":{"index":26,"count":2},"27":{"index":27,"count":2},"28":{"index":28,"count":2},"29":{"index":29,"count":2},"30":{"index":30,"count":2},"31":{"index":31,"count":2},"32":{"index":32,"count":2},"33":{"index":33,"count":2},"34":{"index":34,"count":1},"36":{"index":36,"count":2},"37":{"index":37,"count":2},"38":{"index":38,"count":2},"41":{"index":41,"count":2},"42":{"index":42,"count":2},"43":{"index":43,"count":2},"44":{"index":44,"count":2},"45":{"index":45,"count":2},"46":{"index":46,"count":2},"47":{"index":47,"count":2},"48":{"index":48,"count":2},"49":{"index":49,"count":2},"50":{"index":50,"count":2},"51":{"index":51,"count":2},"52":{"index":52,"count":2},"53":{"index":53,"count":2},"54":{"index":54,"count":2},"55":{"index":55,"count":2},"56":{"index":56,"count":2},"59":{"index":59,"count":1}},"blocks":{"0":{"index":0,"count":4},"1":{"index":1,"count":4},"2":{"index":2,"count":4},"4":{"index":4,"count":2},"5":{"index":5,"count":2},"6":{"index":6,"count":2},"8":{"index":8,"count":2},"9":{"index":9,"count":2},"10":{"index":10,"count":2},"11":{"index":11,"count":2},"12":{"index":12,"count":2},"13":{"index":13,"count":2},"15":{"index":15,"count":2},"16":{"index":16,"count":2},"18":{"index":18,"count":2}},"hash":"8932f49178abb8a03d5acd385d1b2cfc","instrumentor":{"blockCounter":27,"nodeCounter":75,"source":"var Q = require(\"q\");\nvar StatusApps = require(\"./status\");\n\n/**\n * Makes a  Q-JSGI app that only responds when there is nothing left\n * on the path to route.  If the there is unprocessed data on the\n * path, the returned app either forwards to the `notFound` app or\n * returns a `404 Not Found` response.\n *\n * @param {App} app a Q-JSGI application to\n * respond to this end of the routing chain.\n * @param {App} notFound (optional) defaults\n * to the `notFound` app.\n * @returns {App}\n */\nexports.Cap = function (app, notFound) {\n    notFound = notFound || StatusApps.notFound;\n    return function (request, response) {\n        // TODO Distinguish these cases\n        if (request.pathInfo === \"\" || request.pathInfo === \"/\") {\n            return app(request, response);\n        } else {\n            return notFound(request, response);\n        }\n    };\n};\n\n/**\n * Wraps an app with a function that will observe incoming requests\n * before giving the app an opportunity to respond.  If the \"tap\"\n * function returns a response, it will be used in lieu of forwarding\n * the request to the wrapped app.\n */\nexports.Tap = function (app, tap) {\n    return function (request, response) {\n        var self = this, args = arguments;\n        return Q.when(tap.apply(this, arguments), function (response) {\n            if (response) {\n                return response;\n            } else {\n                return app.apply(self, args);\n            }\n        });\n    };\n};\n\n/**\n * Wraps an app with a \"trap\" function that intercepts and may\n * alter or replace the response of the wrapped application.\n */\nexports.Trap = function (app, trap) {\n    return function (request, response) {\n        return Q.when(app.apply(this, arguments), function (response) {\n            if (response) {\n                response.headers = response.headers || {};\n                return trap(response, request) || response;\n            }\n        });\n    };\n};\n\n/**\n * Makes a Q-JSGI app that branches requests based on the next\n * unprocessed path component.\n * @param {Object * App} paths a mapping from path components (single\n * file or directory names) to Q-JSGI applications for subsequent\n * routing.  The mapping may be a plain JavaScript `Object` record,\n * which must own the mapping properties, or an object that has\n * `has(key)` and `get(key)` methods in its prototype chain.\n * @param {App} notFound a Q-JSGI application\n * that handles requests for which the next file name does not exist\n * in paths.\n * @returns {App}\n */\nexports.Branch = function (paths, notFound) {\n    if (!paths)\n        paths = {};\n    if (!notFound)\n        notFound = StatusApps.notFound;\n    return function (request, response) {\n        if (!/^\\//.test(request.pathInfo)) {\n            return notFound(request, response);\n        }\n        var path = request.pathInfo.slice(1);\n        var parts = path.split(\"/\");\n        var part = decodeURIComponent(parts.shift());\n        if (Object.has(paths, part)) {\n            request.scriptName = request.scriptName + part + \"/\";\n            request.pathInfo = path.slice(part.length);\n            return Object.get(paths, part)(request, response);\n        }\n        return notFound(request, response);\n    };\n};\n\n/**\n * Returns the response of the first application that returns a\n * non-404 response status.\n *\n * @param {Array * App} apps a cascade of applications to try\n * successively until one of them returns a non-404 status.\n * @returns {App}\n */\nexports.FirstFound = function (cascade) {\n    return function (request, response) {\n        var i = 0, ii = cascade.length;\n        function next() {\n            var response = cascade[i++](request, response);\n            if (i < ii) {\n                return Q.when(response, function (response) {\n                    if (response.status === 404) {\n                        return next();\n                    } else {\n                        return response;\n                    }\n                });\n            } else {\n                return response;\n            }\n        }\n        return next();\n    };\n};","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":21}},"id":0},"1":{"loc":{"start":{"line":1,"column":8},"end":{"line":1,"column":20}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":37}},"id":2},"3":{"loc":{"start":{"line":2,"column":17},"end":{"line":2,"column":36}},"id":3},"4":{"loc":{"start":{"line":16,"column":0},"end":{"line":26,"column":2}},"id":4},"5":{"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":47}},"id":5},"6":{"loc":{"start":{"line":17,"column":15},"end":{"line":17,"column":46}},"id":6},"7":{"loc":{"start":{"line":18,"column":4},"end":{"line":25,"column":6}},"id":7},"8":{"loc":{"start":{"line":20,"column":12},"end":{"line":20,"column":63}},"id":8},"9":{"loc":{"start":{"line":20,"column":12},"end":{"line":20,"column":35}},"id":9},"10":{"loc":{"start":{"line":20,"column":39},"end":{"line":20,"column":63}},"id":10},"11":{"loc":{"start":{"line":21,"column":12},"end":{"line":21,"column":42}},"id":11},"12":{"loc":{"start":{"line":21,"column":19},"end":{"line":21,"column":41}},"id":12},"13":{"loc":{"start":{"line":23,"column":12},"end":{"line":23,"column":47}},"id":13},"14":{"loc":{"start":{"line":23,"column":19},"end":{"line":23,"column":46}},"id":14},"15":{"loc":{"start":{"line":34,"column":0},"end":{"line":45,"column":2}},"id":15},"16":{"loc":{"start":{"line":35,"column":4},"end":{"line":44,"column":6}},"id":16},"17":{"loc":{"start":{"line":36,"column":8},"end":{"line":36,"column":42}},"id":17},"18":{"loc":{"start":{"line":37,"column":8},"end":{"line":43,"column":11}},"id":18},"19":{"loc":{"start":{"line":37,"column":15},"end":{"line":43,"column":10}},"id":19},"20":{"loc":{"start":{"line":37,"column":22},"end":{"line":37,"column":48}},"id":20},"21":{"loc":{"start":{"line":39,"column":16},"end":{"line":39,"column":32}},"id":21},"22":{"loc":{"start":{"line":41,"column":16},"end":{"line":41,"column":45}},"id":22},"23":{"loc":{"start":{"line":41,"column":23},"end":{"line":41,"column":44}},"id":23},"24":{"loc":{"start":{"line":51,"column":0},"end":{"line":60,"column":2}},"id":24},"25":{"loc":{"start":{"line":52,"column":4},"end":{"line":59,"column":6}},"id":25},"26":{"loc":{"start":{"line":53,"column":8},"end":{"line":58,"column":11}},"id":26},"27":{"loc":{"start":{"line":53,"column":15},"end":{"line":58,"column":10}},"id":27},"28":{"loc":{"start":{"line":53,"column":22},"end":{"line":53,"column":48}},"id":28},"29":{"loc":{"start":{"line":55,"column":16},"end":{"line":55,"column":58}},"id":29},"30":{"loc":{"start":{"line":55,"column":35},"end":{"line":55,"column":57}},"id":30},"31":{"loc":{"start":{"line":56,"column":16},"end":{"line":56,"column":59}},"id":31},"32":{"loc":{"start":{"line":56,"column":23},"end":{"line":56,"column":58}},"id":32},"33":{"loc":{"start":{"line":56,"column":23},"end":{"line":56,"column":46}},"id":33},"34":{"loc":{"start":{"line":75,"column":0},"end":{"line":94,"column":2}},"id":34},"35":{"loc":{"start":{"line":77,"column":8},"end":{"line":77,"column":19}},"id":35},"36":{"loc":{"start":{"line":79,"column":8},"end":{"line":79,"column":39}},"id":36},"37":{"loc":{"start":{"line":80,"column":4},"end":{"line":93,"column":6}},"id":37},"38":{"loc":{"start":{"line":81,"column":13},"end":{"line":81,"column":41}},"id":38},"39":{"loc":{"start":{"line":82,"column":12},"end":{"line":82,"column":47}},"id":39},"40":{"loc":{"start":{"line":82,"column":19},"end":{"line":82,"column":46}},"id":40},"41":{"loc":{"start":{"line":84,"column":8},"end":{"line":84,"column":45}},"id":41},"42":{"loc":{"start":{"line":84,"column":19},"end":{"line":84,"column":44}},"id":42},"43":{"loc":{"start":{"line":85,"column":8},"end":{"line":85,"column":36}},"id":43},"44":{"loc":{"start":{"line":85,"column":20},"end":{"line":85,"column":35}},"id":44},"45":{"loc":{"start":{"line":86,"column":8},"end":{"line":86,"column":53}},"id":45},"46":{"loc":{"start":{"line":86,"column":19},"end":{"line":86,"column":52}},"id":46},"47":{"loc":{"start":{"line":86,"column":38},"end":{"line":86,"column":51}},"id":47},"48":{"loc":{"start":{"line":87,"column":12},"end":{"line":87,"column":35}},"id":48},"49":{"loc":{"start":{"line":88,"column":12},"end":{"line":88,"column":65}},"id":49},"50":{"loc":{"start":{"line":88,"column":33},"end":{"line":88,"column":64}},"id":50},"51":{"loc":{"start":{"line":88,"column":33},"end":{"line":88,"column":58}},"id":51},"52":{"loc":{"start":{"line":89,"column":12},"end":{"line":89,"column":55}},"id":52},"53":{"loc":{"start":{"line":89,"column":31},"end":{"line":89,"column":54}},"id":53},"54":{"loc":{"start":{"line":90,"column":12},"end":{"line":90,"column":62}},"id":54},"55":{"loc":{"start":{"line":90,"column":19},"end":{"line":90,"column":61}},"id":55},"56":{"loc":{"start":{"line":90,"column":29},"end":{"line":90,"column":42}},"id":56},"57":{"loc":{"start":{"line":92,"column":8},"end":{"line":92,"column":43}},"id":57},"58":{"loc":{"start":{"line":92,"column":15},"end":{"line":92,"column":42}},"id":58},"59":{"loc":{"start":{"line":104,"column":0},"end":{"line":123,"column":2}},"id":59},"60":{"loc":{"start":{"line":105,"column":4},"end":{"line":122,"column":6}},"id":60},"61":{"loc":{"start":{"line":106,"column":8},"end":{"line":106,"column":39}},"id":61},"62":{"loc":{"start":{"line":108,"column":12},"end":{"line":108,"column":59}},"id":62},"63":{"loc":{"start":{"line":108,"column":27},"end":{"line":108,"column":58}},"id":63},"64":{"loc":{"start":{"line":108,"column":35},"end":{"line":108,"column":38}},"id":64},"65":{"loc":{"start":{"line":109,"column":16},"end":{"line":109,"column":22}},"id":65},"66":{"loc":{"start":{"line":110,"column":16},"end":{"line":116,"column":19}},"id":66},"67":{"loc":{"start":{"line":110,"column":23},"end":{"line":116,"column":18}},"id":67},"68":{"loc":{"start":{"line":111,"column":24},"end":{"line":111,"column":47}},"id":68},"69":{"loc":{"start":{"line":112,"column":24},"end":{"line":112,"column":38}},"id":69},"70":{"loc":{"start":{"line":112,"column":31},"end":{"line":112,"column":37}},"id":70},"71":{"loc":{"start":{"line":114,"column":24},"end":{"line":114,"column":40}},"id":71},"72":{"loc":{"start":{"line":118,"column":16},"end":{"line":118,"column":32}},"id":72},"73":{"loc":{"start":{"line":121,"column":8},"end":{"line":121,"column":22}},"id":73},"74":{"loc":{"start":{"line":121,"column":15},"end":{"line":121,"column":21}},"id":74}}}},"/Users/kris/q-io/http-apps/status.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":46},"7":{"index":7,"count":1},"8":{"index":8,"count":2},"9":{"index":9,"count":2},"10":{"index":10,"count":2},"11":{"index":11,"count":2},"12":{"index":12,"count":2},"13":{"index":13,"count":2},"14":{"index":14,"count":2},"15":{"index":15,"count":2},"16":{"index":16,"count":1},"17":{"index":17,"count":4},"18":{"index":18,"count":2},"19":{"index":19,"count":2},"20":{"index":20,"count":2},"21":{"index":21,"count":2},"22":{"index":22,"count":1},"23":{"index":23,"count":2},"25":{"index":25,"count":2},"26":{"index":26,"count":2},"28":{"index":28,"count":2},"29":{"index":29,"count":2},"30":{"index":30,"count":1},"31":{"index":31,"count":2},"32":{"index":32,"count":2},"33":{"index":33,"count":2},"34":{"index":34,"count":2},"35":{"index":35,"count":2},"36":{"index":36,"count":1},"37":{"index":37,"count":1},"38":{"index":38,"count":1},"39":{"index":39,"count":1},"40":{"index":40,"count":1},"41":{"index":41,"count":1},"42":{"index":42,"count":1},"43":{"index":43,"count":1},"44":{"index":44,"count":1},"59":{"index":59,"count":1},"60":{"index":60,"count":1},"61":{"index":61,"count":1},"62":{"index":62,"count":1},"63":{"index":63,"count":1},"64":{"index":64,"count":1},"65":{"index":65,"count":1},"66":{"index":66,"count":1}},"blocks":{"0":{"index":0,"count":46},"1":{"index":1,"count":2},"2":{"index":2,"count":4},"3":{"index":3,"count":2},"4":{"index":4,"count":2},"7":{"index":7,"count":2},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1}},"hash":"4204b9ad0dc749c7e27ca4fcd0763009","instrumentor":{"blockCounter":14,"nodeCounter":67,"source":"var Negotiation = require(\"./negotiate\");\nvar HtmlApps = require(\"./html\");\n\n/**\n * {Object * String} a mapping of HTTP status codes to\n * their standard descriptions.\n */\n// Every standard HTTP code mapped to the appropriate message.\n// Stolen from Rack which stole from Mongrel\nexports.statusCodes = {\n    100: 'Continue',\n    101: 'Switching Protocols',\n    102: 'Processing',\n    200: 'OK',\n    201: 'Created',\n    202: 'Accepted',\n    203: 'Non-Authoritative Information',\n    204: 'No Content',\n    205: 'Reset Content',\n    206: 'Partial Content',\n    207: 'Multi-Status',\n    300: 'Multiple Choices',\n    301: 'Moved Permanently',\n    302: 'Found',\n    303: 'See Other',\n    304: 'Not Modified',\n    305: 'Use Proxy',\n    307: 'Temporary Redirect',\n    400: 'Bad Request',\n    401: 'Unauthorized',\n    402: 'Payment Required',\n    403: 'Forbidden',\n    404: 'Not Found',\n    405: 'Method Not Allowed',\n    406: 'Not Acceptable',\n    407: 'Proxy Authentication Required',\n    408: 'Request Timeout',\n    409: 'Conflict',\n    410: 'Gone',\n    411: 'Length Required',\n    412: 'Precondition Failed',\n    413: 'Request Entity Too Large',\n    414: 'Request-URI Too Large',\n    415: 'Unsupported Media Type',\n    416: 'Request Range Not Satisfiable',\n    417: 'Expectation Failed',\n    422: 'Unprocessable Entity',\n    423: 'Locked',\n    424: 'Failed Dependency',\n    500: 'Internal Server Error',\n    501: 'Not Implemented',\n    502: 'Bad Gateway',\n    503: 'Service Unavailable',\n    504: 'Gateway Timeout',\n    505: 'HTTP Version Not Supported',\n    507: 'Insufficient Storage'\n};\n\n/**\n * {Object * Number} a mapping from HTTP status descriptions\n * to HTTP status codes.\n */\nexports.statusMessages = {};\nfor (var code in exports.statusCodes)\n    exports.statusMessages[exports.statusCodes[code]] = +code;\n\n/**\n * Determines whether an HTTP response should have a\n * response body, based on its status code.\n * @param {Number} status\n * @returns whether the HTTP response for the given status\n * code has content.\n */\nexports.statusWithNoEntityBody = function (status) {\n    return (status >= 100 && status <= 199) ||\n        status == 204 || status == 304;\n};\n\n/**\n * @param {Number} status\n * @returns {Function(Request) :Response} a JSGI app that returns\n * a plain text response with the given status code.\n */\nexports.appForStatus = function (status) {\n    return function (request) {\n        return exports.responseForStatus(request, status, request.method + \" \" + request.path);\n    };\n};\n\n/**\n * @param {Number} status an HTTP status code\n * @param {String} message (optional) a message to include\n * in the response body.\n * @returns a JSGI HTTP response object with the given status\n * code and message as its body, if the status supports\n * a body.\n */\nexports.responseForStatus = function(request, status, addendum) {\n    if (exports.statusCodes[status] === undefined)\n        throw \"Unknown status code\";\n\n    var message = exports.statusCodes[status];\n\n    // RFC 2616, 10.2.5:\n    // The 204 response MUST NOT include a message-body, and thus is always\n    // terminated by the first empty line after the header fields.\n    // RFC 2616, 10.3.5:\n    // The 304 response MUST NOT contain a message-body, and thus is always\n    // terminated by the first empty line after the header fields.\n    if (exports.statusWithNoEntityBody(status)) {\n        return {status: status, headers: {}};\n    } else {\n        var handlers = {};\n        handlers[\"text/plain\"] = exports.textResponseForStatus;\n        if (request.handleHtmlFragmentResponse) {\n            handlers[\"text/html\"] = exports.htmlResponseForStatus;\n        }\n        var responseForStatus = Negotiation.negotiate(request, handlers) || exports.textResponseForStatus;\n        return responseForStatus(request, status, message, addendum);\n    }\n};\n\nexports.textResponseForStatus = function (request, status, message, addendum) {\n    var content = message + \"\\n\";\n    if (addendum) {\n        content += addendum + \"\\n\";\n    }\n    var contentLength = content.length;\n    return {\n        status: status,\n        statusMessage: message,\n        headers: {\n            \"content-length\": contentLength\n        },\n        body: [content]\n    };\n};\n\nexports.htmlResponseForStatus = function (request, status, message, addendum) {\n    return {\n        status: status,\n        statusMessage: message,\n        headers: {},\n        htmlTitle: message,\n        htmlFragment: {\n            forEach: function (write) {\n                write(\"<h1>\" + HtmlApps.escapeHtml(message) + \"</h1>\\n\");\n                write(\"<p>Status: \" + status + \"</p>\\n\");\n                if (addendum) {\n                    write(\"<pre>\" + HtmlApps.escapeHtml(addendum) + \"</pre>\\n\");\n                }\n            }\n        }\n    }\n};\n\n/**\n * {App} an application that returns a 400 response.\n */\nexports.badRequest = exports.appForStatus(400);\n/**\n * {App} an application that returns a 404 response.\n */\nexports.notFound = exports.appForStatus(404);\n/**\n * {App} an application that returns a 405 response.\n */\nexports.methodNotAllowed = exports.appForStatus(405);\n/**\n * {App} an application that returns a 405 response.\n */\nexports.noLanguage =\nexports.notAcceptable = exports.appForStatus(406);","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":41}},"id":0},"1":{"loc":{"start":{"line":1,"column":18},"end":{"line":1,"column":40}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":33}},"id":2},"3":{"loc":{"start":{"line":2,"column":15},"end":{"line":2,"column":32}},"id":3},"4":{"loc":{"start":{"line":10,"column":0},"end":{"line":57,"column":2}},"id":4},"5":{"loc":{"start":{"line":63,"column":0},"end":{"line":63,"column":28}},"id":5},"6":{"loc":{"start":{"line":65,"column":4},"end":{"line":65,"column":62}},"id":6},"7":{"loc":{"start":{"line":74,"column":0},"end":{"line":77,"column":2}},"id":7},"8":{"loc":{"start":{"line":75,"column":4},"end":{"line":76,"column":39}},"id":8},"9":{"loc":{"start":{"line":75,"column":11},"end":{"line":76,"column":38}},"id":9},"10":{"loc":{"start":{"line":75,"column":11},"end":{"line":76,"column":21}},"id":10},"11":{"loc":{"start":{"line":75,"column":11},"end":{"line":75,"column":43}},"id":11},"12":{"loc":{"start":{"line":75,"column":12},"end":{"line":75,"column":25}},"id":12},"13":{"loc":{"start":{"line":75,"column":29},"end":{"line":75,"column":42}},"id":13},"14":{"loc":{"start":{"line":76,"column":8},"end":{"line":76,"column":21}},"id":14},"15":{"loc":{"start":{"line":76,"column":25},"end":{"line":76,"column":38}},"id":15},"16":{"loc":{"start":{"line":84,"column":0},"end":{"line":88,"column":2}},"id":16},"17":{"loc":{"start":{"line":85,"column":4},"end":{"line":87,"column":6}},"id":17},"18":{"loc":{"start":{"line":86,"column":8},"end":{"line":86,"column":95}},"id":18},"19":{"loc":{"start":{"line":86,"column":15},"end":{"line":86,"column":94}},"id":19},"20":{"loc":{"start":{"line":86,"column":58},"end":{"line":86,"column":93}},"id":20},"21":{"loc":{"start":{"line":86,"column":58},"end":{"line":86,"column":78}},"id":21},"22":{"loc":{"start":{"line":98,"column":0},"end":{"line":121,"column":2}},"id":22},"23":{"loc":{"start":{"line":99,"column":8},"end":{"line":99,"column":49}},"id":23},"24":{"loc":{"start":{"line":100,"column":8},"end":{"line":100,"column":36}},"id":24},"25":{"loc":{"start":{"line":102,"column":4},"end":{"line":102,"column":46}},"id":25},"26":{"loc":{"start":{"line":110,"column":8},"end":{"line":110,"column":46}},"id":26},"27":{"loc":{"start":{"line":111,"column":8},"end":{"line":111,"column":45}},"id":27},"28":{"loc":{"start":{"line":113,"column":8},"end":{"line":113,"column":26}},"id":28},"29":{"loc":{"start":{"line":114,"column":8},"end":{"line":114,"column":63}},"id":29},"30":{"loc":{"start":{"line":116,"column":12},"end":{"line":116,"column":66}},"id":30},"31":{"loc":{"start":{"line":118,"column":8},"end":{"line":118,"column":106}},"id":31},"32":{"loc":{"start":{"line":118,"column":32},"end":{"line":118,"column":105}},"id":32},"33":{"loc":{"start":{"line":118,"column":32},"end":{"line":118,"column":72}},"id":33},"34":{"loc":{"start":{"line":119,"column":8},"end":{"line":119,"column":69}},"id":34},"35":{"loc":{"start":{"line":119,"column":15},"end":{"line":119,"column":68}},"id":35},"36":{"loc":{"start":{"line":123,"column":0},"end":{"line":137,"column":2}},"id":36},"37":{"loc":{"start":{"line":124,"column":4},"end":{"line":124,"column":33}},"id":37},"38":{"loc":{"start":{"line":124,"column":18},"end":{"line":124,"column":32}},"id":38},"39":{"loc":{"start":{"line":126,"column":8},"end":{"line":126,"column":35}},"id":39},"40":{"loc":{"start":{"line":126,"column":19},"end":{"line":126,"column":34}},"id":40},"41":{"loc":{"start":{"line":128,"column":4},"end":{"line":128,"column":39}},"id":41},"42":{"loc":{"start":{"line":129,"column":4},"end":{"line":136,"column":6}},"id":42},"43":{"loc":{"start":{"line":139,"column":0},"end":{"line":155,"column":2}},"id":43},"44":{"loc":{"start":{"line":140,"column":4},"end":{"line":155,"column":0}},"id":44},"45":{"loc":{"start":{"line":147,"column":16},"end":{"line":147,"column":73}},"id":45},"46":{"loc":{"start":{"line":147,"column":16},"end":{"line":147,"column":72}},"id":46},"47":{"loc":{"start":{"line":147,"column":22},"end":{"line":147,"column":71}},"id":47},"48":{"loc":{"start":{"line":147,"column":22},"end":{"line":147,"column":59}},"id":48},"49":{"loc":{"start":{"line":147,"column":31},"end":{"line":147,"column":59}},"id":49},"50":{"loc":{"start":{"line":148,"column":16},"end":{"line":148,"column":57}},"id":50},"51":{"loc":{"start":{"line":148,"column":16},"end":{"line":148,"column":56}},"id":51},"52":{"loc":{"start":{"line":148,"column":22},"end":{"line":148,"column":55}},"id":52},"53":{"loc":{"start":{"line":148,"column":22},"end":{"line":148,"column":44}},"id":53},"54":{"loc":{"start":{"line":150,"column":20},"end":{"line":150,"column":80}},"id":54},"55":{"loc":{"start":{"line":150,"column":20},"end":{"line":150,"column":79}},"id":55},"56":{"loc":{"start":{"line":150,"column":26},"end":{"line":150,"column":78}},"id":56},"57":{"loc":{"start":{"line":150,"column":26},"end":{"line":150,"column":65}},"id":57},"58":{"loc":{"start":{"line":150,"column":36},"end":{"line":150,"column":65}},"id":58},"59":{"loc":{"start":{"line":160,"column":0},"end":{"line":160,"column":47}},"id":59},"60":{"loc":{"start":{"line":160,"column":21},"end":{"line":160,"column":46}},"id":60},"61":{"loc":{"start":{"line":164,"column":0},"end":{"line":164,"column":45}},"id":61},"62":{"loc":{"start":{"line":164,"column":19},"end":{"line":164,"column":44}},"id":62},"63":{"loc":{"start":{"line":168,"column":0},"end":{"line":168,"column":53}},"id":63},"64":{"loc":{"start":{"line":168,"column":27},"end":{"line":168,"column":52}},"id":64},"65":{"loc":{"start":{"line":172,"column":0},"end":{"line":173,"column":50}},"id":65},"66":{"loc":{"start":{"line":173,"column":24},"end":{"line":173,"column":49}},"id":66}}}},"/Users/kris/q-io/http-apps/negotiate.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":4},"6":{"index":6,"count":4},"7":{"index":7,"count":4},"8":{"index":8,"count":4},"9":{"index":9,"count":4},"10":{"index":10,"count":4},"11":{"index":11,"count":4},"12":{"index":12,"count":4},"13":{"index":13,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":5},"55":{"index":55,"count":1},"56":{"index":56,"count":1},"57":{"index":57,"count":1},"58":{"index":58,"count":1},"59":{"index":59,"count":1},"60":{"index":60,"count":1},"61":{"index":61,"count":1},"62":{"index":62,"count":1},"63":{"index":63,"count":1},"64":{"index":64,"count":1},"69":{"index":69,"count":1}},"blocks":{"0":{"index":0,"count":4},"6":{"index":6,"count":5}},"hash":"323f75230e2749e54b7da35d560d5db7","instrumentor":{"blockCounter":19,"nodeCounter":76,"source":"var Q = require(\"q\");\nvar MimeParse = require(\"mimeparse\");\n\nexports.negotiate = negotiate;\nfunction negotiate(request, types, header) {\n    var keys = Object.keys(types);\n    var accept = request.headers[header || \"accept\"] || \"*\";\n    var best = MimeParse.bestMatch(keys, accept);\n    return types[best];\n}\n\n/// branch on HTTP method\n/**\n * @param {Object * App} methods\n * @param {App} notAllowed (optional)\n * @returns {App}\n */\nexports.Method = function (methods, methodNotAllowed) {\n    var keys = Object.keys(methods);\n    if (!methodNotAllowed)\n        methodNotAllowed = exports.methodNotAllowed;\n    return function (request, response) {\n        var method = request.method;\n        if (Object.has(keys, method)) {\n            return Object.get(methods, method)(request, response);\n        } else {\n            return methodNotAllowed(request, response);\n        }\n    };\n};\n\nvar Negotiator = function (requestHeader, responseHeader, respond) {\n    return function (types, notAcceptable) {\n        var keys = Object.keys(types);\n        if (!notAcceptable)\n            notAcceptable = exports.notAcceptable;\n        return function (request, response) {\n            var header = requestHeader;\n            if (typeof header === \"function\") {\n                header = requestHeader(request);\n            }\n            var accept = request.headers[requestHeader] || \"*\";\n            var type = MimeParse.bestMatch(keys, accept);\n            request.terms = request.terms || {};\n            request.terms[responseHeader] = type;\n            if (Object.has(keys, type)) {\n                return Q.when(types[type](request, response), function (response) {\n                    if (\n                        respond !== null &&\n                        response &&\n                        response.status === 200 &&\n                        response.headers\n                    ) {\n                        response.headers[responseHeader] = type;\n                    }\n                    return response;\n                });\n            } else {\n                return notAcceptable(request, response);\n            }\n        };\n    };\n};\n\n/// branch on HTTP content negotiation\n/**\n * Routes based on content negotiation, between the request's `accept`\n * header and the application's list of possible content types.\n *\n * @param {Object * App} types mapping content types to apps that can\n * handle them.\n * @param {App} notAcceptable\n * @returns {App}\n */\nexports.ContentType = Negotiator(\"accept\", \"content-type\");\nexports.Language = Negotiator(\"accept-language\", \"language\");\nexports.Charset = Negotiator(\"accept-charset\", \"charset\");\nexports.Encoding = Negotiator(\"accept-encoding\", \"encoding\");\nexports.Host = Negotiator(function (request) {\n    return (request.headers.host || \"*\") + \":\" + request.port;\n}, \"host\", null);\n\n// Branch on a selector function based on the request\nexports.Select = function (select) {\n    return function (request, response) {\n        return Q.when(select(request, response), function (app) {\n            return app(request, response);\n        });\n    };\n};","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":21}},"id":0},"1":{"loc":{"start":{"line":1,"column":8},"end":{"line":1,"column":20}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":37}},"id":2},"3":{"loc":{"start":{"line":2,"column":16},"end":{"line":2,"column":36}},"id":3},"4":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":30}},"id":4},"5":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":34}},"id":5},"6":{"loc":{"start":{"line":6,"column":15},"end":{"line":6,"column":33}},"id":6},"7":{"loc":{"start":{"line":7,"column":4},"end":{"line":7,"column":60}},"id":7},"8":{"loc":{"start":{"line":7,"column":17},"end":{"line":7,"column":59}},"id":8},"9":{"loc":{"start":{"line":7,"column":33},"end":{"line":7,"column":51}},"id":9},"10":{"loc":{"start":{"line":8,"column":4},"end":{"line":8,"column":49}},"id":10},"11":{"loc":{"start":{"line":8,"column":15},"end":{"line":8,"column":48}},"id":11},"12":{"loc":{"start":{"line":9,"column":4},"end":{"line":9,"column":23}},"id":12},"13":{"loc":{"start":{"line":18,"column":0},"end":{"line":30,"column":2}},"id":13},"14":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":36}},"id":14},"15":{"loc":{"start":{"line":19,"column":15},"end":{"line":19,"column":35}},"id":15},"16":{"loc":{"start":{"line":21,"column":8},"end":{"line":21,"column":52}},"id":16},"17":{"loc":{"start":{"line":22,"column":4},"end":{"line":29,"column":6}},"id":17},"18":{"loc":{"start":{"line":23,"column":8},"end":{"line":23,"column":36}},"id":18},"19":{"loc":{"start":{"line":24,"column":12},"end":{"line":24,"column":36}},"id":19},"20":{"loc":{"start":{"line":25,"column":12},"end":{"line":25,"column":66}},"id":20},"21":{"loc":{"start":{"line":25,"column":19},"end":{"line":25,"column":65}},"id":21},"22":{"loc":{"start":{"line":25,"column":29},"end":{"line":25,"column":46}},"id":22},"23":{"loc":{"start":{"line":27,"column":12},"end":{"line":27,"column":55}},"id":23},"24":{"loc":{"start":{"line":27,"column":19},"end":{"line":27,"column":54}},"id":24},"25":{"loc":{"start":{"line":32,"column":0},"end":{"line":63,"column":2}},"id":25},"26":{"loc":{"start":{"line":33,"column":4},"end":{"line":62,"column":6}},"id":26},"27":{"loc":{"start":{"line":34,"column":8},"end":{"line":34,"column":38}},"id":27},"28":{"loc":{"start":{"line":34,"column":19},"end":{"line":34,"column":37}},"id":28},"29":{"loc":{"start":{"line":36,"column":12},"end":{"line":36,"column":50}},"id":29},"30":{"loc":{"start":{"line":37,"column":8},"end":{"line":61,"column":10}},"id":30},"31":{"loc":{"start":{"line":38,"column":12},"end":{"line":38,"column":39}},"id":31},"32":{"loc":{"start":{"line":39,"column":16},"end":{"line":39,"column":44}},"id":32},"33":{"loc":{"start":{"line":40,"column":16},"end":{"line":40,"column":48}},"id":33},"34":{"loc":{"start":{"line":40,"column":25},"end":{"line":40,"column":47}},"id":34},"35":{"loc":{"start":{"line":42,"column":12},"end":{"line":42,"column":63}},"id":35},"36":{"loc":{"start":{"line":42,"column":25},"end":{"line":42,"column":62}},"id":36},"37":{"loc":{"start":{"line":43,"column":12},"end":{"line":43,"column":57}},"id":37},"38":{"loc":{"start":{"line":43,"column":23},"end":{"line":43,"column":56}},"id":38},"39":{"loc":{"start":{"line":44,"column":12},"end":{"line":44,"column":48}},"id":39},"40":{"loc":{"start":{"line":44,"column":28},"end":{"line":44,"column":47}},"id":40},"41":{"loc":{"start":{"line":45,"column":12},"end":{"line":45,"column":49}},"id":41},"42":{"loc":{"start":{"line":46,"column":16},"end":{"line":46,"column":38}},"id":42},"43":{"loc":{"start":{"line":47,"column":16},"end":{"line":57,"column":19}},"id":43},"44":{"loc":{"start":{"line":47,"column":23},"end":{"line":57,"column":18}},"id":44},"45":{"loc":{"start":{"line":47,"column":30},"end":{"line":47,"column":60}},"id":45},"46":{"loc":{"start":{"line":49,"column":24},"end":{"line":52,"column":40}},"id":46},"47":{"loc":{"start":{"line":49,"column":24},"end":{"line":51,"column":47}},"id":47},"48":{"loc":{"start":{"line":49,"column":24},"end":{"line":50,"column":32}},"id":48},"49":{"loc":{"start":{"line":49,"column":24},"end":{"line":49,"column":40}},"id":49},"50":{"loc":{"start":{"line":51,"column":24},"end":{"line":51,"column":47}},"id":50},"51":{"loc":{"start":{"line":54,"column":24},"end":{"line":54,"column":64}},"id":51},"52":{"loc":{"start":{"line":56,"column":20},"end":{"line":56,"column":36}},"id":52},"53":{"loc":{"start":{"line":59,"column":16},"end":{"line":59,"column":56}},"id":53},"54":{"loc":{"start":{"line":59,"column":23},"end":{"line":59,"column":55}},"id":54},"55":{"loc":{"start":{"line":75,"column":0},"end":{"line":75,"column":59}},"id":55},"56":{"loc":{"start":{"line":75,"column":22},"end":{"line":75,"column":58}},"id":56},"57":{"loc":{"start":{"line":76,"column":0},"end":{"line":76,"column":61}},"id":57},"58":{"loc":{"start":{"line":76,"column":19},"end":{"line":76,"column":60}},"id":58},"59":{"loc":{"start":{"line":77,"column":0},"end":{"line":77,"column":58}},"id":59},"60":{"loc":{"start":{"line":77,"column":18},"end":{"line":77,"column":57}},"id":60},"61":{"loc":{"start":{"line":78,"column":0},"end":{"line":78,"column":61}},"id":61},"62":{"loc":{"start":{"line":78,"column":19},"end":{"line":78,"column":60}},"id":62},"63":{"loc":{"start":{"line":79,"column":0},"end":{"line":81,"column":17}},"id":63},"64":{"loc":{"start":{"line":79,"column":15},"end":{"line":81,"column":16}},"id":64},"65":{"loc":{"start":{"line":80,"column":4},"end":{"line":80,"column":62}},"id":65},"66":{"loc":{"start":{"line":80,"column":11},"end":{"line":80,"column":61}},"id":66},"67":{"loc":{"start":{"line":80,"column":11},"end":{"line":80,"column":46}},"id":67},"68":{"loc":{"start":{"line":80,"column":11},"end":{"line":80,"column":40}},"id":68},"69":{"loc":{"start":{"line":84,"column":0},"end":{"line":90,"column":2}},"id":69},"70":{"loc":{"start":{"line":85,"column":4},"end":{"line":89,"column":6}},"id":70},"71":{"loc":{"start":{"line":86,"column":8},"end":{"line":88,"column":11}},"id":71},"72":{"loc":{"start":{"line":86,"column":15},"end":{"line":88,"column":10}},"id":72},"73":{"loc":{"start":{"line":86,"column":22},"end":{"line":86,"column":47}},"id":73},"74":{"loc":{"start":{"line":87,"column":12},"end":{"line":87,"column":42}},"id":74},"75":{"loc":{"start":{"line":87,"column":19},"end":{"line":87,"column":41}},"id":75}}}},"/Users/kris/q-io/http-apps/html.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":5},"37":{"index":37,"count":5},"38":{"index":38,"count":5},"39":{"index":39,"count":1},"40":{"index":40,"count":1},"41":{"index":41,"count":1},"42":{"index":42,"count":1},"43":{"index":43,"count":1},"44":{"index":44,"count":1},"45":{"index":45,"count":7},"46":{"index":46,"count":7},"47":{"index":47,"count":7},"48":{"index":48,"count":7},"49":{"index":49,"count":7},"50":{"index":50,"count":7}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":5},"9":{"index":9,"count":7}},"hash":"a15d13c2a05574386d56e72864370939","instrumentor":{"blockCounter":10,"nodeCounter":51,"source":"var Q = require(\"q\");\n// TODO negotiate text/html vs text/html+fragment (or other mime type)\n\n/**\n * @param {Request} request\n * @param {String} path\n * @param {String} contentType\n * @returns {Response}\n */\nexports.HandleHtmlFragmentResponses = function (app, handleHtmlFragmentResponse) {\n    handleHtmlFragmentResponse = handleHtmlFragmentResponse || exports.handleHtmlFragmentResponse;\n    return function (request) {\n        request.handleHtmlFragmentResponse = handleHtmlFragmentResponse;\n        return Q.fcall(app, request)\n        .then(function (response) {\n            if (response.htmlFragment) {\n                return Q.fcall(handleHtmlFragmentResponse, response);\n            } else {\n                return response;\n            }\n        });\n    };\n};\n\nexports.handleHtmlFragmentResponse = function (response) {\n    var htmlFragment = response.htmlFragment;\n    delete response.htmlFragment;\n    response.headers[\"content-type\"] = \"text/html; charset=utf-8\";\n    response.body = {\n        forEach: function (write) {\n            write(\"<!doctype html>\\n\");\n            write(\"<html>\\n\");\n            write(\"    <head>\\n\");\n            if (response.htmlTitle !== void 0) {\n                write(\"        <title>\" + escapeHtml(response.htmlTitle) + \"</title>\\n\");\n            }\n            write(\"    </head>\\n\");\n            write(\"    <body>\\n\");\n            htmlFragment.forEach(function (line) {\n                write(\"        \" + line);\n            });\n            write(\"    </body>\\n\");\n            write(\"</html>\\n\");\n        }\n    };\n    return response;\n};\n\nexports.escapeHtml = escapeHtml;\nfunction escapeHtml(text) {\n    return String(text)\n        .replace(/&/g, \"&amp;\")\n        .replace(/</g, \"&lt;\")\n        .replace(/>/g, \"&gt;\")\n        .replace(/\"/g, \"&quot;\")\n}","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":21}},"id":0},"1":{"loc":{"start":{"line":1,"column":8},"end":{"line":1,"column":20}},"id":1},"2":{"loc":{"start":{"line":10,"column":0},"end":{"line":23,"column":2}},"id":2},"3":{"loc":{"start":{"line":11,"column":4},"end":{"line":11,"column":98}},"id":3},"4":{"loc":{"start":{"line":11,"column":33},"end":{"line":11,"column":97}},"id":4},"5":{"loc":{"start":{"line":12,"column":4},"end":{"line":22,"column":6}},"id":5},"6":{"loc":{"start":{"line":13,"column":8},"end":{"line":13,"column":72}},"id":6},"7":{"loc":{"start":{"line":14,"column":8},"end":{"line":21,"column":11}},"id":7},"8":{"loc":{"start":{"line":14,"column":15},"end":{"line":21,"column":10}},"id":8},"9":{"loc":{"start":{"line":14,"column":22},"end":{"line":14,"column":36}},"id":9},"10":{"loc":{"start":{"line":17,"column":16},"end":{"line":17,"column":69}},"id":10},"11":{"loc":{"start":{"line":17,"column":23},"end":{"line":17,"column":68}},"id":11},"12":{"loc":{"start":{"line":19,"column":16},"end":{"line":19,"column":32}},"id":12},"13":{"loc":{"start":{"line":25,"column":0},"end":{"line":47,"column":2}},"id":13},"14":{"loc":{"start":{"line":26,"column":4},"end":{"line":26,"column":45}},"id":14},"15":{"loc":{"start":{"line":27,"column":4},"end":{"line":27,"column":33}},"id":15},"16":{"loc":{"start":{"line":28,"column":4},"end":{"line":28,"column":66}},"id":16},"17":{"loc":{"start":{"line":29,"column":4},"end":{"line":45,"column":6}},"id":17},"18":{"loc":{"start":{"line":31,"column":12},"end":{"line":31,"column":39}},"id":18},"19":{"loc":{"start":{"line":31,"column":12},"end":{"line":31,"column":38}},"id":19},"20":{"loc":{"start":{"line":32,"column":12},"end":{"line":32,"column":30}},"id":20},"21":{"loc":{"start":{"line":32,"column":12},"end":{"line":32,"column":29}},"id":21},"22":{"loc":{"start":{"line":33,"column":12},"end":{"line":33,"column":34}},"id":22},"23":{"loc":{"start":{"line":33,"column":12},"end":{"line":33,"column":33}},"id":23},"24":{"loc":{"start":{"line":34,"column":16},"end":{"line":34,"column":45}},"id":24},"25":{"loc":{"start":{"line":35,"column":16},"end":{"line":35,"column":89}},"id":25},"26":{"loc":{"start":{"line":35,"column":16},"end":{"line":35,"column":88}},"id":26},"27":{"loc":{"start":{"line":35,"column":22},"end":{"line":35,"column":87}},"id":27},"28":{"loc":{"start":{"line":35,"column":22},"end":{"line":35,"column":72}},"id":28},"29":{"loc":{"start":{"line":35,"column":42},"end":{"line":35,"column":72}},"id":29},"30":{"loc":{"start":{"line":37,"column":12},"end":{"line":37,"column":35}},"id":30},"31":{"loc":{"start":{"line":37,"column":12},"end":{"line":37,"column":34}},"id":31},"32":{"loc":{"start":{"line":38,"column":12},"end":{"line":38,"column":34}},"id":32},"33":{"loc":{"start":{"line":38,"column":12},"end":{"line":38,"column":33}},"id":33},"34":{"loc":{"start":{"line":39,"column":12},"end":{"line":41,"column":15}},"id":34},"35":{"loc":{"start":{"line":39,"column":12},"end":{"line":41,"column":14}},"id":35},"36":{"loc":{"start":{"line":40,"column":16},"end":{"line":40,"column":41}},"id":36},"37":{"loc":{"start":{"line":40,"column":16},"end":{"line":40,"column":40}},"id":37},"38":{"loc":{"start":{"line":40,"column":22},"end":{"line":40,"column":39}},"id":38},"39":{"loc":{"start":{"line":42,"column":12},"end":{"line":42,"column":35}},"id":39},"40":{"loc":{"start":{"line":42,"column":12},"end":{"line":42,"column":34}},"id":40},"41":{"loc":{"start":{"line":43,"column":12},"end":{"line":43,"column":31}},"id":41},"42":{"loc":{"start":{"line":43,"column":12},"end":{"line":43,"column":30}},"id":42},"43":{"loc":{"start":{"line":46,"column":4},"end":{"line":46,"column":20}},"id":43},"44":{"loc":{"start":{"line":49,"column":0},"end":{"line":49,"column":32}},"id":44},"45":{"loc":{"start":{"line":51,"column":4},"end":{"line":56,"column":0}},"id":45},"46":{"loc":{"start":{"line":51,"column":11},"end":{"line":55,"column":32}},"id":46},"47":{"loc":{"start":{"line":54,"column":16},"end":{"line":54,"column":30}},"id":47},"48":{"loc":{"start":{"line":53,"column":16},"end":{"line":53,"column":30}},"id":48},"49":{"loc":{"start":{"line":52,"column":16},"end":{"line":52,"column":31}},"id":49},"50":{"loc":{"start":{"line":51,"column":17},"end":{"line":51,"column":23}},"id":50}}}},"/Users/kris/q-io/http-apps/content.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"22":{"index":22,"count":1},"29":{"index":29,"count":1},"37":{"index":37,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1}},"hash":"9fa58444f351b2772495236784050d98","instrumentor":{"blockCounter":12,"nodeCounter":45,"source":"var Negotiate = require(\"./negotiate\");\nvar QS = require(\"qs\");\nvar URL = require(\"url2\");\n\n/**\n * Makes an app that returns a response with static content\n * from memory.\n * @param {Body} body a Q-JSGI\n * response body\n * @param {String} contentType\n * @param {Number} status\n * @returns {App} a Q-JSGI app\n */\nexports.Content = function (body, contentType, status) {\n    return function (request, response) {\n        return {\n            \"status\": status || 200,\n            \"headers\": {\n                \"content-type\": contentType || \"text/plain\"\n            },\n            \"body\": body || \"\"\n        };\n    };\n};\n\n/**\n * Returns a Q-JSGI response with the given content.\n * @param {Body} content (optional) defaults to `[\"\"]`\n * @param {String} contentType (optional) defaults to `\"text/plain\"`\n * @param {Number} status (optional) defaults to `200`\n * @returns {Response}\n */\nexports.content =\nexports.ok = function (content, contentType, status) {\n    status = status || 200;\n    content = content || \"\";\n    if (typeof content === \"string\") {\n        content = [content];\n    }\n    contentType = contentType || \"text/plain\";\n    return {\n        \"status\": status,\n        \"headers\": {\n            \"content-type\": contentType\n        },\n        \"body\": content\n    };\n};\n\n/**\n * Wraps an app such that it expects to receive content\n * in the request body and passes that content as a string\n * to as the second argument to the wrapped JSGI app.\n *\n * @param {Function(Request, Object):Response} app\n * @returns {App}\n */\nexports.ContentRequest = function (app) {\n    return function (request, response) {\n        return Q.when(request.body.read(), function (body) {\n            return app(body, request, response);\n        });\n    };\n};\n\n/**\n * @param {Function(Request):Object}\n * @returns {App}\n */\nexports.Inspect = function (app) {\n    return Negotiate.Method({\"GET\": function (request, response) {\n        return Q.when(app(request, response), function (object) {\n            return {\n                status: 200,\n                headers: {\n                    \"content-type\": \"text/plain\"\n                },\n                body: [inspect(object)]\n            }\n        });\n    }});\n};\n\n/**\n */\nexports.ParseQuery = function (app) {\n    return function (request, response) {\n        request.query = QS.parse(URL.parse(request.url).query || \"\");\n        return app(request, response);\n    };\n};","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":39}},"id":0},"1":{"loc":{"start":{"line":1,"column":16},"end":{"line":1,"column":38}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":23}},"id":2},"3":{"loc":{"start":{"line":2,"column":9},"end":{"line":2,"column":22}},"id":3},"4":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":26}},"id":4},"5":{"loc":{"start":{"line":3,"column":10},"end":{"line":3,"column":25}},"id":5},"6":{"loc":{"start":{"line":14,"column":0},"end":{"line":24,"column":2}},"id":6},"7":{"loc":{"start":{"line":15,"column":4},"end":{"line":23,"column":6}},"id":7},"8":{"loc":{"start":{"line":16,"column":8},"end":{"line":22,"column":10}},"id":8},"9":{"loc":{"start":{"line":17,"column":22},"end":{"line":17,"column":35}},"id":9},"10":{"loc":{"start":{"line":19,"column":32},"end":{"line":19,"column":59}},"id":10},"11":{"loc":{"start":{"line":21,"column":20},"end":{"line":21,"column":30}},"id":11},"12":{"loc":{"start":{"line":33,"column":0},"end":{"line":48,"column":2}},"id":12},"13":{"loc":{"start":{"line":35,"column":4},"end":{"line":35,"column":27}},"id":13},"14":{"loc":{"start":{"line":35,"column":13},"end":{"line":35,"column":26}},"id":14},"15":{"loc":{"start":{"line":36,"column":4},"end":{"line":36,"column":28}},"id":15},"16":{"loc":{"start":{"line":36,"column":14},"end":{"line":36,"column":27}},"id":16},"17":{"loc":{"start":{"line":37,"column":8},"end":{"line":37,"column":35}},"id":17},"18":{"loc":{"start":{"line":38,"column":8},"end":{"line":38,"column":28}},"id":18},"19":{"loc":{"start":{"line":40,"column":4},"end":{"line":40,"column":46}},"id":19},"20":{"loc":{"start":{"line":40,"column":18},"end":{"line":40,"column":45}},"id":20},"21":{"loc":{"start":{"line":41,"column":4},"end":{"line":47,"column":6}},"id":21},"22":{"loc":{"start":{"line":58,"column":0},"end":{"line":64,"column":2}},"id":22},"23":{"loc":{"start":{"line":59,"column":4},"end":{"line":63,"column":6}},"id":23},"24":{"loc":{"start":{"line":60,"column":8},"end":{"line":62,"column":11}},"id":24},"25":{"loc":{"start":{"line":60,"column":15},"end":{"line":62,"column":10}},"id":25},"26":{"loc":{"start":{"line":60,"column":22},"end":{"line":60,"column":41}},"id":26},"27":{"loc":{"start":{"line":61,"column":12},"end":{"line":61,"column":48}},"id":27},"28":{"loc":{"start":{"line":61,"column":19},"end":{"line":61,"column":47}},"id":28},"29":{"loc":{"start":{"line":70,"column":0},"end":{"line":82,"column":2}},"id":29},"30":{"loc":{"start":{"line":71,"column":4},"end":{"line":81,"column":8}},"id":30},"31":{"loc":{"start":{"line":71,"column":11},"end":{"line":81,"column":7}},"id":31},"32":{"loc":{"start":{"line":72,"column":8},"end":{"line":80,"column":11}},"id":32},"33":{"loc":{"start":{"line":72,"column":15},"end":{"line":80,"column":10}},"id":33},"34":{"loc":{"start":{"line":72,"column":22},"end":{"line":72,"column":44}},"id":34},"35":{"loc":{"start":{"line":73,"column":12},"end":{"line":80,"column":8}},"id":35},"36":{"loc":{"start":{"line":78,"column":23},"end":{"line":78,"column":38}},"id":36},"37":{"loc":{"start":{"line":86,"column":0},"end":{"line":91,"column":2}},"id":37},"38":{"loc":{"start":{"line":87,"column":4},"end":{"line":90,"column":6}},"id":38},"39":{"loc":{"start":{"line":88,"column":8},"end":{"line":88,"column":69}},"id":39},"40":{"loc":{"start":{"line":88,"column":24},"end":{"line":88,"column":68}},"id":40},"41":{"loc":{"start":{"line":88,"column":33},"end":{"line":88,"column":67}},"id":41},"42":{"loc":{"start":{"line":88,"column":42},"end":{"line":88,"column":55}},"id":42},"43":{"loc":{"start":{"line":89,"column":8},"end":{"line":89,"column":38}},"id":43},"44":{"loc":{"start":{"line":89,"column":15},"end":{"line":89,"column":37}},"id":44}}}},"/Users/kris/q-io/http-apps/fs.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":2},"23":{"index":23,"count":2},"24":{"index":24,"count":2},"25":{"index":25,"count":2},"26":{"index":26,"count":2},"27":{"index":27,"count":2},"28":{"index":28,"count":2},"29":{"index":29,"count":2},"30":{"index":30,"count":2},"31":{"index":31,"count":2},"32":{"index":32,"count":2},"33":{"index":33,"count":2},"34":{"index":34,"count":2},"35":{"index":35,"count":2},"36":{"index":36,"count":2},"37":{"index":37,"count":2},"38":{"index":38,"count":2},"39":{"index":39,"count":2},"41":{"index":41,"count":2},"42":{"index":42,"count":2},"43":{"index":43,"count":2},"44":{"index":44,"count":2},"45":{"index":45,"count":2},"46":{"index":46,"count":2},"47":{"index":47,"count":2},"48":{"index":48,"count":2},"49":{"index":49,"count":2},"50":{"index":50,"count":2},"51":{"index":51,"count":2},"54":{"index":54,"count":2},"55":{"index":55,"count":2},"59":{"index":59,"count":2},"60":{"index":60,"count":2},"61":{"index":61,"count":2},"62":{"index":62,"count":2},"65":{"index":65,"count":2},"66":{"index":66,"count":2},"67":{"index":67,"count":2},"72":{"index":72,"count":1},"73":{"index":73,"count":1},"74":{"index":74,"count":1},"75":{"index":75,"count":1},"76":{"index":76,"count":1},"77":{"index":77,"count":1},"78":{"index":78,"count":1},"79":{"index":79,"count":1},"80":{"index":80,"count":1},"81":{"index":81,"count":1},"82":{"index":82,"count":1},"83":{"index":83,"count":1},"84":{"index":84,"count":1},"85":{"index":85,"count":1},"86":{"index":86,"count":1},"87":{"index":87,"count":1},"88":{"index":88,"count":1},"89":{"index":89,"count":1},"91":{"index":91,"count":1},"92":{"index":92,"count":1},"93":{"index":93,"count":1},"96":{"index":96,"count":1},"97":{"index":97,"count":1},"98":{"index":98,"count":1},"99":{"index":99,"count":1},"100":{"index":100,"count":1},"101":{"index":101,"count":1},"102":{"index":102,"count":1},"103":{"index":103,"count":1},"104":{"index":104,"count":1},"105":{"index":105,"count":1},"106":{"index":106,"count":1},"107":{"index":107,"count":1},"108":{"index":108,"count":1},"114":{"index":114,"count":1},"115":{"index":115,"count":1},"116":{"index":116,"count":1},"117":{"index":117,"count":1},"118":{"index":118,"count":1},"119":{"index":119,"count":19},"120":{"index":120,"count":19},"122":{"index":122,"count":19},"123":{"index":123,"count":19},"124":{"index":124,"count":3},"126":{"index":126,"count":19},"127":{"index":127,"count":19},"128":{"index":128,"count":3},"129":{"index":129,"count":3},"130":{"index":130,"count":3},"131":{"index":131,"count":16},"132":{"index":132,"count":2},"133":{"index":133,"count":2},"134":{"index":134,"count":14},"135":{"index":135,"count":14},"136":{"index":136,"count":14},"137":{"index":137,"count":19},"138":{"index":138,"count":1},"139":{"index":139,"count":8},"140":{"index":140,"count":8},"142":{"index":142,"count":8},"143":{"index":143,"count":8},"144":{"index":144,"count":8},"145":{"index":145,"count":8},"146":{"index":146,"count":18},"147":{"index":147,"count":10},"148":{"index":148,"count":11},"149":{"index":149,"count":11},"150":{"index":150,"count":11},"151":{"index":151,"count":10},"152":{"index":152,"count":8},"153":{"index":153,"count":1},"154":{"index":154,"count":1},"155":{"index":155,"count":1},"156":{"index":156,"count":1},"157":{"index":157,"count":1},"158":{"index":158,"count":1},"159":{"index":159,"count":2},"160":{"index":160,"count":2},"161":{"index":161,"count":2},"162":{"index":162,"count":2},"163":{"index":163,"count":1},"164":{"index":164,"count":2},"165":{"index":165,"count":2},"166":{"index":166,"count":2},"168":{"index":168,"count":2},"169":{"index":169,"count":2},"170":{"index":170,"count":2},"171":{"index":171,"count":2},"172":{"index":172,"count":2},"173":{"index":173,"count":2},"174":{"index":174,"count":2},"176":{"index":176,"count":1},"177":{"index":177,"count":2},"178":{"index":178,"count":2},"182":{"index":182,"count":2},"183":{"index":183,"count":2},"184":{"index":184,"count":2},"185":{"index":185,"count":1},"187":{"index":187,"count":2},"188":{"index":188,"count":2},"189":{"index":189,"count":2},"191":{"index":191,"count":2},"192":{"index":192,"count":2},"193":{"index":193,"count":1},"194":{"index":194,"count":1},"195":{"index":195,"count":1},"196":{"index":196,"count":1},"197":{"index":197,"count":1},"198":{"index":198,"count":1},"199":{"index":199,"count":1},"200":{"index":200,"count":1},"201":{"index":201,"count":1},"202":{"index":202,"count":1},"203":{"index":203,"count":1},"204":{"index":204,"count":3},"205":{"index":205,"count":3},"206":{"index":206,"count":3},"207":{"index":207,"count":1},"208":{"index":208,"count":3},"209":{"index":209,"count":3},"210":{"index":210,"count":3},"211":{"index":211,"count":3},"212":{"index":212,"count":3},"213":{"index":213,"count":3},"214":{"index":214,"count":3},"215":{"index":215,"count":3},"216":{"index":216,"count":3},"217":{"index":217,"count":3},"218":{"index":218,"count":3},"219":{"index":219,"count":3},"220":{"index":220,"count":1},"221":{"index":221,"count":1},"222":{"index":222,"count":1},"223":{"index":223,"count":1},"224":{"index":224,"count":1},"225":{"index":225,"count":1},"226":{"index":226,"count":1},"227":{"index":227,"count":1},"228":{"index":228,"count":1},"229":{"index":229,"count":1},"230":{"index":230,"count":1},"231":{"index":231,"count":3},"232":{"index":232,"count":3},"233":{"index":233,"count":3},"234":{"index":234,"count":1},"235":{"index":235,"count":3},"236":{"index":236,"count":3},"237":{"index":237,"count":3},"238":{"index":238,"count":3},"239":{"index":239,"count":1},"260":{"index":260,"count":1},"265":{"index":265,"count":1},"267":{"index":267,"count":2},"268":{"index":268,"count":2},"269":{"index":269,"count":2},"270":{"index":270,"count":2},"271":{"index":271,"count":2},"272":{"index":272,"count":2},"273":{"index":273,"count":2},"274":{"index":274,"count":2},"275":{"index":275,"count":2},"276":{"index":276,"count":2},"277":{"index":277,"count":6},"278":{"index":278,"count":6},"279":{"index":279,"count":6},"280":{"index":280,"count":6},"281":{"index":281,"count":6},"282":{"index":282,"count":2},"283":{"index":283,"count":4},"284":{"index":284,"count":4},"285":{"index":285,"count":2},"286":{"index":286,"count":2},"287":{"index":287,"count":2},"288":{"index":288,"count":6},"289":{"index":289,"count":2},"290":{"index":290,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":2},"3":{"index":3,"count":2},"4":{"index":4,"count":2},"5":{"index":5,"count":2},"6":{"index":6,"count":2},"9":{"index":9,"count":2},"11":{"index":11,"count":2},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"23":{"index":23,"count":19},"26":{"index":26,"count":3},"27":{"index":27,"count":2},"28":{"index":28,"count":14},"29":{"index":29,"count":8},"31":{"index":31,"count":11},"33":{"index":33,"count":10},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":2},"37":{"index":37,"count":2},"38":{"index":38,"count":2},"40":{"index":40,"count":2},"41":{"index":41,"count":2},"43":{"index":43,"count":2},"45":{"index":45,"count":1},"48":{"index":48,"count":1},"49":{"index":49,"count":1},"50":{"index":50,"count":1},"51":{"index":51,"count":3},"52":{"index":52,"count":1},"53":{"index":53,"count":1},"54":{"index":54,"count":1},"55":{"index":55,"count":1},"56":{"index":56,"count":3},"57":{"index":57,"count":1},"65":{"index":65,"count":2},"67":{"index":67,"count":2},"68":{"index":68,"count":6},"69":{"index":69,"count":6},"70":{"index":70,"count":2},"71":{"index":71,"count":4},"73":{"index":73,"count":2},"74":{"index":74,"count":6},"75":{"index":75,"count":6}},"hash":"ed8234221202f5a9139d3370e269d66c","instrumentor":{"blockCounter":88,"nodeCounter":319,"source":"var Q = require(\"q\");\nvar URL = require(\"url2\");\nvar MimeTypes = require(\"mime\");\nvar FS = require(\"../fs\");\nvar StatusApps = require(\"./status\");\nvar RedirectApps = require(\"./redirect\");\nvar Negotiation = require(\"./negotiate\");\nvar HtmlApps = require(\"./html\");\n\n/**\n * @param {String} path\n * @param {String} contentType\n * @returns {App}\n */\nexports.File = function (path, contentType) {\n    return function (request, response) {\n        return exports.file(request, String(path), contentType);\n    };\n};\n\n/**\n * @param {String} path\n * @param {{\n       notFound,\n       file,\n       directory,\n       contentType,\n       redirectSymbolicLinks:Boolean,\n       redirect:Function(location),\n       permanent:Boolean\n * }} options\n * @returns {App}\n */\nexports.FileTree = function (root, options) {\n    if (!options)\n        options = {};\n    options.notFound = options.notFound || StatusApps.notFound;\n    options.file = options.file || exports.file;\n    options.directory = options.directory || exports.directory;\n    options.fs = options.fs || FS;\n    var fs = options.fs;\n    root = fs.canonical(root);\n    return function (request, response) {\n        var location = URL.parse(request.url);\n        request.fs = fs;\n        var redirect = options.redirect || (\n            request.permanent || options.permanent ?\n            RedirectApps.permanentRedirect :\n            RedirectApps.temporaryRedirect\n        );\n        return Q.when(root, function (root) {\n            var path = fs.join(root, request.pathInfo.slice(1));\n            return Q.when(fs.canonical(path), function (canonical) {\n                if (!fs.contains(root, canonical))\n                    return options.notFound(request, response);\n                if (path !== canonical && options.redirectSymbolicLinks)\n                    return redirect(request, fs.relativeFromFile(path, canonical));\n                // TODO: relativeFromFile should be designed for URL’s, not generalized paths.\n                // HTTP.relative(pathToDirectoryLocation(path), pathToFile/DirectoryLocation(canonical))\n                return Q.when(fs.stat(canonical), function (stat) {\n                    if (stat.isFile()) {\n                        return options.file(request, canonical, options.contentType, fs);\n                    } else if (stat.isDirectory()) {\n                        return options.directory(request, canonical, options.contentType);\n                    } else {\n                        return options.notFound(request, response);\n                    }\n                });\n            }, function (reason) {\n                return options.notFound(request, response);\n            });\n        });\n    };\n};\n\nexports.file = function (request, path, contentType, fs) {\n    fs = fs || FS;\n    // TODO last-modified header\n    contentType = contentType || MimeTypes.lookup(path);\n    return Q.when(fs.stat(path), function (stat) {\n        var etag = exports.etag(stat);\n        var options = {\n            flags: \"rb\"\n        };\n        var range;\n        var status = 200;\n        var headers = {\n            \"content-type\": contentType,\n            etag: etag\n        };\n\n        // Partial range requests\n        if (\"range\" in request.headers) {\n            // Invalid cache\n            if (\n                \"if-range\" in request.headers &&\n                etag != request.headers[\"if-range\"]\n            ) {\n                // Normal 200 for entire, altered content\n            } else {\n                // Truncate to the first requested continuous range\n                range = interpretFirstRange(request.headers[\"range\"]);\n                // Like Apache, ignore the range header if it is invalid\n                if (range) {\n                    if (range.end > stat.size)\n                        return StatusApps.responseForStatus(request, 416); // not satisfiable\n                    status = 206; // partial content\n                    headers[\"content-range\"] = (\n                        \"bytes \" +\n                        range.begin + \"-\" + (range.end - 1) +\n                        \"/\" + stat.size\n                    );\n                    headers[\"content-length\"] = \"\" + (range.end - range.begin);\n                }\n                options.begin = range.begin;\n                options.end = range.end;\n            }\n        // Full requests\n        } else {\n            // Cached\n            // We do not use date-based caching\n            // TODO consider if-match?\n            if (etag == request.headers[\"if-none-match\"])\n                return StatusApps.responseForStatus(request, 304);\n            headers[\"content-length\"] = \"\" + stat.size;\n        }\n\n        // TODO sendfile\n        return {\n            status: status,\n            headers: headers,\n            body: fs.open(path, options),\n            file: path,\n            range: range\n        };\n    });\n};\n\nvar rangesExpression = /^\\s*bytes\\s*=\\s*(\\d*\\s*-\\s*\\d*\\s*(?:,\\s*\\d*\\s*-\\s*\\d*\\s*)*)$/;\nvar rangeExpression = /^\\s*(\\d*)\\s*-\\s*(\\d*)\\s*$/;\n\nvar interpretRange = function (text, size) {\n    var match = rangeExpression.exec(text);\n    if (!match)\n        return;\n    if (match[1] == \"\" && match[2] == \"\")\n        return;\n    var begin, end;\n    if (match[1] == \"\") {\n        begin = size - match[2];\n        end = size;\n    } else if (match[2] == \"\") {\n        begin = +match[1];\n        end = size;\n    } else {\n        begin = +match[1];\n        end = +match[2] + 1;\n    }\n    return {\n        begin: begin,\n        end: end\n    };\n};\n\nvar interpretFirstRange = exports.interpretFirstRange = function (text, size) {\n    var match = rangesExpression.exec(text);\n    if (!match)\n        return;\n    var texts = match[1].split(/\\s*,\\s*/);\n    var range = interpretRange(texts[0], size);\n    for (var i = 0, ii = texts.length; i < ii; i++) {\n        var next = interpretRange(texts[i], size);\n        if (!next)\n            break;\n        if (next.begin <= range.end) {\n            range.end = next.end;\n        } else {\n            break;\n        }\n    }\n    return range;\n};\n\n/**\n * @param {Stat}\n * @returns {String}\n */\nexports.etag = function (stat) {\n    return [\n        stat.node.ino,\n        stat.size,\n        stat.lastModified().getTime()\n    ].join(\"-\");\n};\n\n/**\n * @param {Request} request\n * @param {String} path\n * @param {Response}\n */\nexports.directory = function (request, path) {\n    var response = StatusApps.notFound(request);\n    response.directory = path;\n    return response;\n};\n\nexports.ListDirectories = function (app, listDirectory) {\n    listDirectory = listDirectory || exports.listDirectory;\n    return function (request) {\n        if (request.directoryIndex) {\n            throw new Error(\"DirectoryIndex must be used after ListDirectories\");\n        }\n        request.listDirectories = true;\n        return Q.fcall(app, request)\n        .then(function (response) {\n            if (response.directory !== void 0) {\n                return exports.listDirectory(request, response);\n            } else {\n                return response;\n            }\n        });\n    };\n};\n\nexports.listDirectory = function (request, response) {\n    // TODO advisory to have JSON or HTML fragment handler.\n    request.location = URL.parse(request.path);\n    if (request.location.file) {\n        return RedirectApps.redirect(request, request.location.file + \"/\");\n    }\n    var handlers = {};\n    handlers[\"text/plain\"] = exports.listDirectoryText;\n    handlers[\"text/markdown\"] = exports.listDirectoryMarkdown;\n    if (request.handleHtmlFragmentResponse) {\n        handlers[\"text/html\"] = exports.listDirectoryHtmlFragment;\n    }\n    if (request.handleJsonResponse) {\n        handlers[\"application/json\"] = exports.listDirectoryJson;\n    }\n    var handleResponse = Negotiation.negotiate(request, handlers) || function () {\n        return response;\n    };\n    return handleResponse(request, response);\n};\n\nexports.listDirectoryHtmlFragment = function (request, response) {\n    return exports.listDirectoryData(request, response)\n    .then(function (data) {\n        return {\n            status: 200,\n            headers: {\n                \"content-type\": \"text/html\"\n            },\n            htmlTitle: \"Directory Index\",\n            htmlFragment: {\n                forEach: function (write) {\n                    write(\"<ul class=\\\"directory-index\\\">\\n\");\n                    Object.keys(data).sort().forEach(function (name) {\n                        var stat = data[name];\n                        var suffix = \"\";\n                        if (stat.type === \"directory\") {\n                            suffix = \"/\";\n                        }\n                        write(\"    <li class=\\\"entry \" + stat.type + \"\\\"><a href=\\\"\" + HtmlApps.escapeHtml(name + suffix) + \"\\\">\" + HtmlApps.escapeHtml(name + suffix) + \"</a></li>\\n\");\n                    });\n                    write(\"</ul>\\n\");\n                }\n            }\n        };\n    });\n};\n\nexports.listDirectoryText = function (request, response) {\n    return exports.listDirectoryData(request, response)\n    .then(function (data) {\n        return {\n            status: 200,\n            headers: {\n                \"content-type\": \"text/plain\"\n            },\n            body: {\n                forEach: function (write) {\n                    Object.keys(data).sort().forEach(function (name) {\n                        var stat = data[name];\n                        var suffix = \"\";\n                        if (stat.type === \"directory\") {\n                            suffix = \"/\";\n                        }\n                        write(name + suffix + \"\\n\");\n                    });\n                }\n            }\n        };\n    });\n};\n\nexports.listDirectoryMarkdown = function (request, response) {\n    return exports.listDirectoryData(request, response)\n    .then(function (data) {\n        return {\n            status: 200,\n            headers: {\n                \"content-type\": \"text/plain\"\n            },\n            body: {\n                forEach: function (write) {\n                    write(\"\\n# Directory Index\\n\\n\");\n                    Object.keys(data).forEach(function (name) {\n                        var stat = data[name];\n                        var suffix = \"\";\n                        if (stat.type === \"directory\") {\n                            suffix = \"/\";\n                        }\n                        write(\"-   \" + name + suffix + \"\\n\");\n                    });\n                    write(\"\\n\");\n                }\n            }\n        };\n    });\n};\n\nexports.listDirectoryJson = function (request, response) {\n    return exports.listDirectoryData(request, response)\n    .then(function (data) {\n        return {\n            status: 200,\n            headers: {},\n            data: data\n        };\n    });\n};\n\nexports.listDirectoryData = function (request, response) {\n    if (!request.fs) {\n        throw new Error(\"Can't list a directory without a designated file system\");\n    }\n    var fs = request.fs;\n    return Q.invoke(fs, \"list\", response.directory)\n    .then(function (list) {\n        list.sort();\n        return list.map(function (name) {\n            return Q.invoke(fs, \"stat\", fs.join(response.directory, name))\n            .then(function (stat) {\n                if (stat.isDirectory()) {\n                    return {name: name, stat: {\n                        type: \"directory\"\n                    }};\n                } else if (stat.isFile()) {\n                    return {name: name, stat: {\n                        type: \"file\"\n                    }};\n                }\n            }, function () {\n                // ignore unstatable entries\n            });\n        })\n    })\n    .all()\n    .then(function (stats) {\n        var data = {};\n        stats.forEach(function (entry) {\n            if (entry) {\n                data[entry.name] = entry.stat;\n            }\n        });\n        return data;\n    });\n};\n\nexports.DirectoryIndex = function (app, indexFile) {\n    indexFile = indexFile || \"index.html\";\n    return function (request) {\n        request.directoryIndex = true;\n        request.location = URL.parse(request.path);\n        // redirect index.html to containing directory\n        // TODO worry about whether this file actually exists\n        if (request.location.file === indexFile) {\n            return RedirectApps.redirect(request, \".\");\n        } else {\n            return Q.fcall(app, request)\n            .then(function (response) {\n                if (response.directory !== void 0) {\n                    if (request.location.file) {\n                        return RedirectApps.redirect(request, request.location.file + \"/\");\n                    } else {\n                        var index = request.fs.join(response.directory, indexFile);\n                        return Q.invoke(request.fs, \"isFile\", index)\n                        .then(function (isFile) {\n                            if (isFile) {\n                                request.url = URL.resolve(request.url, indexFile);\n                                request.pathInfo += indexFile;\n                                return app(request);\n                            } else {\n                                return response;\n                            }\n                        });\n                    }\n                } else {\n                    return response;\n                }\n            });\n        }\n    };\n};","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":21}},"id":0},"1":{"loc":{"start":{"line":1,"column":8},"end":{"line":1,"column":20}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":26}},"id":2},"3":{"loc":{"start":{"line":2,"column":10},"end":{"line":2,"column":25}},"id":3},"4":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":32}},"id":4},"5":{"loc":{"start":{"line":3,"column":16},"end":{"line":3,"column":31}},"id":5},"6":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":26}},"id":6},"7":{"loc":{"start":{"line":4,"column":9},"end":{"line":4,"column":25}},"id":7},"8":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":37}},"id":8},"9":{"loc":{"start":{"line":5,"column":17},"end":{"line":5,"column":36}},"id":9},"10":{"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":41}},"id":10},"11":{"loc":{"start":{"line":6,"column":19},"end":{"line":6,"column":40}},"id":11},"12":{"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":41}},"id":12},"13":{"loc":{"start":{"line":7,"column":18},"end":{"line":7,"column":40}},"id":13},"14":{"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":33}},"id":14},"15":{"loc":{"start":{"line":8,"column":15},"end":{"line":8,"column":32}},"id":15},"16":{"loc":{"start":{"line":15,"column":0},"end":{"line":19,"column":2}},"id":16},"17":{"loc":{"start":{"line":16,"column":4},"end":{"line":18,"column":6}},"id":17},"18":{"loc":{"start":{"line":17,"column":8},"end":{"line":17,"column":64}},"id":18},"19":{"loc":{"start":{"line":17,"column":15},"end":{"line":17,"column":63}},"id":19},"20":{"loc":{"start":{"line":17,"column":37},"end":{"line":17,"column":49}},"id":20},"21":{"loc":{"start":{"line":34,"column":0},"end":{"line":74,"column":2}},"id":21},"22":{"loc":{"start":{"line":36,"column":8},"end":{"line":36,"column":21}},"id":22},"23":{"loc":{"start":{"line":37,"column":4},"end":{"line":37,"column":63}},"id":23},"24":{"loc":{"start":{"line":37,"column":23},"end":{"line":37,"column":62}},"id":24},"25":{"loc":{"start":{"line":38,"column":4},"end":{"line":38,"column":48}},"id":25},"26":{"loc":{"start":{"line":38,"column":19},"end":{"line":38,"column":47}},"id":26},"27":{"loc":{"start":{"line":39,"column":4},"end":{"line":39,"column":63}},"id":27},"28":{"loc":{"start":{"line":39,"column":24},"end":{"line":39,"column":62}},"id":28},"29":{"loc":{"start":{"line":40,"column":4},"end":{"line":40,"column":34}},"id":29},"30":{"loc":{"start":{"line":40,"column":17},"end":{"line":40,"column":33}},"id":30},"31":{"loc":{"start":{"line":41,"column":4},"end":{"line":41,"column":24}},"id":31},"32":{"loc":{"start":{"line":42,"column":4},"end":{"line":42,"column":30}},"id":32},"33":{"loc":{"start":{"line":42,"column":11},"end":{"line":42,"column":29}},"id":33},"34":{"loc":{"start":{"line":43,"column":4},"end":{"line":73,"column":6}},"id":34},"35":{"loc":{"start":{"line":44,"column":8},"end":{"line":44,"column":46}},"id":35},"36":{"loc":{"start":{"line":44,"column":23},"end":{"line":44,"column":45}},"id":36},"37":{"loc":{"start":{"line":45,"column":8},"end":{"line":45,"column":24}},"id":37},"38":{"loc":{"start":{"line":46,"column":8},"end":{"line":50,"column":10}},"id":38},"39":{"loc":{"start":{"line":46,"column":23},"end":{"line":50,"column":9}},"id":39},"40":{"loc":{"start":{"line":48,"column":12},"end":{"line":48,"column":42}},"id":40},"41":{"loc":{"start":{"line":49,"column":12},"end":{"line":49,"column":42}},"id":41},"42":{"loc":{"start":{"line":47,"column":12},"end":{"line":47,"column":50}},"id":42},"43":{"loc":{"start":{"line":51,"column":8},"end":{"line":72,"column":11}},"id":43},"44":{"loc":{"start":{"line":51,"column":15},"end":{"line":72,"column":10}},"id":44},"45":{"loc":{"start":{"line":52,"column":12},"end":{"line":52,"column":64}},"id":45},"46":{"loc":{"start":{"line":52,"column":23},"end":{"line":52,"column":63}},"id":46},"47":{"loc":{"start":{"line":52,"column":37},"end":{"line":52,"column":62}},"id":47},"48":{"loc":{"start":{"line":53,"column":12},"end":{"line":71,"column":15}},"id":48},"49":{"loc":{"start":{"line":53,"column":19},"end":{"line":71,"column":14}},"id":49},"50":{"loc":{"start":{"line":53,"column":26},"end":{"line":53,"column":44}},"id":50},"51":{"loc":{"start":{"line":54,"column":21},"end":{"line":54,"column":49}},"id":51},"52":{"loc":{"start":{"line":55,"column":20},"end":{"line":55,"column":63}},"id":52},"53":{"loc":{"start":{"line":55,"column":27},"end":{"line":55,"column":62}},"id":53},"54":{"loc":{"start":{"line":56,"column":20},"end":{"line":56,"column":71}},"id":54},"55":{"loc":{"start":{"line":56,"column":20},"end":{"line":56,"column":38}},"id":55},"56":{"loc":{"start":{"line":57,"column":20},"end":{"line":57,"column":83}},"id":56},"57":{"loc":{"start":{"line":57,"column":27},"end":{"line":57,"column":82}},"id":57},"58":{"loc":{"start":{"line":57,"column":45},"end":{"line":57,"column":81}},"id":58},"59":{"loc":{"start":{"line":60,"column":16},"end":{"line":68,"column":19}},"id":59},"60":{"loc":{"start":{"line":60,"column":23},"end":{"line":68,"column":18}},"id":60},"61":{"loc":{"start":{"line":60,"column":30},"end":{"line":60,"column":48}},"id":61},"62":{"loc":{"start":{"line":61,"column":24},"end":{"line":61,"column":37}},"id":62},"63":{"loc":{"start":{"line":62,"column":24},"end":{"line":62,"column":89}},"id":63},"64":{"loc":{"start":{"line":62,"column":31},"end":{"line":62,"column":88}},"id":64},"65":{"loc":{"start":{"line":63,"column":31},"end":{"line":63,"column":49}},"id":65},"66":{"loc":{"start":{"line":64,"column":24},"end":{"line":64,"column":90}},"id":66},"67":{"loc":{"start":{"line":64,"column":31},"end":{"line":64,"column":89}},"id":67},"68":{"loc":{"start":{"line":66,"column":24},"end":{"line":66,"column":67}},"id":68},"69":{"loc":{"start":{"line":66,"column":31},"end":{"line":66,"column":66}},"id":69},"70":{"loc":{"start":{"line":70,"column":16},"end":{"line":70,"column":59}},"id":70},"71":{"loc":{"start":{"line":70,"column":23},"end":{"line":70,"column":58}},"id":71},"72":{"loc":{"start":{"line":76,"column":0},"end":{"line":137,"column":2}},"id":72},"73":{"loc":{"start":{"line":77,"column":4},"end":{"line":77,"column":18}},"id":73},"74":{"loc":{"start":{"line":77,"column":9},"end":{"line":77,"column":17}},"id":74},"75":{"loc":{"start":{"line":79,"column":4},"end":{"line":79,"column":56}},"id":75},"76":{"loc":{"start":{"line":79,"column":18},"end":{"line":79,"column":55}},"id":76},"77":{"loc":{"start":{"line":79,"column":33},"end":{"line":79,"column":55}},"id":77},"78":{"loc":{"start":{"line":80,"column":4},"end":{"line":136,"column":7}},"id":78},"79":{"loc":{"start":{"line":80,"column":11},"end":{"line":136,"column":6}},"id":79},"80":{"loc":{"start":{"line":80,"column":18},"end":{"line":80,"column":31}},"id":80},"81":{"loc":{"start":{"line":81,"column":8},"end":{"line":81,"column":38}},"id":81},"82":{"loc":{"start":{"line":81,"column":19},"end":{"line":81,"column":37}},"id":82},"83":{"loc":{"start":{"line":82,"column":8},"end":{"line":84,"column":10}},"id":83},"84":{"loc":{"start":{"line":85,"column":8},"end":{"line":85,"column":18}},"id":84},"85":{"loc":{"start":{"line":86,"column":8},"end":{"line":86,"column":25}},"id":85},"86":{"loc":{"start":{"line":87,"column":8},"end":{"line":90,"column":10}},"id":86},"87":{"loc":{"start":{"line":93,"column":12},"end":{"line":93,"column":38}},"id":87},"88":{"loc":{"start":{"line":96,"column":16},"end":{"line":97,"column":51}},"id":88},"89":{"loc":{"start":{"line":96,"column":16},"end":{"line":96,"column":45}},"id":89},"90":{"loc":{"start":{"line":97,"column":16},"end":{"line":97,"column":51}},"id":90},"91":{"loc":{"start":{"line":102,"column":16},"end":{"line":102,"column":70}},"id":91},"92":{"loc":{"start":{"line":102,"column":24},"end":{"line":102,"column":69}},"id":92},"93":{"loc":{"start":{"line":105,"column":24},"end":{"line":105,"column":45}},"id":93},"94":{"loc":{"start":{"line":106,"column":24},"end":{"line":106,"column":74}},"id":94},"95":{"loc":{"start":{"line":106,"column":31},"end":{"line":106,"column":73}},"id":95},"96":{"loc":{"start":{"line":107,"column":20},"end":{"line":107,"column":33}},"id":96},"97":{"loc":{"start":{"line":108,"column":20},"end":{"line":112,"column":22}},"id":97},"98":{"loc":{"start":{"line":108,"column":47},"end":{"line":112,"column":21}},"id":98},"99":{"loc":{"start":{"line":109,"column":24},"end":{"line":111,"column":27}},"id":99},"100":{"loc":{"start":{"line":109,"column":24},"end":{"line":110,"column":59}},"id":100},"101":{"loc":{"start":{"line":109,"column":24},"end":{"line":110,"column":41}},"id":101},"102":{"loc":{"start":{"line":109,"column":24},"end":{"line":110,"column":35}},"id":102},"103":{"loc":{"start":{"line":110,"column":44},"end":{"line":110,"column":59}},"id":103},"104":{"loc":{"start":{"line":113,"column":20},"end":{"line":113,"column":79}},"id":104},"105":{"loc":{"start":{"line":113,"column":48},"end":{"line":113,"column":78}},"id":105},"106":{"loc":{"start":{"line":113,"column":53},"end":{"line":113,"column":78}},"id":106},"107":{"loc":{"start":{"line":115,"column":16},"end":{"line":115,"column":44}},"id":107},"108":{"loc":{"start":{"line":116,"column":16},"end":{"line":116,"column":40}},"id":108},"109":{"loc":{"start":{"line":123,"column":16},"end":{"line":123,"column":56}},"id":109},"110":{"loc":{"start":{"line":124,"column":16},"end":{"line":124,"column":66}},"id":110},"111":{"loc":{"start":{"line":124,"column":23},"end":{"line":124,"column":65}},"id":111},"112":{"loc":{"start":{"line":125,"column":12},"end":{"line":125,"column":55}},"id":112},"113":{"loc":{"start":{"line":125,"column":40},"end":{"line":125,"column":54}},"id":113},"114":{"loc":{"start":{"line":129,"column":8},"end":{"line":135,"column":10}},"id":114},"115":{"loc":{"start":{"line":132,"column":18},"end":{"line":132,"column":40}},"id":115},"116":{"loc":{"start":{"line":139,"column":0},"end":{"line":139,"column":86}},"id":116},"117":{"loc":{"start":{"line":140,"column":0},"end":{"line":140,"column":50}},"id":117},"118":{"loc":{"start":{"line":142,"column":0},"end":{"line":163,"column":2}},"id":118},"119":{"loc":{"start":{"line":143,"column":4},"end":{"line":143,"column":43}},"id":119},"120":{"loc":{"start":{"line":143,"column":16},"end":{"line":143,"column":42}},"id":120},"121":{"loc":{"start":{"line":145,"column":8},"end":{"line":145,"column":15}},"id":121},"122":{"loc":{"start":{"line":146,"column":8},"end":{"line":146,"column":40}},"id":122},"123":{"loc":{"start":{"line":146,"column":8},"end":{"line":146,"column":22}},"id":123},"124":{"loc":{"start":{"line":146,"column":26},"end":{"line":146,"column":40}},"id":124},"125":{"loc":{"start":{"line":147,"column":8},"end":{"line":147,"column":15}},"id":125},"126":{"loc":{"start":{"line":148,"column":4},"end":{"line":148,"column":19}},"id":126},"127":{"loc":{"start":{"line":149,"column":8},"end":{"line":149,"column":22}},"id":127},"128":{"loc":{"start":{"line":150,"column":8},"end":{"line":150,"column":32}},"id":128},"129":{"loc":{"start":{"line":150,"column":16},"end":{"line":150,"column":31}},"id":129},"130":{"loc":{"start":{"line":151,"column":8},"end":{"line":151,"column":19}},"id":130},"131":{"loc":{"start":{"line":152,"column":15},"end":{"line":152,"column":29}},"id":131},"132":{"loc":{"start":{"line":153,"column":8},"end":{"line":153,"column":26}},"id":132},"133":{"loc":{"start":{"line":154,"column":8},"end":{"line":154,"column":19}},"id":133},"134":{"loc":{"start":{"line":156,"column":8},"end":{"line":156,"column":26}},"id":134},"135":{"loc":{"start":{"line":157,"column":8},"end":{"line":157,"column":28}},"id":135},"136":{"loc":{"start":{"line":157,"column":14},"end":{"line":157,"column":27}},"id":136},"137":{"loc":{"start":{"line":159,"column":4},"end":{"line":162,"column":6}},"id":137},"138":{"loc":{"start":{"line":165,"column":0},"end":{"line":182,"column":2}},"id":138},"139":{"loc":{"start":{"line":166,"column":4},"end":{"line":166,"column":44}},"id":139},"140":{"loc":{"start":{"line":166,"column":16},"end":{"line":166,"column":43}},"id":140},"141":{"loc":{"start":{"line":168,"column":8},"end":{"line":168,"column":15}},"id":141},"142":{"loc":{"start":{"line":169,"column":4},"end":{"line":169,"column":42}},"id":142},"143":{"loc":{"start":{"line":169,"column":16},"end":{"line":169,"column":41}},"id":143},"144":{"loc":{"start":{"line":170,"column":4},"end":{"line":170,"column":47}},"id":144},"145":{"loc":{"start":{"line":170,"column":16},"end":{"line":170,"column":46}},"id":145},"146":{"loc":{"start":{"line":171,"column":39},"end":{"line":171,"column":45}},"id":146},"147":{"loc":{"start":{"line":171,"column":47},"end":{"line":171,"column":50}},"id":147},"148":{"loc":{"start":{"line":172,"column":8},"end":{"line":172,"column":50}},"id":148},"149":{"loc":{"start":{"line":172,"column":19},"end":{"line":172,"column":49}},"id":149},"150":{"loc":{"start":{"line":175,"column":12},"end":{"line":175,"column":35}},"id":150},"151":{"loc":{"start":{"line":176,"column":12},"end":{"line":176,"column":33}},"id":151},"152":{"loc":{"start":{"line":181,"column":4},"end":{"line":181,"column":17}},"id":152},"153":{"loc":{"start":{"line":188,"column":0},"end":{"line":194,"column":2}},"id":153},"154":{"loc":{"start":{"line":189,"column":4},"end":{"line":193,"column":16}},"id":154},"155":{"loc":{"start":{"line":189,"column":11},"end":{"line":193,"column":15}},"id":155},"156":{"loc":{"start":{"line":192,"column":8},"end":{"line":192,"column":37}},"id":156},"157":{"loc":{"start":{"line":192,"column":25},"end":{"line":192,"column":27}},"id":157},"158":{"loc":{"start":{"line":201,"column":0},"end":{"line":205,"column":2}},"id":158},"159":{"loc":{"start":{"line":202,"column":4},"end":{"line":202,"column":48}},"id":159},"160":{"loc":{"start":{"line":202,"column":19},"end":{"line":202,"column":47}},"id":160},"161":{"loc":{"start":{"line":203,"column":4},"end":{"line":203,"column":30}},"id":161},"162":{"loc":{"start":{"line":204,"column":4},"end":{"line":204,"column":20}},"id":162},"163":{"loc":{"start":{"line":207,"column":0},"end":{"line":223,"column":2}},"id":163},"164":{"loc":{"start":{"line":208,"column":4},"end":{"line":208,"column":59}},"id":164},"165":{"loc":{"start":{"line":208,"column":20},"end":{"line":208,"column":58}},"id":165},"166":{"loc":{"start":{"line":209,"column":4},"end":{"line":222,"column":6}},"id":166},"167":{"loc":{"start":{"line":211,"column":12},"end":{"line":211,"column":81}},"id":167},"168":{"loc":{"start":{"line":213,"column":8},"end":{"line":213,"column":39}},"id":168},"169":{"loc":{"start":{"line":214,"column":8},"end":{"line":221,"column":11}},"id":169},"170":{"loc":{"start":{"line":214,"column":15},"end":{"line":221,"column":10}},"id":170},"171":{"loc":{"start":{"line":214,"column":22},"end":{"line":214,"column":36}},"id":171},"172":{"loc":{"start":{"line":216,"column":16},"end":{"line":216,"column":45}},"id":172},"173":{"loc":{"start":{"line":217,"column":16},"end":{"line":217,"column":64}},"id":173},"174":{"loc":{"start":{"line":217,"column":23},"end":{"line":217,"column":63}},"id":174},"175":{"loc":{"start":{"line":219,"column":16},"end":{"line":219,"column":32}},"id":175},"176":{"loc":{"start":{"line":225,"column":0},"end":{"line":244,"column":2}},"id":176},"177":{"loc":{"start":{"line":227,"column":4},"end":{"line":227,"column":47}},"id":177},"178":{"loc":{"start":{"line":227,"column":23},"end":{"line":227,"column":46}},"id":178},"179":{"loc":{"start":{"line":229,"column":8},"end":{"line":229,"column":75}},"id":179},"180":{"loc":{"start":{"line":229,"column":15},"end":{"line":229,"column":74}},"id":180},"181":{"loc":{"start":{"line":229,"column":46},"end":{"line":229,"column":73}},"id":181},"182":{"loc":{"start":{"line":231,"column":4},"end":{"line":231,"column":22}},"id":182},"183":{"loc":{"start":{"line":232,"column":4},"end":{"line":232,"column":55}},"id":183},"184":{"loc":{"start":{"line":233,"column":4},"end":{"line":233,"column":62}},"id":184},"185":{"loc":{"start":{"line":235,"column":8},"end":{"line":235,"column":66}},"id":185},"186":{"loc":{"start":{"line":238,"column":8},"end":{"line":238,"column":65}},"id":186},"187":{"loc":{"start":{"line":240,"column":4},"end":{"line":242,"column":6}},"id":187},"188":{"loc":{"start":{"line":240,"column":25},"end":{"line":242,"column":5}},"id":188},"189":{"loc":{"start":{"line":240,"column":25},"end":{"line":240,"column":65}},"id":189},"190":{"loc":{"start":{"line":241,"column":8},"end":{"line":241,"column":24}},"id":190},"191":{"loc":{"start":{"line":243,"column":4},"end":{"line":243,"column":45}},"id":191},"192":{"loc":{"start":{"line":243,"column":11},"end":{"line":243,"column":44}},"id":192},"193":{"loc":{"start":{"line":246,"column":0},"end":{"line":271,"column":2}},"id":193},"194":{"loc":{"start":{"line":247,"column":4},"end":{"line":270,"column":7}},"id":194},"195":{"loc":{"start":{"line":247,"column":11},"end":{"line":270,"column":6}},"id":195},"196":{"loc":{"start":{"line":247,"column":36},"end":{"line":247,"column":55}},"id":196},"197":{"loc":{"start":{"line":249,"column":8},"end":{"line":269,"column":10}},"id":197},"198":{"loc":{"start":{"line":257,"column":20},"end":{"line":257,"column":62}},"id":198},"199":{"loc":{"start":{"line":257,"column":20},"end":{"line":257,"column":61}},"id":199},"200":{"loc":{"start":{"line":258,"column":20},"end":{"line":265,"column":23}},"id":200},"201":{"loc":{"start":{"line":258,"column":20},"end":{"line":265,"column":22}},"id":201},"202":{"loc":{"start":{"line":258,"column":42},"end":{"line":258,"column":44}},"id":202},"203":{"loc":{"start":{"line":258,"column":31},"end":{"line":258,"column":37}},"id":203},"204":{"loc":{"start":{"line":259,"column":24},"end":{"line":259,"column":46}},"id":204},"205":{"loc":{"start":{"line":260,"column":24},"end":{"line":260,"column":40}},"id":205},"206":{"loc":{"start":{"line":261,"column":28},"end":{"line":261,"column":53}},"id":206},"207":{"loc":{"start":{"line":262,"column":28},"end":{"line":262,"column":41}},"id":207},"208":{"loc":{"start":{"line":264,"column":24},"end":{"line":264,"column":184}},"id":208},"209":{"loc":{"start":{"line":264,"column":24},"end":{"line":264,"column":183}},"id":209},"210":{"loc":{"start":{"line":264,"column":30},"end":{"line":264,"column":182}},"id":210},"211":{"loc":{"start":{"line":264,"column":30},"end":{"line":264,"column":166}},"id":211},"212":{"loc":{"start":{"line":264,"column":30},"end":{"line":264,"column":129}},"id":212},"213":{"loc":{"start":{"line":264,"column":30},"end":{"line":264,"column":121}},"id":213},"214":{"loc":{"start":{"line":264,"column":30},"end":{"line":264,"column":84}},"id":214},"215":{"loc":{"start":{"line":264,"column":30},"end":{"line":264,"column":66}},"id":215},"216":{"loc":{"start":{"line":264,"column":87},"end":{"line":264,"column":121}},"id":216},"217":{"loc":{"start":{"line":264,"column":107},"end":{"line":264,"column":120}},"id":217},"218":{"loc":{"start":{"line":264,"column":132},"end":{"line":264,"column":166}},"id":218},"219":{"loc":{"start":{"line":264,"column":152},"end":{"line":264,"column":165}},"id":219},"220":{"loc":{"start":{"line":266,"column":20},"end":{"line":266,"column":37}},"id":220},"221":{"loc":{"start":{"line":266,"column":20},"end":{"line":266,"column":36}},"id":221},"222":{"loc":{"start":{"line":273,"column":0},"end":{"line":295,"column":2}},"id":222},"223":{"loc":{"start":{"line":274,"column":4},"end":{"line":294,"column":7}},"id":223},"224":{"loc":{"start":{"line":274,"column":11},"end":{"line":294,"column":6}},"id":224},"225":{"loc":{"start":{"line":274,"column":36},"end":{"line":274,"column":55}},"id":225},"226":{"loc":{"start":{"line":276,"column":8},"end":{"line":293,"column":10}},"id":226},"227":{"loc":{"start":{"line":283,"column":20},"end":{"line":290,"column":23}},"id":227},"228":{"loc":{"start":{"line":283,"column":20},"end":{"line":290,"column":22}},"id":228},"229":{"loc":{"start":{"line":283,"column":42},"end":{"line":283,"column":44}},"id":229},"230":{"loc":{"start":{"line":283,"column":31},"end":{"line":283,"column":37}},"id":230},"231":{"loc":{"start":{"line":284,"column":24},"end":{"line":284,"column":46}},"id":231},"232":{"loc":{"start":{"line":285,"column":24},"end":{"line":285,"column":40}},"id":232},"233":{"loc":{"start":{"line":286,"column":28},"end":{"line":286,"column":53}},"id":233},"234":{"loc":{"start":{"line":287,"column":28},"end":{"line":287,"column":41}},"id":234},"235":{"loc":{"start":{"line":289,"column":24},"end":{"line":289,"column":52}},"id":235},"236":{"loc":{"start":{"line":289,"column":24},"end":{"line":289,"column":51}},"id":236},"237":{"loc":{"start":{"line":289,"column":30},"end":{"line":289,"column":50}},"id":237},"238":{"loc":{"start":{"line":289,"column":30},"end":{"line":289,"column":43}},"id":238},"239":{"loc":{"start":{"line":297,"column":0},"end":{"line":321,"column":2}},"id":239},"240":{"loc":{"start":{"line":298,"column":4},"end":{"line":320,"column":7}},"id":240},"241":{"loc":{"start":{"line":298,"column":11},"end":{"line":320,"column":6}},"id":241},"242":{"loc":{"start":{"line":298,"column":36},"end":{"line":298,"column":55}},"id":242},"243":{"loc":{"start":{"line":300,"column":8},"end":{"line":319,"column":10}},"id":243},"244":{"loc":{"start":{"line":307,"column":20},"end":{"line":307,"column":53}},"id":244},"245":{"loc":{"start":{"line":307,"column":20},"end":{"line":307,"column":52}},"id":245},"246":{"loc":{"start":{"line":308,"column":20},"end":{"line":315,"column":23}},"id":246},"247":{"loc":{"start":{"line":308,"column":20},"end":{"line":315,"column":22}},"id":247},"248":{"loc":{"start":{"line":308,"column":31},"end":{"line":308,"column":37}},"id":248},"249":{"loc":{"start":{"line":309,"column":24},"end":{"line":309,"column":46}},"id":249},"250":{"loc":{"start":{"line":310,"column":24},"end":{"line":310,"column":40}},"id":250},"251":{"loc":{"start":{"line":311,"column":28},"end":{"line":311,"column":53}},"id":251},"252":{"loc":{"start":{"line":312,"column":28},"end":{"line":312,"column":41}},"id":252},"253":{"loc":{"start":{"line":314,"column":24},"end":{"line":314,"column":61}},"id":253},"254":{"loc":{"start":{"line":314,"column":24},"end":{"line":314,"column":60}},"id":254},"255":{"loc":{"start":{"line":314,"column":30},"end":{"line":314,"column":59}},"id":255},"256":{"loc":{"start":{"line":314,"column":30},"end":{"line":314,"column":52}},"id":256},"257":{"loc":{"start":{"line":314,"column":30},"end":{"line":314,"column":43}},"id":257},"258":{"loc":{"start":{"line":316,"column":20},"end":{"line":316,"column":32}},"id":258},"259":{"loc":{"start":{"line":316,"column":20},"end":{"line":316,"column":31}},"id":259},"260":{"loc":{"start":{"line":323,"column":0},"end":{"line":332,"column":2}},"id":260},"261":{"loc":{"start":{"line":324,"column":4},"end":{"line":331,"column":7}},"id":261},"262":{"loc":{"start":{"line":324,"column":11},"end":{"line":331,"column":6}},"id":262},"263":{"loc":{"start":{"line":324,"column":36},"end":{"line":324,"column":55}},"id":263},"264":{"loc":{"start":{"line":326,"column":8},"end":{"line":330,"column":10}},"id":264},"265":{"loc":{"start":{"line":334,"column":0},"end":{"line":369,"column":2}},"id":265},"266":{"loc":{"start":{"line":336,"column":8},"end":{"line":336,"column":83}},"id":266},"267":{"loc":{"start":{"line":338,"column":4},"end":{"line":338,"column":24}},"id":267},"268":{"loc":{"start":{"line":339,"column":4},"end":{"line":368,"column":7}},"id":268},"269":{"loc":{"start":{"line":339,"column":11},"end":{"line":368,"column":6}},"id":269},"270":{"loc":{"start":{"line":359,"column":8},"end":{"line":359,"column":10}},"id":270},"271":{"loc":{"start":{"line":340,"column":9},"end":{"line":358,"column":6}},"id":271},"272":{"loc":{"start":{"line":339,"column":19},"end":{"line":339,"column":51}},"id":272},"273":{"loc":{"start":{"line":341,"column":8},"end":{"line":341,"column":20}},"id":273},"274":{"loc":{"start":{"line":341,"column":8},"end":{"line":341,"column":19}},"id":274},"275":{"loc":{"start":{"line":342,"column":8},"end":{"line":358,"column":4}},"id":275},"276":{"loc":{"start":{"line":342,"column":15},"end":{"line":357,"column":10}},"id":276},"277":{"loc":{"start":{"line":343,"column":12},"end":{"line":356,"column":15}},"id":277},"278":{"loc":{"start":{"line":343,"column":19},"end":{"line":356,"column":14}},"id":278},"279":{"loc":{"start":{"line":343,"column":27},"end":{"line":343,"column":74}},"id":279},"280":{"loc":{"start":{"line":343,"column":40},"end":{"line":343,"column":73}},"id":280},"281":{"loc":{"start":{"line":345,"column":20},"end":{"line":345,"column":38}},"id":281},"282":{"loc":{"start":{"line":346,"column":20},"end":{"line":348,"column":23}},"id":282},"283":{"loc":{"start":{"line":349,"column":27},"end":{"line":349,"column":40}},"id":283},"284":{"loc":{"start":{"line":350,"column":20},"end":{"line":352,"column":23}},"id":284},"285":{"loc":{"start":{"line":361,"column":8},"end":{"line":361,"column":22}},"id":285},"286":{"loc":{"start":{"line":362,"column":8},"end":{"line":366,"column":11}},"id":286},"287":{"loc":{"start":{"line":362,"column":8},"end":{"line":366,"column":10}},"id":287},"288":{"loc":{"start":{"line":364,"column":16},"end":{"line":364,"column":46}},"id":288},"289":{"loc":{"start":{"line":367,"column":8},"end":{"line":367,"column":20}},"id":289},"290":{"loc":{"start":{"line":371,"column":0},"end":{"line":405,"column":2}},"id":290},"291":{"loc":{"start":{"line":372,"column":4},"end":{"line":372,"column":42}},"id":291},"292":{"loc":{"start":{"line":372,"column":16},"end":{"line":372,"column":41}},"id":292},"293":{"loc":{"start":{"line":373,"column":4},"end":{"line":404,"column":6}},"id":293},"294":{"loc":{"start":{"line":374,"column":8},"end":{"line":374,"column":38}},"id":294},"295":{"loc":{"start":{"line":375,"column":8},"end":{"line":375,"column":51}},"id":295},"296":{"loc":{"start":{"line":375,"column":27},"end":{"line":375,"column":50}},"id":296},"297":{"loc":{"start":{"line":378,"column":12},"end":{"line":378,"column":47}},"id":297},"298":{"loc":{"start":{"line":379,"column":12},"end":{"line":379,"column":55}},"id":298},"299":{"loc":{"start":{"line":379,"column":19},"end":{"line":379,"column":54}},"id":299},"300":{"loc":{"start":{"line":381,"column":12},"end":{"line":402,"column":15}},"id":300},"301":{"loc":{"start":{"line":381,"column":19},"end":{"line":402,"column":14}},"id":301},"302":{"loc":{"start":{"line":381,"column":26},"end":{"line":381,"column":40}},"id":302},"303":{"loc":{"start":{"line":383,"column":20},"end":{"line":383,"column":49}},"id":303},"304":{"loc":{"start":{"line":385,"column":24},"end":{"line":385,"column":91}},"id":304},"305":{"loc":{"start":{"line":385,"column":31},"end":{"line":385,"column":90}},"id":305},"306":{"loc":{"start":{"line":385,"column":62},"end":{"line":385,"column":89}},"id":306},"307":{"loc":{"start":{"line":387,"column":24},"end":{"line":387,"column":83}},"id":307},"308":{"loc":{"start":{"line":387,"column":36},"end":{"line":387,"column":82}},"id":308},"309":{"loc":{"start":{"line":388,"column":24},"end":{"line":397,"column":27}},"id":309},"310":{"loc":{"start":{"line":388,"column":31},"end":{"line":397,"column":26}},"id":310},"311":{"loc":{"start":{"line":388,"column":39},"end":{"line":388,"column":68}},"id":311},"312":{"loc":{"start":{"line":391,"column":32},"end":{"line":391,"column":82}},"id":312},"313":{"loc":{"start":{"line":391,"column":46},"end":{"line":391,"column":81}},"id":313},"314":{"loc":{"start":{"line":392,"column":32},"end":{"line":392,"column":62}},"id":314},"315":{"loc":{"start":{"line":393,"column":32},"end":{"line":393,"column":52}},"id":315},"316":{"loc":{"start":{"line":393,"column":39},"end":{"line":393,"column":51}},"id":316},"317":{"loc":{"start":{"line":395,"column":32},"end":{"line":395,"column":48}},"id":317},"318":{"loc":{"start":{"line":400,"column":20},"end":{"line":400,"column":36}},"id":318}}}},"/Users/kris/q-io/http-apps/redirect.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"12":{"index":12,"count":1},"16":{"index":16,"count":1},"20":{"index":20,"count":1},"24":{"index":24,"count":1},"28":{"index":28,"count":1},"32":{"index":32,"count":1},"36":{"index":36,"count":1},"40":{"index":40,"count":1},"44":{"index":44,"count":1},"48":{"index":48,"count":1},"51":{"index":51,"count":1},"69":{"index":69,"count":1},"78":{"index":78,"count":1},"96":{"index":96,"count":1},"124":{"index":124,"count":1},"127":{"index":127,"count":1}},"blocks":{},"hash":"b2e296e439b2cca87204447302d0c868","instrumentor":{"blockCounter":33,"nodeCounter":128,"source":"var Q = require(\"q\");\nvar URL = require(\"url2\");\nvar Negotiation = require(\"./negotiate\");\nvar HtmlApps = require(\"./html\");\n\n/**\n * @param {String} path\n * @param {Number} status (optional) default is `301`\n * @returns {App}\n */\nexports.PermanentRedirect = function (location, status, tree) {\n    return function (request, response) {\n        return exports.permanentRedirect(request, location, status, tree);\n    };\n};\n\n/**\n * @param {String} path\n * @param {Number} status (optional) default is `301`\n * @returns {App}\n */\nexports.PermanentRedirectTree = function (location, status) {\n    return function (request, response) {\n        return exports.permanentRedirect(request, location, status, true);\n    };\n};\n\n/**\n * @param {String} path\n * @param {Number} status (optional) default is `307`\n * @returns {App}\n */\nexports.TemporaryRedirect = function (location, status, tree) {\n    return function (request, response) {\n        return exports.temporaryRedirect(request, location, status, tree);\n    };\n};\n\n/**\n * @param {String} path\n * @param {Number} status (optional) default is `307`\n * @returns {App}\n */\nexports.TemporaryRedirectTree = function (location, status) {\n    return function (request, response) {\n        return exports.temporaryRedirect(request, location, status, true);\n    };\n};\n\n/**\n * @param {String} path\n * @param {Number} status (optional) default is `307`\n * @returns {App}\n */\nexports.Redirect = function (location, status, tree) {\n    return function (request, response) {\n        return exports.redirect(request, location, status, tree);\n    };\n};\n\n/**\n * @param {String} path\n * @param {Number} status (optional) default is `307`\n * @returns {App}\n */\nexports.RedirectTree = function (location, status) {\n    return function (request, response) {\n        return exports.redirect(request, location, status, true);\n    };\n};\n\nexports.permanentRedirect = function (request, location, status) {\n    return exports.redirect(request, location, status || 301);\n};\n\nexports.permanentRedirectTree = function (request, location, status) {\n    return exports.redirect(request, location, status || 301, true);\n};\n\nexports.temporaryRedirect = function (request, location, status) {\n    return exports.redirect(request, location, status || 307);\n};\n\nexports.temporaryRedirectTree = function (request, location, status) {\n    return exports.redirect(request, location, status || 307, true);\n};\n\nexports.redirectTree = function (request, location, status) {\n    return exports.redirect(request, location, status, true);\n};\n\n/**\n * @param {String} location\n * @param {Number} status (optional) default is `301`\n * @returns {Response}\n */\nexports.redirect = function (request, location, status, tree) {\n\n    // request.permanent gets set by Permanent middleware\n    status = status || (request.permanent ? 301 : 307);\n\n    // ascertain that the location is absolute, per spec\n    location = URL.resolve(request.url, location);\n\n    // redirect into a subtree with the remaining unrouted\n    // portion of the path, if so configured\n    if (tree) {\n        location = URL.resolve(\n            location,\n            request.pathInfo.replace(/^\\//, \"\")\n        );\n    }\n\n    var handlers = {};\n    handlers[\"text/plain\"] = exports.redirectText;\n    if (request.handleHtmlFragmentResponse) {\n        handlers[\"text/html\"] = exports.redirectHtml;\n    }\n    var handler = Negotiation.negotiate(request, handlers) || exports.redirectText;\n    return handler(request, location, status);\n\n};\n\nexports.redirectText = function (request, location, status) {\n    var content = (\n        (request.permanent ? \"Permanent redirect\\n\" : \"Temporary redirect\\n\") +\n        \"See: \" + location + \"\\n\"\n    );\n    var contentLength = content.length;\n    return {\n        status: status,\n        headers: {\n            location: location,\n            \"content-type\": \"text/plain\"\n        },\n        body: [content]\n    };\n};\n\nexports.redirectHtml = function (request, location, status) {\n    var title = request.permanent ? \"Permanent redirect\" : \"Temporary redirect\";\n    return {\n        status: status,\n        headers: {\n            location: location,\n            \"content-type\": \"text/html\"\n        },\n        htmlTitle: title,\n        htmlFragment: {\n            forEach: function (write) {\n                write(\"<h1>\" + HtmlApps.escapeHtml(title) + \"</h1>\\n\");\n                write(\n                    \"<p>See: <a href=\\\"\" + HtmlApps.escapeHtml(location) + \"\\\">\" +\n                    HtmlApps.escapeHtml(location) +\n                    \"</a></p>\\n\"\n                );\n            }\n        }\n    };\n};\n\nexports.RedirectTrap = function (app, maxRedirects) {\n    maxRedirects = maxRedirects || 20;\n    return function (request, response) {\n        var remaining = maxRedirects;\n        var deferred = Q.defer();\n        var self = this;\n        var args = arguments;\n\n        request = HTTP.normalizeRequest(request);\n\n        // try redirect loop\n        function next() {\n            Q.fcall(function () {\n                return app(request, response);\n            })\n            .then(function (response) {\n                if (exports.isRedirect(response)) {\n                    if (remaining--) {\n                        request.url = response.headers.location;\n                        next();\n                    } else {\n                        throw new Error(\"Maximum redirects.\");\n                    }\n                } else {\n                    deferred.resolve(response);\n                }\n            })\n            .fail(deferred.reject)\n        }\n        next();\n\n        return deferred.promise;\n    };\n};\n\nexports.isRedirect = function (response) {\n    return isRedirect[response.status] || false;\n};\n\nvar isRedirect = {\n    301: true,\n    302: true,\n    303: true,\n    307: true\n};","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":21}},"id":0},"1":{"loc":{"start":{"line":1,"column":8},"end":{"line":1,"column":20}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":26}},"id":2},"3":{"loc":{"start":{"line":2,"column":10},"end":{"line":2,"column":25}},"id":3},"4":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":41}},"id":4},"5":{"loc":{"start":{"line":3,"column":18},"end":{"line":3,"column":40}},"id":5},"6":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":33}},"id":6},"7":{"loc":{"start":{"line":4,"column":15},"end":{"line":4,"column":32}},"id":7},"8":{"loc":{"start":{"line":11,"column":0},"end":{"line":15,"column":2}},"id":8},"9":{"loc":{"start":{"line":12,"column":4},"end":{"line":14,"column":6}},"id":9},"10":{"loc":{"start":{"line":13,"column":8},"end":{"line":13,"column":74}},"id":10},"11":{"loc":{"start":{"line":13,"column":15},"end":{"line":13,"column":73}},"id":11},"12":{"loc":{"start":{"line":22,"column":0},"end":{"line":26,"column":2}},"id":12},"13":{"loc":{"start":{"line":23,"column":4},"end":{"line":25,"column":6}},"id":13},"14":{"loc":{"start":{"line":24,"column":8},"end":{"line":24,"column":74}},"id":14},"15":{"loc":{"start":{"line":24,"column":15},"end":{"line":24,"column":73}},"id":15},"16":{"loc":{"start":{"line":33,"column":0},"end":{"line":37,"column":2}},"id":16},"17":{"loc":{"start":{"line":34,"column":4},"end":{"line":36,"column":6}},"id":17},"18":{"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":74}},"id":18},"19":{"loc":{"start":{"line":35,"column":15},"end":{"line":35,"column":73}},"id":19},"20":{"loc":{"start":{"line":44,"column":0},"end":{"line":48,"column":2}},"id":20},"21":{"loc":{"start":{"line":45,"column":4},"end":{"line":47,"column":6}},"id":21},"22":{"loc":{"start":{"line":46,"column":8},"end":{"line":46,"column":74}},"id":22},"23":{"loc":{"start":{"line":46,"column":15},"end":{"line":46,"column":73}},"id":23},"24":{"loc":{"start":{"line":55,"column":0},"end":{"line":59,"column":2}},"id":24},"25":{"loc":{"start":{"line":56,"column":4},"end":{"line":58,"column":6}},"id":25},"26":{"loc":{"start":{"line":57,"column":8},"end":{"line":57,"column":65}},"id":26},"27":{"loc":{"start":{"line":57,"column":15},"end":{"line":57,"column":64}},"id":27},"28":{"loc":{"start":{"line":66,"column":0},"end":{"line":70,"column":2}},"id":28},"29":{"loc":{"start":{"line":67,"column":4},"end":{"line":69,"column":6}},"id":29},"30":{"loc":{"start":{"line":68,"column":8},"end":{"line":68,"column":65}},"id":30},"31":{"loc":{"start":{"line":68,"column":15},"end":{"line":68,"column":64}},"id":31},"32":{"loc":{"start":{"line":72,"column":0},"end":{"line":74,"column":2}},"id":32},"33":{"loc":{"start":{"line":73,"column":4},"end":{"line":73,"column":62}},"id":33},"34":{"loc":{"start":{"line":73,"column":11},"end":{"line":73,"column":61}},"id":34},"35":{"loc":{"start":{"line":73,"column":47},"end":{"line":73,"column":60}},"id":35},"36":{"loc":{"start":{"line":76,"column":0},"end":{"line":78,"column":2}},"id":36},"37":{"loc":{"start":{"line":77,"column":4},"end":{"line":77,"column":68}},"id":37},"38":{"loc":{"start":{"line":77,"column":11},"end":{"line":77,"column":67}},"id":38},"39":{"loc":{"start":{"line":77,"column":47},"end":{"line":77,"column":60}},"id":39},"40":{"loc":{"start":{"line":80,"column":0},"end":{"line":82,"column":2}},"id":40},"41":{"loc":{"start":{"line":81,"column":4},"end":{"line":81,"column":62}},"id":41},"42":{"loc":{"start":{"line":81,"column":11},"end":{"line":81,"column":61}},"id":42},"43":{"loc":{"start":{"line":81,"column":47},"end":{"line":81,"column":60}},"id":43},"44":{"loc":{"start":{"line":84,"column":0},"end":{"line":86,"column":2}},"id":44},"45":{"loc":{"start":{"line":85,"column":4},"end":{"line":85,"column":68}},"id":45},"46":{"loc":{"start":{"line":85,"column":11},"end":{"line":85,"column":67}},"id":46},"47":{"loc":{"start":{"line":85,"column":47},"end":{"line":85,"column":60}},"id":47},"48":{"loc":{"start":{"line":88,"column":0},"end":{"line":90,"column":2}},"id":48},"49":{"loc":{"start":{"line":89,"column":4},"end":{"line":89,"column":61}},"id":49},"50":{"loc":{"start":{"line":89,"column":11},"end":{"line":89,"column":60}},"id":50},"51":{"loc":{"start":{"line":97,"column":0},"end":{"line":122,"column":2}},"id":51},"52":{"loc":{"start":{"line":100,"column":4},"end":{"line":100,"column":55}},"id":52},"53":{"loc":{"start":{"line":100,"column":13},"end":{"line":100,"column":54}},"id":53},"54":{"loc":{"start":{"line":100,"column":44},"end":{"line":100,"column":47}},"id":54},"55":{"loc":{"start":{"line":100,"column":50},"end":{"line":100,"column":53}},"id":55},"56":{"loc":{"start":{"line":103,"column":4},"end":{"line":103,"column":50}},"id":56},"57":{"loc":{"start":{"line":103,"column":15},"end":{"line":103,"column":49}},"id":57},"58":{"loc":{"start":{"line":108,"column":8},"end":{"line":111,"column":10}},"id":58},"59":{"loc":{"start":{"line":108,"column":19},"end":{"line":111,"column":9}},"id":59},"60":{"loc":{"start":{"line":110,"column":12},"end":{"line":110,"column":47}},"id":60},"61":{"loc":{"start":{"line":114,"column":4},"end":{"line":114,"column":22}},"id":61},"62":{"loc":{"start":{"line":115,"column":4},"end":{"line":115,"column":50}},"id":62},"63":{"loc":{"start":{"line":117,"column":8},"end":{"line":117,"column":53}},"id":63},"64":{"loc":{"start":{"line":119,"column":4},"end":{"line":119,"column":83}},"id":64},"65":{"loc":{"start":{"line":119,"column":18},"end":{"line":119,"column":82}},"id":65},"66":{"loc":{"start":{"line":119,"column":18},"end":{"line":119,"column":58}},"id":66},"67":{"loc":{"start":{"line":120,"column":4},"end":{"line":120,"column":46}},"id":67},"68":{"loc":{"start":{"line":120,"column":11},"end":{"line":120,"column":45}},"id":68},"69":{"loc":{"start":{"line":124,"column":0},"end":{"line":138,"column":2}},"id":69},"70":{"loc":{"start":{"line":125,"column":4},"end":{"line":128,"column":6}},"id":70},"71":{"loc":{"start":{"line":125,"column":18},"end":{"line":128,"column":5}},"id":71},"72":{"loc":{"start":{"line":126,"column":8},"end":{"line":127,"column":26}},"id":72},"73":{"loc":{"start":{"line":126,"column":8},"end":{"line":127,"column":15}},"id":73},"74":{"loc":{"start":{"line":126,"column":29},"end":{"line":126,"column":51}},"id":74},"75":{"loc":{"start":{"line":126,"column":54},"end":{"line":126,"column":76}},"id":75},"76":{"loc":{"start":{"line":129,"column":4},"end":{"line":129,"column":39}},"id":76},"77":{"loc":{"start":{"line":130,"column":4},"end":{"line":137,"column":6}},"id":77},"78":{"loc":{"start":{"line":140,"column":0},"end":{"line":160,"column":2}},"id":78},"79":{"loc":{"start":{"line":141,"column":4},"end":{"line":141,"column":80}},"id":79},"80":{"loc":{"start":{"line":141,"column":36},"end":{"line":141,"column":56}},"id":80},"81":{"loc":{"start":{"line":141,"column":59},"end":{"line":141,"column":79}},"id":81},"82":{"loc":{"start":{"line":142,"column":4},"end":{"line":159,"column":6}},"id":82},"83":{"loc":{"start":{"line":151,"column":16},"end":{"line":151,"column":71}},"id":83},"84":{"loc":{"start":{"line":151,"column":16},"end":{"line":151,"column":70}},"id":84},"85":{"loc":{"start":{"line":151,"column":22},"end":{"line":151,"column":69}},"id":85},"86":{"loc":{"start":{"line":151,"column":22},"end":{"line":151,"column":57}},"id":86},"87":{"loc":{"start":{"line":151,"column":31},"end":{"line":151,"column":57}},"id":87},"88":{"loc":{"start":{"line":152,"column":16},"end":{"line":156,"column":18}},"id":88},"89":{"loc":{"start":{"line":152,"column":16},"end":{"line":156,"column":17}},"id":89},"90":{"loc":{"start":{"line":153,"column":20},"end":{"line":155,"column":32}},"id":90},"91":{"loc":{"start":{"line":153,"column":20},"end":{"line":154,"column":49}},"id":91},"92":{"loc":{"start":{"line":153,"column":20},"end":{"line":153,"column":80}},"id":92},"93":{"loc":{"start":{"line":153,"column":20},"end":{"line":153,"column":72}},"id":93},"94":{"loc":{"start":{"line":153,"column":43},"end":{"line":153,"column":72}},"id":94},"95":{"loc":{"start":{"line":154,"column":20},"end":{"line":154,"column":49}},"id":95},"96":{"loc":{"start":{"line":162,"column":0},"end":{"line":195,"column":2}},"id":96},"97":{"loc":{"start":{"line":163,"column":4},"end":{"line":163,"column":38}},"id":97},"98":{"loc":{"start":{"line":163,"column":19},"end":{"line":163,"column":37}},"id":98},"99":{"loc":{"start":{"line":164,"column":4},"end":{"line":194,"column":6}},"id":99},"100":{"loc":{"start":{"line":165,"column":8},"end":{"line":165,"column":37}},"id":100},"101":{"loc":{"start":{"line":166,"column":8},"end":{"line":166,"column":33}},"id":101},"102":{"loc":{"start":{"line":166,"column":23},"end":{"line":166,"column":32}},"id":102},"103":{"loc":{"start":{"line":167,"column":8},"end":{"line":167,"column":24}},"id":103},"104":{"loc":{"start":{"line":168,"column":8},"end":{"line":168,"column":29}},"id":104},"105":{"loc":{"start":{"line":170,"column":8},"end":{"line":170,"column":49}},"id":105},"106":{"loc":{"start":{"line":170,"column":18},"end":{"line":170,"column":48}},"id":106},"107":{"loc":{"start":{"line":174,"column":12},"end":{"line":190,"column":8}},"id":107},"108":{"loc":{"start":{"line":174,"column":12},"end":{"line":189,"column":34}},"id":108},"109":{"loc":{"start":{"line":177,"column":17},"end":{"line":188,"column":14}},"id":109},"110":{"loc":{"start":{"line":174,"column":19},"end":{"line":176,"column":14}},"id":110},"111":{"loc":{"start":{"line":175,"column":16},"end":{"line":175,"column":46}},"id":111},"112":{"loc":{"start":{"line":175,"column":23},"end":{"line":175,"column":45}},"id":112},"113":{"loc":{"start":{"line":178,"column":20},"end":{"line":178,"column":48}},"id":113},"114":{"loc":{"start":{"line":179,"column":24},"end":{"line":179,"column":35}},"id":114},"115":{"loc":{"start":{"line":180,"column":24},"end":{"line":180,"column":64}},"id":115},"116":{"loc":{"start":{"line":181,"column":24},"end":{"line":181,"column":31}},"id":116},"117":{"loc":{"start":{"line":181,"column":24},"end":{"line":181,"column":30}},"id":117},"118":{"loc":{"start":{"line":183,"column":24},"end":{"line":183,"column":62}},"id":118},"119":{"loc":{"start":{"line":186,"column":20},"end":{"line":186,"column":47}},"id":119},"120":{"loc":{"start":{"line":186,"column":20},"end":{"line":186,"column":46}},"id":120},"121":{"loc":{"start":{"line":191,"column":8},"end":{"line":191,"column":15}},"id":121},"122":{"loc":{"start":{"line":191,"column":8},"end":{"line":191,"column":14}},"id":122},"123":{"loc":{"start":{"line":193,"column":8},"end":{"line":193,"column":32}},"id":123},"124":{"loc":{"start":{"line":197,"column":0},"end":{"line":199,"column":2}},"id":124},"125":{"loc":{"start":{"line":198,"column":4},"end":{"line":198,"column":48}},"id":125},"126":{"loc":{"start":{"line":198,"column":11},"end":{"line":198,"column":47}},"id":126},"127":{"loc":{"start":{"line":201,"column":0},"end":{"line":206,"column":2}},"id":127}}}},"/Users/kris/q-io/http-apps/json.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"12":{"index":12,"count":1},"19":{"index":19,"count":1},"26":{"index":26,"count":1},"33":{"index":33,"count":1}},"blocks":{},"hash":"62ff46be37161c80b2d3774f927424c0","instrumentor":{"blockCounter":18,"nodeCounter":43,"source":"var Q = require(\"q\");\n\nexports.HandleJsonResponses = function (app, reviver, tab) {\n    return function (request) {\n        request.handleJsonResponse = exports.handleJsonResponse;\n        return Q.fcall(app, request)\n        .then(function (response) {\n            if (response.data !== void 0) {\n                return Q.fcall(exports.handleJsonResponse, response, reviver, tab);\n            } else {\n                return response;\n            }\n        });\n    };\n};\n\nexports.handleJsonResponse = function (response, revivier, tab) {\n    response.headers[\"content-type\"] = \"application/json\";\n    response.body = {\n        forEach: function (write) {\n            write(JSON.stringify(response.data, revivier, tab));\n        }\n    };\n    return response;\n};\n\n/**\n * Wraps a Q-JSGI application such that the child application may\n * simply return an object, which will in turn be serialized into a\n * Q-JSGI response.\n *\n * @param {Function(Request):Object} app an application that accepts a\n * request and returns a JSON serializable object.\n * @returns {App}\n */\nexports.Json = function (app, reviver, tabs) {\n    return function (request, response) {\n        return Q.when(app(request, response), function (object) {\n            return exports.json(object, reviver, tabs);\n        });\n    };\n};\n\n/**\n * @param {Object} content data to serialize as JSON\n * @param {Function} reviver\n * @param {Number|String} tabs\n * @returns {Response}\n */\nexports.json = function (content, reviver, tabs) {\n    try {\n        var json = JSON.stringify(content, reviver, tabs);\n    } catch (exception) {\n        return Q.reject(exception);\n    }\n    return exports.ok([json]);\n};\n\n/**\n * @param {Function(Request, Object):Response} app\n * @param {App} badRequest\n * @returns {App}\n */\nexports.JsonRequest = function (app, badRequest) {\n    if (!badRequest)\n        badRequest = exports.badRequest;\n    return exports.ContentRequest(function (content, request, response) {\n        try {\n            var object = JSON.parse(content);\n        } catch (error) {\n            return badRequest(request, error);\n        }\n        return app(object, request, response);\n    });\n};","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":21}},"id":0},"1":{"loc":{"start":{"line":1,"column":8},"end":{"line":1,"column":20}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":15,"column":2}},"id":2},"3":{"loc":{"start":{"line":4,"column":4},"end":{"line":14,"column":6}},"id":3},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":64}},"id":4},"5":{"loc":{"start":{"line":6,"column":8},"end":{"line":13,"column":11}},"id":5},"6":{"loc":{"start":{"line":6,"column":15},"end":{"line":13,"column":10}},"id":6},"7":{"loc":{"start":{"line":6,"column":22},"end":{"line":6,"column":36}},"id":7},"8":{"loc":{"start":{"line":8,"column":16},"end":{"line":8,"column":40}},"id":8},"9":{"loc":{"start":{"line":9,"column":16},"end":{"line":9,"column":83}},"id":9},"10":{"loc":{"start":{"line":9,"column":23},"end":{"line":9,"column":82}},"id":10},"11":{"loc":{"start":{"line":11,"column":16},"end":{"line":11,"column":32}},"id":11},"12":{"loc":{"start":{"line":17,"column":0},"end":{"line":25,"column":2}},"id":12},"13":{"loc":{"start":{"line":18,"column":4},"end":{"line":18,"column":58}},"id":13},"14":{"loc":{"start":{"line":19,"column":4},"end":{"line":23,"column":6}},"id":14},"15":{"loc":{"start":{"line":21,"column":12},"end":{"line":21,"column":64}},"id":15},"16":{"loc":{"start":{"line":21,"column":12},"end":{"line":21,"column":63}},"id":16},"17":{"loc":{"start":{"line":21,"column":18},"end":{"line":21,"column":62}},"id":17},"18":{"loc":{"start":{"line":24,"column":4},"end":{"line":24,"column":20}},"id":18},"19":{"loc":{"start":{"line":36,"column":0},"end":{"line":42,"column":2}},"id":19},"20":{"loc":{"start":{"line":37,"column":4},"end":{"line":41,"column":6}},"id":20},"21":{"loc":{"start":{"line":38,"column":8},"end":{"line":40,"column":11}},"id":21},"22":{"loc":{"start":{"line":38,"column":15},"end":{"line":40,"column":10}},"id":22},"23":{"loc":{"start":{"line":38,"column":22},"end":{"line":38,"column":44}},"id":23},"24":{"loc":{"start":{"line":39,"column":12},"end":{"line":39,"column":55}},"id":24},"25":{"loc":{"start":{"line":39,"column":19},"end":{"line":39,"column":54}},"id":25},"26":{"loc":{"start":{"line":50,"column":0},"end":{"line":57,"column":2}},"id":26},"27":{"loc":{"start":{"line":52,"column":8},"end":{"line":52,"column":58}},"id":27},"28":{"loc":{"start":{"line":52,"column":19},"end":{"line":52,"column":57}},"id":28},"29":{"loc":{"start":{"line":54,"column":8},"end":{"line":54,"column":35}},"id":29},"30":{"loc":{"start":{"line":54,"column":15},"end":{"line":54,"column":34}},"id":30},"31":{"loc":{"start":{"line":56,"column":4},"end":{"line":56,"column":30}},"id":31},"32":{"loc":{"start":{"line":56,"column":11},"end":{"line":56,"column":29}},"id":32},"33":{"loc":{"start":{"line":64,"column":0},"end":{"line":75,"column":2}},"id":33},"34":{"loc":{"start":{"line":66,"column":8},"end":{"line":66,"column":40}},"id":34},"35":{"loc":{"start":{"line":67,"column":4},"end":{"line":74,"column":7}},"id":35},"36":{"loc":{"start":{"line":67,"column":11},"end":{"line":74,"column":6}},"id":36},"37":{"loc":{"start":{"line":69,"column":12},"end":{"line":69,"column":45}},"id":37},"38":{"loc":{"start":{"line":69,"column":25},"end":{"line":69,"column":44}},"id":38},"39":{"loc":{"start":{"line":71,"column":12},"end":{"line":71,"column":46}},"id":39},"40":{"loc":{"start":{"line":71,"column":19},"end":{"line":71,"column":45}},"id":40},"41":{"loc":{"start":{"line":73,"column":8},"end":{"line":73,"column":46}},"id":41},"42":{"loc":{"start":{"line":73,"column":15},"end":{"line":73,"column":45}},"id":42}}}},"/Users/kris/q-io/http-apps/proxy.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1}},"blocks":{"0":{"index":0,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1}},"hash":"b79408847e087a2021c47d2ba22cc543","instrumentor":{"blockCounter":7,"nodeCounter":25,"source":"var HTTP = require(\"../http\");\nvar URL = require(\"url2\");\nvar Q = require(\"q\");\n\nexports.Proxy = function (app) {\n    if (typeof app === \"string\") {\n        var location = app;\n        app = function (request) {\n            request.url = location;\n            return request;\n        };\n    }\n    return function (request, response) {\n        return Q.when(app.apply(this, arguments), function (request) {\n            return HTTP.request(request);\n        });\n    };\n};\n\nexports.ProxyTree = function (url) {\n    return exports.Proxy(function (request) {\n        request.url = URL.resolve(url, request.pathInfo.replace(/^\\//, \"\"));\n        return request;\n    });\n};","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":30}},"id":0},"1":{"loc":{"start":{"line":1,"column":11},"end":{"line":1,"column":29}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":26}},"id":2},"3":{"loc":{"start":{"line":2,"column":10},"end":{"line":2,"column":25}},"id":3},"4":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":21}},"id":4},"5":{"loc":{"start":{"line":3,"column":8},"end":{"line":3,"column":20}},"id":5},"6":{"loc":{"start":{"line":5,"column":0},"end":{"line":18,"column":2}},"id":6},"7":{"loc":{"start":{"line":6,"column":8},"end":{"line":6,"column":31}},"id":7},"8":{"loc":{"start":{"line":7,"column":8},"end":{"line":7,"column":27}},"id":8},"9":{"loc":{"start":{"line":8,"column":8},"end":{"line":11,"column":10}},"id":9},"10":{"loc":{"start":{"line":9,"column":12},"end":{"line":9,"column":35}},"id":10},"11":{"loc":{"start":{"line":10,"column":12},"end":{"line":10,"column":27}},"id":11},"12":{"loc":{"start":{"line":13,"column":4},"end":{"line":17,"column":6}},"id":12},"13":{"loc":{"start":{"line":14,"column":8},"end":{"line":16,"column":11}},"id":13},"14":{"loc":{"start":{"line":14,"column":15},"end":{"line":16,"column":10}},"id":14},"15":{"loc":{"start":{"line":14,"column":22},"end":{"line":14,"column":48}},"id":15},"16":{"loc":{"start":{"line":15,"column":12},"end":{"line":15,"column":41}},"id":16},"17":{"loc":{"start":{"line":15,"column":19},"end":{"line":15,"column":40}},"id":17},"18":{"loc":{"start":{"line":20,"column":0},"end":{"line":25,"column":2}},"id":18},"19":{"loc":{"start":{"line":21,"column":4},"end":{"line":24,"column":7}},"id":19},"20":{"loc":{"start":{"line":21,"column":11},"end":{"line":24,"column":6}},"id":20},"21":{"loc":{"start":{"line":22,"column":8},"end":{"line":22,"column":76}},"id":21},"22":{"loc":{"start":{"line":22,"column":22},"end":{"line":22,"column":75}},"id":22},"23":{"loc":{"start":{"line":22,"column":39},"end":{"line":22,"column":74}},"id":23},"24":{"loc":{"start":{"line":23,"column":8},"end":{"line":23,"column":23}},"id":24}}}},"/Users/kris/q-io/http-apps/decorators.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":2},"10":{"index":10,"count":4},"11":{"index":11,"count":4},"12":{"index":12,"count":4},"13":{"index":13,"count":4},"14":{"index":14,"count":4},"15":{"index":15,"count":4},"16":{"index":16,"count":4},"17":{"index":17,"count":1},"26":{"index":26,"count":1},"36":{"index":36,"count":1},"39":{"index":39,"count":1},"100":{"index":100,"count":1},"112":{"index":112,"count":1},"124":{"index":124,"count":1},"125":{"index":125,"count":1},"126":{"index":126,"count":1},"127":{"index":127,"count":1},"128":{"index":128,"count":1},"129":{"index":129,"count":1},"130":{"index":130,"count":1},"145":{"index":145,"count":1}},"blocks":{"0":{"index":0,"count":2},"1":{"index":1,"count":4},"2":{"index":2,"count":4}},"hash":"bfa5555807b1adf8a427de98fef4f22d","instrumentor":{"blockCounter":34,"nodeCounter":152,"source":"var Q = require(\"q\");\nvar HTTP = require(\"../http\");\nvar RouteApps = require(\"./route\");\nvar StatusApps = require(\"./status\");\n\nexports.Normalize = function (app) {\n    return function (request, response) {\n        var request = HTTP.normalizeRequest(request);\n        return Q.when(app(request, response), function (response) {\n            return HTTP.normalizeResponse(response);\n        });\n    };\n};\n\nexports.Date = function (app, present) {\n    present = present || function () {\n        return new Date();\n    };\n    return RouteApps.Trap(app, function (response, request) {\n        response.headers[\"date\"] = \"\" + present();\n    });\n};\n\n/**\n * Decorates a JSGI application such that rejected response promises\n * get translated into `500` server error responses with no content.\n *\n * @param {App} app\n * @returns {App}\n */\nexports.Error = function (app, debug) {\n    return function (request, response) {\n        return Q.when(app(request, response), null, function (error) {\n            if (!debug)\n                error = undefined;\n            return StatusApps.responseForStatus(request, 500, error && error.stack || error);\n        });\n    };\n};\n\nexports.Debug = function (app) {\n    return exports.Error(app, true);\n};\n\n/**\n * Decorates a Q-JSGI application such that all requests and responses\n * are logged.\n *\n * @param {App} app\n * @returns {App}\n */\nexports.Log = function (app, log, stamp) {\n    log = log || console.log;\n    stamp = stamp || function (message) {\n        return new Date().toISOString() + \" \" + message;\n    };\n    return function (request, response) {\n        var remoteHost =\n            request.remoteHost + \":\" +\n            request.remotePort;\n        var requestLine =\n            request.method + \" \" +\n            request.path + \" \" +\n            \"HTTP/\" + request.version.join(\".\");\n        log(stamp(\n            remoteHost + \" \" +\n            \"-->     \" +\n            requestLine\n        ));\n        return Q.when(app(request, response), function (response) {\n            if (response) {\n                log(stamp(\n                    remoteHost + \" \" +\n                    \"<== \" +\n                    response.status + \" \" +\n                    requestLine + \" \" +\n                    (response.headers[\"content-length\"] || \"-\")\n                ));\n            } else {\n                log(stamp(\n                    remoteHost + \" \" +\n                    \"... \" +\n                    \"... \" +\n                    requestLine + \" (response undefined / presumed streaming)\"\n                ));\n            }\n            return response;\n        }, function (reason) {\n            log(stamp(\n                remoteHost + \" \" +\n                \"!!!     \" +\n                requestLine + \" \" +\n                (reason && reason.message || reason)\n            ));\n            return Q.reject(reason);\n        });\n    };\n};\n\n/**\n * Decorates a Q-JSGI application such that all responses have an\n * X-Response-Time header with the time between the request and the\n * response in milliseconds, not including any time needed to stream\n * the body to the client.\n *\n * @param {App} app\n * @returns {App}\n */\nexports.Time = function (app) {\n    return function (request, response) {\n        var start = new Date();\n        return Q.when(app(request, response), function (response) {\n            var stop = new Date();\n            if (response && response.headers) {\n                response.headers[\"x-response-time\"] = \"\" + (stop - start);\n            }\n            return response;\n        });\n    };\n};\n\n/**\n * Decorates a Q-JSGI application such that all responses have the\n * given additional headers.  These headers do not override the\n * application's given response headers.\n *\n * @param {Object} headers\n * @param {App} app decorated application.\n */\nexports.Headers = function (app, headers) {\n    return function (request, response) {\n        return Q.when(app(request, response), function (response) {\n            if (response && response.headers) {\n                Object.keys(headers).forEach(function (key) {\n                    if (!(key in response.headers)) {\n                        response.headers[key] = headers[key];\n                    }\n                });\n            }\n            return response;\n        });\n    };\n};\n\nvar farFuture =\n    1000 * // ms\n    60 * // s\n    60 * // m\n    24 * // h\n    365 * // d\n    10; // years\nexports.Permanent = function (app, future) {\n    future = future || function () {\n        return new Date(new Date().getTime() + farFuture);\n    };\n    app = RouteApps.Tap(app, function (request, response) {\n        request.permanent = future;\n    });\n    app = RouteApps.Trap(app, function (response, request) {\n        response.headers[\"expires\"] = \"\" + future();\n    });\n    return app;\n};\n\n/**\n * Wraps a Q-JSGI application in a sequence of decorators.\n * @param {Array * Decorator} decorators\n * @param {App} app\n * @returns {App}\n */\nexports.Decorators = function (decorators, app) {\n    decorators.reversed().forEach(function (Middleware) {\n        app = Middleware(app);\n    });\n    return app;\n};","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":21}},"id":0},"1":{"loc":{"start":{"line":1,"column":8},"end":{"line":1,"column":20}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":30}},"id":2},"3":{"loc":{"start":{"line":2,"column":11},"end":{"line":2,"column":29}},"id":3},"4":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":35}},"id":4},"5":{"loc":{"start":{"line":3,"column":16},"end":{"line":3,"column":34}},"id":5},"6":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":37}},"id":6},"7":{"loc":{"start":{"line":4,"column":17},"end":{"line":4,"column":36}},"id":7},"8":{"loc":{"start":{"line":6,"column":0},"end":{"line":13,"column":2}},"id":8},"9":{"loc":{"start":{"line":7,"column":4},"end":{"line":12,"column":6}},"id":9},"10":{"loc":{"start":{"line":8,"column":8},"end":{"line":8,"column":53}},"id":10},"11":{"loc":{"start":{"line":8,"column":22},"end":{"line":8,"column":52}},"id":11},"12":{"loc":{"start":{"line":9,"column":8},"end":{"line":11,"column":11}},"id":12},"13":{"loc":{"start":{"line":9,"column":15},"end":{"line":11,"column":10}},"id":13},"14":{"loc":{"start":{"line":9,"column":22},"end":{"line":9,"column":44}},"id":14},"15":{"loc":{"start":{"line":10,"column":12},"end":{"line":10,"column":52}},"id":15},"16":{"loc":{"start":{"line":10,"column":19},"end":{"line":10,"column":51}},"id":16},"17":{"loc":{"start":{"line":15,"column":0},"end":{"line":22,"column":2}},"id":17},"18":{"loc":{"start":{"line":16,"column":4},"end":{"line":18,"column":6}},"id":18},"19":{"loc":{"start":{"line":16,"column":14},"end":{"line":18,"column":5}},"id":19},"20":{"loc":{"start":{"line":17,"column":8},"end":{"line":17,"column":26}},"id":20},"21":{"loc":{"start":{"line":19,"column":4},"end":{"line":21,"column":7}},"id":21},"22":{"loc":{"start":{"line":19,"column":11},"end":{"line":21,"column":6}},"id":22},"23":{"loc":{"start":{"line":20,"column":8},"end":{"line":20,"column":50}},"id":23},"24":{"loc":{"start":{"line":20,"column":35},"end":{"line":20,"column":49}},"id":24},"25":{"loc":{"start":{"line":20,"column":40},"end":{"line":20,"column":49}},"id":25},"26":{"loc":{"start":{"line":31,"column":0},"end":{"line":39,"column":2}},"id":26},"27":{"loc":{"start":{"line":32,"column":4},"end":{"line":38,"column":6}},"id":27},"28":{"loc":{"start":{"line":33,"column":8},"end":{"line":37,"column":11}},"id":28},"29":{"loc":{"start":{"line":33,"column":15},"end":{"line":37,"column":10}},"id":29},"30":{"loc":{"start":{"line":33,"column":22},"end":{"line":33,"column":44}},"id":30},"31":{"loc":{"start":{"line":35,"column":16},"end":{"line":35,"column":34}},"id":31},"32":{"loc":{"start":{"line":36,"column":12},"end":{"line":36,"column":93}},"id":32},"33":{"loc":{"start":{"line":36,"column":19},"end":{"line":36,"column":92}},"id":33},"34":{"loc":{"start":{"line":36,"column":62},"end":{"line":36,"column":91}},"id":34},"35":{"loc":{"start":{"line":36,"column":62},"end":{"line":36,"column":82}},"id":35},"36":{"loc":{"start":{"line":41,"column":0},"end":{"line":43,"column":2}},"id":36},"37":{"loc":{"start":{"line":42,"column":4},"end":{"line":42,"column":36}},"id":37},"38":{"loc":{"start":{"line":42,"column":11},"end":{"line":42,"column":35}},"id":38},"39":{"loc":{"start":{"line":52,"column":0},"end":{"line":98,"column":2}},"id":39},"40":{"loc":{"start":{"line":53,"column":4},"end":{"line":53,"column":29}},"id":40},"41":{"loc":{"start":{"line":53,"column":10},"end":{"line":53,"column":28}},"id":41},"42":{"loc":{"start":{"line":54,"column":4},"end":{"line":56,"column":6}},"id":42},"43":{"loc":{"start":{"line":54,"column":12},"end":{"line":56,"column":5}},"id":43},"44":{"loc":{"start":{"line":55,"column":8},"end":{"line":55,"column":56}},"id":44},"45":{"loc":{"start":{"line":55,"column":15},"end":{"line":55,"column":55}},"id":45},"46":{"loc":{"start":{"line":55,"column":15},"end":{"line":55,"column":45}},"id":46},"47":{"loc":{"start":{"line":55,"column":15},"end":{"line":55,"column":39}},"id":47},"48":{"loc":{"start":{"line":57,"column":4},"end":{"line":97,"column":6}},"id":48},"49":{"loc":{"start":{"line":58,"column":8},"end":{"line":60,"column":31}},"id":49},"50":{"loc":{"start":{"line":59,"column":12},"end":{"line":60,"column":30}},"id":50},"51":{"loc":{"start":{"line":59,"column":12},"end":{"line":59,"column":36}},"id":51},"52":{"loc":{"start":{"line":61,"column":8},"end":{"line":64,"column":48}},"id":52},"53":{"loc":{"start":{"line":62,"column":12},"end":{"line":64,"column":47}},"id":53},"54":{"loc":{"start":{"line":62,"column":12},"end":{"line":64,"column":19}},"id":54},"55":{"loc":{"start":{"line":62,"column":12},"end":{"line":63,"column":30}},"id":55},"56":{"loc":{"start":{"line":62,"column":12},"end":{"line":63,"column":24}},"id":56},"57":{"loc":{"start":{"line":62,"column":12},"end":{"line":62,"column":32}},"id":57},"58":{"loc":{"start":{"line":64,"column":22},"end":{"line":64,"column":47}},"id":58},"59":{"loc":{"start":{"line":65,"column":8},"end":{"line":69,"column":11}},"id":59},"60":{"loc":{"start":{"line":65,"column":8},"end":{"line":69,"column":10}},"id":60},"61":{"loc":{"start":{"line":65,"column":12},"end":{"line":69,"column":9}},"id":61},"62":{"loc":{"start":{"line":66,"column":12},"end":{"line":68,"column":23}},"id":62},"63":{"loc":{"start":{"line":66,"column":12},"end":{"line":67,"column":22}},"id":63},"64":{"loc":{"start":{"line":66,"column":12},"end":{"line":66,"column":28}},"id":64},"65":{"loc":{"start":{"line":70,"column":8},"end":{"line":96,"column":11}},"id":65},"66":{"loc":{"start":{"line":70,"column":15},"end":{"line":96,"column":10}},"id":66},"67":{"loc":{"start":{"line":70,"column":22},"end":{"line":70,"column":44}},"id":67},"68":{"loc":{"start":{"line":72,"column":16},"end":{"line":78,"column":19}},"id":68},"69":{"loc":{"start":{"line":72,"column":16},"end":{"line":78,"column":18}},"id":69},"70":{"loc":{"start":{"line":72,"column":20},"end":{"line":78,"column":17}},"id":70},"71":{"loc":{"start":{"line":73,"column":20},"end":{"line":77,"column":63}},"id":71},"72":{"loc":{"start":{"line":73,"column":20},"end":{"line":76,"column":37}},"id":72},"73":{"loc":{"start":{"line":73,"column":20},"end":{"line":76,"column":31}},"id":73},"74":{"loc":{"start":{"line":73,"column":20},"end":{"line":75,"column":41}},"id":74},"75":{"loc":{"start":{"line":73,"column":20},"end":{"line":75,"column":35}},"id":75},"76":{"loc":{"start":{"line":73,"column":20},"end":{"line":74,"column":26}},"id":76},"77":{"loc":{"start":{"line":73,"column":20},"end":{"line":73,"column":36}},"id":77},"78":{"loc":{"start":{"line":77,"column":20},"end":{"line":77,"column":63}},"id":78},"79":{"loc":{"start":{"line":80,"column":16},"end":{"line":85,"column":19}},"id":79},"80":{"loc":{"start":{"line":80,"column":16},"end":{"line":85,"column":18}},"id":80},"81":{"loc":{"start":{"line":80,"column":20},"end":{"line":85,"column":17}},"id":81},"82":{"loc":{"start":{"line":81,"column":20},"end":{"line":84,"column":78}},"id":82},"83":{"loc":{"start":{"line":81,"column":20},"end":{"line":84,"column":31}},"id":83},"84":{"loc":{"start":{"line":81,"column":20},"end":{"line":83,"column":26}},"id":84},"85":{"loc":{"start":{"line":81,"column":20},"end":{"line":82,"column":26}},"id":85},"86":{"loc":{"start":{"line":81,"column":20},"end":{"line":81,"column":36}},"id":86},"87":{"loc":{"start":{"line":87,"column":12},"end":{"line":87,"column":28}},"id":87},"88":{"loc":{"start":{"line":89,"column":12},"end":{"line":94,"column":15}},"id":88},"89":{"loc":{"start":{"line":89,"column":12},"end":{"line":94,"column":14}},"id":89},"90":{"loc":{"start":{"line":89,"column":16},"end":{"line":94,"column":13}},"id":90},"91":{"loc":{"start":{"line":90,"column":16},"end":{"line":93,"column":52}},"id":91},"92":{"loc":{"start":{"line":90,"column":16},"end":{"line":92,"column":33}},"id":92},"93":{"loc":{"start":{"line":90,"column":16},"end":{"line":92,"column":27}},"id":93},"94":{"loc":{"start":{"line":90,"column":16},"end":{"line":91,"column":26}},"id":94},"95":{"loc":{"start":{"line":90,"column":16},"end":{"line":90,"column":32}},"id":95},"96":{"loc":{"start":{"line":93,"column":16},"end":{"line":93,"column":52}},"id":96},"97":{"loc":{"start":{"line":93,"column":17},"end":{"line":93,"column":41}},"id":97},"98":{"loc":{"start":{"line":95,"column":12},"end":{"line":95,"column":36}},"id":98},"99":{"loc":{"start":{"line":95,"column":19},"end":{"line":95,"column":35}},"id":99},"100":{"loc":{"start":{"line":109,"column":0},"end":{"line":120,"column":2}},"id":100},"101":{"loc":{"start":{"line":110,"column":4},"end":{"line":119,"column":6}},"id":101},"102":{"loc":{"start":{"line":111,"column":8},"end":{"line":111,"column":31}},"id":102},"103":{"loc":{"start":{"line":112,"column":8},"end":{"line":118,"column":11}},"id":103},"104":{"loc":{"start":{"line":112,"column":15},"end":{"line":118,"column":10}},"id":104},"105":{"loc":{"start":{"line":112,"column":22},"end":{"line":112,"column":44}},"id":105},"106":{"loc":{"start":{"line":113,"column":12},"end":{"line":113,"column":34}},"id":106},"107":{"loc":{"start":{"line":114,"column":16},"end":{"line":114,"column":44}},"id":107},"108":{"loc":{"start":{"line":115,"column":16},"end":{"line":115,"column":74}},"id":108},"109":{"loc":{"start":{"line":115,"column":54},"end":{"line":115,"column":73}},"id":109},"110":{"loc":{"start":{"line":115,"column":59},"end":{"line":115,"column":73}},"id":110},"111":{"loc":{"start":{"line":117,"column":12},"end":{"line":117,"column":28}},"id":111},"112":{"loc":{"start":{"line":130,"column":0},"end":{"line":143,"column":2}},"id":112},"113":{"loc":{"start":{"line":131,"column":4},"end":{"line":142,"column":6}},"id":113},"114":{"loc":{"start":{"line":132,"column":8},"end":{"line":141,"column":11}},"id":114},"115":{"loc":{"start":{"line":132,"column":15},"end":{"line":141,"column":10}},"id":115},"116":{"loc":{"start":{"line":132,"column":22},"end":{"line":132,"column":44}},"id":116},"117":{"loc":{"start":{"line":133,"column":16},"end":{"line":133,"column":44}},"id":117},"118":{"loc":{"start":{"line":134,"column":16},"end":{"line":138,"column":19}},"id":118},"119":{"loc":{"start":{"line":134,"column":16},"end":{"line":138,"column":18}},"id":119},"120":{"loc":{"start":{"line":134,"column":27},"end":{"line":134,"column":36}},"id":120},"121":{"loc":{"start":{"line":135,"column":25},"end":{"line":135,"column":50}},"id":121},"122":{"loc":{"start":{"line":136,"column":24},"end":{"line":136,"column":61}},"id":122},"123":{"loc":{"start":{"line":140,"column":12},"end":{"line":140,"column":28}},"id":123},"124":{"loc":{"start":{"line":145,"column":0},"end":{"line":151,"column":7}},"id":124},"125":{"loc":{"start":{"line":146,"column":4},"end":{"line":151,"column":6}},"id":125},"126":{"loc":{"start":{"line":146,"column":4},"end":{"line":150,"column":7}},"id":126},"127":{"loc":{"start":{"line":146,"column":4},"end":{"line":149,"column":6}},"id":127},"128":{"loc":{"start":{"line":146,"column":4},"end":{"line":148,"column":6}},"id":128},"129":{"loc":{"start":{"line":146,"column":4},"end":{"line":147,"column":6}},"id":129},"130":{"loc":{"start":{"line":152,"column":0},"end":{"line":163,"column":2}},"id":130},"131":{"loc":{"start":{"line":153,"column":4},"end":{"line":155,"column":6}},"id":131},"132":{"loc":{"start":{"line":153,"column":13},"end":{"line":155,"column":5}},"id":132},"133":{"loc":{"start":{"line":154,"column":8},"end":{"line":154,"column":58}},"id":133},"134":{"loc":{"start":{"line":154,"column":24},"end":{"line":154,"column":56}},"id":134},"135":{"loc":{"start":{"line":154,"column":24},"end":{"line":154,"column":44}},"id":135},"136":{"loc":{"start":{"line":156,"column":4},"end":{"line":158,"column":7}},"id":136},"137":{"loc":{"start":{"line":156,"column":10},"end":{"line":158,"column":6}},"id":137},"138":{"loc":{"start":{"line":157,"column":8},"end":{"line":157,"column":35}},"id":138},"139":{"loc":{"start":{"line":159,"column":4},"end":{"line":161,"column":7}},"id":139},"140":{"loc":{"start":{"line":159,"column":10},"end":{"line":161,"column":6}},"id":140},"141":{"loc":{"start":{"line":160,"column":8},"end":{"line":160,"column":52}},"id":141},"142":{"loc":{"start":{"line":160,"column":38},"end":{"line":160,"column":51}},"id":142},"143":{"loc":{"start":{"line":160,"column":43},"end":{"line":160,"column":51}},"id":143},"144":{"loc":{"start":{"line":162,"column":4},"end":{"line":162,"column":15}},"id":144},"145":{"loc":{"start":{"line":171,"column":0},"end":{"line":176,"column":2}},"id":145},"146":{"loc":{"start":{"line":172,"column":4},"end":{"line":174,"column":7}},"id":146},"147":{"loc":{"start":{"line":172,"column":4},"end":{"line":174,"column":6}},"id":147},"148":{"loc":{"start":{"line":172,"column":23},"end":{"line":172,"column":25}},"id":148},"149":{"loc":{"start":{"line":173,"column":8},"end":{"line":173,"column":30}},"id":149},"150":{"loc":{"start":{"line":173,"column":14},"end":{"line":173,"column":29}},"id":150},"151":{"loc":{"start":{"line":175,"column":4},"end":{"line":175,"column":15}},"id":151}}}},"/Users/kris/q-io/http-apps/cookie.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":2},"6":{"index":6,"count":2},"7":{"index":7,"count":4},"8":{"index":8,"count":4},"9":{"index":9,"count":4},"10":{"index":10,"count":4},"11":{"index":11,"count":4},"12":{"index":12,"count":4},"13":{"index":13,"count":2},"14":{"index":14,"count":2},"15":{"index":15,"count":2},"16":{"index":16,"count":2},"19":{"index":19,"count":4},"20":{"index":20,"count":4},"21":{"index":21,"count":4},"22":{"index":22,"count":4},"23":{"index":23,"count":2},"25":{"index":25,"count":2},"26":{"index":26,"count":2},"27":{"index":27,"count":2},"28":{"index":28,"count":2},"29":{"index":29,"count":2},"30":{"index":30,"count":2},"32":{"index":32,"count":2},"33":{"index":33,"count":2},"34":{"index":34,"count":2},"35":{"index":35,"count":2},"36":{"index":36,"count":2},"37":{"index":37,"count":2},"38":{"index":38,"count":2},"40":{"index":40,"count":2},"41":{"index":41,"count":2},"42":{"index":42,"count":2},"43":{"index":43,"count":2},"44":{"index":44,"count":2},"45":{"index":45,"count":2},"46":{"index":46,"count":4},"47":{"index":47,"count":4},"48":{"index":48,"count":4},"49":{"index":49,"count":4},"50":{"index":50,"count":4},"51":{"index":51,"count":4},"52":{"index":52,"count":2},"53":{"index":53,"count":2},"54":{"index":54,"count":4},"55":{"index":55,"count":2},"56":{"index":56,"count":4},"58":{"index":58,"count":4},"59":{"index":59,"count":4},"60":{"index":60,"count":4},"61":{"index":61,"count":4},"63":{"index":63,"count":4},"64":{"index":64,"count":4},"65":{"index":65,"count":4},"68":{"index":68,"count":4},"69":{"index":69,"count":4},"70":{"index":70,"count":4},"71":{"index":71,"count":4},"72":{"index":72,"count":4},"73":{"index":73,"count":4},"74":{"index":74,"count":4},"75":{"index":75,"count":4},"76":{"index":76,"count":4},"77":{"index":77,"count":4},"78":{"index":78,"count":4},"79":{"index":79,"count":1},"80":{"index":80,"count":4},"81":{"index":81,"count":2},"82":{"index":82,"count":2},"83":{"index":83,"count":2},"95":{"index":95,"count":2},"96":{"index":96,"count":2},"97":{"index":97,"count":1},"98":{"index":98,"count":1},"99":{"index":99,"count":1},"100":{"index":100,"count":1},"101":{"index":101,"count":1},"102":{"index":102,"count":1},"103":{"index":103,"count":1},"104":{"index":104,"count":1},"105":{"index":105,"count":1},"110":{"index":110,"count":2},"111":{"index":111,"count":2},"112":{"index":112,"count":2},"113":{"index":113,"count":2},"120":{"index":120,"count":10},"121":{"index":121,"count":10}},"blocks":{"0":{"index":0,"count":2},"1":{"index":1,"count":4},"2":{"index":2,"count":4},"3":{"index":3,"count":2},"4":{"index":4,"count":2},"5":{"index":5,"count":2},"7":{"index":7,"count":2},"9":{"index":9,"count":2},"11":{"index":11,"count":2},"12":{"index":12,"count":2},"13":{"index":13,"count":2},"14":{"index":14,"count":2},"15":{"index":15,"count":4},"16":{"index":16,"count":4},"18":{"index":18,"count":4},"20":{"index":20,"count":4},"21":{"index":21,"count":2},"22":{"index":22,"count":2},"25":{"index":25,"count":2},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"29":{"index":29,"count":2},"30":{"index":30,"count":2},"32":{"index":32,"count":10}},"hash":"33725c22c2ca23d92792a9778c39f9f8","instrumentor":{"blockCounter":33,"nodeCounter":122,"source":"var Q = require(\"q\");\nvar Cookie = require(\"../http-cookie\");\n\nexports.CookieJar = function (app) {\n    var hostCookies = {}; // to {} of pathCookies to [] of cookies\n    return function (request) {\n\n        var hosts = allHostsContaining(request.headers.host);\n\n        var now = new Date();\n\n        var requestCookies = concat(hosts.map(function (host) {\n\n            // delete expired cookies\n            for (var host in hostCookies) {\n                var pathCookies = hostCookies[host];\n                for (var path in pathCookies) {\n                    var cookies = pathCookies[path];\n                    for (var name in cookies) {\n                        var cookie = cookies[name];\n                        if (cookie.expires && cookie.expires > now) {\n                            delete cookie[name];\n                        }\n                    }\n                }\n            }\n\n            // collect applicable cookies\n            return concat(\n                Object.keys(hostCookies)\n                .map(function (host) {\n                    if (!hostContains(host, request.headers.host))\n                        return [];\n                    var pathCookies = hostCookies[host];\n                    return concat(\n                        Object.keys(pathCookies)\n                        .map(function (path) {\n                            if (!pathContains(path, request.path))\n                                return [];\n                            var cookies = pathCookies[path];\n                            return (\n                                Object.keys(cookies)\n                                .map(function (name) {\n                                    return cookies[name];\n                                })\n                                .filter(function (cookie) {\n                                    return cookie.secure ?\n                                        request.ssl :\n                                        true;\n                                })\n                            );\n                        })\n                    )\n                })\n            );\n\n        }));\n\n        if (requestCookies.length) {\n            request.headers[\"cookie\"] = (\n                requestCookies\n                .map(function (cookie) {\n                    return Cookie.stringify(\n                        cookie.key,\n                        cookie.value,\n                        cookie\n                    );\n                })\n                .join(\"; \")\n            );\n        }\n\n        return Q.when(app.apply(this, arguments), function (response) {\n            response.headers = response.headers || {};\n            if (response.headers[\"set-cookie\"]) {\n                var requestHost = ipRe.test(request.headers.host) ?\n                    request.headers.host :\n                    \".\" + request.headers.host;\n                // normalize to array\n                if (!Array.isArray(response.headers[\"set-cookie\"])) {\n                    response.headers[\"set-cookie\"] = [response.headers[\"set-cookie\"]];\n                }\n                response.headers[\"set-cookie\"].forEach(function (cookie) {\n                    var date = response.headers[\"date\"] ?\n                        new Date(response.headers[\"date\"]) :\n                        new Date();\n                    cookie = Cookie.parse(cookie, date);\n                    // ignore illegal host\n                    if (cookie.host && !hostContains(requestHost, cookie.host))\n                        delete cookie.host;\n                    var host = requestHost || cookie.host;\n                    var path = cookie.path || \"/\";\n                    var pathCookies = hostCookies[host] = hostCookies[host] || {};\n                    var cookies = pathCookies[path] = pathCookies[path] || {};\n                    cookies[cookie.key] = cookie;\n                })\n                delete response.headers[\"set-cookie\"];\n            }\n\n            return response;\n        });\n\n    };\n};\n\nvar ipRe = /^\\d+\\.\\d+\\.\\d+\\.\\d+$/;\n\nfunction allHostsContaining(content) {\n    if (ipRe.test(content)) {\n        return [content];\n    } if (content === \"localhost\") {\n        return [content];\n    } else {\n        var parts = content.split(\".\");\n        var hosts = [];\n        while (parts.length > 1) {\n            hosts.push(\".\" + parts.join(\".\"));\n            parts.shift();\n        }\n        return hosts;\n    }\n}\n\nfunction hostContains(container, content) {\n    if (ipRe.test(container) || ipRe.test(content)) {\n        return container === content;\n    } else if (/^\\./.test(container)) {\n        return (\n            content.lastIndexOf(container) ===\n            content.length - container.length\n        ) || (\n            container.slice(1) === content\n        );\n    } else {\n        return container === content;\n    }\n};\n\nfunction pathContains(container, content) {\n    if (/^\\/$/.test(container)) {\n        return content.indexOf(container) === 0;\n    } else {\n        return (\n            content === container ||\n            content.indexOf(container + \"/\") === 0\n        );\n    }\n}\n\nfunction concat(arrays) {\n    return [].concat.apply([], arrays);\n}","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":21}},"id":0},"1":{"loc":{"start":{"line":1,"column":8},"end":{"line":1,"column":20}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":39}},"id":2},"3":{"loc":{"start":{"line":2,"column":13},"end":{"line":2,"column":38}},"id":3},"4":{"loc":{"start":{"line":4,"column":0},"end":{"line":104,"column":2}},"id":4},"5":{"loc":{"start":{"line":5,"column":4},"end":{"line":5,"column":25}},"id":5},"6":{"loc":{"start":{"line":6,"column":4},"end":{"line":103,"column":6}},"id":6},"7":{"loc":{"start":{"line":8,"column":8},"end":{"line":8,"column":61}},"id":7},"8":{"loc":{"start":{"line":8,"column":20},"end":{"line":8,"column":60}},"id":8},"9":{"loc":{"start":{"line":10,"column":8},"end":{"line":10,"column":29}},"id":9},"10":{"loc":{"start":{"line":12,"column":8},"end":{"line":57,"column":12}},"id":10},"11":{"loc":{"start":{"line":12,"column":29},"end":{"line":57,"column":11}},"id":11},"12":{"loc":{"start":{"line":12,"column":36},"end":{"line":57,"column":10}},"id":12},"13":{"loc":{"start":{"line":16,"column":16},"end":{"line":16,"column":52}},"id":13},"14":{"loc":{"start":{"line":18,"column":20},"end":{"line":18,"column":52}},"id":14},"15":{"loc":{"start":{"line":20,"column":24},"end":{"line":20,"column":51}},"id":15},"16":{"loc":{"start":{"line":21,"column":28},"end":{"line":21,"column":66}},"id":16},"17":{"loc":{"start":{"line":21,"column":46},"end":{"line":21,"column":66}},"id":17},"18":{"loc":{"start":{"line":22,"column":28},"end":{"line":22,"column":48}},"id":18},"19":{"loc":{"start":{"line":29,"column":12},"end":{"line":55,"column":14}},"id":19},"20":{"loc":{"start":{"line":29,"column":19},"end":{"line":55,"column":13}},"id":20},"21":{"loc":{"start":{"line":30,"column":16},"end":{"line":54,"column":18}},"id":21},"22":{"loc":{"start":{"line":30,"column":27},"end":{"line":30,"column":40}},"id":22},"23":{"loc":{"start":{"line":32,"column":25},"end":{"line":32,"column":65}},"id":23},"24":{"loc":{"start":{"line":33,"column":24},"end":{"line":33,"column":34}},"id":24},"25":{"loc":{"start":{"line":34,"column":20},"end":{"line":34,"column":56}},"id":25},"26":{"loc":{"start":{"line":35,"column":20},"end":{"line":54,"column":16}},"id":26},"27":{"loc":{"start":{"line":35,"column":27},"end":{"line":53,"column":21}},"id":27},"28":{"loc":{"start":{"line":36,"column":24},"end":{"line":52,"column":26}},"id":28},"29":{"loc":{"start":{"line":36,"column":35},"end":{"line":36,"column":48}},"id":29},"30":{"loc":{"start":{"line":38,"column":33},"end":{"line":38,"column":65}},"id":30},"31":{"loc":{"start":{"line":39,"column":32},"end":{"line":39,"column":42}},"id":31},"32":{"loc":{"start":{"line":40,"column":28},"end":{"line":40,"column":60}},"id":32},"33":{"loc":{"start":{"line":41,"column":28},"end":{"line":51,"column":30}},"id":33},"34":{"loc":{"start":{"line":41,"column":35},"end":{"line":51,"column":29}},"id":34},"35":{"loc":{"start":{"line":43,"column":36},"end":{"line":45,"column":34}},"id":35},"36":{"loc":{"start":{"line":42,"column":43},"end":{"line":42,"column":52}},"id":36},"37":{"loc":{"start":{"line":44,"column":36},"end":{"line":44,"column":57}},"id":37},"38":{"loc":{"start":{"line":47,"column":36},"end":{"line":49,"column":45}},"id":38},"39":{"loc":{"start":{"line":48,"column":40},"end":{"line":48,"column":51}},"id":39},"40":{"loc":{"start":{"line":49,"column":40},"end":{"line":49,"column":44}},"id":40},"41":{"loc":{"start":{"line":60,"column":12},"end":{"line":70,"column":14}},"id":41},"42":{"loc":{"start":{"line":60,"column":40},"end":{"line":70,"column":13}},"id":42},"43":{"loc":{"start":{"line":62,"column":20},"end":{"line":68,"column":18}},"id":43},"44":{"loc":{"start":{"line":63,"column":20},"end":{"line":67,"column":22}},"id":44},"45":{"loc":{"start":{"line":63,"column":27},"end":{"line":67,"column":21}},"id":45},"46":{"loc":{"start":{"line":73,"column":8},"end":{"line":101,"column":11}},"id":46},"47":{"loc":{"start":{"line":73,"column":15},"end":{"line":101,"column":10}},"id":47},"48":{"loc":{"start":{"line":73,"column":22},"end":{"line":73,"column":48}},"id":48},"49":{"loc":{"start":{"line":74,"column":12},"end":{"line":74,"column":54}},"id":49},"50":{"loc":{"start":{"line":74,"column":31},"end":{"line":74,"column":53}},"id":50},"51":{"loc":{"start":{"line":76,"column":16},"end":{"line":78,"column":47}},"id":51},"52":{"loc":{"start":{"line":77,"column":20},"end":{"line":77,"column":40}},"id":52},"53":{"loc":{"start":{"line":78,"column":20},"end":{"line":78,"column":46}},"id":55},"54":{"loc":{"start":{"line":76,"column":34},"end":{"line":76,"column":65}},"id":54},"55":{"loc":{"start":{"line":78,"column":20},"end":{"line":78,"column":46}},"id":55},"56":{"loc":{"start":{"line":80,"column":21},"end":{"line":80,"column":66}},"id":56},"57":{"loc":{"start":{"line":81,"column":20},"end":{"line":81,"column":86}},"id":57},"58":{"loc":{"start":{"line":83,"column":16},"end":{"line":97,"column":16}},"id":58},"59":{"loc":{"start":{"line":83,"column":16},"end":{"line":96,"column":18}},"id":59},"60":{"loc":{"start":{"line":84,"column":20},"end":{"line":86,"column":35}},"id":60},"61":{"loc":{"start":{"line":85,"column":24},"end":{"line":85,"column":58}},"id":61},"62":{"loc":{"start":{"line":86,"column":24},"end":{"line":86,"column":34}},"id":62},"63":{"loc":{"start":{"line":87,"column":20},"end":{"line":87,"column":56}},"id":63},"64":{"loc":{"start":{"line":87,"column":29},"end":{"line":87,"column":55}},"id":64},"65":{"loc":{"start":{"line":89,"column":24},"end":{"line":89,"column":78}},"id":65},"66":{"loc":{"start":{"line":89,"column":40},"end":{"line":89,"column":78}},"id":66},"67":{"loc":{"start":{"line":90,"column":24},"end":{"line":90,"column":43}},"id":67},"68":{"loc":{"start":{"line":91,"column":20},"end":{"line":91,"column":58}},"id":68},"69":{"loc":{"start":{"line":91,"column":31},"end":{"line":91,"column":57}},"id":69},"70":{"loc":{"start":{"line":92,"column":20},"end":{"line":92,"column":50}},"id":70},"71":{"loc":{"start":{"line":92,"column":31},"end":{"line":92,"column":49}},"id":71},"72":{"loc":{"start":{"line":93,"column":20},"end":{"line":93,"column":82}},"id":72},"73":{"loc":{"start":{"line":93,"column":58},"end":{"line":93,"column":81}},"id":73},"74":{"loc":{"start":{"line":94,"column":20},"end":{"line":94,"column":78}},"id":74},"75":{"loc":{"start":{"line":94,"column":54},"end":{"line":94,"column":77}},"id":75},"76":{"loc":{"start":{"line":95,"column":20},"end":{"line":95,"column":49}},"id":76},"77":{"loc":{"start":{"line":97,"column":16},"end":{"line":97,"column":54}},"id":77},"78":{"loc":{"start":{"line":100,"column":12},"end":{"line":100,"column":28}},"id":78},"79":{"loc":{"start":{"line":106,"column":0},"end":{"line":106,"column":34}},"id":79},"80":{"loc":{"start":{"line":109,"column":8},"end":{"line":109,"column":26}},"id":80},"81":{"loc":{"start":{"line":110,"column":8},"end":{"line":110,"column":25}},"id":81},"82":{"loc":{"start":{"line":111,"column":10},"end":{"line":111,"column":33}},"id":82},"83":{"loc":{"start":{"line":112,"column":8},"end":{"line":112,"column":25}},"id":83},"84":{"loc":{"start":{"line":114,"column":8},"end":{"line":114,"column":39}},"id":84},"85":{"loc":{"start":{"line":114,"column":20},"end":{"line":114,"column":38}},"id":85},"86":{"loc":{"start":{"line":115,"column":8},"end":{"line":115,"column":23}},"id":86},"87":{"loc":{"start":{"line":116,"column":15},"end":{"line":116,"column":31}},"id":87},"88":{"loc":{"start":{"line":117,"column":12},"end":{"line":117,"column":46}},"id":88},"89":{"loc":{"start":{"line":117,"column":12},"end":{"line":117,"column":45}},"id":89},"90":{"loc":{"start":{"line":117,"column":23},"end":{"line":117,"column":44}},"id":90},"91":{"loc":{"start":{"line":117,"column":29},"end":{"line":117,"column":44}},"id":91},"92":{"loc":{"start":{"line":118,"column":12},"end":{"line":118,"column":26}},"id":92},"93":{"loc":{"start":{"line":118,"column":12},"end":{"line":118,"column":25}},"id":93},"94":{"loc":{"start":{"line":120,"column":8},"end":{"line":120,"column":21}},"id":94},"95":{"loc":{"start":{"line":125,"column":8},"end":{"line":125,"column":50}},"id":95},"96":{"loc":{"start":{"line":125,"column":8},"end":{"line":125,"column":28}},"id":96},"97":{"loc":{"start":{"line":125,"column":32},"end":{"line":125,"column":50}},"id":97},"98":{"loc":{"start":{"line":126,"column":8},"end":{"line":126,"column":37}},"id":98},"99":{"loc":{"start":{"line":126,"column":15},"end":{"line":126,"column":36}},"id":99},"100":{"loc":{"start":{"line":127,"column":15},"end":{"line":127,"column":36}},"id":100},"101":{"loc":{"start":{"line":128,"column":8},"end":{"line":133,"column":10}},"id":101},"102":{"loc":{"start":{"line":128,"column":15},"end":{"line":133,"column":9}},"id":102},"103":{"loc":{"start":{"line":128,"column":15},"end":{"line":131,"column":9}},"id":103},"104":{"loc":{"start":{"line":129,"column":12},"end":{"line":129,"column":42}},"id":104},"105":{"loc":{"start":{"line":130,"column":12},"end":{"line":130,"column":45}},"id":105},"106":{"loc":{"start":{"line":131,"column":13},"end":{"line":133,"column":9}},"id":106},"107":{"loc":{"start":{"line":132,"column":12},"end":{"line":132,"column":30}},"id":107},"108":{"loc":{"start":{"line":135,"column":8},"end":{"line":135,"column":37}},"id":108},"109":{"loc":{"start":{"line":135,"column":15},"end":{"line":135,"column":36}},"id":109},"110":{"loc":{"start":{"line":140,"column":8},"end":{"line":140,"column":30}},"id":110},"111":{"loc":{"start":{"line":141,"column":8},"end":{"line":141,"column":48}},"id":111},"112":{"loc":{"start":{"line":141,"column":15},"end":{"line":141,"column":47}},"id":112},"113":{"loc":{"start":{"line":141,"column":15},"end":{"line":141,"column":41}},"id":113},"114":{"loc":{"start":{"line":143,"column":8},"end":{"line":146,"column":10}},"id":114},"115":{"loc":{"start":{"line":143,"column":15},"end":{"line":146,"column":9}},"id":115},"116":{"loc":{"start":{"line":144,"column":12},"end":{"line":144,"column":33}},"id":116},"117":{"loc":{"start":{"line":145,"column":12},"end":{"line":145,"column":50}},"id":117},"118":{"loc":{"start":{"line":145,"column":12},"end":{"line":145,"column":44}},"id":118},"119":{"loc":{"start":{"line":145,"column":28},"end":{"line":145,"column":43}},"id":119},"120":{"loc":{"start":{"line":151,"column":4},"end":{"line":151,"column":39}},"id":120},"121":{"loc":{"start":{"line":151,"column":11},"end":{"line":151,"column":38}},"id":121}}}},"/Users/kris/q-io/http-cookie.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":4},"4":{"index":4,"count":4},"5":{"index":5,"count":4},"6":{"index":6,"count":4},"7":{"index":7,"count":4},"8":{"index":8,"count":4},"9":{"index":9,"count":4},"10":{"index":10,"count":4},"11":{"index":11,"count":4},"12":{"index":12,"count":4},"13":{"index":13,"count":4},"14":{"index":14,"count":4},"15":{"index":15,"count":4},"16":{"index":16,"count":4},"17":{"index":17,"count":4},"18":{"index":18,"count":8},"19":{"index":19,"count":8},"20":{"index":20,"count":4},"21":{"index":21,"count":4},"23":{"index":23,"count":4},"25":{"index":25,"count":4},"29":{"index":29,"count":4},"34":{"index":34,"count":4},"36":{"index":36,"count":4},"38":{"index":38,"count":4},"39":{"index":39,"count":1},"40":{"index":40,"count":2},"41":{"index":41,"count":2},"42":{"index":42,"count":2},"43":{"index":43,"count":2},"44":{"index":44,"count":2},"56":{"index":56,"count":2}},"blocks":{"0":{"index":0,"count":4},"1":{"index":1,"count":4},"2":{"index":2,"count":8},"9":{"index":9,"count":2},"10":{"index":10,"count":2}},"hash":"add1cd67243c5d988b19e141c38f2fd9","instrumentor":{"blockCounter":16,"nodeCounter":57,"source":"/**\n * Provides utilities for reading and writing HTTP cookies.\n * @module\n */\n\n/*whatsupdoc*/\n\nvar QS = require(\"qs\");\n\n/**\n * @param {String} cookie\n * @returns {Object}\n */\nexports.parse = function (cookie, date) {\n    date = date || new Date();\n    var parsed = {};\n    var terms = cookie.split(/[;,]/g);\n    var keyValue = terms.shift().split(\"=\");\n    parsed.key = keyValue[0];\n    parsed.value = keyValue[1];\n    terms.forEach(function (term) {\n        var parts = term.split(\"=\").map(function (part) {\n            return part.trim();\n        });\n        var key = parts[0], value = parts[1];\n        if (/^domain$/i.test(key)) {\n            parsed.domain = value;\n        } else if (/^path$/i.test(key)) {\n            parsed.path = value;\n        } else if (/^expires$/i.test(key)) {\n            parsed.expires = new Date(\n                +new Date() + // actual now\n                (new Date(value) - date) // server offset\n            );\n        } else if (/^max-age$/i.test(key)) {\n            parsed.expires = new Date(\n                new Date().getTime() +\n                (value * 1000)\n            );\n        } else if (/^secure$/i.test(key)) {\n            parsed.secure = true;\n        } else if (/^httponly$/i.test(key)) {\n            parsed.httpOnly = true;\n        }\n    });\n    return parsed;\n};\n\n/**\n * @param {String} key\n * @param {String} value\n * @param {Object} options (optional)\n * @returns {String} a cookie string\n */\nexports.stringify = function (key, value, options) {\n    var cookie = (\n        encodeURIComponent(key) + \"=\" +\n        encodeURIComponent(value)\n    );\n    if (options) {\n        if (options.domain)\n            cookie += \"; Domain=\" + encodeURIComponent(options.domain);\n        if (options.path)\n            cookie += \"; Path=\" + encodeURIComponent(options.path);\n        if (options.expires)\n            cookie += \"; Expires=\" + options.expires.toGMTString();\n        if (options.secure)\n            cookie += \"; Secure\";\n        if (options.httpOnly)\n            cookie += \"; HttpOnly\";\n    }\n    return cookie;\n};","nodes":{"0":{"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":23}},"id":0},"1":{"loc":{"start":{"line":8,"column":9},"end":{"line":8,"column":22}},"id":1},"2":{"loc":{"start":{"line":14,"column":0},"end":{"line":47,"column":2}},"id":2},"3":{"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":30}},"id":3},"4":{"loc":{"start":{"line":15,"column":11},"end":{"line":15,"column":29}},"id":4},"5":{"loc":{"start":{"line":16,"column":4},"end":{"line":16,"column":20}},"id":5},"6":{"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":38}},"id":6},"7":{"loc":{"start":{"line":17,"column":16},"end":{"line":17,"column":37}},"id":7},"8":{"loc":{"start":{"line":18,"column":4},"end":{"line":18,"column":44}},"id":8},"9":{"loc":{"start":{"line":18,"column":19},"end":{"line":18,"column":43}},"id":9},"10":{"loc":{"start":{"line":18,"column":30},"end":{"line":18,"column":32}},"id":10},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":29}},"id":11},"12":{"loc":{"start":{"line":20,"column":4},"end":{"line":20,"column":31}},"id":12},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":45,"column":7}},"id":13},"14":{"loc":{"start":{"line":21,"column":4},"end":{"line":45,"column":6}},"id":14},"15":{"loc":{"start":{"line":22,"column":8},"end":{"line":24,"column":11}},"id":15},"16":{"loc":{"start":{"line":22,"column":20},"end":{"line":24,"column":10}},"id":16},"17":{"loc":{"start":{"line":22,"column":30},"end":{"line":22,"column":35}},"id":17},"18":{"loc":{"start":{"line":23,"column":12},"end":{"line":23,"column":31}},"id":18},"19":{"loc":{"start":{"line":23,"column":19},"end":{"line":23,"column":30}},"id":19},"20":{"loc":{"start":{"line":25,"column":8},"end":{"line":25,"column":45}},"id":20},"21":{"loc":{"start":{"line":26,"column":12},"end":{"line":26,"column":33}},"id":21},"22":{"loc":{"start":{"line":27,"column":12},"end":{"line":27,"column":34}},"id":22},"23":{"loc":{"start":{"line":28,"column":19},"end":{"line":28,"column":38}},"id":23},"24":{"loc":{"start":{"line":29,"column":12},"end":{"line":29,"column":32}},"id":24},"25":{"loc":{"start":{"line":30,"column":19},"end":{"line":30,"column":41}},"id":25},"26":{"loc":{"start":{"line":31,"column":12},"end":{"line":34,"column":14}},"id":26},"27":{"loc":{"start":{"line":32,"column":16},"end":{"line":33,"column":40}},"id":27},"28":{"loc":{"start":{"line":33,"column":16},"end":{"line":33,"column":40}},"id":28},"29":{"loc":{"start":{"line":35,"column":19},"end":{"line":35,"column":41}},"id":29},"30":{"loc":{"start":{"line":36,"column":12},"end":{"line":39,"column":14}},"id":30},"31":{"loc":{"start":{"line":37,"column":16},"end":{"line":38,"column":30}},"id":31},"32":{"loc":{"start":{"line":37,"column":16},"end":{"line":37,"column":36}},"id":32},"33":{"loc":{"start":{"line":38,"column":16},"end":{"line":38,"column":30}},"id":33},"34":{"loc":{"start":{"line":40,"column":19},"end":{"line":40,"column":40}},"id":34},"35":{"loc":{"start":{"line":41,"column":12},"end":{"line":41,"column":33}},"id":35},"36":{"loc":{"start":{"line":42,"column":19},"end":{"line":42,"column":42}},"id":36},"37":{"loc":{"start":{"line":43,"column":12},"end":{"line":43,"column":35}},"id":37},"38":{"loc":{"start":{"line":46,"column":4},"end":{"line":46,"column":18}},"id":38},"39":{"loc":{"start":{"line":55,"column":0},"end":{"line":73,"column":2}},"id":39},"40":{"loc":{"start":{"line":56,"column":4},"end":{"line":59,"column":6}},"id":40},"41":{"loc":{"start":{"line":56,"column":17},"end":{"line":59,"column":5}},"id":41},"42":{"loc":{"start":{"line":57,"column":8},"end":{"line":57,"column":37}},"id":42},"43":{"loc":{"start":{"line":57,"column":8},"end":{"line":57,"column":31}},"id":43},"44":{"loc":{"start":{"line":58,"column":8},"end":{"line":58,"column":33}},"id":44},"45":{"loc":{"start":{"line":62,"column":12},"end":{"line":62,"column":71}},"id":45},"46":{"loc":{"start":{"line":62,"column":22},"end":{"line":62,"column":70}},"id":46},"47":{"loc":{"start":{"line":62,"column":36},"end":{"line":62,"column":70}},"id":47},"48":{"loc":{"start":{"line":64,"column":12},"end":{"line":64,"column":67}},"id":48},"49":{"loc":{"start":{"line":64,"column":22},"end":{"line":64,"column":66}},"id":49},"50":{"loc":{"start":{"line":64,"column":34},"end":{"line":64,"column":66}},"id":50},"51":{"loc":{"start":{"line":66,"column":12},"end":{"line":66,"column":67}},"id":51},"52":{"loc":{"start":{"line":66,"column":22},"end":{"line":66,"column":66}},"id":52},"53":{"loc":{"start":{"line":66,"column":37},"end":{"line":66,"column":66}},"id":53},"54":{"loc":{"start":{"line":68,"column":12},"end":{"line":68,"column":33}},"id":54},"55":{"loc":{"start":{"line":70,"column":12},"end":{"line":70,"column":35}},"id":55},"56":{"loc":{"start":{"line":72,"column":4},"end":{"line":72,"column":18}},"id":56}}}},"/Users/kris/q-io/spec/http-apps/directory-list-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"37":{"index":37,"count":1},"38":{"index":38,"count":1},"39":{"index":39,"count":1},"40":{"index":40,"count":1},"41":{"index":41,"count":1},"42":{"index":42,"count":1},"43":{"index":43,"count":1},"44":{"index":44,"count":1},"45":{"index":45,"count":1},"46":{"index":46,"count":1},"47":{"index":47,"count":1},"48":{"index":48,"count":1},"49":{"index":49,"count":1},"50":{"index":50,"count":1},"51":{"index":51,"count":1},"52":{"index":52,"count":1},"53":{"index":53,"count":1},"54":{"index":54,"count":1},"55":{"index":55,"count":1},"56":{"index":56,"count":1},"57":{"index":57,"count":1},"58":{"index":58,"count":1},"59":{"index":59,"count":1},"60":{"index":60,"count":1},"61":{"index":61,"count":1},"62":{"index":62,"count":1},"63":{"index":63,"count":1},"64":{"index":64,"count":1},"65":{"index":65,"count":1},"66":{"index":66,"count":1},"67":{"index":67,"count":1},"68":{"index":68,"count":1},"69":{"index":69,"count":1},"70":{"index":70,"count":1},"71":{"index":71,"count":1},"72":{"index":72,"count":1},"73":{"index":73,"count":1},"74":{"index":74,"count":1},"75":{"index":75,"count":1},"76":{"index":76,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1}},"hash":"773505ab280b6af9bda9bae61302d6a8","instrumentor":{"blockCounter":9,"nodeCounter":77,"source":"require(\"../lib/jasmine-promise\");\nvar Http = require(\"../../http\");\nvar Apps = require(\"../../http-apps\");\nvar FS = require(\"../../fs\");\n\ndescribe(\"directory lists\", function () {\n\n    it(\"should be fine in plain text\", function () {\n\n        var fixture = FS.join(module.directory || __dirname, \"fixtures\");\n\n        var app = new Apps.Chain()\n        .use(Apps.Cap)\n        .use(Apps.ListDirectories)\n        .use(function () {\n            return Apps.FileTree(fixture);\n        })\n        .end()\n\n        return Http.Server(app)\n        .listen(0)\n        .then(function (server) {\n            var port = server.address().port;\n            return Http.read({\n                url: \"http://127.0.0.1:\" + port + \"/\",\n                headers: {\n                    accept: \"text/plain\"\n                },\n                charset: 'utf-8'\n            })\n            .then(function (content) {\n                expect(content).toEqual(\"1234.txt\\n5678.txt\\n9012/\\n\");\n            })\n            .finally(server.stop);\n        });\n\n    });\n\n    it(\"should be fine in html\", function () {\n\n        var fixture = FS.join(module.directory || __dirname, \"fixtures\");\n\n        var app = new Apps.Chain()\n        .use(Apps.Cap)\n        .use(Apps.HandleHtmlFragmentResponses)\n        .use(Apps.ListDirectories)\n        .use(function () {\n            return Apps.FileTree(fixture);\n        })\n        .end()\n\n        return Http.Server(app)\n        .listen(0)\n        .then(function (server) {\n            var port = server.address().port;\n            return Http.read({\n                url: \"http://127.0.0.1:\" + port + \"/\",\n                headers: {\n                    accept: \"text/html\"\n                },\n                charset: 'utf-8'\n            })\n            .then(function (content) {\n                expect(content).toEqual(\n                    \"<!doctype html>\\n\" +\n                    \"<html>\\n\" +\n                    \"    <head>\\n\" +\n                    \"        <title>Directory Index</title>\\n\" +\n                    \"    </head>\\n\" +\n                    \"    <body>\\n\" +\n                    \"        <ul class=\\\"directory-index\\\">\\n\" +\n                    \"            <li class=\\\"entry file\\\"><a href=\\\"1234.txt\\\">1234.txt</a></li>\\n\" +\n                    \"            <li class=\\\"entry file\\\"><a href=\\\"5678.txt\\\">5678.txt</a></li>\\n\" +\n                    \"            <li class=\\\"entry directory\\\"><a href=\\\"9012/\\\">9012/</a></li>\\n\" +\n                    \"        </ul>\\n\" +\n                    \"    </body>\\n\" +\n                    \"</html>\\n\"\n                );\n            })\n            .finally(server.stop);\n        });\n\n    });\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":34}},"id":0},"1":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":33}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":33}},"id":2},"3":{"loc":{"start":{"line":2,"column":11},"end":{"line":2,"column":32}},"id":3},"4":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":38}},"id":4},"5":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":37}},"id":5},"6":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":29}},"id":6},"7":{"loc":{"start":{"line":4,"column":9},"end":{"line":4,"column":28}},"id":7},"8":{"loc":{"start":{"line":6,"column":0},"end":{"line":84,"column":3}},"id":8},"9":{"loc":{"start":{"line":6,"column":0},"end":{"line":84,"column":2}},"id":9},"10":{"loc":{"start":{"line":8,"column":4},"end":{"line":37,"column":7}},"id":10},"11":{"loc":{"start":{"line":8,"column":4},"end":{"line":37,"column":6}},"id":11},"12":{"loc":{"start":{"line":10,"column":8},"end":{"line":10,"column":73}},"id":12},"13":{"loc":{"start":{"line":10,"column":22},"end":{"line":10,"column":72}},"id":13},"14":{"loc":{"start":{"line":10,"column":30},"end":{"line":10,"column":59}},"id":14},"15":{"loc":{"start":{"line":12,"column":8},"end":{"line":20,"column":8}},"id":15},"16":{"loc":{"start":{"line":12,"column":18},"end":{"line":18,"column":14}},"id":16},"17":{"loc":{"start":{"line":15,"column":12},"end":{"line":17,"column":10}},"id":17},"18":{"loc":{"start":{"line":14,"column":12},"end":{"line":14,"column":34}},"id":18},"19":{"loc":{"start":{"line":13,"column":12},"end":{"line":13,"column":22}},"id":19},"20":{"loc":{"start":{"line":16,"column":12},"end":{"line":16,"column":42}},"id":20},"21":{"loc":{"start":{"line":16,"column":19},"end":{"line":16,"column":41}},"id":21},"22":{"loc":{"start":{"line":20,"column":8},"end":{"line":35,"column":11}},"id":22},"23":{"loc":{"start":{"line":20,"column":15},"end":{"line":35,"column":10}},"id":23},"24":{"loc":{"start":{"line":21,"column":15},"end":{"line":21,"column":18}},"id":24},"25":{"loc":{"start":{"line":20,"column":26},"end":{"line":20,"column":31}},"id":25},"26":{"loc":{"start":{"line":23,"column":12},"end":{"line":23,"column":45}},"id":26},"27":{"loc":{"start":{"line":23,"column":37},"end":{"line":23,"column":39}},"id":27},"28":{"loc":{"start":{"line":24,"column":12},"end":{"line":34,"column":34}},"id":28},"29":{"loc":{"start":{"line":24,"column":19},"end":{"line":34,"column":33}},"id":29},"30":{"loc":{"start":{"line":31,"column":17},"end":{"line":33,"column":14}},"id":30},"31":{"loc":{"start":{"line":24,"column":28},"end":{"line":30,"column":14}},"id":31},"32":{"loc":{"start":{"line":25,"column":21},"end":{"line":25,"column":53}},"id":32},"33":{"loc":{"start":{"line":25,"column":21},"end":{"line":25,"column":47}},"id":33},"34":{"loc":{"start":{"line":32,"column":16},"end":{"line":32,"column":71}},"id":34},"35":{"loc":{"start":{"line":32,"column":16},"end":{"line":32,"column":70}},"id":35},"36":{"loc":{"start":{"line":32,"column":22},"end":{"line":32,"column":31}},"id":36},"37":{"loc":{"start":{"line":39,"column":4},"end":{"line":83,"column":7}},"id":37},"38":{"loc":{"start":{"line":39,"column":4},"end":{"line":83,"column":6}},"id":38},"39":{"loc":{"start":{"line":41,"column":8},"end":{"line":41,"column":73}},"id":39},"40":{"loc":{"start":{"line":41,"column":22},"end":{"line":41,"column":72}},"id":40},"41":{"loc":{"start":{"line":41,"column":30},"end":{"line":41,"column":59}},"id":41},"42":{"loc":{"start":{"line":43,"column":8},"end":{"line":52,"column":8}},"id":42},"43":{"loc":{"start":{"line":43,"column":18},"end":{"line":50,"column":14}},"id":43},"44":{"loc":{"start":{"line":47,"column":12},"end":{"line":49,"column":10}},"id":44},"45":{"loc":{"start":{"line":46,"column":12},"end":{"line":46,"column":34}},"id":45},"46":{"loc":{"start":{"line":45,"column":12},"end":{"line":45,"column":46}},"id":46},"47":{"loc":{"start":{"line":44,"column":12},"end":{"line":44,"column":22}},"id":47},"48":{"loc":{"start":{"line":48,"column":12},"end":{"line":48,"column":42}},"id":48},"49":{"loc":{"start":{"line":48,"column":19},"end":{"line":48,"column":41}},"id":49},"50":{"loc":{"start":{"line":52,"column":8},"end":{"line":81,"column":11}},"id":50},"51":{"loc":{"start":{"line":52,"column":15},"end":{"line":81,"column":10}},"id":51},"52":{"loc":{"start":{"line":53,"column":15},"end":{"line":53,"column":18}},"id":52},"53":{"loc":{"start":{"line":52,"column":26},"end":{"line":52,"column":31}},"id":53},"54":{"loc":{"start":{"line":55,"column":12},"end":{"line":55,"column":45}},"id":54},"55":{"loc":{"start":{"line":55,"column":37},"end":{"line":55,"column":39}},"id":55},"56":{"loc":{"start":{"line":56,"column":12},"end":{"line":80,"column":34}},"id":56},"57":{"loc":{"start":{"line":56,"column":19},"end":{"line":80,"column":33}},"id":57},"58":{"loc":{"start":{"line":63,"column":17},"end":{"line":79,"column":14}},"id":58},"59":{"loc":{"start":{"line":56,"column":28},"end":{"line":62,"column":14}},"id":59},"60":{"loc":{"start":{"line":57,"column":21},"end":{"line":57,"column":53}},"id":60},"61":{"loc":{"start":{"line":57,"column":21},"end":{"line":57,"column":47}},"id":61},"62":{"loc":{"start":{"line":64,"column":16},"end":{"line":78,"column":18}},"id":62},"63":{"loc":{"start":{"line":64,"column":16},"end":{"line":78,"column":17}},"id":63},"64":{"loc":{"start":{"line":64,"column":22},"end":{"line":64,"column":31}},"id":64},"65":{"loc":{"start":{"line":65,"column":20},"end":{"line":77,"column":31}},"id":65},"66":{"loc":{"start":{"line":65,"column":20},"end":{"line":76,"column":35}},"id":66},"67":{"loc":{"start":{"line":65,"column":20},"end":{"line":75,"column":37}},"id":67},"68":{"loc":{"start":{"line":65,"column":20},"end":{"line":74,"column":98}},"id":68},"69":{"loc":{"start":{"line":65,"column":20},"end":{"line":73,"column":99}},"id":69},"70":{"loc":{"start":{"line":65,"column":20},"end":{"line":72,"column":99}},"id":70},"71":{"loc":{"start":{"line":65,"column":20},"end":{"line":71,"column":62}},"id":71},"72":{"loc":{"start":{"line":65,"column":20},"end":{"line":70,"column":34}},"id":72},"73":{"loc":{"start":{"line":65,"column":20},"end":{"line":69,"column":35}},"id":73},"74":{"loc":{"start":{"line":65,"column":20},"end":{"line":68,"column":62}},"id":74},"75":{"loc":{"start":{"line":65,"column":20},"end":{"line":67,"column":34}},"id":75},"76":{"loc":{"start":{"line":65,"column":20},"end":{"line":66,"column":30}},"id":76}}}},"/Users/kris/q-io/spec/http-apps/interpret-range-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":7},"9":{"index":9,"count":7},"10":{"index":10,"count":7},"11":{"index":11,"count":7},"12":{"index":12,"count":7},"13":{"index":13,"count":7},"14":{"index":14,"count":7}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":7},"2":{"index":2,"count":7}},"hash":"ffb2be436f859e596e20e474a4c61500","instrumentor":{"blockCounter":3,"nodeCounter":15,"source":"// http://labs.apache.org/webarch/http/draft-fielding-http/p5-range.html#range.units\n\nvar Apps = require(\"../../http-apps/fs\");\n\nvar size = 10000;\nvar tests = [\n    {\n        description: \"The first 500 bytes (byte offsets 0-499, inclusive)\",\n        input: \"bytes=0-499\",\n        oracle: {begin: 0, end: 500}\n    },\n    {\n        description: \"The second 500 bytes (byte offsets 500-999, inclusive)\",\n        input: \"bytes=500-999\",\n        oracle: {begin: 500, end: 1000}\n    },\n    {\n        description: \"The final 500 bytes (byte offsets 9500-9999, inclusive)\",\n        input: \"bytes=-500\",\n        oracle: {begin: 9500, end: 10000}\n    },\n    {\n        description: \"The final 500 bytes (byte offsets 9500-9999, inclusive)\",\n        input: \"bytes=9500-\",\n        oracle: {begin: 9500, end: 10000}\n    },\n    {\n        description: \"The first and last bytes only (bytes 0 and 9999)\",\n        input: \"bytes=0-0,-1\",\n        oracle: {begin: 0, end: 1}\n    },\n    {\n        description: \"Legal but not canonical specification of the second 500 bytes (byte offsets 500-999, inclusive)\",\n        input: \"bytes=500-600,601-999\",\n        oracle: {begin: 500, end: 1000}\n    },\n    {\n        description: \"Legal but not canonical specification of the second 500 bytes (byte offsets 500-999, inclusive)\",\n        input: \"bytes=500-700,601-999\",\n        oracle: {begin: 500, end: 1000}\n    }\n];\n\ndescribe(\"range interpretation\", function () {\n    tests.forEach(function (test) {\n        it(\"should interpret \" + test.input, function () {\n            expect(Apps.interpretFirstRange(test.input, size)).toEqual(test.oracle);\n        });\n    });\n});","nodes":{"0":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":41}},"id":0},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":40}},"id":1},"2":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":17}},"id":2},"3":{"loc":{"start":{"line":6,"column":0},"end":{"line":42,"column":2}},"id":3},"4":{"loc":{"start":{"line":44,"column":0},"end":{"line":50,"column":3}},"id":4},"5":{"loc":{"start":{"line":44,"column":0},"end":{"line":50,"column":2}},"id":5},"6":{"loc":{"start":{"line":45,"column":4},"end":{"line":49,"column":7}},"id":6},"7":{"loc":{"start":{"line":45,"column":4},"end":{"line":49,"column":6}},"id":7},"8":{"loc":{"start":{"line":46,"column":8},"end":{"line":48,"column":11}},"id":8},"9":{"loc":{"start":{"line":46,"column":8},"end":{"line":48,"column":10}},"id":9},"10":{"loc":{"start":{"line":46,"column":11},"end":{"line":46,"column":43}},"id":10},"11":{"loc":{"start":{"line":47,"column":12},"end":{"line":47,"column":84}},"id":11},"12":{"loc":{"start":{"line":47,"column":12},"end":{"line":47,"column":83}},"id":12},"13":{"loc":{"start":{"line":47,"column":18},"end":{"line":47,"column":62}},"id":13},"14":{"loc":{"start":{"line":47,"column":19},"end":{"line":47,"column":61}},"id":14}}}},"/Users/kris/q-io/spec/http-apps/partial-range-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"37":{"index":37,"count":1},"38":{"index":38,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1}},"hash":"a2f0a7b4060e64887b0271376c3dfcba","instrumentor":{"blockCounter":6,"nodeCounter":39,"source":"require(\"../lib/jasmine-promise\");\nvar Http = require(\"../../http\");\nvar Apps = require(\"../../http-apps\");\nvar FS = require(\"../../fs\");\n\ndescribe(\"http client and server apps\", function () {\n\n    it(\"should read a partial range\", function () {\n\n        var fixture = FS.join(module.directory || __dirname, \"fixtures\", \"1234.txt\");\n\n        var app = new Apps.Chain()\n        .use(Apps.Cap)\n        .use(function () {\n            return Apps.File(fixture);\n        })\n        .end()\n\n        return Http.Server(app)\n        .listen(0)\n        .then(function (server) {\n            var port = server.node.address().port;\n            return Http.read({\n                \"url\": \"http://127.0.0.1:\" + port + \"/\",\n                \"headers\": {\n                    \"range\": \"bytes=1-2\"\n                }\n            }, function (response) {\n                return response.status === 206;\n            })\n            .then(function (content) {\n                expect(content.toString('utf-8')).toEqual('23');\n            })\n            .finally(server.stop)\n        })\n    });\n\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":34}},"id":0},"1":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":33}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":33}},"id":2},"3":{"loc":{"start":{"line":2,"column":11},"end":{"line":2,"column":32}},"id":3},"4":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":38}},"id":4},"5":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":37}},"id":5},"6":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":29}},"id":6},"7":{"loc":{"start":{"line":4,"column":9},"end":{"line":4,"column":28}},"id":7},"8":{"loc":{"start":{"line":6,"column":0},"end":{"line":38,"column":3}},"id":8},"9":{"loc":{"start":{"line":6,"column":0},"end":{"line":38,"column":2}},"id":9},"10":{"loc":{"start":{"line":8,"column":4},"end":{"line":36,"column":7}},"id":10},"11":{"loc":{"start":{"line":8,"column":4},"end":{"line":36,"column":6}},"id":11},"12":{"loc":{"start":{"line":10,"column":8},"end":{"line":10,"column":85}},"id":12},"13":{"loc":{"start":{"line":10,"column":22},"end":{"line":10,"column":84}},"id":13},"14":{"loc":{"start":{"line":10,"column":30},"end":{"line":10,"column":59}},"id":14},"15":{"loc":{"start":{"line":12,"column":8},"end":{"line":19,"column":8}},"id":15},"16":{"loc":{"start":{"line":12,"column":18},"end":{"line":17,"column":14}},"id":16},"17":{"loc":{"start":{"line":14,"column":12},"end":{"line":16,"column":10}},"id":17},"18":{"loc":{"start":{"line":13,"column":12},"end":{"line":13,"column":22}},"id":18},"19":{"loc":{"start":{"line":15,"column":12},"end":{"line":15,"column":38}},"id":19},"20":{"loc":{"start":{"line":15,"column":19},"end":{"line":15,"column":37}},"id":20},"21":{"loc":{"start":{"line":19,"column":8},"end":{"line":36,"column":4}},"id":21},"22":{"loc":{"start":{"line":19,"column":15},"end":{"line":35,"column":10}},"id":22},"23":{"loc":{"start":{"line":20,"column":15},"end":{"line":20,"column":18}},"id":23},"24":{"loc":{"start":{"line":19,"column":26},"end":{"line":19,"column":31}},"id":24},"25":{"loc":{"start":{"line":22,"column":12},"end":{"line":22,"column":50}},"id":25},"26":{"loc":{"start":{"line":22,"column":42},"end":{"line":22,"column":44}},"id":26},"27":{"loc":{"start":{"line":23,"column":12},"end":{"line":35,"column":8}},"id":27},"28":{"loc":{"start":{"line":23,"column":19},"end":{"line":34,"column":33}},"id":28},"29":{"loc":{"start":{"line":31,"column":17},"end":{"line":33,"column":14}},"id":29},"30":{"loc":{"start":{"line":23,"column":28},"end":{"line":30,"column":14}},"id":30},"31":{"loc":{"start":{"line":24,"column":23},"end":{"line":24,"column":55}},"id":31},"32":{"loc":{"start":{"line":24,"column":23},"end":{"line":24,"column":49}},"id":32},"33":{"loc":{"start":{"line":29,"column":16},"end":{"line":29,"column":47}},"id":33},"34":{"loc":{"start":{"line":29,"column":23},"end":{"line":29,"column":46}},"id":34},"35":{"loc":{"start":{"line":32,"column":16},"end":{"line":32,"column":64}},"id":35},"36":{"loc":{"start":{"line":32,"column":16},"end":{"line":32,"column":63}},"id":36},"37":{"loc":{"start":{"line":32,"column":22},"end":{"line":32,"column":49}},"id":37},"38":{"loc":{"start":{"line":32,"column":23},"end":{"line":32,"column":48}},"id":38}}}},"/Users/kris/q-io/spec/http-apps/proxy-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"37":{"index":37,"count":1},"38":{"index":38,"count":1},"39":{"index":39,"count":1},"40":{"index":40,"count":1},"41":{"index":41,"count":1},"42":{"index":42,"count":1},"43":{"index":43,"count":1},"44":{"index":44,"count":1},"45":{"index":45,"count":1},"46":{"index":46,"count":1},"47":{"index":47,"count":1},"48":{"index":48,"count":1},"49":{"index":49,"count":1},"50":{"index":50,"count":1},"51":{"index":51,"count":1},"52":{"index":52,"count":1},"53":{"index":53,"count":1},"54":{"index":54,"count":1},"55":{"index":55,"count":1},"56":{"index":56,"count":1},"57":{"index":57,"count":1},"58":{"index":58,"count":1},"59":{"index":59,"count":1},"60":{"index":60,"count":1},"61":{"index":61,"count":1},"62":{"index":62,"count":1},"63":{"index":63,"count":1},"64":{"index":64,"count":1},"65":{"index":65,"count":1},"66":{"index":66,"count":1},"67":{"index":67,"count":1},"68":{"index":68,"count":1},"69":{"index":69,"count":1},"70":{"index":70,"count":1},"71":{"index":71,"count":1},"72":{"index":72,"count":1},"73":{"index":73,"count":1},"74":{"index":74,"count":1},"75":{"index":75,"count":1},"76":{"index":76,"count":1},"77":{"index":77,"count":1},"78":{"index":78,"count":1},"79":{"index":79,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1}},"hash":"60e0c340498b7532496130605a9b5256","instrumentor":{"blockCounter":11,"nodeCounter":80,"source":"require(\"../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar Http = require(\"../../http\");\nvar Apps = require(\"../../http-apps\");\nvar FS = require(\"../../fs\");\n\ndescribe(\"http proxy\", function () {\n\n    it(\"should work\", function () {\n\n        var requestProxy;\n        var responseProxy;\n        var requestActual;\n        var responseActual;\n\n        var app = Apps.Chain()\n        .use(Apps.Trap, function (response) {\n            responseActual = response;\n            return response;\n        })\n        .use(Apps.Tap, function (request) {\n            requestActual = request;\n        })\n        .use(function (next) {\n            return Apps.Branch({\n                \"foo\": Apps.Branch({\n                    \"bar\": new Apps.Chain()\n                        .use(Apps.Cap)\n                        .use(function () {\n                            return Apps.Content([\"Hello, World!\"])\n                        })\n                        .end()\n                })\n            })\n        })\n        .end();\n\n        var server1 = Http.Server(app);\n\n        return Q.when(server1.listen(0))\n        .then(function (server1) {\n            var port = server1.node.address().port;\n\n            var server2 = Http.Server(\n                Apps.Trap(\n                    Apps.Tap(\n                        Apps.ProxyTree(\"http://127.0.0.1:\" + port + \"/foo/\"),\n                        function (request) {\n                            requestProxy = request;\n                        }\n                    ),\n                    function (response) {\n                        responseProxy = response;\n                        return response;\n                    }\n                )\n            );\n\n            return [server1, server2.listen(0)];\n        })\n        .spread(function (server1, server2) {\n            var port = server2.node.address().port;\n            return Http.read({\n                url: \"http://127.0.0.1:\" + port + \"/bar\",\n                charset: \"utf-8\"\n            })\n            .then(function (content) {\n                expect(content).toBe(\"Hello, World!\");\n                expect(requestActual).toBeTruthy();\n                expect(responseActual).toBeTruthy();\n                expect(requestProxy).toBeTruthy();\n                expect(responseProxy).toBeTruthy();\n            })\n            .finally(server1.stop)\n            .finally(server2.stop)\n        })\n\n    });\n\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":34}},"id":0},"1":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":33}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":21}},"id":2},"3":{"loc":{"start":{"line":2,"column":8},"end":{"line":2,"column":20}},"id":3},"4":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":33}},"id":4},"5":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":32}},"id":5},"6":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":38}},"id":6},"7":{"loc":{"start":{"line":4,"column":11},"end":{"line":4,"column":37}},"id":7},"8":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":29}},"id":8},"9":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":28}},"id":9},"10":{"loc":{"start":{"line":7,"column":0},"end":{"line":80,"column":3}},"id":10},"11":{"loc":{"start":{"line":7,"column":0},"end":{"line":80,"column":2}},"id":11},"12":{"loc":{"start":{"line":9,"column":4},"end":{"line":78,"column":7}},"id":12},"13":{"loc":{"start":{"line":9,"column":4},"end":{"line":78,"column":6}},"id":13},"14":{"loc":{"start":{"line":11,"column":8},"end":{"line":11,"column":25}},"id":14},"15":{"loc":{"start":{"line":12,"column":8},"end":{"line":12,"column":26}},"id":15},"16":{"loc":{"start":{"line":13,"column":8},"end":{"line":13,"column":26}},"id":16},"17":{"loc":{"start":{"line":14,"column":8},"end":{"line":14,"column":27}},"id":17},"18":{"loc":{"start":{"line":16,"column":8},"end":{"line":36,"column":15}},"id":18},"19":{"loc":{"start":{"line":16,"column":18},"end":{"line":36,"column":14}},"id":19},"20":{"loc":{"start":{"line":24,"column":12},"end":{"line":35,"column":10}},"id":20},"21":{"loc":{"start":{"line":21,"column":12},"end":{"line":23,"column":10}},"id":21},"22":{"loc":{"start":{"line":17,"column":12},"end":{"line":20,"column":10}},"id":22},"23":{"loc":{"start":{"line":16,"column":28},"end":{"line":16,"column":30}},"id":23},"24":{"loc":{"start":{"line":18,"column":12},"end":{"line":18,"column":38}},"id":24},"25":{"loc":{"start":{"line":19,"column":12},"end":{"line":19,"column":28}},"id":25},"26":{"loc":{"start":{"line":22,"column":12},"end":{"line":22,"column":36}},"id":26},"27":{"loc":{"start":{"line":25,"column":12},"end":{"line":35,"column":8}},"id":27},"28":{"loc":{"start":{"line":25,"column":19},"end":{"line":34,"column":14}},"id":28},"29":{"loc":{"start":{"line":26,"column":23},"end":{"line":33,"column":18}},"id":29},"30":{"loc":{"start":{"line":27,"column":27},"end":{"line":32,"column":30}},"id":30},"31":{"loc":{"start":{"line":29,"column":28},"end":{"line":31,"column":26}},"id":31},"32":{"loc":{"start":{"line":28,"column":28},"end":{"line":28,"column":38}},"id":32},"33":{"loc":{"start":{"line":30,"column":28},"end":{"line":31,"column":24}},"id":33},"34":{"loc":{"start":{"line":30,"column":35},"end":{"line":30,"column":66}},"id":34},"35":{"loc":{"start":{"line":38,"column":8},"end":{"line":38,"column":39}},"id":35},"36":{"loc":{"start":{"line":38,"column":22},"end":{"line":38,"column":38}},"id":36},"37":{"loc":{"start":{"line":40,"column":8},"end":{"line":78,"column":4}},"id":37},"38":{"loc":{"start":{"line":40,"column":15},"end":{"line":76,"column":10}},"id":38},"39":{"loc":{"start":{"line":41,"column":13},"end":{"line":60,"column":10}},"id":39},"40":{"loc":{"start":{"line":40,"column":21},"end":{"line":40,"column":40}},"id":40},"41":{"loc":{"start":{"line":40,"column":22},"end":{"line":40,"column":39}},"id":41},"42":{"loc":{"start":{"line":42,"column":12},"end":{"line":42,"column":51}},"id":42},"43":{"loc":{"start":{"line":42,"column":43},"end":{"line":42,"column":45}},"id":43},"44":{"loc":{"start":{"line":44,"column":12},"end":{"line":57,"column":14}},"id":44},"45":{"loc":{"start":{"line":44,"column":26},"end":{"line":57,"column":13}},"id":45},"46":{"loc":{"start":{"line":45,"column":16},"end":{"line":56,"column":17}},"id":46},"47":{"loc":{"start":{"line":46,"column":20},"end":{"line":51,"column":21}},"id":47},"48":{"loc":{"start":{"line":47,"column":24},"end":{"line":47,"column":76}},"id":48},"49":{"loc":{"start":{"line":47,"column":39},"end":{"line":47,"column":75}},"id":49},"50":{"loc":{"start":{"line":47,"column":39},"end":{"line":47,"column":65}},"id":50},"51":{"loc":{"start":{"line":49,"column":28},"end":{"line":49,"column":51}},"id":51},"52":{"loc":{"start":{"line":53,"column":24},"end":{"line":53,"column":49}},"id":52},"53":{"loc":{"start":{"line":54,"column":24},"end":{"line":54,"column":40}},"id":53},"54":{"loc":{"start":{"line":59,"column":12},"end":{"line":59,"column":48}},"id":54},"55":{"loc":{"start":{"line":59,"column":29},"end":{"line":59,"column":46}},"id":55},"56":{"loc":{"start":{"line":62,"column":12},"end":{"line":62,"column":51}},"id":56},"57":{"loc":{"start":{"line":62,"column":43},"end":{"line":62,"column":45}},"id":57},"58":{"loc":{"start":{"line":63,"column":12},"end":{"line":76,"column":8}},"id":58},"59":{"loc":{"start":{"line":63,"column":19},"end":{"line":75,"column":34}},"id":59},"60":{"loc":{"start":{"line":74,"column":20},"end":{"line":74,"column":34}},"id":60},"61":{"loc":{"start":{"line":67,"column":17},"end":{"line":73,"column":14}},"id":61},"62":{"loc":{"start":{"line":63,"column":28},"end":{"line":66,"column":14}},"id":62},"63":{"loc":{"start":{"line":64,"column":21},"end":{"line":64,"column":56}},"id":63},"64":{"loc":{"start":{"line":64,"column":21},"end":{"line":64,"column":47}},"id":64},"65":{"loc":{"start":{"line":68,"column":16},"end":{"line":68,"column":54}},"id":65},"66":{"loc":{"start":{"line":68,"column":16},"end":{"line":68,"column":53}},"id":66},"67":{"loc":{"start":{"line":68,"column":22},"end":{"line":68,"column":31}},"id":67},"68":{"loc":{"start":{"line":69,"column":16},"end":{"line":69,"column":51}},"id":68},"69":{"loc":{"start":{"line":69,"column":16},"end":{"line":69,"column":50}},"id":69},"70":{"loc":{"start":{"line":69,"column":22},"end":{"line":69,"column":37}},"id":70},"71":{"loc":{"start":{"line":70,"column":16},"end":{"line":70,"column":52}},"id":71},"72":{"loc":{"start":{"line":70,"column":16},"end":{"line":70,"column":51}},"id":72},"73":{"loc":{"start":{"line":70,"column":22},"end":{"line":70,"column":38}},"id":73},"74":{"loc":{"start":{"line":71,"column":16},"end":{"line":71,"column":50}},"id":74},"75":{"loc":{"start":{"line":71,"column":16},"end":{"line":71,"column":49}},"id":75},"76":{"loc":{"start":{"line":71,"column":22},"end":{"line":71,"column":36}},"id":76},"77":{"loc":{"start":{"line":72,"column":16},"end":{"line":72,"column":51}},"id":77},"78":{"loc":{"start":{"line":72,"column":16},"end":{"line":72,"column":50}},"id":78},"79":{"loc":{"start":{"line":72,"column":22},"end":{"line":72,"column":37}},"id":79}}}},"/Users/kris/q-io/spec/http/basic-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"37":{"index":37,"count":1},"38":{"index":38,"count":1},"39":{"index":39,"count":1},"40":{"index":40,"count":1},"41":{"index":41,"count":1},"42":{"index":42,"count":1},"43":{"index":43,"count":1},"44":{"index":44,"count":1},"45":{"index":45,"count":1},"46":{"index":46,"count":1},"47":{"index":47,"count":1},"48":{"index":48,"count":1},"49":{"index":49,"count":1},"50":{"index":50,"count":1},"51":{"index":51,"count":1},"52":{"index":52,"count":1},"53":{"index":53,"count":1},"54":{"index":54,"count":1},"55":{"index":55,"count":1},"56":{"index":56,"count":1},"57":{"index":57,"count":1},"58":{"index":58,"count":1},"59":{"index":59,"count":1},"60":{"index":60,"count":1},"61":{"index":61,"count":1},"62":{"index":62,"count":1},"63":{"index":63,"count":1},"64":{"index":64,"count":1},"65":{"index":65,"count":1},"66":{"index":66,"count":1},"67":{"index":67,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1}},"hash":"0b156f3941f2baa80698b59e4b341a6d","instrumentor":{"blockCounter":13,"nodeCounter":68,"source":"require(\"../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar HTTP = require(\"../../http\");\n\ndescribe(\"http server and client\", function () {\n\n    it(\"should work as both server and client\", function () {\n        var response = {\n            \"status\": 200,\n            \"headers\": {\n                \"content-type\": \"text/plain\"\n            },\n            \"body\": [\n                \"Hello, World!\"\n            ]\n        };\n\n        var server = HTTP.Server(function () {\n            return response;\n        });\n\n        return server.listen(0)\n        .then(function (server) {\n            var port = server.address().port;\n\n            var request = {\n                \"host\": \"localhost\",\n                \"port\": port,\n                \"headers\": {\n                    \"host\": \"localhost\"\n                }\n            };\n\n            return HTTP.request(request)\n            .then(function (response) {\n                expect(Q.isPromise(response.body)).toBe(false);\n                var acc = [];\n                return response.body.read()\n                .then(function (body) {\n                    expect(body.toString(\"utf-8\")).toBe(\"Hello, World!\");\n                });\n            })\n        })\n        .finally(server.stop)\n    });\n\n    it(\"should defer a response\", function () {\n        var response = {\n            \"status\": 200,\n            \"headers\": {\n                \"content-type\": \"text/plain; charset=utf-8\"\n            },\n            \"body\": {\n                \"forEach\": function (write) {\n                    var deferred = Q.defer();\n                    write(\"Hello, World!\");\n                    setTimeout(function () {\n                        deferred.resolve();\n                    }, 100);\n                    return deferred.promise;\n                }\n            }\n        };\n\n        var server = HTTP.Server(function () {\n            return response;\n        });\n\n        return server.listen(0).then(function (server) {\n            var port = server.node.address().port;\n\n            var request = {\n                \"host\": \"localhost\",\n                \"port\": port,\n                \"headers\": {\n                    \"host\": \"localhost\"\n                },\n                \"charset\": \"utf-8\"\n            };\n\n            return HTTP.request(request)\n            .then(function (response) {\n                var acc = [];\n                return response.body.read()\n                .then(function (body) {\n                    expect(body).toBe(\"Hello, World!\");\n                });\n            })\n        })\n        .finally(server.stop)\n    });\n\n\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":34}},"id":0},"1":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":33}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":21}},"id":2},"3":{"loc":{"start":{"line":2,"column":8},"end":{"line":2,"column":20}},"id":3},"4":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":33}},"id":4},"5":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":32}},"id":5},"6":{"loc":{"start":{"line":5,"column":0},"end":{"line":94,"column":3}},"id":6},"7":{"loc":{"start":{"line":5,"column":0},"end":{"line":94,"column":2}},"id":7},"8":{"loc":{"start":{"line":7,"column":4},"end":{"line":45,"column":7}},"id":8},"9":{"loc":{"start":{"line":7,"column":4},"end":{"line":45,"column":6}},"id":9},"10":{"loc":{"start":{"line":8,"column":8},"end":{"line":16,"column":10}},"id":10},"11":{"loc":{"start":{"line":18,"column":8},"end":{"line":20,"column":11}},"id":11},"12":{"loc":{"start":{"line":18,"column":21},"end":{"line":20,"column":10}},"id":12},"13":{"loc":{"start":{"line":19,"column":12},"end":{"line":19,"column":28}},"id":13},"14":{"loc":{"start":{"line":22,"column":8},"end":{"line":45,"column":4}},"id":14},"15":{"loc":{"start":{"line":22,"column":15},"end":{"line":44,"column":29}},"id":15},"16":{"loc":{"start":{"line":23,"column":13},"end":{"line":43,"column":10}},"id":16},"17":{"loc":{"start":{"line":22,"column":28},"end":{"line":22,"column":31}},"id":17},"18":{"loc":{"start":{"line":24,"column":12},"end":{"line":24,"column":45}},"id":18},"19":{"loc":{"start":{"line":24,"column":37},"end":{"line":24,"column":39}},"id":19},"20":{"loc":{"start":{"line":26,"column":12},"end":{"line":32,"column":14}},"id":20},"21":{"loc":{"start":{"line":34,"column":12},"end":{"line":43,"column":8}},"id":21},"22":{"loc":{"start":{"line":34,"column":19},"end":{"line":42,"column":14}},"id":22},"23":{"loc":{"start":{"line":34,"column":31},"end":{"line":34,"column":40}},"id":23},"24":{"loc":{"start":{"line":36,"column":16},"end":{"line":36,"column":63}},"id":24},"25":{"loc":{"start":{"line":36,"column":16},"end":{"line":36,"column":62}},"id":25},"26":{"loc":{"start":{"line":36,"column":22},"end":{"line":36,"column":50}},"id":26},"27":{"loc":{"start":{"line":36,"column":23},"end":{"line":36,"column":49}},"id":27},"28":{"loc":{"start":{"line":37,"column":16},"end":{"line":37,"column":29}},"id":28},"29":{"loc":{"start":{"line":38,"column":16},"end":{"line":41,"column":19}},"id":29},"30":{"loc":{"start":{"line":38,"column":23},"end":{"line":41,"column":18}},"id":30},"31":{"loc":{"start":{"line":38,"column":41},"end":{"line":38,"column":43}},"id":31},"32":{"loc":{"start":{"line":40,"column":20},"end":{"line":40,"column":73}},"id":32},"33":{"loc":{"start":{"line":40,"column":20},"end":{"line":40,"column":72}},"id":33},"34":{"loc":{"start":{"line":40,"column":26},"end":{"line":40,"column":50}},"id":34},"35":{"loc":{"start":{"line":40,"column":27},"end":{"line":40,"column":49}},"id":35},"36":{"loc":{"start":{"line":47,"column":4},"end":{"line":91,"column":7}},"id":36},"37":{"loc":{"start":{"line":47,"column":4},"end":{"line":91,"column":6}},"id":37},"38":{"loc":{"start":{"line":48,"column":8},"end":{"line":63,"column":10}},"id":38},"39":{"loc":{"start":{"line":55,"column":20},"end":{"line":55,"column":45}},"id":39},"40":{"loc":{"start":{"line":55,"column":35},"end":{"line":55,"column":44}},"id":40},"41":{"loc":{"start":{"line":56,"column":20},"end":{"line":56,"column":43}},"id":41},"42":{"loc":{"start":{"line":56,"column":20},"end":{"line":56,"column":42}},"id":42},"43":{"loc":{"start":{"line":57,"column":20},"end":{"line":59,"column":28}},"id":43},"44":{"loc":{"start":{"line":57,"column":20},"end":{"line":59,"column":27}},"id":44},"45":{"loc":{"start":{"line":58,"column":24},"end":{"line":58,"column":43}},"id":45},"46":{"loc":{"start":{"line":58,"column":24},"end":{"line":58,"column":42}},"id":46},"47":{"loc":{"start":{"line":60,"column":20},"end":{"line":60,"column":44}},"id":47},"48":{"loc":{"start":{"line":65,"column":8},"end":{"line":67,"column":11}},"id":48},"49":{"loc":{"start":{"line":65,"column":21},"end":{"line":67,"column":10}},"id":49},"50":{"loc":{"start":{"line":66,"column":12},"end":{"line":66,"column":28}},"id":50},"51":{"loc":{"start":{"line":69,"column":8},"end":{"line":91,"column":4}},"id":51},"52":{"loc":{"start":{"line":69,"column":15},"end":{"line":90,"column":29}},"id":52},"53":{"loc":{"start":{"line":69,"column":36},"end":{"line":89,"column":10}},"id":53},"54":{"loc":{"start":{"line":69,"column":28},"end":{"line":69,"column":31}},"id":54},"55":{"loc":{"start":{"line":70,"column":12},"end":{"line":70,"column":50}},"id":55},"56":{"loc":{"start":{"line":70,"column":42},"end":{"line":70,"column":44}},"id":56},"57":{"loc":{"start":{"line":72,"column":12},"end":{"line":79,"column":14}},"id":57},"58":{"loc":{"start":{"line":81,"column":12},"end":{"line":89,"column":8}},"id":58},"59":{"loc":{"start":{"line":81,"column":19},"end":{"line":88,"column":14}},"id":59},"60":{"loc":{"start":{"line":81,"column":31},"end":{"line":81,"column":40}},"id":60},"61":{"loc":{"start":{"line":83,"column":16},"end":{"line":83,"column":29}},"id":61},"62":{"loc":{"start":{"line":84,"column":16},"end":{"line":87,"column":19}},"id":62},"63":{"loc":{"start":{"line":84,"column":23},"end":{"line":87,"column":18}},"id":63},"64":{"loc":{"start":{"line":84,"column":41},"end":{"line":84,"column":43}},"id":64},"65":{"loc":{"start":{"line":86,"column":20},"end":{"line":86,"column":55}},"id":65},"66":{"loc":{"start":{"line":86,"column":20},"end":{"line":86,"column":54}},"id":66},"67":{"loc":{"start":{"line":86,"column":26},"end":{"line":86,"column":32}},"id":67}}}}}}